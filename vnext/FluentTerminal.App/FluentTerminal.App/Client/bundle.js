(()=>{var Ni=Object.create;var di=Object.defineProperty;var zi=Object.getOwnPropertyDescriptor;var Ki=Object.getOwnPropertyNames;var Vi=Object.getPrototypeOf,Gi=Object.prototype.hasOwnProperty;var Yi=W=>di(W,"__esModule",{value:!0});var Re=(W,z)=>()=>(z||W((z={exports:{}}).exports,z),z.exports);var Xi=(W,z,X)=>{if(z&&typeof z=="object"||typeof z=="function")for(let G of Ki(z))!Gi.call(W,G)&&G!=="default"&&di(W,G,{get:()=>z[G],enumerable:!(X=zi(z,G))||X.enumerable});return W},Te=W=>Xi(Yi(di(W!=null?Ni(Vi(W)):{},"default",W&&W.__esModule&&"default"in W?{get:()=>W.default,enumerable:!0}:{value:W,enumerable:!0})),W);var Li=Re((Dt,pi)=>{(function(W,z){if(typeof Dt=="object"&&typeof pi=="object")pi.exports=z();else if(typeof define=="function"&&define.amd)define([],z);else{var X=z();for(var G in X)(typeof Dt=="object"?Dt:W)[G]=X[G]}})(self,function(){return(()=>{"use strict";var W={4567:function(P,s,v){var h,d=this&&this.__extends||(h=function(i,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])})(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}h(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;var f=v(9042),c=v(6114),y=v(9924),_=v(3656),r=v(844),n=v(5596),u=v(9631),o=function(i){function e(t,a){var l=i.call(this)||this;l._terminal=t,l._renderService=a,l._liveRegionLineCount=0,l._charsToConsume=[],l._charsToAnnounce="",l._accessibilityTreeRoot=document.createElement("div"),l._accessibilityTreeRoot.classList.add("xterm-accessibility"),l._rowContainer=document.createElement("div"),l._rowContainer.setAttribute("role","list"),l._rowContainer.classList.add("xterm-accessibility-tree"),l._rowElements=[];for(var p=0;p<l._terminal.rows;p++)l._rowElements[p]=l._createAccessibilityTreeNode(),l._rowContainer.appendChild(l._rowElements[p]);if(l._topBoundaryFocusListener=function(g){return l._onBoundaryFocus(g,0)},l._bottomBoundaryFocusListener=function(g){return l._onBoundaryFocus(g,1)},l._rowElements[0].addEventListener("focus",l._topBoundaryFocusListener),l._rowElements[l._rowElements.length-1].addEventListener("focus",l._bottomBoundaryFocusListener),l._refreshRowsDimensions(),l._accessibilityTreeRoot.appendChild(l._rowContainer),l._renderRowsDebouncer=new y.TimeBasedDebouncer(l._renderRows.bind(l)),l._refreshRows(),l._liveRegion=document.createElement("div"),l._liveRegion.classList.add("live-region"),l._liveRegion.setAttribute("aria-live","assertive"),l._accessibilityTreeRoot.appendChild(l._liveRegion),!l._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return l._terminal.element.insertAdjacentElement("afterbegin",l._accessibilityTreeRoot),l.register(l._renderRowsDebouncer),l.register(l._terminal.onResize(function(g){return l._onResize(g.rows)})),l.register(l._terminal.onRender(function(g){return l._refreshRows(g.start,g.end)})),l.register(l._terminal.onScroll(function(){return l._refreshRows()})),l.register(l._terminal.onA11yChar(function(g){return l._onChar(g)})),l.register(l._terminal.onLineFeed(function(){return l._onChar(`
`)})),l.register(l._terminal.onA11yTab(function(g){return l._onTab(g)})),l.register(l._terminal.onKey(function(g){return l._onKey(g.key)})),l.register(l._terminal.onBlur(function(){return l._clearLiveRegion()})),l.register(l._renderService.onDimensionsChange(function(){return l._refreshRowsDimensions()})),l._screenDprMonitor=new n.ScreenDprMonitor,l.register(l._screenDprMonitor),l._screenDprMonitor.setListener(function(){return l._refreshRowsDimensions()}),l.register(_.addDisposableDomListener(window,"resize",function(){return l._refreshRowsDimensions()})),l}return d(e,i),e.prototype.dispose=function(){i.prototype.dispose.call(this),u.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(t,a){var l=t.target,p=this._rowElements[a===0?1:this._rowElements.length-2];if(l.getAttribute("aria-posinset")!==(a===0?"1":""+this._terminal.buffer.lines.length)&&t.relatedTarget===p){var g,b;if(a===0?(g=l,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(g=this._rowElements.shift(),b=l,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){var m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else m=this._createAccessibilityTreeNode(),this._rowElements.push(m),this._rowContainer.appendChild(m);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}},e.prototype._onResize=function(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t},e.prototype._onTab=function(t){for(var a=0;a<t;a++)this._onChar(" ")},e.prototype._onChar=function(t){var a=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),c.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){a._accessibilityTreeRoot.appendChild(a._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,c.isMac&&u.removeElementFromParent(this._liveRegion)},e.prototype._onKey=function(t){this._clearLiveRegion(),this._charsToConsume.push(t)},e.prototype._refreshRows=function(t,a){this._renderRowsDebouncer.refresh(t,a,this._terminal.rows)},e.prototype._renderRows=function(t,a){for(var l=this._terminal.buffer,p=l.lines.length.toString(),g=t;g<=a;g++){var b=l.translateBufferLineToString(l.ydisp+g,!0),m=(l.ydisp+g+1).toString(),S=this._rowElements[g];S&&(b.length===0?S.innerText="\xA0":S.textContent=b,S.setAttribute("aria-posinset",m),S.setAttribute("aria-setsize",p))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}},e.prototype._refreshRowDimensions=function(t){t.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(r.Disposable);s.AccessibilityManager=o},3614:(P,s)=>{function v(c){return c.replace(/\r?\n/g,"\r")}function h(c,y){return y?"[200~"+c+"[201~":c}function d(c,y,_){c=h(c=v(c),_.decPrivateModes.bracketedPasteMode),_.triggerDataEvent(c,!0),y.value=""}function f(c,y,_){var r=_.getBoundingClientRect(),n=c.clientX-r.left-10,u=c.clientY-r.top-10;y.style.width="20px",y.style.height="20px",y.style.left=n+"px",y.style.top=u+"px",y.style.zIndex="1000",y.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=v,s.bracketTextForPaste=h,s.copyHandler=function(c,y){c.clipboardData&&c.clipboardData.setData("text/plain",y.selectionText),c.preventDefault()},s.handlePasteEvent=function(c,y,_){c.stopPropagation(),c.clipboardData&&d(c.clipboardData.getData("text/plain"),y,_)},s.paste=d,s.moveTextAreaUnderMouseCursor=f,s.rightClickHandler=function(c,y,_,r,n){f(c,y,_),n&&r.rightClickSelect(c),y.value=r.selectionText,y.select()}},4774:(P,s)=>{var v,h,d,f;function c(_){var r=_.toString(16);return r.length<2?"0"+r:r}function y(_,r){return _<r?(r+.05)/(_+.05):(_+.05)/(r+.05)}Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=void 0,function(_){_.toCss=function(r,n,u,o){return o!==void 0?"#"+c(r)+c(n)+c(u)+c(o):"#"+c(r)+c(n)+c(u)},_.toRgba=function(r,n,u,o){return o===void 0&&(o=255),(r<<24|n<<16|u<<8|o)>>>0}}(v=s.channels||(s.channels={})),(h=s.color||(s.color={})).blend=function(_,r){var n=(255&r.rgba)/255;if(n===1)return{css:r.css,rgba:r.rgba};var u=r.rgba>>24&255,o=r.rgba>>16&255,i=r.rgba>>8&255,e=_.rgba>>24&255,t=_.rgba>>16&255,a=_.rgba>>8&255,l=e+Math.round((u-e)*n),p=t+Math.round((o-t)*n),g=a+Math.round((i-a)*n);return{css:v.toCss(l,p,g),rgba:v.toRgba(l,p,g)}},h.isOpaque=function(_){return(255&_.rgba)==255},h.ensureContrastRatio=function(_,r,n){var u=f.ensureContrastRatio(_.rgba,r.rgba,n);if(u)return f.toColor(u>>24&255,u>>16&255,u>>8&255)},h.opaque=function(_){var r=(255|_.rgba)>>>0,n=f.toChannels(r),u=n[0],o=n[1],i=n[2];return{css:v.toCss(u,o,i),rgba:r}},h.opacity=function(_,r){var n=Math.round(255*r),u=f.toChannels(_.rgba),o=u[0],i=u[1],e=u[2];return{css:v.toCss(o,i,e,n),rgba:v.toRgba(o,i,e,n)}},(s.css||(s.css={})).toColor=function(_){switch(_.length){case 7:return{css:_,rgba:(parseInt(_.slice(1),16)<<8|255)>>>0};case 9:return{css:_,rgba:parseInt(_.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(_){function r(n,u,o){var i=n/255,e=u/255,t=o/255;return .2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))}_.relativeLuminance=function(n){return r(n>>16&255,n>>8&255,255&n)},_.relativeLuminance2=r}(d=s.rgb||(s.rgb={})),function(_){function r(u,o,i){for(var e=u>>24&255,t=u>>16&255,a=u>>8&255,l=o>>24&255,p=o>>16&255,g=o>>8&255,b=y(d.relativeLuminance2(l,g,p),d.relativeLuminance2(e,t,a));b<i&&(l>0||p>0||g>0);)l-=Math.max(0,Math.ceil(.1*l)),p-=Math.max(0,Math.ceil(.1*p)),g-=Math.max(0,Math.ceil(.1*g)),b=y(d.relativeLuminance2(l,g,p),d.relativeLuminance2(e,t,a));return(l<<24|p<<16|g<<8|255)>>>0}function n(u,o,i){for(var e=u>>24&255,t=u>>16&255,a=u>>8&255,l=o>>24&255,p=o>>16&255,g=o>>8&255,b=y(d.relativeLuminance2(l,g,p),d.relativeLuminance2(e,t,a));b<i&&(l<255||p<255||g<255);)l=Math.min(255,l+Math.ceil(.1*(255-l))),p=Math.min(255,p+Math.ceil(.1*(255-p))),g=Math.min(255,g+Math.ceil(.1*(255-g))),b=y(d.relativeLuminance2(l,g,p),d.relativeLuminance2(e,t,a));return(l<<24|p<<16|g<<8|255)>>>0}_.ensureContrastRatio=function(u,o,i){var e=d.relativeLuminance(u>>8),t=d.relativeLuminance(o>>8);if(y(e,t)<i)return t<e?r(u,o,i):n(u,o,i)},_.reduceLuminance=r,_.increaseLuminance=n,_.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},_.toColor=function(u,o,i){return{css:v.toCss(u,o,i),rgba:v.toRgba(u,o,i)}}}(f=s.rgba||(s.rgba={})),s.toPaddedHex=c,s.contrastRatio=y},7239:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;var v=function(){function h(){this._color={},this._rgba={}}return h.prototype.clear=function(){this._color={},this._rgba={}},h.prototype.setCss=function(d,f,c){this._rgba[d]||(this._rgba[d]={}),this._rgba[d][f]=c},h.prototype.getCss=function(d,f){return this._rgba[d]?this._rgba[d][f]:void 0},h.prototype.setColor=function(d,f,c){this._color[d]||(this._color[d]={}),this._color[d][f]=c},h.prototype.getColor=function(d,f){return this._color[d]?this._color[d][f]:void 0},h}();s.ColorContrastCache=v},5680:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorManager=s.DEFAULT_ANSI_COLORS=void 0;var h=v(4774),d=v(7239),f=h.css.toColor("#ffffff"),c=h.css.toColor("#000000"),y=h.css.toColor("#ffffff"),_=h.css.toColor("#000000"),r={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var u=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],o=[0,95,135,175,215,255],i=0;i<216;i++){var e=o[i/36%6|0],t=o[i/6%6|0],a=o[i%6];u.push({css:h.channels.toCss(e,t,a),rgba:h.channels.toRgba(e,t,a)})}for(i=0;i<24;i++){var l=8+10*i;u.push({css:h.channels.toCss(l,l,l),rgba:h.channels.toRgba(l,l,l)})}return u}());var n=function(){function u(o,i){this.allowTransparency=i;var e=o.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");if(!t)throw new Error("Could not get rendering context");this._ctx=t,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new d.ColorContrastCache,this.colors={foreground:f,background:c,cursor:y,cursorAccent:_,selectionTransparent:r,selectionOpaque:h.color.blend(c,r),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return u.prototype.onOptionsChange=function(o){o==="minimumContrastRatio"&&this._contrastCache.clear()},u.prototype.setTheme=function(o){o===void 0&&(o={}),this.colors.foreground=this._parseColor(o.foreground,f),this.colors.background=this._parseColor(o.background,c),this.colors.cursor=this._parseColor(o.cursor,y,!0),this.colors.cursorAccent=this._parseColor(o.cursorAccent,_,!0),this.colors.selectionTransparent=this._parseColor(o.selection,r,!0),this.colors.selectionOpaque=h.color.blend(this.colors.background,this.colors.selectionTransparent),h.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=h.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(o.black,s.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(o.red,s.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(o.green,s.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(o.yellow,s.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(o.blue,s.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(o.magenta,s.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(o.cyan,s.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(o.white,s.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(o.brightBlack,s.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(o.brightRed,s.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(o.brightGreen,s.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(o.brightYellow,s.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(o.brightBlue,s.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(o.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(o.brightCyan,s.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(o.brightWhite,s.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},u.prototype._parseColor=function(o,i,e){if(e===void 0&&(e=this.allowTransparency),o===void 0)return i;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=o,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+o+" is invalid using fallback "+i.css),i;this._ctx.fillRect(0,0,1,1);var t=this._ctx.getImageData(0,0,1,1).data;if(t[3]!==255){if(!e)return console.warn("Color: "+o+" is using transparency, but allowTransparency is false. Using fallback "+i.css+"."),i;var a=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(S){return Number(S)}),l=a[0],p=a[1],g=a[2],b=a[3],m=Math.round(255*b);return{rgba:h.channels.toRgba(l,p,g,m),css:o}}return{css:this._ctx.fillStyle,rgba:h.channels.toRgba(t[0],t[1],t[2],t[3])}},u}();s.ColorManager=n},9631:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeElementFromParent=void 0,s.removeElementFromParent=function(){for(var v,h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];for(var f=0,c=h;f<c.length;f++){var y=c[f];(v=y==null?void 0:y.parentElement)===null||v===void 0||v.removeChild(y)}}},3656:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(v,h,d,f){v.addEventListener(h,d,f);var c=!1;return{dispose:function(){c||(c=!0,v.removeEventListener(h,d,f))}}}},3551:function(P,s,v){var h=this&&this.__decorate||function(r,n,u,o){var i,e=arguments.length,t=e<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(r,n,u,o);else for(var a=r.length-1;a>=0;a--)(i=r[a])&&(t=(e<3?i(t):e>3?i(n,u,t):i(n,u))||t);return e>3&&t&&Object.defineProperty(n,u,t),t},d=this&&this.__param||function(r,n){return function(u,o){n(u,o,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZone=s.Linkifier=void 0;var f=v(8460),c=v(2585),y=function(){function r(n,u,o){this._bufferService=n,this._logService=u,this._unicodeService=o,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),r.prototype.attachToDom=function(n,u){this._element=n,this._mouseZoneManager=u},r.prototype.linkifyRows=function(n,u){var o=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=n,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,n),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(n,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return o._linkifyRows()},r._timeBeforeLatency))},r.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var n=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var u=n.ydisp+this._rowsToLinkify.start;if(!(u>=n.lines.length)){for(var o=n.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,u,o,i,i);e.hasNext();)for(var t=e.next(),a=0;a<this._linkMatchers.length;a++)this._doLinkifyRow(t.range.first,t.content,this._linkMatchers[a]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},r.prototype.registerLinkMatcher=function(n,u,o){if(o===void 0&&(o={}),!u)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:n,handler:u,matchIndex:o.matchIndex,validationCallback:o.validationCallback,hoverTooltipCallback:o.tooltipCallback,hoverLeaveCallback:o.leaveCallback,willLinkActivate:o.willLinkActivate,priority:o.priority||0};return this._addLinkMatcherToList(i),i.id},r.prototype._addLinkMatcherToList=function(n){if(this._linkMatchers.length!==0){for(var u=this._linkMatchers.length-1;u>=0;u--)if(n.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,n);this._linkMatchers.splice(0,0,n)}else this._linkMatchers.push(n)},r.prototype.deregisterLinkMatcher=function(n){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===n)return this._linkMatchers.splice(u,1),!0;return!1},r.prototype._doLinkifyRow=function(n,u,o){for(var i,e=this,t=new RegExp(o.regex.source,(o.regex.flags||"")+"g"),a=-1,l=function(){var g=i[typeof o.matchIndex!="number"?0:o.matchIndex];if(!g)return p._logService.debug("match found without corresponding matchIndex",i,o),"break";if(a=u.indexOf(g,a+1),t.lastIndex=a+g.length,a<0)return"break";var b=p._bufferService.buffer.stringIndexToBufferIndex(n,a);if(b[0]<0)return"break";var m=p._bufferService.buffer.lines.get(b[0]);if(!m)return"break";var S=m.getFg(b[1]),C=S?S>>9&511:void 0;o.validationCallback?o.validationCallback(g,function(k){e._rowsTimeoutId||k&&e._addLink(b[1],b[0]-e._bufferService.buffer.ydisp,g,o,C)}):p._addLink(b[1],b[0]-p._bufferService.buffer.ydisp,g,o,C)},p=this;(i=t.exec(u))!==null&&l()!=="break";);},r.prototype._addLink=function(n,u,o,i,e){var t=this;if(this._mouseZoneManager&&this._element){var a=this._unicodeService.getStringCellWidth(o),l=n%this._bufferService.cols,p=u+Math.floor(n/this._bufferService.cols),g=(l+a)%this._bufferService.cols,b=p+Math.floor((l+a)/this._bufferService.cols);g===0&&(g=this._bufferService.cols,b--),this._mouseZoneManager.add(new _(l+1,p+1,g+1,b+1,function(m){if(i.handler)return i.handler(m,o);var S=window.open();S?(S.opener=null,S.location.href=o):console.warn("Opening link blocked as opener could not be cleared")},function(){t._onShowLinkUnderline.fire(t._createLinkHoverEvent(l,p,g,b,e)),t._element.classList.add("xterm-cursor-pointer")},function(m){t._onLinkTooltip.fire(t._createLinkHoverEvent(l,p,g,b,e)),i.hoverTooltipCallback&&i.hoverTooltipCallback(m,o,{start:{x:l,y:p},end:{x:g,y:b}})},function(){t._onHideLinkUnderline.fire(t._createLinkHoverEvent(l,p,g,b,e)),t._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()},function(m){return!i.willLinkActivate||i.willLinkActivate(m,o)}))}},r.prototype._createLinkHoverEvent=function(n,u,o,i,e){return{x1:n,y1:u,x2:o,y2:i,cols:this._bufferService.cols,fg:e}},r._timeBeforeLatency=200,r=h([d(0,c.IBufferService),d(1,c.ILogService),d(2,c.IUnicodeService)],r)}();s.Linkifier=y;var _=function(r,n,u,o,i,e,t,a,l){this.x1=r,this.y1=n,this.x2=u,this.y2=o,this.clickCallback=i,this.hoverCallback=e,this.tooltipCallback=t,this.leaveCallback=a,this.willLinkActivate=l};s.MouseZone=_},6465:function(P,s,v){var h,d=this&&this.__extends||(h=function(o,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(o,i)},function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=o}h(o,i),o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(o,i,e,t){var a,l=arguments.length,p=l<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,i,e,t);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(p=(l<3?a(p):l>3?a(i,e,p):a(i,e))||p);return l>3&&p&&Object.defineProperty(i,e,p),p},c=this&&this.__param||function(o,i){return function(e,t){i(e,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;var y=v(2585),_=v(8460),r=v(844),n=v(3656),u=function(o){function i(e){var t=o.call(this)||this;return t._bufferService=e,t._linkProviders=[],t._linkCacheDisposables=[],t._isMouseOut=!0,t._activeLine=-1,t._onShowLinkUnderline=t.register(new _.EventEmitter),t._onHideLinkUnderline=t.register(new _.EventEmitter),t.register(r.getDisposeArrayDisposable(t._linkCacheDisposables)),t}return d(i,o),Object.defineProperty(i.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),i.prototype.registerLinkProvider=function(e){var t=this;return this._linkProviders.push(e),{dispose:function(){var a=t._linkProviders.indexOf(e);a!==-1&&t._linkProviders.splice(a,1)}}},i.prototype.attachToDom=function(e,t,a){var l=this;this._element=e,this._mouseService=t,this._renderService=a,this.register(n.addDisposableDomListener(this._element,"mouseleave",function(){l._isMouseOut=!0,l._clearCurrentLink()})),this.register(n.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(n.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},i.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(t){this._isMouseOut=!1;for(var a=e.composedPath(),l=0;l<a.length;l++){var p=a[l];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._onHover(t),this._lastBufferCell=t)}}},i.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},i.prototype._askForLink=function(e,t){var a,l=this;this._activeProviderReplies&&t||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(function(g){g==null||g.forEach(function(b){b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var p=!1;this._linkProviders.forEach(function(g,b){var m;t?((m=l._activeProviderReplies)===null||m===void 0?void 0:m.get(b))&&(p=l._checkLinkProviderResult(b,e,p)):g.provideLinks(e.y,function(S){var C,k;if(!l._isMouseOut){var w=S==null?void 0:S.map(function(x){return{link:x}});(C=l._activeProviderReplies)===null||C===void 0||C.set(b,w),p=l._checkLinkProviderResult(b,e,p),((k=l._activeProviderReplies)===null||k===void 0?void 0:k.size)===l._linkProviders.length&&l._removeIntersectingLinks(e.y,l._activeProviderReplies)}})})},i.prototype._removeIntersectingLinks=function(e,t){for(var a=new Set,l=0;l<t.size;l++){var p=t.get(l);if(p)for(var g=0;g<p.length;g++)for(var b=p[g],m=b.link.range.start.y<e?0:b.link.range.start.x,S=b.link.range.end.y>e?this._bufferService.cols:b.link.range.end.x,C=m;C<=S;C++){if(a.has(C)){p.splice(g--,1);break}a.add(C)}}},i.prototype._checkLinkProviderResult=function(e,t,a){var l,p=this;if(!this._activeProviderReplies)return a;for(var g=this._activeProviderReplies.get(e),b=!1,m=0;m<e;m++)this._activeProviderReplies.has(m)&&!this._activeProviderReplies.get(m)||(b=!0);if(!b&&g){var S=g.find(function(k){return p._linkAtPosition(k.link,t)});S&&(a=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(m=0;m<this._activeProviderReplies.size;m++){var C=(l=this._activeProviderReplies.get(m))===null||l===void 0?void 0:l.find(function(k){return p._linkAtPosition(k.link,t)});if(C){a=!0,this._handleNewLink(C);break}}return a},i.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},i.prototype._clearCurrentLink=function(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,r.disposeArray(this._linkCacheDisposables))},i.prototype._handleNewLink=function(e){var t=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(e.link,a)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var l,p;return(p=(l=t._currentLink)===null||l===void 0?void 0:l.state)===null||p===void 0?void 0:p.decorations.pointerCursor},set:function(l){var p,g;((p=t._currentLink)===null||p===void 0?void 0:p.state)&&t._currentLink.state.decorations.pointerCursor!==l&&(t._currentLink.state.decorations.pointerCursor=l,t._currentLink.state.isHovered&&((g=t._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",l)))}},underline:{get:function(){var l,p;return(p=(l=t._currentLink)===null||l===void 0?void 0:l.state)===null||p===void 0?void 0:p.decorations.underline},set:function(l){var p,g,b;((p=t._currentLink)===null||p===void 0?void 0:p.state)&&((b=(g=t._currentLink)===null||g===void 0?void 0:g.state)===null||b===void 0?void 0:b.decorations.underline)!==l&&(t._currentLink.state.decorations.underline=l,t._currentLink.state.isHovered&&t._fireUnderlineEvent(e.link,l))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(l){var p=l.start===0?0:l.start+1+t._bufferService.buffer.ydisp;t._clearCurrentLink(p,l.end+1+t._bufferService.buffer.ydisp)})))}},i.prototype._linkHover=function(e,t,a){var l;((l=this._currentLink)===null||l===void 0?void 0:l.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(a,t.text)},i.prototype._fireUnderlineEvent=function(e,t){var a=e.range,l=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-l-1,a.end.x,a.end.y-l-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)},i.prototype._linkLeave=function(e,t,a){var l;((l=this._currentLink)===null||l===void 0?void 0:l.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(a,t.text)},i.prototype._linkAtPosition=function(e,t){var a=e.range.start.y===e.range.end.y,l=e.range.start.y<t.y,p=e.range.end.y>t.y;return(a&&e.range.start.x<=t.x&&e.range.end.x>=t.x||l&&e.range.end.x>=t.x||p&&e.range.start.x<=t.x||l&&p)&&e.range.start.y<=t.y&&e.range.end.y>=t.y},i.prototype._positionFromMouseEvent=function(e,t,a){var l=a.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}},i.prototype._createLinkUnderlineEvent=function(e,t,a,l,p){return{x1:e,y1:t,x2:a,y2:l,cols:this._bufferService.cols,fg:p}},f([c(0,y.IBufferService)],i)}(r.Disposable);s.Linkifier2=u},9042:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(P,s,v){var h,d=this&&this.__extends||(h=function(o,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(o,i)},function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=o}h(o,i),o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(o,i,e,t){var a,l=arguments.length,p=l<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,i,e,t);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(p=(l<3?a(p):l>3?a(i,e,p):a(i,e))||p);return l>3&&p&&Object.defineProperty(i,e,p),p},c=this&&this.__param||function(o,i){return function(e,t){i(e,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseZoneManager=void 0;var y=v(844),_=v(3656),r=v(4725),n=v(2585),u=function(o){function i(e,t,a,l,p,g){var b=o.call(this)||this;return b._element=e,b._screenElement=t,b._bufferService=a,b._mouseService=l,b._selectionService=p,b._optionsService=g,b._zones=[],b._areZonesActive=!1,b._lastHoverCoords=[void 0,void 0],b._initialSelectionLength=0,b.register(_.addDisposableDomListener(b._element,"mousedown",function(m){return b._onMouseDown(m)})),b._mouseMoveListener=function(m){return b._onMouseMove(m)},b._mouseLeaveListener=function(m){return b._onMouseLeave(m)},b._clickListener=function(m){return b._onClick(m)},b}return d(i,o),i.prototype.dispose=function(){o.prototype.dispose.call(this),this._deactivate()},i.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},i.prototype.clearAll=function(e,t){if(this._zones.length!==0){e&&t||(e=0,t=this._bufferService.rows-1);for(var a=0;a<this._zones.length;a++){var l=this._zones[a];(l.y1>e&&l.y1<=t+1||l.y2>e&&l.y2<=t+1||l.y1<e&&l.y2>t+1)&&(this._currentZone&&this._currentZone===l&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(a--,1))}this._zones.length===0&&this._deactivate()}},i.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},i.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},i.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},i.prototype._onHover=function(e){var t=this,a=this._findZoneEventAt(e);a!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),a&&(this._currentZone=a,a.hoverCallback&&a.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return t._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},i.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);t==null||t.tooltipCallback(e)},i.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);(t==null?void 0:t.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},i.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},i.prototype._onClick=function(e){var t=this._findZoneEventAt(e),a=this._getSelectionLength();t&&a===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},i.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},i.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var a=t[0],l=t[1],p=0;p<this._zones.length;p++){var g=this._zones[p];if(g.y1===g.y2){if(l===g.y1&&a>=g.x1&&a<g.x2)return g}else if(l===g.y1&&a>=g.x1||l===g.y2&&a<g.x2||l>g.y1&&l<g.y2)return g}},f([c(2,n.IBufferService),c(3,r.IMouseService),c(4,r.ISelectionService),c(5,n.IOptionsService)],i)}(y.Disposable);s.MouseZoneManager=u},6193:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0;var v=function(){function h(d){this._renderCallback=d}return h.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},h.prototype.refresh=function(d,f,c){var y=this;this._rowCount=c,d=d!==void 0?d:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return y._innerRefresh()}))},h.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var d=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(d,f)}},h}();s.RenderDebouncer=v},5596:function(P,s,v){var h,d=this&&this.__extends||(h=function(c,y){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,r){_.__proto__=r}||function(_,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(_[n]=r[n])})(c,y)},function(c,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function _(){this.constructor=c}h(c,y),c.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)});Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;var f=function(c){function y(){var _=c!==null&&c.apply(this,arguments)||this;return _._currentDevicePixelRatio=window.devicePixelRatio,_}return d(y,c),y.prototype.setListener=function(_){var r=this;this._listener&&this.clearListener(),this._listener=_,this._outerListener=function(){r._listener&&(r._listener(window.devicePixelRatio,r._currentDevicePixelRatio),r._updateDpr())},this._updateDpr()},y.prototype.dispose=function(){c.prototype.dispose.call(this),this.clearListener()},y.prototype._updateDpr=function(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},y.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},y}(v(844).Disposable);s.ScreenDprMonitor=f},3236:function(P,s,v){var h,d=this&&this.__extends||(h=function(Y,L){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var H in R)Object.prototype.hasOwnProperty.call(R,H)&&(A[H]=R[H])})(Y,L)},function(Y,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function A(){this.constructor=Y}h(Y,L),Y.prototype=L===null?Object.create(L):(A.prototype=L.prototype,new A)});Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;var f=v(2950),c=v(1680),y=v(3614),_=v(2584),r=v(5435),n=v(3525),u=v(3551),o=v(9312),i=v(6114),e=v(3656),t=v(9042),a=v(357),l=v(6954),p=v(4567),g=v(1296),b=v(7399),m=v(8460),S=v(8437),C=v(5680),k=v(3230),w=v(4725),x=v(428),M=v(8934),E=v(6465),D=v(5114),T=v(8969),j=v(4774),U=v(4269),F=typeof window!="undefined"?window.document:null,K=function(Y){function L(A){A===void 0&&(A={});var R=Y.call(this,A)||this;return R.browser=i,R._keyDownHandled=!1,R._keyPressHandled=!1,R._unprocessedDeadKey=!1,R._onCursorMove=new m.EventEmitter,R._onKey=new m.EventEmitter,R._onRender=new m.EventEmitter,R._onSelectionChange=new m.EventEmitter,R._onTitleChange=new m.EventEmitter,R._onBell=new m.EventEmitter,R._onFocus=new m.EventEmitter,R._onBlur=new m.EventEmitter,R._onA11yCharEmitter=new m.EventEmitter,R._onA11yTabEmitter=new m.EventEmitter,R._setup(),R.linkifier=R._instantiationService.createInstance(u.Linkifier),R.linkifier2=R.register(R._instantiationService.createInstance(E.Linkifier2)),R.register(R._inputHandler.onRequestBell(function(){return R.bell()})),R.register(R._inputHandler.onRequestRefreshRows(function(H,B){return R.refresh(H,B)})),R.register(R._inputHandler.onRequestReset(function(){return R.reset()})),R.register(R._inputHandler.onRequestWindowsOptionsReport(function(H){return R._reportWindowsOptions(H)})),R.register(R._inputHandler.onAnsiColorChange(function(H){return R._changeAnsiColor(H)})),R.register(m.forwardEvent(R._inputHandler.onCursorMove,R._onCursorMove)),R.register(m.forwardEvent(R._inputHandler.onTitleChange,R._onTitleChange)),R.register(m.forwardEvent(R._inputHandler.onA11yChar,R._onA11yCharEmitter)),R.register(m.forwardEvent(R._inputHandler.onA11yTab,R._onA11yTabEmitter)),R.register(R._bufferService.onResize(function(H){return R._afterResize(H.cols,H.rows)})),R}return d(L,Y),Object.defineProperty(L.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),L.prototype._changeAnsiColor=function(A){var R,H;if(this._colorManager){for(var B=0,N=A.colors;B<N.length;B++){var V=N[B],Q=j.rgba.toColor(V.red,V.green,V.blue);this._colorManager.colors.ansi[V.colorIndex]=Q}(R=this._renderService)===null||R===void 0||R.setColors(this._colorManager.colors),(H=this.viewport)===null||H===void 0||H.onThemeChange(this._colorManager.colors)}},L.prototype.dispose=function(){var A,R,H;this._isDisposed||(Y.prototype.dispose.call(this),(A=this._renderService)===null||A===void 0||A.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(H=(R=this.element)===null||R===void 0?void 0:R.parentNode)===null||H===void 0||H.removeChild(this.element))},L.prototype._setup=function(){Y.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(L.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),L.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},L.prototype._updateOptions=function(A){var R,H,B,N;switch(Y.prototype._updateOptions.call(this,A),A){case"fontFamily":case"fontSize":(R=this._renderService)===null||R===void 0||R.clear(),(H=this._charSizeService)===null||H===void 0||H.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(B=this.viewport)===null||B===void 0||B.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new p.AccessibilityManager(this,this._renderService)):((N=this._accessibilityManager)===null||N===void 0||N.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},L.prototype._onTextAreaFocus=function(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(_.C0.ESC+"[I"),this.updateCursorStyle(A),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},L.prototype.blur=function(){var A;return(A=this.textarea)===null||A===void 0?void 0:A.blur()},L.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(_.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},L.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var A=this.buffer.ybase+this.buffer.y,R=this.buffer.lines.get(A);if(R){var H=Math.min(this.buffer.x,this.cols-1),B=this._renderService.dimensions.actualCellHeight,N=R.getWidth(H),V=this._renderService.dimensions.actualCellWidth*N,Q=this.buffer.y*this._renderService.dimensions.actualCellHeight,ee=H*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=ee+"px",this.textarea.style.top=Q+"px",this.textarea.style.width=V+"px",this.textarea.style.height=B+"px",this.textarea.style.lineHeight=B+"px",this.textarea.style.zIndex="-5"}}},L.prototype._initGlobal=function(){var A=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(H){A.hasSelection()&&y.copyHandler(H,A._selectionService)}));var R=function(H){return y.handlePasteEvent(H,A.textarea,A.coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",R)),this.register(e.addDisposableDomListener(this.element,"paste",R)),i.isFirefox?this.register(e.addDisposableDomListener(this.element,"mousedown",function(H){H.button===2&&y.rightClickHandler(H,A.textarea,A.screenElement,A._selectionService,A.options.rightClickSelectsWord)})):this.register(e.addDisposableDomListener(this.element,"contextmenu",function(H){y.rightClickHandler(H,A.textarea,A.screenElement,A._selectionService,A.options.rightClickSelectsWord)})),i.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(H){H.button===1&&y.moveTextAreaUnderMouseCursor(H,A.textarea,A.screenElement)}))},L.prototype._bindKeys=function(){var A=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(R){return A._keyUp(R)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(R){return A._keyDown(R)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(R){return A._keyPress(R)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return A._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(R){return A._compositionHelper.compositionupdate(R)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return A._compositionHelper.compositionend()})),this.register(e.addDisposableDomListener(this.textarea,"input",function(R){return A._inputEvent(R)},!0)),this.register(this.onRender(function(){return A._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(R){return A._queueLinkification(R.start,R.end)}))},L.prototype.open=function(A){var R=this;if(!A)throw new Error("Terminal requires a parent element.");A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=A.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),A.appendChild(this.element);var H=F.createDocumentFragment();this._viewportElement=F.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),H.appendChild(this._viewportElement),this._viewportScrollArea=F.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=F.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=F.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),H.appendChild(this.screenElement),this.textarea=F.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",t.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(V){return R._onTextAreaFocus(V)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return R._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var B=this._instantiationService.createInstance(D.CoreBrowserService,this.textarea);this._instantiationService.setService(w.ICoreBrowserService,B),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new C.ColorManager(F,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(V){return R._colorManager.onOptionsChange(V)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(U.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService);var N=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,N,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(V){return R._onRender.fire(V)})),this.onResize(function(V){return R._renderService.resize(V.cols,V.rows)}),this._compositionView=F.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(H),this._soundService=this._instantiationService.createInstance(a.SoundService),this._instantiationService.setService(w.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(M.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(c.Viewport,function(V){return R.scrollLines(V,!0,1)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return R.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){R._renderService.onCursorMove(),R._syncTextArea()})),this.register(this.onResize(function(){return R._renderService.onResize(R.cols,R.rows)})),this.register(this.onBlur(function(){return R._renderService.onBlur()})),this.register(this.onFocus(function(){return R._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return R.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(o.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(V){return R.scrollLines(V.amount,V.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return R._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(V){return R._renderService.onSelectionChanged(V.start,V.end,V.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(V){R.textarea.value=V,R.textarea.focus(),R.textarea.select()})),this.register(this._onScroll.event(function(V){R.viewport.syncScrollArea(),R._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return R._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(l.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return R._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(V){return R._selectionService.onMouseDown(V)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new p.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},L.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(n.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(g.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},L.prototype._setTheme=function(A){var R,H,B;this._theme=A,(R=this._colorManager)===null||R===void 0||R.setTheme(A),(H=this._renderService)===null||H===void 0||H.setColors(this._colorManager.colors),(B=this.viewport)===null||B===void 0||B.onThemeChange(this._colorManager.colors)},L.prototype.bindMouse=function(){var A=this,R=this,H=this.element;function B(q){var J,ne,ae=R._mouseService.getRawByteCoords(q,R.screenElement,R.cols,R.rows);if(!ae)return!1;switch(q.overrideType||q.type){case"mousemove":ne=32,q.buttons===void 0?(J=3,q.button!==void 0&&(J=q.button<3?q.button:3)):J=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":ne=0,J=q.button<3?q.button:3;break;case"mousedown":ne=1,J=q.button<3?q.button:3;break;case"wheel":q.deltaY!==0&&(ne=q.deltaY<0?0:1),J=4;break;default:return!1}return!(ne===void 0||J===void 0||J>4)&&R.coreMouseService.triggerMouseEvent({col:ae.x-33,row:ae.y-33,button:J,action:ne,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}var N={mouseup:null,wheel:null,mousedrag:null,mousemove:null},V=function(q){return B(q),q.buttons||(A._document.removeEventListener("mouseup",N.mouseup),N.mousedrag&&A._document.removeEventListener("mousemove",N.mousedrag)),A.cancel(q)},Q=function(q){return B(q),q.preventDefault(),A.cancel(q)},ee=function(q){q.buttons&&B(q)},re=function(q){q.buttons||B(q)};this.register(this.coreMouseService.onProtocolChange(function(q){q?(A.optionsService.options.logLevel==="debug"&&A._logService.debug("Binding to mouse events:",A.coreMouseService.explainEvents(q)),A.element.classList.add("enable-mouse-events"),A._selectionService.disable()):(A._logService.debug("Unbinding from mouse events."),A.element.classList.remove("enable-mouse-events"),A._selectionService.enable()),8&q?N.mousemove||(H.addEventListener("mousemove",re),N.mousemove=re):(H.removeEventListener("mousemove",N.mousemove),N.mousemove=null),16&q?N.wheel||(H.addEventListener("wheel",Q,{passive:!1}),N.wheel=Q):(H.removeEventListener("wheel",N.wheel),N.wheel=null),2&q?N.mouseup||(N.mouseup=V):(A._document.removeEventListener("mouseup",N.mouseup),N.mouseup=null),4&q?N.mousedrag||(N.mousedrag=ee):(A._document.removeEventListener("mousemove",N.mousedrag),N.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(H,"mousedown",function(q){if(q.preventDefault(),A.focus(),A.coreMouseService.areMouseEventsActive&&!A._selectionService.shouldForceSelection(q))return B(q),N.mouseup&&A._document.addEventListener("mouseup",N.mouseup),N.mousedrag&&A._document.addEventListener("mousemove",N.mousedrag),A.cancel(q)})),this.register(e.addDisposableDomListener(H,"wheel",function(q){if(!N.wheel){if(!A.buffer.hasScrollback){var J=A.viewport.getLinesScrolled(q);if(J===0)return;for(var ne=_.C0.ESC+(A.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B"),ae="",Se=0;Se<Math.abs(J);Se++)ae+=ne;A.coreService.triggerDataEvent(ae,!0)}}},{passive:!0})),this.register(e.addDisposableDomListener(H,"wheel",function(q){if(!N.wheel)return A.viewport.onWheel(q)?void 0:A.cancel(q)},{passive:!1})),this.register(e.addDisposableDomListener(H,"touchstart",function(q){if(!A.coreMouseService.areMouseEventsActive)return A.viewport.onTouchStart(q),A.cancel(q)},{passive:!0})),this.register(e.addDisposableDomListener(H,"touchmove",function(q){if(!A.coreMouseService.areMouseEventsActive)return A.viewport.onTouchMove(q)?void 0:A.cancel(q)},{passive:!1}))},L.prototype.refresh=function(A,R){var H;(H=this._renderService)===null||H===void 0||H.refreshRows(A,R)},L.prototype._queueLinkification=function(A,R){var H;(H=this.linkifier)===null||H===void 0||H.linkifyRows(A,R)},L.prototype.updateCursorStyle=function(A){var R;((R=this._selectionService)===null||R===void 0?void 0:R.shouldColumnSelect(A))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},L.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},L.prototype.scrollLines=function(A,R,H){H===void 0&&(H=0),Y.prototype.scrollLines.call(this,A,R,H),this.refresh(0,this.rows-1)},L.prototype.paste=function(A){y.paste(A,this.textarea,this.coreService)},L.prototype.attachCustomKeyEventHandler=function(A){this._customKeyEventHandler=A},L.prototype.registerLinkMatcher=function(A,R,H){var B=this.linkifier.registerLinkMatcher(A,R,H);return this.refresh(0,this.rows-1),B},L.prototype.deregisterLinkMatcher=function(A){this.linkifier.deregisterLinkMatcher(A)&&this.refresh(0,this.rows-1)},L.prototype.registerLinkProvider=function(A){return this.linkifier2.registerLinkProvider(A)},L.prototype.registerCharacterJoiner=function(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var R=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),R},L.prototype.deregisterCharacterJoiner=function(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)},Object.defineProperty(L.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),L.prototype.addMarker=function(A){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)},L.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},L.prototype.select=function(A,R,H){this._selectionService.setSelection(A,R,H)},L.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},L.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},L.prototype.clearSelection=function(){var A;(A=this._selectionService)===null||A===void 0||A.clearSelection()},L.prototype.selectAll=function(){var A;(A=this._selectionService)===null||A===void 0||A.selectAll()},L.prototype.selectLines=function(A,R){var H;(H=this._selectionService)===null||H===void 0||H.selectLines(A,R)},L.prototype._keyDown=function(A){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(!this._compositionHelper.keydown(A))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var R=b.evaluateKeyboardEvent(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),R.type===3||R.type===2){var H=this.rows-1;return this.scrollLines(R.type===2?-H:H),this.cancel(A,!0)}return R.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||(R.cancel&&this.cancel(A,!0),!R.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(R.key!==_.C0.ETX&&R.key!==_.C0.CR||(this.textarea.value=""),this._onKey.fire({key:R.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(R.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(A,!0))))},L.prototype._isThirdLevelShift=function(A,R){var H=A.isMac&&!this.options.macOptionIsMeta&&R.altKey&&!R.ctrlKey&&!R.metaKey||A.isWindows&&R.altKey&&R.ctrlKey&&!R.metaKey||A.isWindows&&R.getModifierState("AltGraph");return R.type==="keypress"?H:H&&(!R.keyCode||R.keyCode>47)},L.prototype._keyUp=function(A){this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(R){return R.keyCode===16||R.keyCode===17||R.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)},L.prototype._keyPress=function(A){var R;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)R=A.charCode;else if(A.which===null||A.which===void 0)R=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;R=A.which}return!(!R||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(R=String.fromCharCode(R),this._onKey.fire({key:R,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(R,!0),this._keyPressHandled=!0,0))},L.prototype._inputEvent=function(A){if(A.data&&A.inputType==="insertText"&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;var R=A.data;return this.coreService.triggerDataEvent(R,!0),this.cancel(A),!0}return!1},L.prototype.bell=function(){var A;this._soundBell()&&((A=this._soundService)===null||A===void 0||A.playBellSound()),this._onBell.fire()},L.prototype.resize=function(A,R){A!==this.cols||R!==this.rows?Y.prototype.resize.call(this,A,R):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},L.prototype._afterResize=function(A,R){var H,B;(H=this._charSizeService)===null||H===void 0||H.measure(),(B=this.viewport)===null||B===void 0||B.syncScrollArea(!0)},L.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var A=1;A<this.rows;A++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},L.prototype.reset=function(){var A,R;this.options.rows=this.rows,this.options.cols=this.cols;var H=this._customKeyEventHandler;this._setup(),Y.prototype.reset.call(this),(A=this._selectionService)===null||A===void 0||A.reset(),this._customKeyEventHandler=H,this.refresh(0,this.rows-1),(R=this.viewport)===null||R===void 0||R.syncScrollArea()},L.prototype._reportWindowsOptions=function(A){if(this._renderService)switch(A){case r.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var R=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),H=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(_.C0.ESC+"[4;"+H+";"+R+"t");break;case r.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var B=this._renderService.dimensions.scaledCellWidth.toFixed(0),N=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(_.C0.ESC+"[6;"+N+";"+B+"t")}},L.prototype.cancel=function(A,R){if(this.options.cancelEvents||R)return A.preventDefault(),A.stopPropagation(),!1},L.prototype._visualBell=function(){return!1},L.prototype._soundBell=function(){return this.options.bellStyle==="sound"},L}(T.CoreTerminal);s.Terminal=K},9924:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0;var v=function(){function h(d,f){f===void 0&&(f=1e3),this._renderCallback=d,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return h.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},h.prototype.refresh=function(d,f,c){var y=this;this._rowCount=c,d=d!==void 0?d:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var _=Date.now();if(_-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=_,this._innerRefresh();else if(!this._additionalRefreshRequested){var r=_-this._lastRefreshMs,n=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){y._lastRefreshMs=Date.now(),y._innerRefresh(),y._additionalRefreshRequested=!1,y._refreshTimeoutID=void 0},n)}},h.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var d=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,f)}},h}();s.TimeBasedDebouncer=v},1680:function(P,s,v){var h,d=this&&this.__extends||(h=function(o,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(o,i)},function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=o}h(o,i),o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(o,i,e,t){var a,l=arguments.length,p=l<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,i,e,t);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(p=(l<3?a(p):l>3?a(i,e,p):a(i,e))||p);return l>3&&p&&Object.defineProperty(i,e,p),p},c=this&&this.__param||function(o,i){return function(e,t){i(e,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;var y=v(844),_=v(3656),r=v(4725),n=v(2585),u=function(o){function i(e,t,a,l,p,g,b){var m=o.call(this)||this;return m._scrollLines=e,m._viewportElement=t,m._scrollArea=a,m._bufferService=l,m._optionsService=p,m._charSizeService=g,m._renderService=b,m.scrollBarWidth=0,m._currentRowHeight=0,m._currentScaledCellHeight=0,m._lastRecordedBufferLength=0,m._lastRecordedViewportHeight=0,m._lastRecordedBufferHeight=0,m._lastTouchY=0,m._lastScrollTop=0,m._lastHadScrollBar=!1,m._wheelPartialScroll=0,m._refreshAnimationFrame=null,m._ignoreNextScrollEvent=!1,m.scrollBarWidth=m._viewportElement.offsetWidth-m._scrollArea.offsetWidth||15,m._lastHadScrollBar=!0,m.register(_.addDisposableDomListener(m._viewportElement,"scroll",m._onScroll.bind(m))),m._activeBuffer=m._bufferService.buffer,m.register(m._bufferService.buffers.onBufferActivate(function(S){return m._activeBuffer=S.activeBuffer})),m._renderDimensions=m._renderService.dimensions,m.register(m._renderService.onDimensionsChange(function(S){return m._renderDimensions=S})),setTimeout(function(){return m.syncScrollArea()},0),m}return d(i,o),i.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},i.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return t._innerRefresh()}))},i.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0,this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth).toString()+"px",this._refreshAnimationFrame=null},i.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},i.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},i.prototype._bubbleScroll=function(e,t){var a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&a<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},i.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},i.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},i.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},i.prototype._applyScrollModifier=function(e,t){var a=this._optionsService.options.fastScrollModifier;return a==="alt"&&t.altKey||a==="ctrl"&&t.ctrlKey||a==="shift"&&t.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},i.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},i.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},f([c(3,n.IBufferService),c(4,n.IOptionsService),c(5,r.ICharSizeService),c(6,r.IRenderService)],i)}(y.Disposable);s.Viewport=u},2950:function(P,s,v){var h=this&&this.__decorate||function(_,r,n,u){var o,i=arguments.length,e=i<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,n):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,r,n,u);else for(var t=_.length-1;t>=0;t--)(o=_[t])&&(e=(i<3?o(e):i>3?o(r,n,e):o(r,n))||e);return i>3&&e&&Object.defineProperty(r,n,e),e},d=this&&this.__param||function(_,r){return function(n,u){r(n,u,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;var f=v(4725),c=v(2585),y=function(){function _(r,n,u,o,i,e){this._textarea=r,this._compositionView=n,this._bufferService=u,this._optionsService=o,this._coreService=i,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(_.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),_.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},_.prototype.compositionupdate=function(r){var n=this;this._compositionView.textContent=r.data,this.updateCompositionElements(),setTimeout(function(){n._compositionPosition.end=n._textarea.value.length},0)},_.prototype.compositionend=function(){this._finalizeComposition(!0)},_.prototype.keydown=function(r){if(this._isComposing||this._isSendingComposition){if(r.keyCode===229||r.keyCode===16||r.keyCode===17||r.keyCode===18)return!1;this._finalizeComposition(!1)}return r.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},_.prototype._finalizeComposition=function(r){var n=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,r){var u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(n._isSendingComposition){n._isSendingComposition=!1;var i;u.start+=n._dataAlreadySent.length,(i=n._isComposing?n._textarea.value.substring(u.start,u.end):n._textarea.value.substring(u.start)).length>0&&n._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;var o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}},_.prototype._handleAnyTextareaChanges=function(){var r=this,n=this._textarea.value;setTimeout(function(){if(!r._isComposing){var u=r._textarea.value.replace(n,"");u.length>0&&(r._dataAlreadySent=u,r._coreService.triggerDataEvent(u,!0))}},0)},_.prototype.updateCompositionElements=function(r){var n=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.actualCellHeight,i=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=u*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var t=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(t.width,1)+"px",this._textarea.style.height=Math.max(t.height,1)+"px",this._textarea.style.lineHeight=t.height+"px"}r||setTimeout(function(){return n.updateCompositionElements(!0)},0)}},h([d(2,c.IBufferService),d(3,c.IOptionsService),d(4,c.ICoreService),d(5,f.IRenderService)],_)}();s.CompositionHelper=y},9806:(P,s)=>{function v(h,d){var f=d.getBoundingClientRect();return[h.clientX-f.left,h.clientY-f.top]}Object.defineProperty(s,"__esModule",{value:!0}),s.getRawByteCoords=s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=v,s.getCoords=function(h,d,f,c,y,_,r,n){if(y){var u=v(h,d);if(u)return u[0]=Math.ceil((u[0]+(n?_/2:0))/_),u[1]=Math.ceil(u[1]/r),u[0]=Math.min(Math.max(u[0],1),f+(n?1:0)),u[1]=Math.min(Math.max(u[1],1),c),u}},s.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},9504:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;var h=v(2584);function d(n,u,o,i){var e=n-f(o,n),t=u-f(o,u);return r(Math.abs(e-t)-function(a,l,p){for(var g=0,b=a-f(p,a),m=l-f(p,l),S=0;S<Math.abs(b-m);S++){var C=c(a,l)==="A"?-1:1,k=p.buffer.lines.get(b+C*S);k&&k.isWrapped&&g++}return g}(n,u,o),_(c(n,u),i))}function f(n,u){for(var o=0,i=n.buffer.lines.get(u),e=i&&i.isWrapped;e&&u>=0&&u<n.rows;)o++,e=(i=n.buffer.lines.get(--u))&&i.isWrapped;return o}function c(n,u){return n>u?"A":"B"}function y(n,u,o,i,e,t){for(var a=n,l=u,p="";a!==o||l!==i;)a+=e?1:-1,e&&a>t.cols-1?(p+=t.buffer.translateBufferLineToString(l,!1,n,a),a=0,n=0,l++):!e&&a<0&&(p+=t.buffer.translateBufferLineToString(l,!1,0,n+1),n=a=t.cols-1,l--);return p+t.buffer.translateBufferLineToString(l,!1,n,a)}function _(n,u){var o=u?"O":"[";return h.C0.ESC+o+n}function r(n,u){n=Math.floor(n);for(var o="",i=0;i<n;i++)o+=u;return o}s.moveToCellSequence=function(n,u,o,i){var e,t=o.buffer.x,a=o.buffer.y;if(!o.buffer.hasScrollback)return function(p,g,b,m,S,C){return d(g,m,S,C).length===0?"":r(y(p,g,p,g-f(S,g),!1,S).length,_("D",C))}(t,a,0,u,o,i)+d(a,u,o,i)+function(p,g,b,m,S,C){var k;k=d(g,m,S,C).length>0?m-f(S,m):g;var w=m,x=function(M,E,D,T,j,U){var F;return F=d(D,T,j,U).length>0?T-f(j,T):E,M<D&&F<=T||M>=D&&F<T?"C":"D"}(p,g,b,m,S,C);return r(y(p,k,b,w,x==="C",S).length,_(x,C))}(t,a,n,u,o,i);if(a===u)return e=t>n?"D":"C",r(Math.abs(t-n),_(e,i));e=a>u?"D":"C";var l=Math.abs(a-u);return r(function(p,g){return g.cols-p}(a>u?n:t,o)+(l-1)*o.cols+1+((a>u?t:n)-1),_(e,i))}},1546:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;var h=v(643),d=v(8803),f=v(1420),c=v(3734),y=v(1752),_=v(4774),r=v(9631),n=v(8978),u=function(){function o(i,e,t,a,l,p,g,b){this._container=i,this._alpha=a,this._colors=l,this._rendererId=p,this._bufferService=g,this._optionsService=b,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=t.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return o.prototype.dispose=function(){var i;r.removeElementFromParent(this._canvas),(i=this._charAtlas)===null||i===void 0||i.dispose()},o.prototype._initCanvas=function(){this._ctx=y.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},o.prototype.onOptionsChanged=function(){},o.prototype.onBlur=function(){},o.prototype.onFocus=function(){},o.prototype.onCursorMove=function(){},o.prototype.onGridChanged=function(i,e){},o.prototype.onSelectionChanged=function(i,e,t){t===void 0&&(t=!1)},o.prototype.setColors=function(i){this._refreshCharAtlas(i)},o.prototype._setTransparency=function(i){if(i!==this._alpha){var e=this._canvas;this._alpha=i,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},o.prototype._refreshCharAtlas=function(i){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=f.acquireCharAtlas(this._optionsService.options,this._rendererId,i,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},o.prototype.resize=function(i){this._scaledCellWidth=i.scaledCellWidth,this._scaledCellHeight=i.scaledCellHeight,this._scaledCharWidth=i.scaledCharWidth,this._scaledCharHeight=i.scaledCharHeight,this._scaledCharLeft=i.scaledCharLeft,this._scaledCharTop=i.scaledCharTop,this._canvas.width=i.scaledCanvasWidth,this._canvas.height=i.scaledCanvasHeight,this._canvas.style.width=i.canvasWidth+"px",this._canvas.style.height=i.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},o.prototype._fillCells=function(i,e,t,a){this._ctx.fillRect(i*this._scaledCellWidth,e*this._scaledCellHeight,t*this._scaledCellWidth,a*this._scaledCellHeight)},o.prototype._fillMiddleLineAtCells=function(i,e,t){t===void 0&&(t=1);var a=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(i*this._scaledCellWidth,(e+1)*this._scaledCellHeight-a-window.devicePixelRatio,t*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillBottomLineAtCells=function(i,e,t){t===void 0&&(t=1),this._ctx.fillRect(i*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,t*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillLeftLineAtCell=function(i,e,t){this._ctx.fillRect(i*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*t,this._scaledCellHeight)},o.prototype._strokeRectAtCell=function(i,e,t,a){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(i*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,t*this._scaledCellWidth-window.devicePixelRatio,a*this._scaledCellHeight-window.devicePixelRatio)},o.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},o.prototype._clearCells=function(i,e,t,a){this._alpha?this._ctx.clearRect(i*this._scaledCellWidth,e*this._scaledCellHeight,t*this._scaledCellWidth,a*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(i*this._scaledCellWidth,e*this._scaledCellHeight,t*this._scaledCellWidth,a*this._scaledCellHeight))},o.prototype._fillCharTrueColor=function(i,e,t){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(t);var a=!1;this._optionsService.options.customGlyphs!==!1&&(a=n.tryDrawCustomChar(this._ctx,i.getChars(),e*this._scaledCellWidth,t*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),a||this._ctx.fillText(i.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,t*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},o.prototype._drawChars=function(i,e,t){var a,l,p=this._getContrastColor(i);p||i.isFgRGB()||i.isBgRGB()?this._drawUncachedChars(i,e,t,p):(i.isInverse()?(a=i.isBgDefault()?d.INVERTED_DEFAULT_COLOR:i.getBgColor(),l=i.isFgDefault()?d.INVERTED_DEFAULT_COLOR:i.getFgColor()):(l=i.isBgDefault()?h.DEFAULT_COLOR:i.getBgColor(),a=i.isFgDefault()?h.DEFAULT_COLOR:i.getFgColor()),a+=this._optionsService.options.drawBoldTextInBrightColors&&i.isBold()&&a<8?8:0,this._currentGlyphIdentifier.chars=i.getChars()||h.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=i.getCode()||h.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=l,this._currentGlyphIdentifier.fg=a,this._currentGlyphIdentifier.bold=!!i.isBold(),this._currentGlyphIdentifier.dim=!!i.isDim(),this._currentGlyphIdentifier.italic=!!i.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,t*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(i,e,t))},o.prototype._drawUncachedChars=function(i,e,t,a){if(this._ctx.save(),this._ctx.font=this._getFont(!!i.isBold(),!!i.isItalic()),this._ctx.textBaseline="ideographic",i.isInverse())if(a)this._ctx.fillStyle=a.css;else if(i.isBgDefault())this._ctx.fillStyle=_.color.opaque(this._colors.background).css;else if(i.isBgRGB())this._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(i.getBgColor()).join(",")+")";else{var l=i.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&i.isBold()&&l<8&&(l+=8),this._ctx.fillStyle=this._colors.ansi[l].css}else if(a)this._ctx.fillStyle=a.css;else if(i.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(i.isFgRGB())this._ctx.fillStyle="rgb("+c.AttributeData.toColorRGB(i.getFgColor()).join(",")+")";else{var p=i.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&i.isBold()&&p<8&&(p+=8),this._ctx.fillStyle=this._colors.ansi[p].css}this._clipRow(t),i.isDim()&&(this._ctx.globalAlpha=d.DIM_OPACITY);var g=!1;this._optionsService.options.customGlyphs!==!1&&(g=n.tryDrawCustomChar(this._ctx,i.getChars(),e*this._scaledCellWidth,t*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),g||this._ctx.fillText(i.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,t*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},o.prototype._clipRow=function(i){this._ctx.beginPath(),this._ctx.rect(0,i*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},o.prototype._getFont=function(i,e){return(e?"italic":"")+" "+(i?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},o.prototype._getContrastColor=function(i){if(this._optionsService.options.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(i.bg,i.fg);if(e!==void 0)return e||void 0;var t=i.getFgColor(),a=i.getFgColorMode(),l=i.getBgColor(),p=i.getBgColorMode(),g=!!i.isInverse(),b=!!i.isInverse();if(g){var m=t;t=l,l=m;var S=a;a=p,p=S}var C=this._resolveBackgroundRgba(p,l,g),k=this._resolveForegroundRgba(a,t,g,b),w=_.rgba.ensureContrastRatio(C,k,this._optionsService.options.minimumContrastRatio);if(w){var x={css:_.channels.toCss(w>>24&255,w>>16&255,w>>8&255),rgba:w};return this._colors.contrastCache.setColor(i.bg,i.fg,x),x}this._colors.contrastCache.setColor(i.bg,i.fg,null)}},o.prototype._resolveBackgroundRgba=function(i,e,t){switch(i){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;case 0:default:return t?this._colors.foreground.rgba:this._colors.background.rgba}},o.prototype._resolveForegroundRgba=function(i,e,t,a){switch(i){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&a&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;case 0:default:return t?this._colors.background.rgba:this._colors.foreground.rgba}},o}();s.BaseRenderLayer=u},2512:function(P,s,v){var h,d=this&&this.__extends||(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])})(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}h(e,t),e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}),f=this&&this.__decorate||function(e,t,a,l){var p,g=arguments.length,b=g<3?t:l===null?l=Object.getOwnPropertyDescriptor(t,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,t,a,l);else for(var m=e.length-1;m>=0;m--)(p=e[m])&&(b=(g<3?p(b):g>3?p(t,a,b):p(t,a))||b);return g>3&&b&&Object.defineProperty(t,a,b),b},c=this&&this.__param||function(e,t){return function(a,l){t(a,l,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CursorRenderLayer=void 0;var y=v(1546),_=v(511),r=v(2585),n=v(4725),u=600,o=function(e){function t(a,l,p,g,b,m,S,C,k){var w=e.call(this,a,"cursor",l,!0,p,g,m,S)||this;return w._onRequestRedraw=b,w._coreService=C,w._coreBrowserService=k,w._cell=new _.CellData,w._state={x:0,y:0,isFocused:!1,style:"",width:0},w._cursorRenderers={bar:w._renderBarCursor.bind(w),block:w._renderBlockCursor.bind(w),underline:w._renderUnderlineCursor.bind(w)},w}return d(t,e),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},t.prototype.resize=function(a){e.prototype.resize.call(this,a),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},t.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var a,l=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new i(this._coreBrowserService.isFocused,function(){l._render(!0)})):((a=this._cursorBlinkStateManager)===null||a===void 0||a.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype.onGridChanged=function(a,l){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(a){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var l=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=l-this._bufferService.buffer.ydisp;if(p<0||p>=this._bufferService.rows)this._clearCursor();else{var g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(l).loadCell(g,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var b=this._optionsService.options.cursorStyle;return b&&b!=="block"?this._cursorRenderers[b](g,p,this._cell):this._renderBlurCursor(g,p,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=p,this._state.isFocused=!1,this._state.style=b,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===g&&this._state.y===p&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](g,p,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=p,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(a,l,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(a,l,this._optionsService.options.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(a,l,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(a,l,p.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(p,a,l),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(a,l,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(a,l),this._ctx.restore()},t.prototype._renderBlurCursor=function(a,l,p){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(a,l,p.getWidth(),1),this._ctx.restore()},f([c(5,r.IBufferService),c(6,r.IOptionsService),c(7,r.ICoreService),c(8,n.ICoreBrowserService)],t)}(y.BaseRenderLayer);s.CursorRenderLayer=o;var i=function(){function e(t,a){this._renderCallback=a,this.isCursorVisible=!0,t&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0})))},e.prototype._restartInterval=function(t){var a=this;t===void 0&&(t=u),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(a._animationTimeRestarted){var l=u-(Date.now()-a._animationTimeRestarted);if(a._animationTimeRestarted=void 0,l>0)return void a._restartInterval(l)}a.isCursorVisible=!1,a._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0}),a._blinkInterval=window.setInterval(function(){if(a._animationTimeRestarted){var p=u-(Date.now()-a._animationTimeRestarted);return a._animationTimeRestarted=void 0,void a._restartInterval(p)}a.isCursorVisible=!a.isCursorVisible,a._animationFrame=window.requestAnimationFrame(function(){a._renderCallback(),a._animationFrame=void 0})},u)},t)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(P,s,v)=>{var h,d,f,c,y,_,r,n,u,o,i,e,t,a,l,p,g,b,m,S,C,k,w,x,M,E,D,T,j,U,F,K,Y,L,A,R,H,B,N,V,Q,ee,re,q,J,ne,ae,Se,It,Ht,Ft,jt,Wt,Ut,qt,Nt,zt,Kt,Vt,Gt,Yt,Xt,Ie,He,Fe,je,We,Ue,qe,Ne,ze,Ke,Ve,Ge,Ye,Xe,Ze,Je,$e,Qe,et,tt,it,rt,nt,ot,st,at,ct,lt,ht,ut,ft,_t,dt,pt,vt,gt,yt,mt,Ct,St,bt,wt,Lt,Et,Mt,xt,kt,At,Rt,Tt,Zt,Jt,$t,Qt,ei,ti,ii,ri,ni,oi,si,ai,ci,li,hi,ui;Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;var Si=v(1752);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var ji={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":(h={},h[1]="M0,.5 L1,.5",h),"\u2501":(d={},d[3]="M0,.5 L1,.5",d),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(c={},c[3]="M.5,0 L.5,1",c),"\u250C":(y={},y[1]="M0.5,1 L.5,.5 L1,.5",y),"\u250F":(_={},_[3]="M0.5,1 L.5,.5 L1,.5",_),"\u2510":(r={},r[1]="M0,.5 L.5,.5 L.5,1",r),"\u2513":(n={},n[3]="M0,.5 L.5,.5 L.5,1",n),"\u2514":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"\u2517":(o={},o[3]="M.5,0 L.5,.5 L1,.5",o),"\u2518":(i={},i[1]="M.5,0 L.5,.5 L0,.5",i),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(t={},t[1]="M.5,0 L.5,1 M.5,.5 L1,.5",t),"\u2523":(a={},a[3]="M.5,0 L.5,1 M.5,.5 L1,.5",a),"\u2524":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L0,.5",l),"\u252B":(p={},p[3]="M.5,0 L.5,1 M.5,.5 L0,.5",p),"\u252C":(g={},g[1]="M0,.5 L1,.5 M.5,.5 L.5,1",g),"\u2533":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"\u2534":(m={},m[1]="M0,.5 L1,.5 M.5,.5 L.5,0",m),"\u253B":(S={},S[3]="M0,.5 L1,.5 M.5,.5 L.5,0",S),"\u253C":(C={},C[1]="M0,.5 L1,.5 M.5,0 L.5,1",C),"\u254B":(k={},k[3]="M0,.5 L1,.5 M.5,0 L.5,1",k),"\u2574":(w={},w[1]="M.5,.5 L0,.5",w),"\u2578":(x={},x[3]="M.5,.5 L0,.5",x),"\u2575":(M={},M[1]="M.5,.5 L.5,0",M),"\u2579":(E={},E[3]="M.5,.5 L.5,0",E),"\u2576":(D={},D[1]="M.5,.5 L1,.5",D),"\u257A":(T={},T[3]="M.5,.5 L1,.5",T),"\u2577":(j={},j[1]="M.5,.5 L.5,1",j),"\u257B":(U={},U[3]="M.5,.5 L.5,1",U),"\u2550":(F={},F[1]=function(I,O){return"M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)},F),"\u2551":(K={},K[1]=function(I,O){return"M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1"},K),"\u2552":(Y={},Y[1]=function(I,O){return"M.5,1 L.5,"+(.5-O)+" L1,"+(.5-O)+" M.5,"+(.5+O)+" L1,"+(.5+O)},Y),"\u2553":(L={},L[1]=function(I,O){return"M"+(.5-I)+",1 L"+(.5-I)+",.5 L1,.5 M"+(.5+I)+",.5 L"+(.5+I)+",1"},L),"\u2554":(A={},A[1]=function(I,O){return"M1,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1"},A),"\u2555":(R={},R[1]=function(I,O){return"M0,"+(.5-O)+" L.5,"+(.5-O)+" L.5,1 M0,"+(.5+O)+" L.5,"+(.5+O)},R),"\u2556":(H={},H[1]=function(I,O){return"M"+(.5+I)+",1 L"+(.5+I)+",.5 L0,.5 M"+(.5-I)+",.5 L"+(.5-I)+",1"},H),"\u2557":(B={},B[1]=function(I,O){return"M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M0,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",1"},B),"\u2558":(N={},N[1]=function(I,O){return"M.5,0 L.5,"+(.5+O)+" L1,"+(.5+O)+" M.5,"+(.5-O)+" L1,"+(.5-O)},N),"\u2559":(V={},V[1]=function(I,O){return"M1,.5 L"+(.5-I)+",.5 L"+(.5-I)+",0 M"+(.5+I)+",.5 L"+(.5+I)+",0"},V),"\u255A":(Q={},Q[1]=function(I,O){return"M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0 M1,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",0"},Q),"\u255B":(ee={},ee[1]=function(I,O){return"M0,"+(.5+O)+" L.5,"+(.5+O)+" L.5,0 M0,"+(.5-O)+" L.5,"+(.5-O)},ee),"\u255C":(re={},re[1]=function(I,O){return"M0,.5 L"+(.5+I)+",.5 L"+(.5+I)+",0 M"+(.5-I)+",.5 L"+(.5-I)+",0"},re),"\u255D":(q={},q[1]=function(I,O){return"M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0 M0,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",0"},q),"\u255E":(J={},J[1]=function(I,O){return"M.5,0 L.5,1 M.5,"+(.5-O)+" L1,"+(.5-O)+" M.5,"+(.5+O)+" L1,"+(.5+O)},J),"\u255F":(ne={},ne[1]=function(I,O){return"M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1 M"+(.5+I)+",.5 L1,.5"},ne),"\u2560":(ae={},ae[1]=function(I,O){return"M"+(.5-I)+",0 L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1 M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0"},ae),"\u2561":(Se={},Se[1]=function(I,O){return"M.5,0 L.5,1 M0,"+(.5-O)+" L.5,"+(.5-O)+" M0,"+(.5+O)+" L.5,"+(.5+O)},Se),"\u2562":(It={},It[1]=function(I,O){return"M0,.5 L"+(.5-I)+",.5 M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1"},It),"\u2563":(Ht={},Ht[1]=function(I,O){return"M"+(.5+I)+",0 L"+(.5+I)+",1 M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0"},Ht),"\u2564":(Ft={},Ft[1]=function(I,O){return"M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)+" M.5,"+(.5+O)+" L.5,1"},Ft),"\u2565":(jt={},jt[1]=function(I,O){return"M0,.5 L1,.5 M"+(.5-I)+",.5 L"+(.5-I)+",1 M"+(.5+I)+",.5 L"+(.5+I)+",1"},jt),"\u2566":(Wt={},Wt[1]=function(I,O){return"M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1"},Wt),"\u2567":(Ut={},Ut[1]=function(I,O){return"M.5,0 L.5,"+(.5-O)+" M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)},Ut),"\u2568":(qt={},qt[1]=function(I,O){return"M0,.5 L1,.5 M"+(.5-I)+",.5 L"+(.5-I)+",0 M"+(.5+I)+",.5 L"+(.5+I)+",0"},qt),"\u2569":(Nt={},Nt[1]=function(I,O){return"M0,"+(.5+O)+" L1,"+(.5+O)+" M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0 M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0"},Nt),"\u256A":(zt={},zt[1]=function(I,O){return"M.5,0 L.5,1 M0,"+(.5-O)+" L1,"+(.5-O)+" M0,"+(.5+O)+" L1,"+(.5+O)},zt),"\u256B":(Kt={},Kt[1]=function(I,O){return"M0,.5 L1,.5 M"+(.5-I)+",0 L"+(.5-I)+",1 M"+(.5+I)+",0 L"+(.5+I)+",1"},Kt),"\u256C":(Vt={},Vt[1]=function(I,O){return"M0,"+(.5+O)+" L"+(.5-I)+","+(.5+O)+" L"+(.5-I)+",1 M1,"+(.5+O)+" L"+(.5+I)+","+(.5+O)+" L"+(.5+I)+",1 M0,"+(.5-O)+" L"+(.5-I)+","+(.5-O)+" L"+(.5-I)+",0 M1,"+(.5-O)+" L"+(.5+I)+","+(.5-O)+" L"+(.5+I)+",0"},Vt),"\u2571":(Gt={},Gt[1]="M1,0 L0,1",Gt),"\u2572":(Yt={},Yt[1]="M0,0 L1,1",Yt),"\u2573":(Xt={},Xt[1]="M1,0 L0,1 M0,0 L1,1",Xt),"\u257C":(Ie={},Ie[1]="M.5,.5 L0,.5",Ie[3]="M.5,.5 L1,.5",Ie),"\u257D":(He={},He[1]="M.5,.5 L.5,0",He[3]="M.5,.5 L.5,1",He),"\u257E":(Fe={},Fe[1]="M.5,.5 L1,.5",Fe[3]="M.5,.5 L0,.5",Fe),"\u257F":(je={},je[1]="M.5,.5 L.5,1",je[3]="M.5,.5 L.5,0",je),"\u250D":(We={},We[1]="M.5,.5 L.5,1",We[3]="M.5,.5 L1,.5",We),"\u250E":(Ue={},Ue[1]="M.5,.5 L1,.5",Ue[3]="M.5,.5 L.5,1",Ue),"\u2511":(qe={},qe[1]="M.5,.5 L.5,1",qe[3]="M.5,.5 L0,.5",qe),"\u2512":(Ne={},Ne[1]="M.5,.5 L0,.5",Ne[3]="M.5,.5 L.5,1",Ne),"\u2515":(ze={},ze[1]="M.5,.5 L.5,0",ze[3]="M.5,.5 L1,.5",ze),"\u2516":(Ke={},Ke[1]="M.5,.5 L1,.5",Ke[3]="M.5,.5 L.5,0",Ke),"\u2519":(Ve={},Ve[1]="M.5,.5 L.5,0",Ve[3]="M.5,.5 L0,.5",Ve),"\u251A":(Ge={},Ge[1]="M.5,.5 L0,.5",Ge[3]="M.5,.5 L.5,0",Ge),"\u251D":(Ye={},Ye[1]="M.5,0 L.5,1",Ye[3]="M.5,.5 L1,.5",Ye),"\u251E":(Xe={},Xe[1]="M0.5,1 L.5,.5 L1,.5",Xe[3]="M.5,.5 L.5,0",Xe),"\u251F":(Ze={},Ze[1]="M.5,0 L.5,.5 L1,.5",Ze[3]="M.5,.5 L.5,1",Ze),"\u2520":(Je={},Je[1]="M.5,.5 L1,.5",Je[3]="M.5,0 L.5,1",Je),"\u2521":($e={},$e[1]="M.5,.5 L.5,1",$e[3]="M.5,0 L.5,.5 L1,.5",$e),"\u2522":(Qe={},Qe[1]="M.5,.5 L.5,0",Qe[3]="M0.5,1 L.5,.5 L1,.5",Qe),"\u2525":(et={},et[1]="M.5,0 L.5,1",et[3]="M.5,.5 L0,.5",et),"\u2526":(tt={},tt[1]="M0,.5 L.5,.5 L.5,1",tt[3]="M.5,.5 L.5,0",tt),"\u2527":(it={},it[1]="M.5,0 L.5,.5 L0,.5",it[3]="M.5,.5 L.5,1",it),"\u2528":(rt={},rt[1]="M.5,.5 L0,.5",rt[3]="M.5,0 L.5,1",rt),"\u2529":(nt={},nt[1]="M.5,.5 L.5,1",nt[3]="M.5,0 L.5,.5 L0,.5",nt),"\u252A":(ot={},ot[1]="M.5,.5 L.5,0",ot[3]="M0,.5 L.5,.5 L.5,1",ot),"\u252D":(st={},st[1]="M0.5,1 L.5,.5 L1,.5",st[3]="M.5,.5 L0,.5",st),"\u252E":(at={},at[1]="M0,.5 L.5,.5 L.5,1",at[3]="M.5,.5 L1,.5",at),"\u252F":(ct={},ct[1]="M.5,.5 L.5,1",ct[3]="M0,.5 L1,.5",ct),"\u2530":(lt={},lt[1]="M0,.5 L1,.5",lt[3]="M.5,.5 L.5,1",lt),"\u2531":(ht={},ht[1]="M.5,.5 L1,.5",ht[3]="M0,.5 L.5,.5 L.5,1",ht),"\u2532":(ut={},ut[1]="M.5,.5 L0,.5",ut[3]="M0.5,1 L.5,.5 L1,.5",ut),"\u2535":(ft={},ft[1]="M.5,0 L.5,.5 L1,.5",ft[3]="M.5,.5 L0,.5",ft),"\u2536":(_t={},_t[1]="M.5,0 L.5,.5 L0,.5",_t[3]="M.5,.5 L1,.5",_t),"\u2537":(dt={},dt[1]="M.5,.5 L.5,0",dt[3]="M0,.5 L1,.5",dt),"\u2538":(pt={},pt[1]="M0,.5 L1,.5",pt[3]="M.5,.5 L.5,0",pt),"\u2539":(vt={},vt[1]="M.5,.5 L1,.5",vt[3]="M.5,0 L.5,.5 L0,.5",vt),"\u253A":(gt={},gt[1]="M.5,.5 L0,.5",gt[3]="M.5,0 L.5,.5 L1,.5",gt),"\u253D":(yt={},yt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",yt[3]="M.5,.5 L0,.5",yt),"\u253E":(mt={},mt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",mt[3]="M.5,.5 L1,.5",mt),"\u253F":(Ct={},Ct[1]="M.5,0 L.5,1",Ct[3]="M0,.5 L1,.5",Ct),"\u2540":(St={},St[1]="M0,.5 L1,.5 M.5,.5 L.5,1",St[3]="M.5,.5 L.5,0",St),"\u2541":(bt={},bt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",bt[3]="M.5,.5 L.5,1",bt),"\u2542":(wt={},wt[1]="M0,.5 L1,.5",wt[3]="M.5,0 L.5,1",wt),"\u2543":(Lt={},Lt[1]="M0.5,1 L.5,.5 L1,.5",Lt[3]="M.5,0 L.5,.5 L0,.5",Lt),"\u2544":(Et={},Et[1]="M0,.5 L.5,.5 L.5,1",Et[3]="M.5,0 L.5,.5 L1,.5",Et),"\u2545":(Mt={},Mt[1]="M.5,0 L.5,.5 L1,.5",Mt[3]="M0,.5 L.5,.5 L.5,1",Mt),"\u2546":(xt={},xt[1]="M.5,0 L.5,.5 L0,.5",xt[3]="M0.5,1 L.5,.5 L1,.5",xt),"\u2547":(kt={},kt[1]="M.5,.5 L.5,1",kt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",kt),"\u2548":(At={},At[1]="M.5,.5 L.5,0",At[3]="M0,.5 L1,.5 M.5,.5 L.5,1",At),"\u2549":(Rt={},Rt[1]="M.5,.5 L1,.5",Rt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Rt),"\u254A":(Tt={},Tt[1]="M.5,.5 L0,.5",Tt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Tt),"\u254C":(Zt={},Zt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Zt),"\u254D":(Jt={},Jt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Jt),"\u2504":($t={},$t[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",$t),"\u2505":(Qt={},Qt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Qt),"\u2508":(ei={},ei[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ei),"\u2509":(ti={},ti[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ti),"\u254E":(ii={},ii[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ii),"\u254F":(ri={},ri[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ri),"\u2506":(ni={},ni[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ni),"\u2507":(oi={},oi[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",oi),"\u250A":(si={},si[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",si),"\u250B":(ai={},ai[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",ai),"\u256D":(ci={},ci[1]="C.5,1,.5,.5,1,.5",ci),"\u256E":(li={},li[1]="C.5,1,.5,.5,0,.5",li),"\u256F":(hi={},hi[1]="C.5,0,.5,.5,0,.5",hi),"\u2570":(ui={},ui[1]="C.5,0,.5,.5,1,.5",ui)},s.tryDrawCustomChar=function(I,O,ce,Ee,Me,$){var le=s.blockElementDefinitions[O];if(le)return function(te,ue,ke,Ae,be,we){for(var oe=0;oe<ue.length;oe++){var ie=ue[oe],Z=be/8,_e=we/8;te.fillRect(ke+ie.x*Z,Ae+ie.y*_e,ie.w*Z,ie.h*_e)}}(I,le,ce,Ee,Me,$),!0;var he=ji[O];if(he)return function(te,ue,ke,Ae,be,we){var oe,ie=bi.get(ue);ie||(ie=new Map,bi.set(ue,ie));var Z=te.fillStyle;if(typeof Z!="string")throw new Error('Unexpected fillStyle type "'+Z+'"');var _e=ie.get(Z);if(!_e){var se=ue[0].length,pe=ue.length,ve=document.createElement("canvas");ve.width=se,ve.height=pe;var Bt=Si.throwIfFalsy(ve.getContext("2d")),de=new ImageData(se,pe),Le=void 0,ge=void 0,fi=void 0,_i=void 0;if(Z.startsWith("#"))Le=parseInt(Z.substr(1,2),16),ge=parseInt(Z.substr(3,2),16),fi=parseInt(Z.substr(5,2),16),_i=Z.length>7&&parseInt(Z.substr(7,2),16)||1;else{if(!Z.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Z+'" when drawing pattern glyph');Le=(oe=Z.substring(5,Z.length-1).split(",").map(function(qi){return parseFloat(qi)}))[0],ge=oe[1],fi=oe[2],_i=oe[3]}for(var ye=0;ye<pe;ye++)for(var me=0;me<se;me++)de.data[4*(ye*se+me)]=Le,de.data[4*(ye*se+me)+1]=ge,de.data[4*(ye*se+me)+2]=fi,de.data[4*(ye*se+me)+3]=ue[ye][me]*(255*_i);Bt.putImageData(de,0,0),_e=Si.throwIfFalsy(te.createPattern(ve,null)),ie.set(Z,_e)}te.fillStyle=_e,te.fillRect(ke,Ae,be,we)}(I,he,ce,Ee,Me,$),!0;var xe=s.boxDrawingDefinitions[O];return!!xe&&(function(te,ue,ke,Ae,be,we){te.strokeStyle=te.fillStyle;for(var oe=0,ie=Object.entries(ue);oe<ie.length;oe++){var Z=ie[oe],_e=Z[0],se=Z[1];te.beginPath(),te.lineWidth=window.devicePixelRatio*Number.parseInt(_e);for(var pe=0,ve=(typeof se=="function"?se(.15,.15/we*be):se).split(" ");pe<ve.length;pe++){var Bt=ve[pe],de=Bt[0],Le=Wi[de];if(Le){var ge=Bt.substring(1).split(",");ge[0]&&ge[1]&&Le(te,Ui(ge,be,we,ke,Ae))}else console.error('Could not find drawing instructions for "'+de+'"')}te.stroke(),te.closePath()}}(I,xe,ce,Ee,Me,$),!0)};var bi=new Map;function wi(I,O,ce){return ce===void 0&&(ce=0),Math.max(Math.min(I,O),ce)}var Wi={C:function(I,O){return I.bezierCurveTo(O[0],O[1],O[2],O[3],O[4],O[5])},L:function(I,O){return I.lineTo(O[0],O[1])},M:function(I,O){return I.moveTo(O[0],O[1])}};function Ui(I,O,ce,Ee,Me){var $=I.map(function(xe){return parseFloat(xe)||parseInt(xe)});if($.length<2)throw new Error("Too few arguments for instruction");for(var le=0;le<$.length;le+=2)$[le]*=O,$[le]!==0&&($[le]=wi(Math.round($[le]+.5)-.5,O,0)),$[le]+=Ee;for(var he=1;he<$.length;he+=2)$[he]*=ce,$[he]!==0&&($[he]=wi(Math.round($[he]+.5)-.5,ce,0)),$[he]+=Me;return $}},3700:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GridCache=void 0;var v=function(){function h(){this.cache=[]}return h.prototype.resize=function(d,f){for(var c=0;c<d;c++){this.cache.length<=c&&this.cache.push([]);for(var y=this.cache[c].length;y<f;y++)this.cache[c].push(void 0);this.cache[c].length=f}this.cache.length=d},h.prototype.clear=function(){for(var d=0;d<this.cache.length;d++)for(var f=0;f<this.cache[d].length;f++)this.cache[d][f]=void 0},h}();s.GridCache=v},5098:function(P,s,v){var h,d=this&&this.__extends||(h=function(o,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(o,i)},function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=o}h(o,i),o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(o,i,e,t){var a,l=arguments.length,p=l<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,i,e,t);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(p=(l<3?a(p):l>3?a(i,e,p):a(i,e))||p);return l>3&&p&&Object.defineProperty(i,e,p),p},c=this&&this.__param||function(o,i){return function(e,t){i(e,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;var y=v(1546),_=v(8803),r=v(2040),n=v(2585),u=function(o){function i(e,t,a,l,p,g,b,m){var S=o.call(this,e,"link",t,!0,a,l,b,m)||this;return p.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),p.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),g.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),g.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),S}return d(i,o),i.prototype.resize=function(e){o.prototype.resize.call(this,e),this._state=void 0},i.prototype.reset=function(){this._clearCurrentLink()},i.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},i.prototype._onShowLinkUnderline=function(e){if(e.fg===_.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&r.is256Color(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},i.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([c(6,n.IBufferService),c(7,n.IOptionsService)],i)}(y.BaseRenderLayer);s.LinkRenderLayer=u},3525:function(P,s,v){var h,d=this&&this.__extends||(h=function(p,g){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(b[S]=m[S])})(p,g)},function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function b(){this.constructor=p}h(p,g),p.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}),f=this&&this.__decorate||function(p,g,b,m){var S,C=arguments.length,k=C<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,b):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(p,g,b,m);else for(var w=p.length-1;w>=0;w--)(S=p[w])&&(k=(C<3?S(k):C>3?S(g,b,k):S(g,b))||k);return C>3&&k&&Object.defineProperty(g,b,k),k},c=this&&this.__param||function(p,g){return function(b,m){g(b,m,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Renderer=void 0;var y=v(9596),_=v(4149),r=v(2512),n=v(5098),u=v(844),o=v(4725),i=v(2585),e=v(1420),t=v(8460),a=1,l=function(p){function g(b,m,S,C,k,w,x,M){var E=p.call(this)||this;E._colors=b,E._screenElement=m,E._bufferService=w,E._charSizeService=x,E._optionsService=M,E._id=a++,E._onRequestRedraw=new t.EventEmitter;var D=E._optionsService.options.allowTransparency;return E._renderLayers=[k.createInstance(y.TextRenderLayer,E._screenElement,0,E._colors,D,E._id),k.createInstance(_.SelectionRenderLayer,E._screenElement,1,E._colors,E._id),k.createInstance(n.LinkRenderLayer,E._screenElement,2,E._colors,E._id,S,C),k.createInstance(r.CursorRenderLayer,E._screenElement,3,E._colors,E._id,E._onRequestRedraw)],E.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},E._devicePixelRatio=window.devicePixelRatio,E._updateDimensions(),E.onOptionsChanged(),E}return d(g,p),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){for(var b=0,m=this._renderLayers;b<m.length;b++)m[b].dispose();p.prototype.dispose.call(this),e.removeTerminalFromCache(this._id)},g.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},g.prototype.setColors=function(b){this._colors=b;for(var m=0,S=this._renderLayers;m<S.length;m++){var C=S[m];C.setColors(this._colors),C.reset()}},g.prototype.onResize=function(b,m){this._updateDimensions();for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},g.prototype.onBlur=function(){this._runOperation(function(b){return b.onBlur()})},g.prototype.onFocus=function(){this._runOperation(function(b){return b.onFocus()})},g.prototype.onSelectionChanged=function(b,m,S){S===void 0&&(S=!1),this._runOperation(function(C){return C.onSelectionChanged(b,m,S)})},g.prototype.onCursorMove=function(){this._runOperation(function(b){return b.onCursorMove()})},g.prototype.onOptionsChanged=function(){this._runOperation(function(b){return b.onOptionsChanged()})},g.prototype.clear=function(){this._runOperation(function(b){return b.reset()})},g.prototype._runOperation=function(b){for(var m=0,S=this._renderLayers;m<S.length;m++)b(S[m])},g.prototype.renderRows=function(b,m){for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].onGridChanged(b,m)},g.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([c(4,i.IInstantiationService),c(5,i.IBufferService),c(6,o.ICharSizeService),c(7,i.IOptionsService)],g)}(u.Disposable);s.Renderer=l},1752:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.throwIfFalsy=void 0,s.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v}},4149:function(P,s,v){var h,d=this&&this.__extends||(h=function(n,u){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(o[e]=i[e])})(n,u)},function(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function o(){this.constructor=n}h(n,u),n.prototype=u===null?Object.create(u):(o.prototype=u.prototype,new o)}),f=this&&this.__decorate||function(n,u,o,i){var e,t=arguments.length,a=t<3?u:i===null?i=Object.getOwnPropertyDescriptor(u,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,u,o,i);else for(var l=n.length-1;l>=0;l--)(e=n[l])&&(a=(t<3?e(a):t>3?e(u,o,a):e(u,o))||a);return t>3&&a&&Object.defineProperty(u,o,a),a},c=this&&this.__param||function(n,u){return function(o,i){u(o,i,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionRenderLayer=void 0;var y=v(1546),_=v(2585),r=function(n){function u(o,i,e,t,a,l){var p=n.call(this,o,"selection",i,!0,e,t,a,l)||this;return p._clearState(),p}return d(u,n),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(o){n.prototype.resize.call(this,o),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(o,i,e){if(this._didStateChange(o,i,e,this._bufferService.buffer.ydisp))if(this._clearAll(),o&&i){var t=o[1]-this._bufferService.buffer.ydisp,a=i[1]-this._bufferService.buffer.ydisp,l=Math.max(t,0),p=Math.min(a,this._bufferService.rows-1);if(l>=this._bufferService.rows||p<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var g=o[0],b=i[0]-g,m=p-l+1;this._fillCells(g,l,b,m)}else{g=t===l?o[0]:0;var S=l===a?i[0]:this._bufferService.cols;this._fillCells(g,l,S-g,1);var C=Math.max(p-l-1,0);if(this._fillCells(0,l+1,this._bufferService.cols,C),l!==p){var k=a===p?i[0]:this._bufferService.cols;this._fillCells(0,p,k,1)}}this._state.start=[o[0],o[1]],this._state.end=[i[0],i[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},u.prototype._didStateChange=function(o,i,e,t){return!this._areCoordinatesEqual(o,this._state.start)||!this._areCoordinatesEqual(i,this._state.end)||e!==this._state.columnSelectMode||t!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(o,i){return!(!o||!i)&&o[0]===i[0]&&o[1]===i[1]},f([c(4,_.IBufferService),c(5,_.IOptionsService)],u)}(y.BaseRenderLayer);s.SelectionRenderLayer=r},9596:function(P,s,v){var h,d=this&&this.__extends||(h=function(a,l){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(p[b]=g[b])})(a,l)},function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function p(){this.constructor=a}h(a,l),a.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}),f=this&&this.__decorate||function(a,l,p,g){var b,m=arguments.length,S=m<3?l:g===null?g=Object.getOwnPropertyDescriptor(l,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,l,p,g);else for(var C=a.length-1;C>=0;C--)(b=a[C])&&(S=(m<3?b(S):m>3?b(l,p,S):b(l,p))||S);return m>3&&S&&Object.defineProperty(l,p,S),S},c=this&&this.__param||function(a,l){return function(p,g){l(p,g,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.TextRenderLayer=void 0;var y=v(3700),_=v(1546),r=v(3734),n=v(643),u=v(511),o=v(2585),i=v(4725),e=v(4269),t=function(a){function l(p,g,b,m,S,C,k,w){var x=a.call(this,p,"text",g,m,b,S,C,k)||this;return x._characterJoinerService=w,x._characterWidth=0,x._characterFont="",x._characterOverlapCache={},x._workCell=new u.CellData,x._state=new y.GridCache,x}return d(l,a),l.prototype.resize=function(p){a.prototype.resize.call(this,p);var g=this._getFont(!1,!1);this._characterWidth===p.scaledCharWidth&&this._characterFont===g||(this._characterWidth=p.scaledCharWidth,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},l.prototype.reset=function(){this._state.clear(),this._clearAll()},l.prototype._forEachCell=function(p,g,b){for(var m=p;m<=g;m++)for(var S=m+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(S),k=this._characterJoinerService.getJoinedCharacters(S),w=0;w<this._bufferService.cols;w++){C.loadCell(w,this._workCell);var x=this._workCell,M=!1,E=w;if(x.getWidth()!==0){if(k.length>0&&w===k[0][0]){M=!0;var D=k.shift();x=new e.JoinedCellData(this._workCell,C.translateToString(!0,D[0],D[1]),D[1]-D[0]),E=D[1]-1}!M&&this._isOverlapping(x)&&E<C.length-1&&C.getCodePoint(E+1)===n.NULL_CELL_CODE&&(x.content&=-12582913,x.content|=2<<22),b(x,w,m),w=E}}},l.prototype._drawBackground=function(p,g){var b=this,m=this._ctx,S=this._bufferService.cols,C=0,k=0,w=null;m.save(),this._forEachCell(p,g,function(x,M,E){var D=null;x.isInverse()?D=x.isFgDefault()?b._colors.foreground.css:x.isFgRGB()?"rgb("+r.AttributeData.toColorRGB(x.getFgColor()).join(",")+")":b._colors.ansi[x.getFgColor()].css:x.isBgRGB()?D="rgb("+r.AttributeData.toColorRGB(x.getBgColor()).join(",")+")":x.isBgPalette()&&(D=b._colors.ansi[x.getBgColor()].css),w===null&&(C=M,k=E),E!==k?(m.fillStyle=w||"",b._fillCells(C,k,S-C,1),C=M,k=E):w!==D&&(m.fillStyle=w||"",b._fillCells(C,k,M-C,1),C=M,k=E),w=D}),w!==null&&(m.fillStyle=w,this._fillCells(C,k,S-C,1)),m.restore()},l.prototype._drawForeground=function(p,g){var b=this;this._forEachCell(p,g,function(m,S,C){if(!m.isInvisible()&&(b._drawChars(m,S,C),m.isUnderline()||m.isStrikethrough())){if(b._ctx.save(),m.isInverse())if(m.isBgDefault())b._ctx.fillStyle=b._colors.background.css;else if(m.isBgRGB())b._ctx.fillStyle="rgb("+r.AttributeData.toColorRGB(m.getBgColor()).join(",")+")";else{var k=m.getBgColor();b._optionsService.options.drawBoldTextInBrightColors&&m.isBold()&&k<8&&(k+=8),b._ctx.fillStyle=b._colors.ansi[k].css}else if(m.isFgDefault())b._ctx.fillStyle=b._colors.foreground.css;else if(m.isFgRGB())b._ctx.fillStyle="rgb("+r.AttributeData.toColorRGB(m.getFgColor()).join(",")+")";else{var w=m.getFgColor();b._optionsService.options.drawBoldTextInBrightColors&&m.isBold()&&w<8&&(w+=8),b._ctx.fillStyle=b._colors.ansi[w].css}m.isStrikethrough()&&b._fillMiddleLineAtCells(S,C,m.getWidth()),m.isUnderline()&&b._fillBottomLineAtCells(S,C,m.getWidth()),b._ctx.restore()}})},l.prototype.onGridChanged=function(p,g){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,p,this._bufferService.cols,g-p+1),this._drawBackground(p,g),this._drawForeground(p,g))},l.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},l.prototype._isOverlapping=function(p){if(p.getWidth()!==1||p.getCode()<256)return!1;var g=p.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=b,b},f([c(5,o.IBufferService),c(6,o.IOptionsService),c(7,i.ICharacterJoinerService)],l)}(_.BaseRenderLayer);s.TextRenderLayer=t},9616:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseCharAtlas=void 0;var v=function(){function h(){this._didWarmUp=!1}return h.prototype.dispose=function(){},h.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},h.prototype._doWarmUp=function(){},h.prototype.beginFrame=function(){},h}();s.BaseCharAtlas=v},1420:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireCharAtlas=void 0;var h=v(2040),d=v(1906),f=[];s.acquireCharAtlas=function(c,y,_,r,n){for(var u=h.generateConfig(r,n,c,_),o=0;o<f.length;o++){var i=(e=f[o]).ownedBy.indexOf(y);if(i>=0){if(h.configEquals(e.config,u))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(o,1)):e.ownedBy.splice(i,1);break}}for(o=0;o<f.length;o++){var e=f[o];if(h.configEquals(e.config,u))return e.ownedBy.push(y),e.atlas}var t={atlas:new d.DynamicCharAtlas(document,u),config:u,ownedBy:[y]};return f.push(t),t.atlas},s.removeTerminalFromCache=function(c){for(var y=0;y<f.length;y++){var _=f[y].ownedBy.indexOf(c);if(_!==-1){f[y].ownedBy.length===1?(f[y].atlas.dispose(),f.splice(y,1)):f[y].ownedBy.splice(_,1);break}}}},2040:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;var h=v(643);s.generateConfig=function(d,f,c,y){var _={foreground:y.foreground,background:y.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:y.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:d,scaledCharHeight:f,fontFamily:c.fontFamily,fontSize:c.fontSize,fontWeight:c.fontWeight,fontWeightBold:c.fontWeightBold,allowTransparency:c.allowTransparency,colors:_}},s.configEquals=function(d,f){for(var c=0;c<d.colors.ansi.length;c++)if(d.colors.ansi[c].rgba!==f.colors.ansi[c].rgba)return!1;return d.devicePixelRatio===f.devicePixelRatio&&d.fontFamily===f.fontFamily&&d.fontSize===f.fontSize&&d.fontWeight===f.fontWeight&&d.fontWeightBold===f.fontWeightBold&&d.allowTransparency===f.allowTransparency&&d.scaledCharWidth===f.scaledCharWidth&&d.scaledCharHeight===f.scaledCharHeight&&d.colors.foreground===f.colors.foreground&&d.colors.background===f.colors.background},s.is256Color=function(d){return d<h.DEFAULT_COLOR}},8803:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR_ATLAS_CELL_SPACING=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0,s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.CHAR_ATLAS_CELL_SPACING=1},1906:function(P,s,v){var h,d=this&&this.__extends||(h=function(l,p){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(g[m]=b[m])})(l,p)},function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function g(){this.constructor=l}h(l,p),l.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(s,"__esModule",{value:!0}),s.NoneCharAtlas=s.DynamicCharAtlas=s.getGlyphCacheKey=void 0;var f=v(8803),c=v(9616),y=v(5680),_=v(7001),r=v(6114),n=v(1752),u=v(4774),o={css:"rgba(0, 0, 0, 0)",rgba:0};function i(l){return l.code<<21|l.bg<<12|l.fg<<3|(l.bold?0:4)+(l.dim?0:2)+(l.italic?0:1)}s.getGlyphCacheKey=i;var e=function(l){function p(g,b){var m=l.call(this)||this;m._config=b,m._drawToCacheCount=0,m._glyphsWaitingOnBitmap=[],m._bitmapCommitTimeout=null,m._bitmap=null,m._cacheCanvas=g.createElement("canvas"),m._cacheCanvas.width=1024,m._cacheCanvas.height=1024,m._cacheCtx=n.throwIfFalsy(m._cacheCanvas.getContext("2d",{alpha:!0}));var S=g.createElement("canvas");S.width=m._config.scaledCharWidth,S.height=m._config.scaledCharHeight,m._tmpCtx=n.throwIfFalsy(S.getContext("2d",{alpha:m._config.allowTransparency})),m._width=Math.floor(1024/m._config.scaledCharWidth),m._height=Math.floor(1024/m._config.scaledCharHeight);var C=m._width*m._height;return m._cacheMap=new _.LRUMap(C),m._cacheMap.prealloc(C),m}return d(p,l),p.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},p.prototype.beginFrame=function(){this._drawToCacheCount=0},p.prototype.draw=function(g,b,m,S){if(b.code===32)return!0;if(!this._canCache(b))return!1;var C=i(b),k=this._cacheMap.get(C);if(k!=null)return this._drawFromCache(g,k,m,S),!0;if(this._drawToCacheCount<100){var w;w=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var x=this._drawToCache(b,w);return this._cacheMap.set(C,x),this._drawFromCache(g,x,m,S),!0}return!1},p.prototype._canCache=function(g){return g.code<256},p.prototype._toCoordinateX=function(g){return g%this._width*this._config.scaledCharWidth},p.prototype._toCoordinateY=function(g){return Math.floor(g/this._width)*this._config.scaledCharHeight},p.prototype._drawFromCache=function(g,b,m,S){if(!b.isEmpty){var C=this._toCoordinateX(b.index),k=this._toCoordinateY(b.index);g.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,C,k,this._config.scaledCharWidth,this._config.scaledCharHeight,m,S,this._config.scaledCharWidth,this._config.scaledCharHeight)}},p.prototype._getColorFromAnsiIndex=function(g){return g<this._config.colors.ansi.length?this._config.colors.ansi[g]:y.DEFAULT_ANSI_COLORS[g]},p.prototype._getBackgroundColor=function(g){return this._config.allowTransparency?o:g.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:g.bg<256?this._getColorFromAnsiIndex(g.bg):this._config.colors.background},p.prototype._getForegroundColor=function(g){return g.fg===f.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):g.fg<256?this._getColorFromAnsiIndex(g.fg):this._config.colors.foreground},p.prototype._drawToCache=function(g,b){this._drawToCacheCount++,this._tmpCtx.save();var m=this._getBackgroundColor(g);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=m.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var S=g.bold?this._config.fontWeightBold:this._config.fontWeight,C=g.italic?"italic":"";this._tmpCtx.font=C+" "+S+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(g).css,g.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(g.chars,0,this._config.scaledCharHeight);var k=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),w=!1;if(this._config.allowTransparency||(w=a(k,m)),w&&g.chars==="_"&&!this._config.allowTransparency)for(var x=1;x<=5&&(this._tmpCtx.fillText(g.chars,0,this._config.scaledCharHeight-x),w=a(k=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),m));x++);this._tmpCtx.restore();var M=this._toCoordinateX(b),E=this._toCoordinateY(b);this._cacheCtx.putImageData(k,M,E);var D={index:b,isEmpty:w,inBitmap:!1};return this._addGlyphToBitmap(D),D},p.prototype._addGlyphToBitmap=function(g){var b=this;!("createImageBitmap"in window)||r.isFirefox||r.isSafari||(this._glyphsWaitingOnBitmap.push(g),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return b._generateBitmap()},100)))},p.prototype._generateBitmap=function(){var g=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(m){g._bitmap=m;for(var S=0;S<b.length;S++)b[S].inBitmap=!0}),this._bitmapCommitTimeout=null},p}(c.BaseCharAtlas);s.DynamicCharAtlas=e;var t=function(l){function p(g,b){return l.call(this)||this}return d(p,l),p.prototype.draw=function(g,b,m,S){return!1},p}(c.BaseCharAtlas);function a(l,p){for(var g=!0,b=p.rgba>>>24,m=p.rgba>>>16&255,S=p.rgba>>>8&255,C=0;C<l.data.length;C+=4)l.data[C]===b&&l.data[C+1]===m&&l.data[C+2]===S?l.data[C+3]=0:g=!1;return g}s.NoneCharAtlas=t},7001:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LRUMap=void 0;var v=function(){function h(d){this.capacity=d,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return h.prototype._unlinkNode=function(d){var f=d.prev,c=d.next;d===this._head&&(this._head=c),d===this._tail&&(this._tail=f),f!==null&&(f.next=c),c!==null&&(c.prev=f)},h.prototype._appendNode=function(d){var f=this._tail;f!==null&&(f.next=d),d.prev=f,d.next=null,this._tail=d,this._head===null&&(this._head=d)},h.prototype.prealloc=function(d){for(var f=this._nodePool,c=0;c<d;c++)f.push({prev:null,next:null,key:null,value:null})},h.prototype.get=function(d){var f=this._map[d];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},h.prototype.peekValue=function(d){var f=this._map[d];return f!==void 0?f.value:null},h.prototype.peek=function(){var d=this._head;return d===null?null:d.value},h.prototype.set=function(d,f){var c=this._map[d];if(c!==void 0)c=this._map[d],this._unlinkNode(c),c.value=f;else if(this.size>=this.capacity)c=this._head,this._unlinkNode(c),delete this._map[c.key],c.key=d,c.value=f,this._map[d]=c;else{var y=this._nodePool;y.length>0?((c=y.pop()).key=d,c.value=f):c={prev:null,next:null,key:d,value:f},this._map[d]=c,this.size++}this._appendNode(c)},h}();s.LRUMap=v},1296:function(P,s,v){var h,d=this&&this.__extends||(h=function(m,S){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,k){C.__proto__=k}||function(C,k){for(var w in k)Object.prototype.hasOwnProperty.call(k,w)&&(C[w]=k[w])})(m,S)},function(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function C(){this.constructor=m}h(m,S),m.prototype=S===null?Object.create(S):(C.prototype=S.prototype,new C)}),f=this&&this.__decorate||function(m,S,C,k){var w,x=arguments.length,M=x<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,C):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(m,S,C,k);else for(var E=m.length-1;E>=0;E--)(w=m[E])&&(M=(x<3?w(M):x>3?w(S,C,M):w(S,C))||M);return x>3&&M&&Object.defineProperty(S,C,M),M},c=this&&this.__param||function(m,S){return function(C,k){S(C,k,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;var y=v(3787),_=v(8803),r=v(844),n=v(4725),u=v(2585),o=v(8460),i=v(4774),e=v(9631),t="xterm-dom-renderer-owner-",a="xterm-fg-",l="xterm-bg-",p="xterm-focus",g=1,b=function(m){function S(C,k,w,x,M,E,D,T,j,U){var F=m.call(this)||this;return F._colors=C,F._element=k,F._screenElement=w,F._viewportElement=x,F._linkifier=M,F._linkifier2=E,F._charSizeService=T,F._optionsService=j,F._bufferService=U,F._terminalClass=g++,F._rowElements=[],F._rowContainer=document.createElement("div"),F._rowContainer.classList.add("xterm-rows"),F._rowContainer.style.lineHeight="normal",F._rowContainer.setAttribute("aria-hidden","true"),F._refreshRowElements(F._bufferService.cols,F._bufferService.rows),F._selectionContainer=document.createElement("div"),F._selectionContainer.classList.add("xterm-selection"),F._selectionContainer.setAttribute("aria-hidden","true"),F.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},F._updateDimensions(),F._injectCss(),F._rowFactory=D.createInstance(y.DomRendererRowFactory,document,F._colors),F._element.classList.add(t+F._terminalClass),F._screenElement.appendChild(F._rowContainer),F._screenElement.appendChild(F._selectionContainer),F._linkifier.onShowLinkUnderline(function(K){return F._onLinkHover(K)}),F._linkifier.onHideLinkUnderline(function(K){return F._onLinkLeave(K)}),F._linkifier2.onShowLinkUnderline(function(K){return F._onLinkHover(K)}),F._linkifier2.onHideLinkUnderline(function(K){return F._onLinkLeave(K)}),F}return d(S,m),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return new o.EventEmitter().event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this._element.classList.remove(t+this._terminalClass),e.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),m.prototype.dispose.call(this)},S.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var C=0,k=this._rowElements;C<k.length;C++){var w=k[C];w.style.width=this.dimensions.canvasWidth+"px",w.style.height=this.dimensions.actualCellHeight+"px",w.style.lineHeight=this.dimensions.actualCellHeight+"px",w.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var x=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=x,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},S.prototype.setColors=function(C){this._colors=C,this._injectCss()},S.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var k=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";k+=this._terminalSelector+" span:not(."+y.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+y.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+y.ITALIC_CLASS+" { font-style: italic;}",k+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",k+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",k+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+":not(."+y.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",k+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(w,x){k+=C._terminalSelector+" ."+a+x+" { color: "+w.css+"; }"+C._terminalSelector+" ."+l+x+" { background-color: "+w.css+"; }"}),k+=this._terminalSelector+" ."+a+_.INVERTED_DEFAULT_COLOR+" { color: "+i.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+l+_.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=k},S.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},S.prototype._refreshRowElements=function(C,k){for(var w=this._rowElements.length;w<=k;w++){var x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>k;)this._rowContainer.removeChild(this._rowElements.pop())},S.prototype.onResize=function(C,k){this._refreshRowElements(C,k),this._updateDimensions()},S.prototype.onCharSizeChanged=function(){this._updateDimensions()},S.prototype.onBlur=function(){this._rowContainer.classList.remove(p)},S.prototype.onFocus=function(){this._rowContainer.classList.add(p)},S.prototype.onSelectionChanged=function(C,k,w){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(C&&k){var x=C[1]-this._bufferService.buffer.ydisp,M=k[1]-this._bufferService.buffer.ydisp,E=Math.max(x,0),D=Math.min(M,this._bufferService.rows-1);if(!(E>=this._bufferService.rows||D<0)){var T=document.createDocumentFragment();if(w)T.appendChild(this._createSelectionElement(E,C[0],k[0],D-E+1));else{var j=x===E?C[0]:0,U=E===M?k[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(E,j,U));var F=D-E-1;if(T.appendChild(this._createSelectionElement(E+1,0,this._bufferService.cols,F)),E!==D){var K=M===D?k[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(D,0,K))}}this._selectionContainer.appendChild(T)}}},S.prototype._createSelectionElement=function(C,k,w,x){x===void 0&&(x=1);var M=document.createElement("div");return M.style.height=x*this.dimensions.actualCellHeight+"px",M.style.top=C*this.dimensions.actualCellHeight+"px",M.style.left=k*this.dimensions.actualCellWidth+"px",M.style.width=this.dimensions.actualCellWidth*(w-k)+"px",M},S.prototype.onCursorMove=function(){},S.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},S.prototype.clear=function(){for(var C=0,k=this._rowElements;C<k.length;C++)k[C].innerText=""},S.prototype.renderRows=function(C,k){for(var w=this._bufferService.buffer.ybase+this._bufferService.buffer.y,x=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),M=this._optionsService.options.cursorBlink,E=C;E<=k;E++){var D=this._rowElements[E];D.innerText="";var T=E+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(T),U=this._optionsService.options.cursorStyle;D.appendChild(this._rowFactory.createRow(j,T,T===w,U,x,M,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(S.prototype,"_terminalSelector",{get:function(){return"."+t+this._terminalClass},enumerable:!1,configurable:!0}),S.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},S.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},S.prototype._setCellUnderline=function(C,k,w,x,M,E){for(;C!==k||w!==x;){var D=this._rowElements[w];if(!D)return;var T=D.children[C];T&&(T.style.textDecoration=E?"underline":"none"),++C>=M&&(C=0,w++)}},f([c(6,u.IInstantiationService),c(7,n.ICharSizeService),c(8,u.IOptionsService),c(9,u.IBufferService)],S)}(r.Disposable);s.DomRenderer=b},3787:function(P,s,v){var h=this&&this.__decorate||function(e,t,a,l){var p,g=arguments.length,b=g<3?t:l===null?l=Object.getOwnPropertyDescriptor(t,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,t,a,l);else for(var m=e.length-1;m>=0;m--)(p=e[m])&&(b=(g<3?p(b):g>3?p(t,a,b):p(t,a))||b);return g>3&&b&&Object.defineProperty(t,a,b),b},d=this&&this.__param||function(e,t){return function(a,l){t(a,l,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=s.CURSOR_STYLE_UNDERLINE_CLASS=s.CURSOR_STYLE_BAR_CLASS=s.CURSOR_STYLE_BLOCK_CLASS=s.CURSOR_BLINK_CLASS=s.CURSOR_CLASS=s.STRIKETHROUGH_CLASS=s.UNDERLINE_CLASS=s.ITALIC_CLASS=s.DIM_CLASS=s.BOLD_CLASS=void 0;var f=v(8803),c=v(643),y=v(511),_=v(2585),r=v(4774),n=v(4725),u=v(4269);s.BOLD_CLASS="xterm-bold",s.DIM_CLASS="xterm-dim",s.ITALIC_CLASS="xterm-italic",s.UNDERLINE_CLASS="xterm-underline",s.STRIKETHROUGH_CLASS="xterm-strikethrough",s.CURSOR_CLASS="xterm-cursor",s.CURSOR_BLINK_CLASS="xterm-cursor-blink",s.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",s.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",s.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function e(t,a,l,p){this._document=t,this._colors=a,this._characterJoinerService=l,this._optionsService=p,this._workCell=new y.CellData}return e.prototype.setColors=function(t){this._colors=t},e.prototype.createRow=function(t,a,l,p,g,b,m,S){for(var C=this._document.createDocumentFragment(),k=this._characterJoinerService.getJoinedCharacters(a),w=0,x=Math.min(t.length,S)-1;x>=0;x--)if(t.loadCell(x,this._workCell).getCode()!==c.NULL_CELL_CODE||l&&x===g){w=x+1;break}for(x=0;x<w;x++){t.loadCell(x,this._workCell);var M=this._workCell.getWidth();if(M!==0){var E=!1,D=x,T=this._workCell;if(k.length>0&&x===k[0][0]){E=!0;var j=k.shift();T=new u.JoinedCellData(this._workCell,t.translateToString(!0,j[0],j[1]),j[1]-j[0]),D=j[1]-1,M=T.getWidth()}var U=this._document.createElement("span");if(M>1&&(U.style.width=m*M+"px"),E&&(U.style.display="inline",g>=x&&g<=D&&(g=x)),l&&x===g)switch(U.classList.add(s.CURSOR_CLASS),b&&U.classList.add(s.CURSOR_BLINK_CLASS),p){case"bar":U.classList.add(s.CURSOR_STYLE_BAR_CLASS);break;case"underline":U.classList.add(s.CURSOR_STYLE_UNDERLINE_CLASS);break;default:U.classList.add(s.CURSOR_STYLE_BLOCK_CLASS)}T.isBold()&&U.classList.add(s.BOLD_CLASS),T.isItalic()&&U.classList.add(s.ITALIC_CLASS),T.isDim()&&U.classList.add(s.DIM_CLASS),T.isUnderline()&&U.classList.add(s.UNDERLINE_CLASS),T.isInvisible()?U.textContent=c.WHITESPACE_CELL_CHAR:U.textContent=T.getChars()||c.WHITESPACE_CELL_CHAR,T.isStrikethrough()&&U.classList.add(s.STRIKETHROUGH_CLASS);var F=T.getFgColor(),K=T.getFgColorMode(),Y=T.getBgColor(),L=T.getBgColorMode(),A=!!T.isInverse();if(A){var R=F;F=Y,Y=R;var H=K;K=L,L=H}switch(K){case 16777216:case 33554432:T.isBold()&&F<8&&this._optionsService.options.drawBoldTextInBrightColors&&(F+=8),this._applyMinimumContrast(U,this._colors.background,this._colors.ansi[F])||U.classList.add("xterm-fg-"+F);break;case 50331648:var B=r.rgba.toColor(F>>16&255,F>>8&255,255&F);this._applyMinimumContrast(U,this._colors.background,B)||this._addStyle(U,"color:#"+i(F.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(U,this._colors.background,this._colors.foreground)||A&&U.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch(L){case 16777216:case 33554432:U.classList.add("xterm-bg-"+Y);break;case 50331648:this._addStyle(U,"background-color:#"+i(Y.toString(16),"0",6));break;case 0:default:A&&U.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}C.appendChild(U),x=D}}return C},e.prototype._applyMinimumContrast=function(t,a,l){if(this._optionsService.options.minimumContrastRatio===1)return!1;var p=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return p===void 0&&(p=r.color.ensureContrastRatio(a,l,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,p??null)),!!p&&(this._addStyle(t,"color:"+p.css),!0)},e.prototype._addStyle=function(t,a){t.setAttribute("style",""+(t.getAttribute("style")||"")+a+";")},h([d(2,n.ICharacterJoinerService),d(3,_.IOptionsService)],e)}();function i(e,t,a){for(;e.length<a;)e=t+e;return e}s.DomRendererRowFactory=o},456:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0;var v=function(){function h(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}return h.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(h.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),h.prototype.areSelectionValuesReversed=function(){var d=this.selectionStart,f=this.selectionEnd;return!(!d||!f)&&(d[1]>f[1]||d[1]===f[1]&&d[0]>f[0])},h.prototype.onTrim=function(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},h}();s.SelectionModel=v},428:function(P,s,v){var h=this&&this.__decorate||function(r,n,u,o){var i,e=arguments.length,t=e<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(r,n,u,o);else for(var a=r.length-1;a>=0;a--)(i=r[a])&&(t=(e<3?i(t):e>3?i(n,u,t):i(n,u))||t);return e>3&&t&&Object.defineProperty(n,u,t),t},d=this&&this.__param||function(r,n){return function(u,o){n(u,o,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;var f=v(2585),c=v(8460),y=function(){function r(n,u,o){this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=new c.EventEmitter,this._measureStrategy=new _(n,u,this._optionsService)}return Object.defineProperty(r.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),r.prototype.measure=function(){var n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())},h([d(2,f.IOptionsService)],r)}();s.CharSizeService=y;var _=function(){function r(n,u,o){this._document=n,this._parentElement=u,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return r.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var n=this._measureElement.getBoundingClientRect();return n.width!==0&&n.height!==0&&(this._result.width=n.width,this._result.height=Math.ceil(n.height)),this._result},r}()},4269:function(P,s,v){var h,d=this&&this.__extends||(h=function(i,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])})(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}h(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),f=this&&this.__decorate||function(i,e,t,a){var l,p=arguments.length,g=p<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,t):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(i,e,t,a);else for(var b=i.length-1;b>=0;b--)(l=i[b])&&(g=(p<3?l(g):p>3?l(e,t,g):l(e,t))||g);return p>3&&g&&Object.defineProperty(e,t,g),g},c=this&&this.__param||function(i,e){return function(t,a){e(t,a,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;var y=v(3734),_=v(643),r=v(511),n=v(2585),u=function(i){function e(t,a,l){var p=i.call(this)||this;return p.content=0,p.combinedData="",p.fg=t.fg,p.bg=t.bg,p.combinedData=a,p._width=l,p}return d(e,i),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(t){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(y.AttributeData);s.JoinedCellData=u;var o=function(){function i(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new r.CellData}return i.prototype.register=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},i.prototype.deregister=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},i.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];for(var a=[],l=t.translateToString(!0),p=0,g=0,b=0,m=t.getFg(0),S=t.getBg(0),C=0;C<t.getTrimmedLength();C++)if(t.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==m||this._workCell.bg!==S){if(C-p>1)for(var k=this._getJoinedRanges(l,b,g,t,p),w=0;w<k.length;w++)a.push(k[w]);p=C,b=g,m=this._workCell.fg,S=this._workCell.bg}g+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-p>1)for(k=this._getJoinedRanges(l,b,g,t,p),w=0;w<k.length;w++)a.push(k[w]);return a},i.prototype._getJoinedRanges=function(e,t,a,l,p){for(var g=e.substring(t,a),b=this._characterJoiners[0].handler(g),m=1;m<this._characterJoiners.length;m++)for(var S=this._characterJoiners[m].handler(g),C=0;C<S.length;C++)i._mergeRanges(b,S[C]);return this._stringRangesToCellRanges(b,l,p),b},i.prototype._stringRangesToCellRanges=function(e,t,a){var l=0,p=!1,g=0,b=e[l];if(b){for(var m=a;m<this._bufferService.cols;m++){var S=t.getWidth(m),C=t.getString(m).length||_.WHITESPACE_CELL_CHAR.length;if(S!==0){if(!p&&b[0]<=g&&(b[0]=m,p=!0),b[1]<=g){if(b[1]=m,!(b=e[++l]))break;b[0]<=g?(b[0]=m,p=!0):p=!1}g+=C}}b&&(b[1]=this._bufferService.cols)}},i._mergeRanges=function(e,t){for(var a=!1,l=0;l<e.length;l++){var p=e[l];if(a){if(t[1]<=p[0])return e[l-1][1]=t[1],e;if(t[1]<=p[1])return e[l-1][1]=Math.max(t[1],p[1]),e.splice(l,1),e;e.splice(l,1),l--}else{if(t[1]<=p[0])return e.splice(l,0,t),e;if(t[1]<=p[1])return p[0]=Math.min(t[0],p[0]),e;t[0]<p[1]&&(p[0]=Math.min(t[0],p[0]),a=!0)}}return a?e[e.length-1][1]=t[1]:e.push(t),e},i=f([c(0,n.IBufferService)],i)}();s.CharacterJoinerService=o},5114:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;var v=function(){function h(d){this._textarea=d}return Object.defineProperty(h.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),h}();s.CoreBrowserService=v},8934:function(P,s,v){var h=this&&this.__decorate||function(_,r,n,u){var o,i=arguments.length,e=i<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,n):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,r,n,u);else for(var t=_.length-1;t>=0;t--)(o=_[t])&&(e=(i<3?o(e):i>3?o(r,n,e):o(r,n))||e);return i>3&&e&&Object.defineProperty(r,n,e),e},d=this&&this.__param||function(_,r){return function(n,u){r(n,u,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;var f=v(4725),c=v(9806),y=function(){function _(r,n){this._renderService=r,this._charSizeService=n}return _.prototype.getCoords=function(r,n,u,o,i){return c.getCoords(r,n,u,o,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,i)},_.prototype.getRawByteCoords=function(r,n,u,o){var i=this.getCoords(r,n,u,o);return c.getRawByteCoords(i)},h([d(0,f.IRenderService),d(1,f.ICharSizeService)],_)}();s.MouseService=y},3230:function(P,s,v){var h,d=this&&this.__extends||(h=function(t,a){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(l[g]=p[g])})(t,a)},function(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function l(){this.constructor=t}h(t,a),t.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}),f=this&&this.__decorate||function(t,a,l,p){var g,b=arguments.length,m=b<3?a:p===null?p=Object.getOwnPropertyDescriptor(a,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(t,a,l,p);else for(var S=t.length-1;S>=0;S--)(g=t[S])&&(m=(b<3?g(m):b>3?g(a,l,m):g(a,l))||m);return b>3&&m&&Object.defineProperty(a,l,m),m},c=this&&this.__param||function(t,a){return function(l,p){a(l,p,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;var y=v(6193),_=v(8460),r=v(844),n=v(5596),u=v(3656),o=v(2585),i=v(4725),e=function(t){function a(l,p,g,b,m,S){var C=t.call(this)||this;if(C._renderer=l,C._rowCount=p,C._charSizeService=m,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new _.EventEmitter,C._onRender=new _.EventEmitter,C._onRefreshRequest=new _.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new y.RenderDebouncer(function(w,x){return C._renderRows(w,x)}),C.register(C._renderDebouncer),C._screenDprMonitor=new n.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(S.onResize(function(w){return C._fullRefresh()})),C.register(b.onOptionChange(function(){return C._renderer.onOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C._renderer.onRequestRedraw(function(w){return C.refreshRows(w.start,w.end,!0)}),C.register(u.addDisposableDomListener(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var k=new IntersectionObserver(function(w){return C._onIntersectionChange(w[w.length-1])},{threshold:0});k.observe(g),C.register({dispose:function(){return k.disconnect()}})}return C}return d(a,t),Object.defineProperty(a.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),a.prototype._onIntersectionChange=function(l){this._isPaused=l.isIntersecting===void 0?l.intersectionRatio===0:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},a.prototype.refreshRows=function(l,p,g){g===void 0&&(g=!1),this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,p,this._rowCount))},a.prototype._renderRows=function(l,p){this._renderer.renderRows(l,p),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:l,end:p}),this._isNextRenderRedrawOnly=!0},a.prototype.resize=function(l,p){this._rowCount=p,this._fireOnCanvasResize()},a.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},a.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},a.prototype.dispose=function(){t.prototype.dispose.call(this)},a.prototype.setRenderer=function(l){var p=this;this._renderer.dispose(),this._renderer=l,this._renderer.onRequestRedraw(function(g){return p.refreshRows(g.start,g.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},a.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},a.prototype.setColors=function(l){this._renderer.setColors(l),this._fullRefresh()},a.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},a.prototype.onResize=function(l,p){this._renderer.onResize(l,p),this._fullRefresh()},a.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},a.prototype.onBlur=function(){this._renderer.onBlur()},a.prototype.onFocus=function(){this._renderer.onFocus()},a.prototype.onSelectionChanged=function(l,p,g){this._selectionState.start=l,this._selectionState.end=p,this._selectionState.columnSelectMode=g,this._renderer.onSelectionChanged(l,p,g)},a.prototype.onCursorMove=function(){this._renderer.onCursorMove()},a.prototype.clear=function(){this._renderer.clear()},f([c(3,o.IOptionsService),c(4,i.ICharSizeService),c(5,o.IBufferService)],a)}(r.Disposable);s.RenderService=e},9312:function(P,s,v){var h,d=this&&this.__extends||(h=function(b,m){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(S[k]=C[k])})(b,m)},function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function S(){this.constructor=b}h(b,m),b.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}),f=this&&this.__decorate||function(b,m,S,C){var k,w=arguments.length,x=w<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(b,m,S,C);else for(var M=b.length-1;M>=0;M--)(k=b[M])&&(x=(w<3?k(x):w>3?k(m,S,x):k(m,S))||x);return w>3&&x&&Object.defineProperty(m,S,x),x},c=this&&this.__param||function(b,m){return function(S,C){m(S,C,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;var y=v(6114),_=v(456),r=v(511),n=v(8460),u=v(4725),o=v(2585),i=v(9806),e=v(9504),t=v(844),a=v(4841),l=String.fromCharCode(160),p=new RegExp(l,"g"),g=function(b){function m(S,C,k,w,x,M,E,D){var T=b.call(this)||this;return T._element=S,T._screenElement=C,T._linkifier=k,T._bufferService=w,T._coreService=x,T._mouseService=M,T._optionsService=E,T._renderService=D,T._dragScrollAmount=0,T._enabled=!0,T._workCell=new r.CellData,T._mouseDownTimeStamp=0,T._oldHasSelection=!1,T._oldSelectionStart=void 0,T._oldSelectionEnd=void 0,T._onLinuxMouseSelection=T.register(new n.EventEmitter),T._onRedrawRequest=T.register(new n.EventEmitter),T._onSelectionChange=T.register(new n.EventEmitter),T._onRequestScrollLines=T.register(new n.EventEmitter),T._mouseMoveListener=function(j){return T._onMouseMove(j)},T._mouseUpListener=function(j){return T._onMouseUp(j)},T._coreService.onUserInput(function(){T.hasSelection&&T.clearSelection()}),T._trimListener=T._bufferService.buffer.lines.onTrim(function(j){return T._onTrim(j)}),T.register(T._bufferService.buffers.onBufferActivate(function(j){return T._onBufferActivate(j)})),T.enable(),T._model=new _.SelectionModel(T._bufferService),T._activeSelectionMode=0,T}return d(m,b),Object.defineProperty(m.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){this._removeMouseDownListeners()},m.prototype.reset=function(){this.clearSelection()},m.prototype.disable=function(){this.clearSelection(),this._enabled=!1},m.prototype.enable=function(){this._enabled=!0},Object.defineProperty(m.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"hasSelection",{get:function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!S||!C||S[0]===C[0]&&S[1]===C[1])},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selectionText",{get:function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!S||!C)return"";var k=this._bufferService.buffer,w=[];if(this._activeSelectionMode===3){if(S[0]===C[0])return"";for(var x=S[1];x<=C[1];x++){var M=k.translateBufferLineToString(x,!0,S[0],C[0]);w.push(M)}}else{var E=S[1]===C[1]?C[0]:void 0;for(w.push(k.translateBufferLineToString(S[1],!0,S[0],E)),x=S[1]+1;x<=C[1]-1;x++){var D=k.lines.get(x);M=k.translateBufferLineToString(x,!0),D&&D.isWrapped?w[w.length-1]+=M:w.push(M)}S[1]!==C[1]&&(D=k.lines.get(C[1]),M=k.translateBufferLineToString(C[1],!0,0,C[0]),D&&D.isWrapped?w[w.length-1]+=M:w.push(M))}return w.map(function(T){return T.replace(p," ")}).join(y.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),m.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},m.prototype.refresh=function(S){var C=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return C._refresh()})),y.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},m.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},m.prototype._isClickInSelection=function(S){var C=this._getMouseBufferCoords(S),k=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!!(k&&w&&C)&&this._areCoordsInSelection(C,k,w)},m.prototype._areCoordsInSelection=function(S,C,k){return S[1]>C[1]&&S[1]<k[1]||C[1]===k[1]&&S[1]===C[1]&&S[0]>=C[0]&&S[0]<k[0]||C[1]<k[1]&&S[1]===k[1]&&S[0]<k[0]||C[1]<k[1]&&S[1]===C[1]&&S[0]>=C[0]},m.prototype._selectWordAtCursor=function(S,C){var k,w,x=(w=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||w===void 0?void 0:w.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=a.getRangeLength(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var M=this._getMouseBufferCoords(S);return!!M&&(this._selectWordAt(M,C),this._model.selectionEnd=void 0,!0)},m.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},m.prototype.selectLines=function(S,C){this._model.clearSelection(),S=Math.max(S,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()},m.prototype._onTrim=function(S){this._model.onTrim(S)&&this.refresh()},m.prototype._getMouseBufferCoords=function(S){var C=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C},m.prototype._getMouseEventScrollAmount=function(S){var C=i.getCoordsRelativeToElement(S,this._screenElement)[1],k=this._renderService.dimensions.canvasHeight;return C>=0&&C<=k?0:(C>k&&(C-=k),C=Math.min(Math.max(C,-50),50),(C/=50)/Math.abs(C)+Math.round(14*C))},m.prototype.shouldForceSelection=function(S){return y.isMac?S.altKey&&this._optionsService.options.macOptionClickForcesSelection:S.shiftKey},m.prototype.onMouseDown=function(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._onIncrementalClick(S):S.detail===1?this._onSingleClick(S):S.detail===2?this._onDoubleClick(S):S.detail===3&&this._onTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}},m.prototype._addMouseDownListeners=function(){var S=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return S._dragScroll()},50)},m.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},m.prototype._onIncrementalClick=function(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))},m.prototype._onSingleClick=function(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),this._model.selectionStart){this._model.selectionEnd=void 0;var C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},m.prototype._onDoubleClick=function(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)},m.prototype._onTripleClick=function(S){var C=this._getMouseBufferCoords(S);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))},m.prototype.shouldColumnSelect=function(S){return S.altKey&&!(y.isMac&&this._optionsService.options.macOptionClickForcesSelection)},m.prototype._onMouseMove=function(S){if(S.stopImmediatePropagation(),this._model.selectionStart){var C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){var w=k.lines.get(this._model.selectionEnd[1]);w&&w.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},m.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}},m.prototype._onMouseUp=function(S){var C=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&S.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var k=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){var w=e.moveToCellSequence(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(w,!0)}}}else this._fireEventIfSelectionChanged()},m.prototype._fireEventIfSelectionChanged=function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,k=!(!S||!C||S[0]===C[0]&&S[1]===C[1]);k?S&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,C,k)):this._oldHasSelection&&this._fireOnSelectionChange(S,C,k)},m.prototype._fireOnSelectionChange=function(S,C,k){this._oldSelectionStart=S,this._oldSelectionEnd=C,this._oldHasSelection=k,this._onSelectionChange.fire()},m.prototype._onBufferActivate=function(S){var C=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(function(k){return C._onTrim(k)})},m.prototype._convertViewportColToCharacterIndex=function(S,C){for(var k=C[0],w=0;C[0]>=w;w++){var x=S.loadCell(w,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:x>1&&C[0]!==w&&(k+=x-1)}return k},m.prototype.setSelection=function(S,C,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,C],this._model.selectionStartLength=k,this.refresh()},m.prototype.rightClickSelect=function(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},m.prototype._getWordAt=function(S,C,k,w){if(k===void 0&&(k=!0),w===void 0&&(w=!0),!(S[0]>=this._bufferService.cols)){var x=this._bufferService.buffer,M=x.lines.get(S[1]);if(M){var E=x.translateBufferLineToString(S[1],!1),D=this._convertViewportColToCharacterIndex(M,S),T=D,j=S[0]-D,U=0,F=0,K=0,Y=0;if(E.charAt(D)===" "){for(;D>0&&E.charAt(D-1)===" ";)D--;for(;T<E.length&&E.charAt(T+1)===" ";)T++}else{var L=S[0],A=S[0];M.getWidth(L)===0&&(U++,L--),M.getWidth(A)===2&&(F++,A++);var R=M.getString(A).length;for(R>1&&(Y+=R-1,T+=R-1);L>0&&D>0&&!this._isCharWordSeparator(M.loadCell(L-1,this._workCell));){M.loadCell(L-1,this._workCell);var H=this._workCell.getChars().length;this._workCell.getWidth()===0?(U++,L--):H>1&&(K+=H-1,D-=H-1),D--,L--}for(;A<M.length&&T+1<E.length&&!this._isCharWordSeparator(M.loadCell(A+1,this._workCell));){M.loadCell(A+1,this._workCell);var B=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,A++):B>1&&(Y+=B-1,T+=B-1),T++,A++}}T++;var N=D+j-U+K,V=Math.min(this._bufferService.cols,T-D+U+F-K-Y);if(C||E.slice(D,T).trim()!==""){if(k&&N===0&&M.getCodePoint(0)!==32){var Q=x.lines.get(S[1]-1);if(Q&&M.isWrapped&&Q.getCodePoint(this._bufferService.cols-1)!==32){var ee=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(ee){var re=this._bufferService.cols-ee.start;N-=re,V+=re}}}if(w&&N+V===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){var q=x.lines.get(S[1]+1);if(q&&q.isWrapped&&q.getCodePoint(0)!==32){var J=this._getWordAt([0,S[1]+1],!1,!1,!0);J&&(V+=J.length)}}return{start:N,length:V}}}}},m.prototype._selectWordAt=function(S,C){var k=this._getWordAt(S,C);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[k.start,S[1]],this._model.selectionStartLength=k.length}},m.prototype._selectToWordAt=function(S){var C=this._getWordAt(S,!0);if(C){for(var k=S[1];C.start<0;)C.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,k]}},m.prototype._isCharWordSeparator=function(S){return S.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(S.getChars())>=0},m.prototype._selectLineAt=function(S){var C=this._bufferService.buffer.getWrappedRangeForLine(S);this._model.selectionStart=[0,C.first],this._model.selectionEnd=[this._bufferService.cols,C.last],this._model.selectionStartLength=0},f([c(3,o.IBufferService),c(4,o.ICoreService),c(5,u.IMouseService),c(6,o.IOptionsService),c(7,u.IRenderService)],m)}(t.Disposable);s.SelectionService=g},4725:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ICharacterJoinerService=s.ISoundService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;var h=v(8343);s.ICharSizeService=h.createDecorator("CharSizeService"),s.ICoreBrowserService=h.createDecorator("CoreBrowserService"),s.IMouseService=h.createDecorator("MouseService"),s.IRenderService=h.createDecorator("RenderService"),s.ISelectionService=h.createDecorator("SelectionService"),s.ISoundService=h.createDecorator("SoundService"),s.ICharacterJoinerService=h.createDecorator("CharacterJoinerService")},357:function(P,s,v){var h=this&&this.__decorate||function(y,_,r,n){var u,o=arguments.length,i=o<3?_:n===null?n=Object.getOwnPropertyDescriptor(_,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(y,_,r,n);else for(var e=y.length-1;e>=0;e--)(u=y[e])&&(i=(o<3?u(i):o>3?u(_,r,i):u(_,r))||i);return o>3&&i&&Object.defineProperty(_,r,i),i},d=this&&this.__param||function(y,_){return function(r,n){_(r,n,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SoundService=void 0;var f=v(2585),c=function(){function y(_){this._optionsService=_}return Object.defineProperty(y,"audioContext",{get:function(){if(!y._audioContext){var _=window.AudioContext||window.webkitAudioContext;if(!_)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;y._audioContext=new _}return y._audioContext},enumerable:!1,configurable:!0}),y.prototype.playBellSound=function(){var _=y.audioContext;if(_){var r=_.createBufferSource();_.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(n){r.buffer=n,r.connect(_.destination),r.start(0)})}},y.prototype._base64ToArrayBuffer=function(_){for(var r=window.atob(_),n=r.length,u=new Uint8Array(n),o=0;o<n;o++)u[o]=r.charCodeAt(o);return u.buffer},y.prototype._removeMimeType=function(_){return _.split(",")[1]},y=h([d(0,f.IOptionsService)],y)}();s.SoundService=c},6349:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;var h=v(8460),d=function(){function f(c){this._maxLength=c,this.onDeleteEmitter=new h.EventEmitter,this.onInsertEmitter=new h.EventEmitter,this.onTrimEmitter=new h.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(c){if(this._maxLength!==c){for(var y=new Array(c),_=0;_<Math.min(c,this.length);_++)y[_]=this._array[this._getCyclicIndex(_)];this._array=y,this._maxLength=c,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(c){if(c>this._length)for(var y=this._length;y<c;y++)this._array[y]=void 0;this._length=c},enumerable:!1,configurable:!0}),f.prototype.get=function(c){return this._array[this._getCyclicIndex(c)]},f.prototype.set=function(c,y){this._array[this._getCyclicIndex(c)]=y},f.prototype.push=function(c){this._array[this._getCyclicIndex(this._length)]=c,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(c,y){for(var _=[],r=2;r<arguments.length;r++)_[r-2]=arguments[r];if(y){for(var n=c;n<this._length-y;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+y)];this._length-=y,this.onDeleteEmitter.fire({index:c,amount:y})}for(n=this._length-1;n>=c;n--)this._array[this._getCyclicIndex(n+_.length)]=this._array[this._getCyclicIndex(n)];for(n=0;n<_.length;n++)this._array[this._getCyclicIndex(c+n)]=_[n];if(_.length&&this.onInsertEmitter.fire({index:c,amount:_.length}),this._length+_.length>this._maxLength){var u=this._length+_.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=_.length},f.prototype.trimStart=function(c){c>this._length&&(c=this._length),this._startIndex+=c,this._length-=c,this.onTrimEmitter.fire(c)},f.prototype.shiftElements=function(c,y,_){if(!(y<=0)){if(c<0||c>=this._length)throw new Error("start argument out of range");if(c+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(var r=y-1;r>=0;r--)this.set(c+r+_,this.get(c+r));var n=c+y+_-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(r=0;r<y;r++)this.set(c+r+_,this.get(c+r))}},f.prototype._getCyclicIndex=function(c){return(this._startIndex+c)%this._maxLength},f}();s.CircularList=d},1439:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function v(h,d){if(d===void 0&&(d=5),typeof h!="object")return h;var f=Array.isArray(h)?[]:{};for(var c in h)f[c]=d<=1?h[c]:h[c]&&v(h[c],d-1);return f}},8969:function(P,s,v){var h,d=this&&this.__extends||(h=function(S,C){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,w){k.__proto__=w}||function(k,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(k[x]=w[x])})(S,C)},function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function k(){this.constructor=S}h(S,C),S.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)});Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;var f=v(844),c=v(2585),y=v(4348),_=v(7866),r=v(744),n=v(7302),u=v(6975),o=v(8460),i=v(1753),e=v(3730),t=v(1480),a=v(7994),l=v(9282),p=v(5435),g=v(5981),b=!1,m=function(S){function C(k){var w=S.call(this)||this;return w._onBinary=new o.EventEmitter,w._onData=new o.EventEmitter,w._onLineFeed=new o.EventEmitter,w._onResize=new o.EventEmitter,w._onScroll=new o.EventEmitter,w._instantiationService=new y.InstantiationService,w.optionsService=new n.OptionsService(k),w._instantiationService.setService(c.IOptionsService,w.optionsService),w._bufferService=w.register(w._instantiationService.createInstance(r.BufferService)),w._instantiationService.setService(c.IBufferService,w._bufferService),w._logService=w._instantiationService.createInstance(_.LogService),w._instantiationService.setService(c.ILogService,w._logService),w.coreService=w.register(w._instantiationService.createInstance(u.CoreService,function(){return w.scrollToBottom()})),w._instantiationService.setService(c.ICoreService,w.coreService),w.coreMouseService=w._instantiationService.createInstance(i.CoreMouseService),w._instantiationService.setService(c.ICoreMouseService,w.coreMouseService),w._dirtyRowService=w._instantiationService.createInstance(e.DirtyRowService),w._instantiationService.setService(c.IDirtyRowService,w._dirtyRowService),w.unicodeService=w._instantiationService.createInstance(t.UnicodeService),w._instantiationService.setService(c.IUnicodeService,w.unicodeService),w._charsetService=w._instantiationService.createInstance(a.CharsetService),w._instantiationService.setService(c.ICharsetService,w._charsetService),w._inputHandler=new p.InputHandler(w._bufferService,w._charsetService,w.coreService,w._dirtyRowService,w._logService,w.optionsService,w.coreMouseService,w.unicodeService),w.register(o.forwardEvent(w._inputHandler.onLineFeed,w._onLineFeed)),w.register(w._inputHandler),w.register(o.forwardEvent(w._bufferService.onResize,w._onResize)),w.register(o.forwardEvent(w.coreService.onData,w._onData)),w.register(o.forwardEvent(w.coreService.onBinary,w._onBinary)),w.register(w.optionsService.onOptionChange(function(x){return w._updateOptions(x)})),w.register(w._bufferService.onScroll(function(x){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w.register(w._inputHandler.onScroll(function(x){w._onScroll.fire({position:w._bufferService.buffer.ydisp,source:0}),w._dirtyRowService.markRangeDirty(w._bufferService.buffer.scrollTop,w._bufferService.buffer.scrollBottom)})),w._writeBuffer=new g.WriteBuffer(function(x,M){return w._inputHandler.parse(x,M)}),w}return d(C,S),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var k=this;return this._onScrollApi||(this._onScrollApi=new o.EventEmitter,this.register(this._onScroll.event(function(w){var x;(x=k._onScrollApi)===null||x===void 0||x.fire(w.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var k;this._isDisposed||(S.prototype.dispose.call(this),(k=this._windowsMode)===null||k===void 0||k.dispose(),this._windowsMode=void 0)},C.prototype.write=function(k,w){this._writeBuffer.write(k,w)},C.prototype.writeSync=function(k,w){this._logService.logLevel<=c.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(k,w)},C.prototype.resize=function(k,w){isNaN(k)||isNaN(w)||(k=Math.max(k,r.MINIMUM_COLS),w=Math.max(w,r.MINIMUM_ROWS),this._bufferService.resize(k,w))},C.prototype.scroll=function(k,w){w===void 0&&(w=!1),this._bufferService.scroll(k,w)},C.prototype.scrollLines=function(k,w,x){this._bufferService.scrollLines(k,w,x)},C.prototype.scrollPages=function(k){this._bufferService.scrollPages(k)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(k){this._bufferService.scrollToLine(k)},C.prototype.registerEscHandler=function(k,w){return this._inputHandler.registerEscHandler(k,w)},C.prototype.registerDcsHandler=function(k,w){return this._inputHandler.registerDcsHandler(k,w)},C.prototype.registerCsiHandler=function(k,w){return this._inputHandler.registerCsiHandler(k,w)},C.prototype.registerOscHandler=function(k,w){return this._inputHandler.registerOscHandler(k,w)},C.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},C.prototype._updateOptions=function(k){var w;switch(k){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((w=this._windowsMode)===null||w===void 0||w.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var k=this;if(!this._windowsMode){var w=[];w.push(this.onLineFeed(l.updateWindowsModeWrappedState.bind(null,this._bufferService))),w.push(this.registerCsiHandler({final:"H"},function(){return l.updateWindowsModeWrappedState(k._bufferService),!1})),this._windowsMode={dispose:function(){for(var x=0,M=w;x<M.length;x++)M[x].dispose()}}}},C}(f.Disposable);s.CoreTerminal=m},8460:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0;var v=function(){function h(){this._listeners=[],this._disposed=!1}return Object.defineProperty(h.prototype,"event",{get:function(){var d=this;return this._event||(this._event=function(f){return d._listeners.push(f),{dispose:function(){if(!d._disposed){for(var c=0;c<d._listeners.length;c++)if(d._listeners[c]===f)return void d._listeners.splice(c,1)}}}}),this._event},enumerable:!1,configurable:!0}),h.prototype.fire=function(d,f){for(var c=[],y=0;y<this._listeners.length;y++)c.push(this._listeners[y]);for(y=0;y<c.length;y++)c[y].call(void 0,d,f)},h.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},h}();s.EventEmitter=v,s.forwardEvent=function(h,d){return h(function(f){return d.fire(f)})}},5435:function(P,s,v){var h,d=this&&this.__extends||(h=function(w,x){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,E){M.__proto__=E}||function(M,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(M[D]=E[D])})(w,x)},function(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function M(){this.constructor=w}h(w,x),w.prototype=x===null?Object.create(x):(M.prototype=x.prototype,new M)});Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;var f,c=v(2584),y=v(7116),_=v(2015),r=v(844),n=v(8273),u=v(482),o=v(8437),i=v(8460),e=v(643),t=v(511),a=v(3734),l=v(2585),p=v(6242),g=v(6351),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},m=131072;function S(w,x){if(w>24)return x.setWinLines||!1;switch(w){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}(function(w){w[w.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",w[w.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=s.WindowsOptionsReportType||(s.WindowsOptionsReportType={}));var C=function(){function w(x,M,E,D){this._bufferService=x,this._coreService=M,this._logService=E,this._optionsService=D,this._data=new Uint32Array(0)}return w.prototype.hook=function(x){this._data=new Uint32Array(0)},w.prototype.put=function(x,M,E){this._data=n.concat(this._data,x.subarray(M,E))},w.prototype.unhook=function(x){if(!x)return this._data=new Uint32Array(0),!0;var M=u.utf32ToString(this._data);switch(this._data=new Uint32Array(0),M){case'"q':this._coreService.triggerDataEvent(c.C0.ESC+'P1$r0"q'+c.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(c.C0.ESC+'P1$r61;1"p'+c.C0.ESC+"\\");break;case"r":var E=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(c.C0.ESC+"P1$r"+E+c.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(c.C0.ESC+"P1$r0m"+c.C0.ESC+"\\");break;case" q":var D={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];D-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(c.C0.ESC+"P1$r"+D+" q"+c.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",M),this._coreService.triggerDataEvent(c.C0.ESC+"P0$r"+c.C0.ESC+"\\")}return!0},w}(),k=function(w){function x(M,E,D,T,j,U,F,K,Y){Y===void 0&&(Y=new _.EscapeSequenceParser);var L=w.call(this)||this;L._bufferService=M,L._charsetService=E,L._coreService=D,L._dirtyRowService=T,L._logService=j,L._optionsService=U,L._coreMouseService=F,L._unicodeService=K,L._parser=Y,L._parseBuffer=new Uint32Array(4096),L._stringDecoder=new u.StringToUtf32,L._utf8Decoder=new u.Utf8ToUtf32,L._workCell=new t.CellData,L._windowTitle="",L._iconName="",L._windowTitleStack=[],L._iconNameStack=[],L._curAttrData=o.DEFAULT_ATTR_DATA.clone(),L._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),L._onRequestBell=new i.EventEmitter,L._onRequestRefreshRows=new i.EventEmitter,L._onRequestReset=new i.EventEmitter,L._onRequestSyncScrollBar=new i.EventEmitter,L._onRequestWindowsOptionsReport=new i.EventEmitter,L._onA11yChar=new i.EventEmitter,L._onA11yTab=new i.EventEmitter,L._onCursorMove=new i.EventEmitter,L._onLineFeed=new i.EventEmitter,L._onScroll=new i.EventEmitter,L._onTitleChange=new i.EventEmitter,L._onAnsiColorChange=new i.EventEmitter,L._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},L.register(L._parser),L._activeBuffer=L._bufferService.buffer,L.register(L._bufferService.buffers.onBufferActivate(function(B){return L._activeBuffer=B.activeBuffer})),L._parser.setCsiHandlerFallback(function(B,N){L._logService.debug("Unknown CSI code: ",{identifier:L._parser.identToString(B),params:N.toArray()})}),L._parser.setEscHandlerFallback(function(B){L._logService.debug("Unknown ESC code: ",{identifier:L._parser.identToString(B)})}),L._parser.setExecuteHandlerFallback(function(B){L._logService.debug("Unknown EXECUTE code: ",{code:B})}),L._parser.setOscHandlerFallback(function(B,N,V){L._logService.debug("Unknown OSC code: ",{identifier:B,action:N,data:V})}),L._parser.setDcsHandlerFallback(function(B,N,V){N==="HOOK"&&(V=V.toArray()),L._logService.debug("Unknown DCS code: ",{identifier:L._parser.identToString(B),action:N,payload:V})}),L._parser.setPrintHandler(function(B,N,V){return L.print(B,N,V)}),L._parser.registerCsiHandler({final:"@"},function(B){return L.insertChars(B)}),L._parser.registerCsiHandler({intermediates:" ",final:"@"},function(B){return L.scrollLeft(B)}),L._parser.registerCsiHandler({final:"A"},function(B){return L.cursorUp(B)}),L._parser.registerCsiHandler({intermediates:" ",final:"A"},function(B){return L.scrollRight(B)}),L._parser.registerCsiHandler({final:"B"},function(B){return L.cursorDown(B)}),L._parser.registerCsiHandler({final:"C"},function(B){return L.cursorForward(B)}),L._parser.registerCsiHandler({final:"D"},function(B){return L.cursorBackward(B)}),L._parser.registerCsiHandler({final:"E"},function(B){return L.cursorNextLine(B)}),L._parser.registerCsiHandler({final:"F"},function(B){return L.cursorPrecedingLine(B)}),L._parser.registerCsiHandler({final:"G"},function(B){return L.cursorCharAbsolute(B)}),L._parser.registerCsiHandler({final:"H"},function(B){return L.cursorPosition(B)}),L._parser.registerCsiHandler({final:"I"},function(B){return L.cursorForwardTab(B)}),L._parser.registerCsiHandler({final:"J"},function(B){return L.eraseInDisplay(B)}),L._parser.registerCsiHandler({prefix:"?",final:"J"},function(B){return L.eraseInDisplay(B)}),L._parser.registerCsiHandler({final:"K"},function(B){return L.eraseInLine(B)}),L._parser.registerCsiHandler({prefix:"?",final:"K"},function(B){return L.eraseInLine(B)}),L._parser.registerCsiHandler({final:"L"},function(B){return L.insertLines(B)}),L._parser.registerCsiHandler({final:"M"},function(B){return L.deleteLines(B)}),L._parser.registerCsiHandler({final:"P"},function(B){return L.deleteChars(B)}),L._parser.registerCsiHandler({final:"S"},function(B){return L.scrollUp(B)}),L._parser.registerCsiHandler({final:"T"},function(B){return L.scrollDown(B)}),L._parser.registerCsiHandler({final:"X"},function(B){return L.eraseChars(B)}),L._parser.registerCsiHandler({final:"Z"},function(B){return L.cursorBackwardTab(B)}),L._parser.registerCsiHandler({final:"`"},function(B){return L.charPosAbsolute(B)}),L._parser.registerCsiHandler({final:"a"},function(B){return L.hPositionRelative(B)}),L._parser.registerCsiHandler({final:"b"},function(B){return L.repeatPrecedingCharacter(B)}),L._parser.registerCsiHandler({final:"c"},function(B){return L.sendDeviceAttributesPrimary(B)}),L._parser.registerCsiHandler({prefix:">",final:"c"},function(B){return L.sendDeviceAttributesSecondary(B)}),L._parser.registerCsiHandler({final:"d"},function(B){return L.linePosAbsolute(B)}),L._parser.registerCsiHandler({final:"e"},function(B){return L.vPositionRelative(B)}),L._parser.registerCsiHandler({final:"f"},function(B){return L.hVPosition(B)}),L._parser.registerCsiHandler({final:"g"},function(B){return L.tabClear(B)}),L._parser.registerCsiHandler({final:"h"},function(B){return L.setMode(B)}),L._parser.registerCsiHandler({prefix:"?",final:"h"},function(B){return L.setModePrivate(B)}),L._parser.registerCsiHandler({final:"l"},function(B){return L.resetMode(B)}),L._parser.registerCsiHandler({prefix:"?",final:"l"},function(B){return L.resetModePrivate(B)}),L._parser.registerCsiHandler({final:"m"},function(B){return L.charAttributes(B)}),L._parser.registerCsiHandler({final:"n"},function(B){return L.deviceStatus(B)}),L._parser.registerCsiHandler({prefix:"?",final:"n"},function(B){return L.deviceStatusPrivate(B)}),L._parser.registerCsiHandler({intermediates:"!",final:"p"},function(B){return L.softReset(B)}),L._parser.registerCsiHandler({intermediates:" ",final:"q"},function(B){return L.setCursorStyle(B)}),L._parser.registerCsiHandler({final:"r"},function(B){return L.setScrollRegion(B)}),L._parser.registerCsiHandler({final:"s"},function(B){return L.saveCursor(B)}),L._parser.registerCsiHandler({final:"t"},function(B){return L.windowOptions(B)}),L._parser.registerCsiHandler({final:"u"},function(B){return L.restoreCursor(B)}),L._parser.registerCsiHandler({intermediates:"'",final:"}"},function(B){return L.insertColumns(B)}),L._parser.registerCsiHandler({intermediates:"'",final:"~"},function(B){return L.deleteColumns(B)}),L._parser.setExecuteHandler(c.C0.BEL,function(){return L.bell()}),L._parser.setExecuteHandler(c.C0.LF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(c.C0.VT,function(){return L.lineFeed()}),L._parser.setExecuteHandler(c.C0.FF,function(){return L.lineFeed()}),L._parser.setExecuteHandler(c.C0.CR,function(){return L.carriageReturn()}),L._parser.setExecuteHandler(c.C0.BS,function(){return L.backspace()}),L._parser.setExecuteHandler(c.C0.HT,function(){return L.tab()}),L._parser.setExecuteHandler(c.C0.SO,function(){return L.shiftOut()}),L._parser.setExecuteHandler(c.C0.SI,function(){return L.shiftIn()}),L._parser.setExecuteHandler(c.C1.IND,function(){return L.index()}),L._parser.setExecuteHandler(c.C1.NEL,function(){return L.nextLine()}),L._parser.setExecuteHandler(c.C1.HTS,function(){return L.tabSet()}),L._parser.registerOscHandler(0,new p.OscHandler(function(B){return L.setTitle(B),L.setIconName(B),!0})),L._parser.registerOscHandler(1,new p.OscHandler(function(B){return L.setIconName(B)})),L._parser.registerOscHandler(2,new p.OscHandler(function(B){return L.setTitle(B)})),L._parser.registerOscHandler(4,new p.OscHandler(function(B){return L.setAnsiColor(B)})),L._parser.registerEscHandler({final:"7"},function(){return L.saveCursor()}),L._parser.registerEscHandler({final:"8"},function(){return L.restoreCursor()}),L._parser.registerEscHandler({final:"D"},function(){return L.index()}),L._parser.registerEscHandler({final:"E"},function(){return L.nextLine()}),L._parser.registerEscHandler({final:"H"},function(){return L.tabSet()}),L._parser.registerEscHandler({final:"M"},function(){return L.reverseIndex()}),L._parser.registerEscHandler({final:"="},function(){return L.keypadApplicationMode()}),L._parser.registerEscHandler({final:">"},function(){return L.keypadNumericMode()}),L._parser.registerEscHandler({final:"c"},function(){return L.fullReset()}),L._parser.registerEscHandler({final:"n"},function(){return L.setgLevel(2)}),L._parser.registerEscHandler({final:"o"},function(){return L.setgLevel(3)}),L._parser.registerEscHandler({final:"|"},function(){return L.setgLevel(3)}),L._parser.registerEscHandler({final:"}"},function(){return L.setgLevel(2)}),L._parser.registerEscHandler({final:"~"},function(){return L.setgLevel(1)}),L._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return L.selectDefaultCharset()}),L._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return L.selectDefaultCharset()});var A=function(B){R._parser.registerEscHandler({intermediates:"(",final:B},function(){return L.selectCharset("("+B)}),R._parser.registerEscHandler({intermediates:")",final:B},function(){return L.selectCharset(")"+B)}),R._parser.registerEscHandler({intermediates:"*",final:B},function(){return L.selectCharset("*"+B)}),R._parser.registerEscHandler({intermediates:"+",final:B},function(){return L.selectCharset("+"+B)}),R._parser.registerEscHandler({intermediates:"-",final:B},function(){return L.selectCharset("-"+B)}),R._parser.registerEscHandler({intermediates:".",final:B},function(){return L.selectCharset("."+B)}),R._parser.registerEscHandler({intermediates:"/",final:B},function(){return L.selectCharset("/"+B)})},R=this;for(var H in y.CHARSETS)A(H);return L._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return L.screenAlignmentPattern()}),L._parser.setErrorHandler(function(B){return L._logService.error("Parsing error: ",B),B}),L._parser.registerDcsHandler({intermediates:"$",final:"q"},new C(L._bufferService,L._coreService,L._logService,L._optionsService)),L}return d(x,w),Object.defineProperty(x.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),x.prototype.dispose=function(){w.prototype.dispose.call(this)},x.prototype._preserveStack=function(M,E,D,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=E,this._parseStack.decodedLength=D,this._parseStack.position=T},x.prototype._logSlowResolvingAsync=function(M){this._logService.logLevel<=l.LogLevelEnum.WARN&&Promise.race([M,new Promise(function(E,D){return setTimeout(function(){return D("#SLOW_TIMEOUT")},5e3)})]).catch(function(E){if(E!=="#SLOW_TIMEOUT")throw E;console.warn("async parser handler taking longer than 5000 ms")})},x.prototype.parse=function(M,E){var D,T=this._activeBuffer.x,j=this._activeBuffer.y,U=0,F=this._parseStack.paused;if(F){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,E))return this._logSlowResolvingAsync(D),D;T=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>m&&(U=this._parseStack.position+m)}if(this._logService.debug("parsing data",M),this._parseBuffer.length<M.length&&this._parseBuffer.length<m&&(this._parseBuffer=new Uint32Array(Math.min(M.length,m))),F||this._dirtyRowService.clearRange(),M.length>m)for(var K=U;K<M.length;K+=m){var Y=K+m<M.length?K+m:M.length,L=typeof M=="string"?this._stringDecoder.decode(M.substring(K,Y),this._parseBuffer):this._utf8Decoder.decode(M.subarray(K,Y),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,L))return this._preserveStack(T,j,L,K),this._logSlowResolvingAsync(D),D}else if(!F&&(L=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer),D=this._parser.parse(this._parseBuffer,L)))return this._preserveStack(T,j,L,0),this._logSlowResolvingAsync(D),D;this._activeBuffer.x===T&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},x.prototype.print=function(M,E,D){var T,j,U=this._charsetService.charset,F=this._optionsService.options.screenReaderMode,K=this._bufferService.cols,Y=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,A=this._curAttrData,R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&D-E>0&&R.getWidth(this._activeBuffer.x-1)===2&&R.setCellFromCodePoint(this._activeBuffer.x-1,0,1,A.fg,A.bg,A.extended);for(var H=E;H<D;++H){if(T=M[H],j=this._unicodeService.wcwidth(T),T<127&&U){var B=U[String.fromCharCode(T)];B&&(T=B.charCodeAt(0))}if(F&&this._onA11yChar.fire(u.stringFromCodePoint(T)),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=K){if(Y){for(;this._activeBuffer.x<K;)R.setCellFromCodePoint(this._activeBuffer.x++,0,1,A.fg,A.bg,A.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,j===2)continue}if(L&&(R.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(A),A),R.getWidth(K-1)===2&&R.setCellFromCodePoint(K-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,A.fg,A.bg,A.extended)),R.setCellFromCodePoint(this._activeBuffer.x++,T,j,A.fg,A.bg,A.extended),j>0)for(;--j;)R.setCellFromCodePoint(this._activeBuffer.x++,0,0,A.fg,A.bg,A.extended)}else R.getWidth(this._activeBuffer.x-1)?R.addCodepointToCell(this._activeBuffer.x-1,T):R.addCodepointToCell(this._activeBuffer.x-2,T)}D-E>0&&(R.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&D-E>0&&R.getWidth(this._activeBuffer.x)===0&&!R.hasContent(this._activeBuffer.x)&&R.setCellFromCodePoint(this._activeBuffer.x,0,1,A.fg,A.bg,A.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},x.prototype.registerCsiHandler=function(M,E){var D=this;return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,E):this._parser.registerCsiHandler(M,function(T){return!S(T.params[0],D._optionsService.options.windowOptions)||E(T)})},x.prototype.registerDcsHandler=function(M,E){return this._parser.registerDcsHandler(M,new g.DcsHandler(E))},x.prototype.registerEscHandler=function(M,E){return this._parser.registerEscHandler(M,E)},x.prototype.registerOscHandler=function(M,E){return this._parser.registerOscHandler(M,new p.OscHandler(E))},x.prototype.bell=function(){return this._onRequestBell.fire(),!0},x.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},x.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},x.prototype.backspace=function(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||M===void 0?void 0:M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);E.hasWidth(this._activeBuffer.x)&&!E.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},x.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0},x.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},x.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},x.prototype._restrictCursor=function(M){M===void 0&&(M=this._bufferService.cols-1),this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},x.prototype._setCursor=function(M,E){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+E):(this._activeBuffer.x=M,this._activeBuffer.y=E),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},x.prototype._moveCursor=function(M,E){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+E)},x.prototype.cursorUp=function(M){var E=this._activeBuffer.y-this._activeBuffer.scrollTop;return E>=0?this._moveCursor(0,-Math.min(E,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0},x.prototype.cursorDown=function(M){var E=this._activeBuffer.scrollBottom-this._activeBuffer.y;return E>=0?this._moveCursor(0,Math.min(E,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0},x.prototype.cursorForward=function(M){return this._moveCursor(M.params[0]||1,0),!0},x.prototype.cursorBackward=function(M){return this._moveCursor(-(M.params[0]||1),0),!0},x.prototype.cursorNextLine=function(M){return this.cursorDown(M),this._activeBuffer.x=0,!0},x.prototype.cursorPrecedingLine=function(M){return this.cursorUp(M),this._activeBuffer.x=0,!0},x.prototype.cursorCharAbsolute=function(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0},x.prototype.cursorPosition=function(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0},x.prototype.charPosAbsolute=function(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0},x.prototype.hPositionRelative=function(M){return this._moveCursor(M.params[0]||1,0),!0},x.prototype.linePosAbsolute=function(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0},x.prototype.vPositionRelative=function(M){return this._moveCursor(0,M.params[0]||1),!0},x.prototype.hVPosition=function(M){return this.cursorPosition(M),!0},x.prototype.tabClear=function(M){var E=M.params[0];return E===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:E===3&&(this._activeBuffer.tabs={}),!0},x.prototype.cursorForwardTab=function(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var E=M.params[0]||1;E--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},x.prototype.cursorBackwardTab=function(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var E=M.params[0]||1;E--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},x.prototype._eraseInBufferLine=function(M,E,D,T){T===void 0&&(T=!1);var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);j.replaceCells(E,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T&&(j.isWrapped=!1)},x.prototype._resetBufferLine=function(M){var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);E.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),E.isWrapped=!1},x.prototype.eraseInDisplay=function(M){var E;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(E=this._activeBuffer.y,this._dirtyRowService.markDirty(E),this._eraseInBufferLine(E++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);E<this._bufferService.rows;E++)this._resetBufferLine(E);this._dirtyRowService.markDirty(E);break;case 1:for(E=this._activeBuffer.y,this._dirtyRowService.markDirty(E),this._eraseInBufferLine(E,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(E+1).isWrapped=!1);E--;)this._resetBufferLine(E);this._dirtyRowService.markDirty(0);break;case 2:for(E=this._bufferService.rows,this._dirtyRowService.markDirty(E-1);E--;)this._resetBufferLine(E);this._dirtyRowService.markDirty(0);break;case 3:var D=this._activeBuffer.lines.length-this._bufferService.rows;D>0&&(this._activeBuffer.lines.trimStart(D),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-D,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-D,0),this._onScroll.fire(0))}return!0},x.prototype.eraseInLine=function(M){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},x.prototype.insertLines=function(M){this._restrictCursor();var E=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var D=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;E--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},x.prototype.deleteLines=function(M){this._restrictCursor();var E=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var D,T=this._activeBuffer.ybase+this._activeBuffer.y;for(D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,D=this._bufferService.rows-1+this._activeBuffer.ybase-D;E--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},x.prototype.insertChars=function(M){this._restrictCursor();var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},x.prototype.deleteChars=function(M){this._restrictCursor();var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},x.prototype.scrollUp=function(M){for(var E=M.params[0]||1;E--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.scrollDown=function(M){for(var E=M.params[0]||1;E--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.scrollLeft=function(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=M.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(0,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.scrollRight=function(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=M.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(0,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.insertColumns=function(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=M.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(this._activeBuffer.x,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.deleteColumns=function(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=M.params[0]||1,D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(this._activeBuffer.x,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},x.prototype.eraseChars=function(M){this._restrictCursor();var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},x.prototype.repeatPrecedingCharacter=function(M){if(!this._parser.precedingCodepoint)return!0;for(var E=M.params[0]||1,D=new Uint32Array(E),T=0;T<E;++T)D[T]=this._parser.precedingCodepoint;return this.print(D,0,D.length),!0},x.prototype.sendDeviceAttributesPrimary=function(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0},x.prototype.sendDeviceAttributesSecondary=function(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0},x.prototype._is=function(M){return(this._optionsService.options.termName+"").indexOf(M)===0},x.prototype.setMode=function(M){for(var E=0;E<M.length;E++)switch(M.params[E]){case 4:this._coreService.modes.insertMode=!0}return!0},x.prototype.setModePrivate=function(M){for(var E=0;E<M.length;E++)switch(M.params[E]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},x.prototype.resetMode=function(M){for(var E=0;E<M.length;E++)switch(M.params[E]){case 4:this._coreService.modes.insertMode=!1}return!0},x.prototype.resetModePrivate=function(M){for(var E=0;E<M.length;E++)switch(M.params[E]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[E]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},x.prototype._updateAttrColor=function(M,E,D,T,j){return E===2?(M|=50331648,M&=-16777216,M|=a.AttributeData.fromColorRGB([D,T,j])):E===5&&(M&=-50331904,M|=33554432|255&D),M},x.prototype._extractColor=function(M,E,D){var T=[0,0,-1,0,0,0],j=0,U=0;do{if(T[U+j]=M.params[E+U],M.hasSubParams(E+U)){var F=M.getSubParams(E+U),K=0;do T[1]===5&&(j=1),T[U+K+1+j]=F[K];while(++K<F.length&&K+U+1+j<T.length);break}if(T[1]===5&&U+j>=2||T[1]===2&&U+j>=5)break;T[1]&&(j=1)}while(++U+E<M.length&&U+j<T.length);for(K=2;K<T.length;++K)T[K]===-1&&(T[K]=0);switch(T[0]){case 38:D.fg=this._updateAttrColor(D.fg,T[1],T[3],T[4],T[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,T[1],T[3],T[4],T[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,T[1],T[3],T[4],T[5])}return U},x.prototype._processUnderline=function(M,E){E.extended=E.extended.clone(),(!~M||M>5)&&(M=1),E.extended.underlineStyle=M,E.fg|=268435456,M===0&&(E.fg&=-268435457),E.updateExtended()},x.prototype.charAttributes=function(M){if(M.length===1&&M.params[0]===0)return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg,!0;for(var E,D=M.length,T=this._curAttrData,j=0;j<D;j++)(E=M.params[j])>=30&&E<=37?(T.fg&=-50331904,T.fg|=16777216|E-30):E>=40&&E<=47?(T.bg&=-50331904,T.bg|=16777216|E-40):E>=90&&E<=97?(T.fg&=-50331904,T.fg|=16777224|E-90):E>=100&&E<=107?(T.bg&=-50331904,T.bg|=16777224|E-100):E===0?(T.fg=o.DEFAULT_ATTR_DATA.fg,T.bg=o.DEFAULT_ATTR_DATA.bg):E===1?T.fg|=134217728:E===3?T.bg|=67108864:E===4?(T.fg|=268435456,this._processUnderline(M.hasSubParams(j)?M.getSubParams(j)[0]:1,T)):E===5?T.fg|=536870912:E===7?T.fg|=67108864:E===8?T.fg|=1073741824:E===9?T.fg|=2147483648:E===2?T.bg|=134217728:E===21?this._processUnderline(2,T):E===22?(T.fg&=-134217729,T.bg&=-134217729):E===23?T.bg&=-67108865:E===24?T.fg&=-268435457:E===25?T.fg&=-536870913:E===27?T.fg&=-67108865:E===28?T.fg&=-1073741825:E===29?T.fg&=2147483647:E===39?(T.fg&=-67108864,T.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):E===49?(T.bg&=-67108864,T.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):E===38||E===48||E===58?j+=this._extractColor(M,j,T):E===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):E===100?(T.fg&=-67108864,T.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",E);return!0},x.prototype.deviceStatus=function(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(c.C0.ESC+"[0n");break;case 6:var E=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(c.C0.ESC+"["+E+";"+D+"R")}return!0},x.prototype.deviceStatusPrivate=function(M){switch(M.params[0]){case 6:var E=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(c.C0.ESC+"[?"+E+";"+D+"R")}return!0},x.prototype.softReset=function(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},x.prototype.setCursorStyle=function(M){var E=M.params[0]||1;switch(E){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var D=E%2==1;return this._optionsService.options.cursorBlink=D,!0},x.prototype.setScrollRegion=function(M){var E,D=M.params[0]||1;return(M.length<2||(E=M.params[1])>this._bufferService.rows||E===0)&&(E=this._bufferService.rows),E>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=E-1,this._setCursor(0,0)),!0},x.prototype.windowOptions=function(M){if(!S(M.params[0],this._optionsService.options.windowOptions))return!0;var E=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:E!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(c.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:E!==0&&E!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),E!==0&&E!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:E!==0&&E!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),E!==0&&E!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},x.prototype.saveCursor=function(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},x.prototype.restoreCursor=function(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},x.prototype.setTitle=function(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0},x.prototype.setIconName=function(M){return this._iconName=M,!0},x.prototype._parseAnsiColorChange=function(M){for(var E,D={colors:[]},T=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;(E=T.exec(M))!==null;)D.colors.push({colorIndex:parseInt(E[1]),red:parseInt(E[2],16),green:parseInt(E[3],16),blue:parseInt(E[4],16)});return D.colors.length===0?null:D},x.prototype.setAnsiColor=function(M){var E=this._parseAnsiColorChange(M);return E?this._onAnsiColorChange.fire(E):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+M),!0},x.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},x.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},x.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},x.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0},x.prototype.selectCharset=function(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(b[M[0]],y.CHARSETS[M[1]]||y.DEFAULT_CHARSET),!0)},x.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},x.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},x.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},x.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},x.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},x.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},x.prototype.setgLevel=function(M){return this._charsetService.setgLevel(M),!0},x.prototype.screenAlignmentPattern=function(){var M=new t.CellData;M.content=1<<22|"E".charCodeAt(0),M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(var E=0;E<this._bufferService.rows;++E){var D=this._activeBuffer.ybase+this._activeBuffer.y+E,T=this._activeBuffer.lines.get(D);T&&(T.fill(M),T.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},x}(r.Disposable);s.InputHandler=k},844:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.Disposable=void 0;var v=function(){function d(){this._disposables=[],this._isDisposed=!1}return d.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,c=this._disposables;f<c.length;f++)c[f].dispose();this._disposables.length=0},d.prototype.register=function(f){return this._disposables.push(f),f},d.prototype.unregister=function(f){var c=this._disposables.indexOf(f);c!==-1&&this._disposables.splice(c,1)},d}();function h(d){for(var f=0,c=d;f<c.length;f++)c[f].dispose();d.length=0}s.Disposable=v,s.disposeArray=h,s.getDisposeArrayDisposable=function(d){return{dispose:function(){return h(d)}}}},6114:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.isSafari=s.isFirefox=void 0;var v=typeof navigator=="undefined",h=v?"node":navigator.userAgent,d=v?"node":navigator.platform;s.isFirefox=h.includes("Firefox"),s.isSafari=/^((?!chrome|android).)*safari/i.test(h),s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0},8273:(P,s)=>{function v(h,d,f,c){if(f===void 0&&(f=0),c===void 0&&(c=h.length),f>=h.length)return h;f=(h.length+f)%h.length,c=c>=h.length?h.length:(h.length+c)%h.length;for(var y=f;y<c;++y)h[y]=d;return h}Object.defineProperty(s,"__esModule",{value:!0}),s.concat=s.fillFallback=s.fill=void 0,s.fill=function(h,d,f,c){return h.fill?h.fill(d,f,c):v(h,d,f,c)},s.fillFallback=v,s.concat=function(h,d){var f=new h.constructor(h.length+d.length);return f.set(h),f.set(d,h.length),f}},9282:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;var h=v(643);s.updateWindowsModeWrappedState=function(d){var f=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),c=f==null?void 0:f.get(d.cols-1),y=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);y&&c&&(y.isWrapped=c[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&c[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;var v=function(){function d(){this.fg=0,this.bg=0,this.extended=new h}return d.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},d.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},d.prototype.clone=function(){var f=new d;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},d.prototype.isInverse=function(){return 67108864&this.fg},d.prototype.isBold=function(){return 134217728&this.fg},d.prototype.isUnderline=function(){return 268435456&this.fg},d.prototype.isBlink=function(){return 536870912&this.fg},d.prototype.isInvisible=function(){return 1073741824&this.fg},d.prototype.isItalic=function(){return 67108864&this.bg},d.prototype.isDim=function(){return 134217728&this.bg},d.prototype.isStrikethrough=function(){return 2147483648&this.fg},d.prototype.getFgColorMode=function(){return 50331648&this.fg},d.prototype.getBgColorMode=function(){return 50331648&this.bg},d.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},d.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},d.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},d.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},d.prototype.isFgDefault=function(){return(50331648&this.fg)==0},d.prototype.isBgDefault=function(){return(50331648&this.bg)==0},d.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},d.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},d.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},d.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},d.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},d.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},d.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},d.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},d.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},d.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},d.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},d}();s.AttributeData=v;var h=function(){function d(f,c){f===void 0&&(f=0),c===void 0&&(c=-1),this.underlineStyle=f,this.underlineColor=c}return d.prototype.clone=function(){return new d(this.underlineStyle,this.underlineColor)},d.prototype.isEmpty=function(){return this.underlineStyle===0},d}();s.ExtendedAttrs=h},9092:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferStringIterator=s.Buffer=s.MAX_BUFFER_SIZE=void 0;var h=v(6349),d=v(8437),f=v(511),c=v(643),y=v(4634),_=v(4863),r=v(7116),n=v(3734);s.MAX_BUFFER_SIZE=4294967295;var u=function(){function i(e,t,a){this._hasScrollback=e,this._optionsService=t,this._bufferService=a,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return i.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell},i.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell},i.prototype.getBlankLine=function(e,t){return new d.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(i.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),i.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var t=e+this._optionsService.options.scrollback;return t>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:t},i.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=d.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},i.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},i.prototype.resize=function(e,t){var a=this.getNullCell(d.DEFAULT_ATTR_DATA),l=this._getCorrectBufferLength(t);if(l>this.lines.maxLength&&(this.lines.maxLength=l),this.lines.length>0){if(this._cols<e)for(var p=0;p<this.lines.length;p++)this.lines.get(p).resize(e,a);var g=0;if(this._rows<t)for(var b=this._rows;b<t;b++)this.lines.length<t+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new d.BufferLine(e,a)):this.ybase>0&&this.lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(e,a)));else for(b=this._rows;b>t;b--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(l<this.lines.maxLength){var m=this.lines.length-l;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=l}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),g&&(this.y+=g),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(p=0;p<this.lines.length;p++)this.lines.get(p).resize(e,a);this._cols=e,this._rows=t},Object.defineProperty(i.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),i.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},i.prototype._reflowLarger=function(e,t){var a=y.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(a.length>0){var l=y.reflowLargerCreateNewLayout(this.lines,a);y.reflowLargerApplyNewLayout(this.lines,l.layout),this._reflowLargerAdjustViewport(e,t,l.countRemoved)}},i.prototype._reflowLargerAdjustViewport=function(e,t,a){for(var l=this.getNullCell(d.DEFAULT_ATTR_DATA),p=a;p-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new d.BufferLine(e,l))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-a,0)},i.prototype._reflowSmaller=function(e,t){for(var a=this.getNullCell(d.DEFAULT_ATTR_DATA),l=[],p=0,g=this.lines.length-1;g>=0;g--){var b=this.lines.get(g);if(!(!b||!b.isWrapped&&b.getTrimmedLength()<=e)){for(var m=[b];b.isWrapped&&g>0;)b=this.lines.get(--g),m.unshift(b);var S=this.ybase+this.y;if(!(S>=g&&S<g+m.length)){var C,k=m[m.length-1].getTrimmedLength(),w=y.reflowSmallerGetNewLineLengths(m,this._cols,e),x=w.length-m.length;C=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+x):Math.max(0,this.lines.length-this.lines.maxLength+x);for(var M=[],E=0;E<x;E++){var D=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);M.push(D)}M.length>0&&(l.push({start:g+m.length+p,newLines:M}),p+=M.length),m.push.apply(m,M);var T=w.length-1,j=w[T];j===0&&(j=w[--T]);for(var U=m.length-x-1,F=k;U>=0;){var K=Math.min(F,j);if(m[T].copyCellsFrom(m[U],F-K,j-K,K,!0),(j-=K)==0&&(j=w[--T]),(F-=K)==0){U--;var Y=Math.max(U,0);F=y.getWrappedLineTrimmedLength(m,Y,this._cols)}}for(E=0;E<m.length;E++)w[E]<e&&m[E].setCell(w[E],a);for(var L=x-C;L-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+p)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+x,this.ybase+t-1)}}}if(l.length>0){var A=[],R=[];for(E=0;E<this.lines.length;E++)R.push(this.lines.get(E));var H=this.lines.length,B=H-1,N=0,V=l[N];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+p);var Q=0;for(E=Math.min(this.lines.maxLength-1,H+p-1);E>=0;E--)if(V&&V.start>B+Q){for(var ee=V.newLines.length-1;ee>=0;ee--)this.lines.set(E--,V.newLines[ee]);E++,A.push({index:B+1,amount:V.newLines.length}),Q+=V.newLines.length,V=l[++N]}else this.lines.set(E,R[B--]);var re=0;for(E=A.length-1;E>=0;E--)A[E].index+=re,this.lines.onInsertEmitter.fire(A[E]),re+=A[E].amount;var q=Math.max(0,H+p-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}},i.prototype.stringIndexToBufferIndex=function(e,t,a){for(a===void 0&&(a=!1);t;){var l=this.lines.get(e);if(!l)return[-1,-1];for(var p=a?l.getTrimmedLength():l.length,g=0;g<p;++g)if(l.get(g)[c.CHAR_DATA_WIDTH_INDEX]&&(t-=l.get(g)[c.CHAR_DATA_CHAR_INDEX].length||1),t<0)return[e,g];e++}return[e,0]},i.prototype.translateBufferLineToString=function(e,t,a,l){a===void 0&&(a=0);var p=this.lines.get(e);return p?p.translateToString(t,a,l):""},i.prototype.getWrappedRangeForLine=function(e){for(var t=e,a=e;t>0&&this.lines.get(t).isWrapped;)t--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:t,last:a}},i.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},i.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},i.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},i.prototype.addMarker=function(e){var t=this,a=new _.Marker(e);return this.markers.push(a),a.register(this.lines.onTrim(function(l){a.line-=l,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(function(l){a.line>=l.index&&(a.line+=l.amount)})),a.register(this.lines.onDelete(function(l){a.line>=l.index&&a.line<l.index+l.amount&&a.dispose(),a.line>l.index&&(a.line-=l.amount)})),a.register(a.onDispose(function(){return t._removeMarker(a)})),a},i.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},i.prototype.iterator=function(e,t,a,l,p){return new o(this,e,t,a,l,p)},i}();s.Buffer=u;var o=function(){function i(e,t,a,l,p,g){a===void 0&&(a=0),l===void 0&&(l=e.lines.length),p===void 0&&(p=0),g===void 0&&(g=0),this._buffer=e,this._trimRight=t,this._startIndex=a,this._endIndex=l,this._startOverscan=p,this._endOverscan=g,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return i.prototype.hasNext=function(){return this._current<this._endIndex},i.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var t="",a=e.first;a<=e.last;++a)t+=this._buffer.translateBufferLineToString(a,this._trimRight);return this._current=e.last+1,{range:e,content:t}},i}();s.BufferStringIterator=o},8437:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;var h=v(482),d=v(643),f=v(511),c=v(3734);s.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);var y=function(){function _(r,n,u){u===void 0&&(u=!1),this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);for(var o=n||f.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),i=0;i<r;++i)this.setCell(i,o);this.length=r}return _.prototype.get=function(r){var n=this._data[3*r+0],u=2097151&n;return[this._data[3*r+1],2097152&n?this._combined[r]:u?h.stringFromCodePoint(u):"",n>>22,2097152&n?this._combined[r].charCodeAt(this._combined[r].length-1):u]},_.prototype.set=function(r,n){this._data[3*r+1]=n[d.CHAR_DATA_ATTR_INDEX],n[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=n[1],this._data[3*r+0]=2097152|r|n[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=n[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|n[d.CHAR_DATA_WIDTH_INDEX]<<22},_.prototype.getWidth=function(r){return this._data[3*r+0]>>22},_.prototype.hasWidth=function(r){return 12582912&this._data[3*r+0]},_.prototype.getFg=function(r){return this._data[3*r+1]},_.prototype.getBg=function(r){return this._data[3*r+2]},_.prototype.hasContent=function(r){return 4194303&this._data[3*r+0]},_.prototype.getCodePoint=function(r){var n=this._data[3*r+0];return 2097152&n?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&n},_.prototype.isCombined=function(r){return 2097152&this._data[3*r+0]},_.prototype.getString=function(r){var n=this._data[3*r+0];return 2097152&n?this._combined[r]:2097151&n?h.stringFromCodePoint(2097151&n):""},_.prototype.loadCell=function(r,n){var u=3*r;return n.content=this._data[u+0],n.fg=this._data[u+1],n.bg=this._data[u+2],2097152&n.content&&(n.combinedData=this._combined[r]),268435456&n.bg&&(n.extended=this._extendedAttrs[r]),n},_.prototype.setCell=function(r,n){2097152&n.content&&(this._combined[r]=n.combinedData),268435456&n.bg&&(this._extendedAttrs[r]=n.extended),this._data[3*r+0]=n.content,this._data[3*r+1]=n.fg,this._data[3*r+2]=n.bg},_.prototype.setCellFromCodePoint=function(r,n,u,o,i,e){268435456&i&&(this._extendedAttrs[r]=e),this._data[3*r+0]=n|u<<22,this._data[3*r+1]=o,this._data[3*r+2]=i},_.prototype.addCodepointToCell=function(r,n){var u=this._data[3*r+0];2097152&u?this._combined[r]+=h.stringFromCodePoint(n):(2097151&u?(this._combined[r]=h.stringFromCodePoint(2097151&u)+h.stringFromCodePoint(n),u&=-2097152,u|=2097152):u=n|1<<22,this._data[3*r+0]=u)},_.prototype.insertCells=function(r,n,u,o){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new c.ExtendedAttrs),n<this.length-r){for(var i=new f.CellData,e=this.length-r-n-1;e>=0;--e)this.setCell(r+n+e,this.loadCell(r+e,i));for(e=0;e<n;++e)this.setCell(r+e,u)}else for(e=r;e<this.length;++e)this.setCell(e,u);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new c.ExtendedAttrs)},_.prototype.deleteCells=function(r,n,u,o){if(r%=this.length,n<this.length-r){for(var i=new f.CellData,e=0;e<this.length-r-n;++e)this.setCell(r+e,this.loadCell(r+n+e,i));for(e=this.length-n;e<this.length;++e)this.setCell(e,u)}else for(e=r;e<this.length;++e)this.setCell(e,u);r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new c.ExtendedAttrs),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodePoint(r,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new c.ExtendedAttrs)},_.prototype.replaceCells=function(r,n,u,o){for(r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new c.ExtendedAttrs),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new c.ExtendedAttrs);r<n&&r<this.length;)this.setCell(r++,u)},_.prototype.resize=function(r,n){if(r!==this.length){if(r>this.length){var u=new Uint32Array(3*r);this.length&&(3*r<this._data.length?u.set(this._data.subarray(0,3*r)):u.set(this._data)),this._data=u;for(var o=this.length;o<r;++o)this.setCell(o,n)}else if(r){(u=new Uint32Array(3*r)).set(this._data.subarray(0,3*r)),this._data=u;var i=Object.keys(this._combined);for(o=0;o<i.length;o++){var e=parseInt(i[o],10);e>=r&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=r}},_.prototype.fill=function(r){this._combined={},this._extendedAttrs={};for(var n=0;n<this.length;++n)this.setCell(n,r)},_.prototype.copyFrom=function(r){for(var n in this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={},r._combined)this._combined[n]=r._combined[n];for(var n in this._extendedAttrs={},r._extendedAttrs)this._extendedAttrs[n]=r._extendedAttrs[n];this.isWrapped=r.isWrapped},_.prototype.clone=function(){var r=new _(0);for(var n in r._data=new Uint32Array(this._data),r.length=this.length,this._combined)r._combined[n]=this._combined[n];for(var n in this._extendedAttrs)r._extendedAttrs[n]=this._extendedAttrs[n];return r.isWrapped=this.isWrapped,r},_.prototype.getTrimmedLength=function(){for(var r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0},_.prototype.copyCellsFrom=function(r,n,u,o,i){var e=r._data;if(i)for(var t=o-1;t>=0;t--)for(var a=0;a<3;a++)this._data[3*(u+t)+a]=e[3*(n+t)+a];else for(t=0;t<o;t++)for(a=0;a<3;a++)this._data[3*(u+t)+a]=e[3*(n+t)+a];var l=Object.keys(r._combined);for(a=0;a<l.length;a++){var p=parseInt(l[a],10);p>=n&&(this._combined[p-n+u]=r._combined[p])}},_.prototype.translateToString=function(r,n,u){r===void 0&&(r=!1),n===void 0&&(n=0),u===void 0&&(u=this.length),r&&(u=Math.min(u,this.getTrimmedLength()));for(var o="";n<u;){var i=this._data[3*n+0],e=2097151&i;o+=2097152&i?this._combined[n]:e?h.stringFromCodePoint(e):d.WHITESPACE_CELL_CHAR,n+=i>>22||1}return o},_}();s.BufferLine=y},4841:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(v,h){if(v.start.y>v.end.y)throw new Error("Buffer range end ("+v.end.x+", "+v.end.y+") cannot be before start ("+v.start.x+", "+v.start.y+")");return h*(v.end.y-v.start.y)+(v.end.x-v.start.x+1)}},4634:(P,s)=>{function v(h,d,f){if(d===h.length-1)return h[d].getTrimmedLength();var c=!h[d].hasContent(f-1)&&h[d].getWidth(f-1)===1,y=h[d+1].getWidth(0)===2;return c&&y?f-1:f}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(h,d,f,c,y){for(var _=[],r=0;r<h.length-1;r++){var n=r,u=h.get(++n);if(u.isWrapped){for(var o=[h.get(r)];n<h.length&&u.isWrapped;)o.push(u),u=h.get(++n);if(c>=r&&c<n)r+=o.length-1;else{for(var i=0,e=v(o,i,d),t=1,a=0;t<o.length;){var l=v(o,t,d),p=l-a,g=f-e,b=Math.min(p,g);o[i].copyCellsFrom(o[t],a,e,b,!1),(e+=b)===f&&(i++,e=0),(a+=b)===l&&(t++,a=0),e===0&&i!==0&&o[i-1].getWidth(f-1)===2&&(o[i].copyCellsFrom(o[i-1],f-1,e++,1,!1),o[i-1].setCell(f-1,y))}o[i].replaceCells(e,f,y);for(var m=0,S=o.length-1;S>0&&(S>i||o[S].getTrimmedLength()===0);S--)m++;m>0&&(_.push(r+o.length-m),_.push(m)),r+=o.length-1}}}return _},s.reflowLargerCreateNewLayout=function(h,d){for(var f=[],c=0,y=d[c],_=0,r=0;r<h.length;r++)if(y===r){var n=d[++c];h.onDeleteEmitter.fire({index:r-_,amount:n}),r+=n-1,_+=n,y=d[++c]}else f.push(r);return{layout:f,countRemoved:_}},s.reflowLargerApplyNewLayout=function(h,d){for(var f=[],c=0;c<d.length;c++)f.push(h.get(d[c]));for(c=0;c<f.length;c++)h.set(c,f[c]);h.length=d.length},s.reflowSmallerGetNewLineLengths=function(h,d,f){for(var c=[],y=h.map(function(e,t){return v(h,t,d)}).reduce(function(e,t){return e+t}),_=0,r=0,n=0;n<y;){if(y-n<f){c.push(y-n);break}_+=f;var u=v(h,r,d);_>u&&(_-=u,r++);var o=h[r].getWidth(_-1)===2;o&&_--;var i=o?f-1:f;c.push(i),n+=i}return c},s.getWrappedLineTrimmedLength=v},5295:function(P,s,v){var h,d=this&&this.__extends||(h=function(_,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,u){n.__proto__=u}||function(n,u){for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(n[o]=u[o])})(_,r)},function(_,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=_}h(_,r),_.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;var f=v(9092),c=v(8460),y=function(_){function r(n,u){var o=_.call(this)||this;return o._optionsService=n,o._bufferService=u,o._onBufferActivate=o.register(new c.EventEmitter),o.reset(),o}return d(r,_),Object.defineProperty(r.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(r.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),r.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},r.prototype.activateAltBuffer=function(n){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(n),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},r.prototype.resize=function(n,u){this._normal.resize(n,u),this._alt.resize(n,u)},r.prototype.setupTabStops=function(n){this._normal.setupTabStops(n),this._alt.setupTabStops(n)},r}(v(844).Disposable);s.BufferSet=y},511:function(P,s,v){var h,d=this&&this.__extends||(h=function(r,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(u[i]=o[i])})(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function u(){this.constructor=r}h(r,n),r.prototype=n===null?Object.create(n):(u.prototype=n.prototype,new u)});Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;var f=v(482),c=v(643),y=v(3734),_=function(r){function n(){var u=r!==null&&r.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.extended=new y.ExtendedAttrs,u.combinedData="",u}return d(n,r),n.fromCharData=function(u){var o=new n;return o.setFromCharData(u),o},n.prototype.isCombined=function(){return 2097152&this.content},n.prototype.getWidth=function(){return this.content>>22},n.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?f.stringFromCodePoint(2097151&this.content):""},n.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},n.prototype.setFromCharData=function(u){this.fg=u[c.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(u[c.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(u[c.CHAR_DATA_CHAR_INDEX].length===2){var i=u[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var e=u[c.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(i-55296)+e-56320+65536|u[c.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=u[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[c.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=u[c.CHAR_DATA_CHAR_INDEX],this.content=2097152|u[c.CHAR_DATA_WIDTH_INDEX]<<22)},n.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},n}(y.AttributeData);s.CellData=_},643:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=256,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:function(P,s,v){var h,d=this&&this.__extends||(h=function(y,_){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])})(y,_)},function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function r(){this.constructor=y}h(y,_),y.prototype=_===null?Object.create(_):(r.prototype=_.prototype,new r)});Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;var f=v(8460),c=function(y){function _(r){var n=y.call(this)||this;return n.line=r,n._id=_._nextId++,n.isDisposed=!1,n._onDispose=new f.EventEmitter,n}return d(_,y),Object.defineProperty(_.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),_.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),y.prototype.dispose.call(this))},_._nextId=1,_}(v(844).Disposable);s.Marker=c},7116:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(P,s)=>{var v,h;Object.defineProperty(s,"__esModule",{value:!0}),s.C1=s.C0=void 0,(h=s.C0||(s.C0={})).NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL="\x7F",(v=s.C1||(s.C1={})).PAD="\x80",v.HOP="\x81",v.BPH="\x82",v.NBH="\x83",v.IND="\x84",v.NEL="\x85",v.SSA="\x86",v.ESA="\x87",v.HTS="\x88",v.HTJ="\x89",v.VTS="\x8A",v.PLD="\x8B",v.PLU="\x8C",v.RI="\x8D",v.SS2="\x8E",v.SS3="\x8F",v.DCS="\x90",v.PU1="\x91",v.PU2="\x92",v.STS="\x93",v.CCH="\x94",v.MW="\x95",v.SPA="\x96",v.EPA="\x97",v.SOS="\x98",v.SGCI="\x99",v.SCI="\x9A",v.CSI="\x9B",v.ST="\x9C",v.OSC="\x9D",v.PM="\x9E",v.APC="\x9F"},7399:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;var h=v(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(f,c,y,_){var r={type:0,cancel:!1,key:void 0},n=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?r.key=c?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?r.key=c?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?r.key=c?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(r.key=c?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(f.shiftKey){r.key=h.C0.BS;break}if(f.altKey){r.key=h.C0.ESC+h.C0.DEL;break}r.key=h.C0.DEL;break;case 9:if(f.shiftKey){r.key=h.C0.ESC+"[Z";break}r.key=h.C0.HT,r.cancel=!0;break;case 13:r.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,r.cancel=!0;break;case 27:r.key=h.C0.ESC,f.altKey&&(r.key=h.C0.ESC+h.C0.ESC),r.cancel=!0;break;case 37:if(f.metaKey)break;n?(r.key=h.C0.ESC+"[1;"+(n+1)+"D",r.key===h.C0.ESC+"[1;3D"&&(r.key=h.C0.ESC+(y?"b":"[1;5D"))):r.key=c?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;n?(r.key=h.C0.ESC+"[1;"+(n+1)+"C",r.key===h.C0.ESC+"[1;3C"&&(r.key=h.C0.ESC+(y?"f":"[1;5C"))):r.key=c?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;n?(r.key=h.C0.ESC+"[1;"+(n+1)+"A",y||r.key!==h.C0.ESC+"[1;3A"||(r.key=h.C0.ESC+"[1;5A")):r.key=c?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;n?(r.key=h.C0.ESC+"[1;"+(n+1)+"B",y||r.key!==h.C0.ESC+"[1;3B"||(r.key=h.C0.ESC+"[1;5B")):r.key=c?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(r.key=h.C0.ESC+"[2~");break;case 46:r.key=n?h.C0.ESC+"[3;"+(n+1)+"~":h.C0.ESC+"[3~";break;case 36:r.key=n?h.C0.ESC+"[1;"+(n+1)+"H":c?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:r.key=n?h.C0.ESC+"[1;"+(n+1)+"F":c?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?r.type=2:r.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?r.type=3:r.key=h.C0.ESC+"[6~";break;case 112:r.key=n?h.C0.ESC+"[1;"+(n+1)+"P":h.C0.ESC+"OP";break;case 113:r.key=n?h.C0.ESC+"[1;"+(n+1)+"Q":h.C0.ESC+"OQ";break;case 114:r.key=n?h.C0.ESC+"[1;"+(n+1)+"R":h.C0.ESC+"OR";break;case 115:r.key=n?h.C0.ESC+"[1;"+(n+1)+"S":h.C0.ESC+"OS";break;case 116:r.key=n?h.C0.ESC+"[15;"+(n+1)+"~":h.C0.ESC+"[15~";break;case 117:r.key=n?h.C0.ESC+"[17;"+(n+1)+"~":h.C0.ESC+"[17~";break;case 118:r.key=n?h.C0.ESC+"[18;"+(n+1)+"~":h.C0.ESC+"[18~";break;case 119:r.key=n?h.C0.ESC+"[19;"+(n+1)+"~":h.C0.ESC+"[19~";break;case 120:r.key=n?h.C0.ESC+"[20;"+(n+1)+"~":h.C0.ESC+"[20~";break;case 121:r.key=n?h.C0.ESC+"[21;"+(n+1)+"~":h.C0.ESC+"[21~";break;case 122:r.key=n?h.C0.ESC+"[23;"+(n+1)+"~":h.C0.ESC+"[23~";break;case 123:r.key=n?h.C0.ESC+"[24;"+(n+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(y&&!_||!f.altKey||f.metaKey)!y||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?r.key=f.key:f.key&&f.ctrlKey&&f.key==="_"&&(r.key=h.C0.US):f.keyCode===65&&(r.type=1);else{var u=d[f.keyCode],o=u&&u[f.shiftKey?1:0];if(o)r.key=h.C0.ESC+o;else if(f.keyCode>=65&&f.keyCode<=90){var i=f.ctrlKey?f.keyCode-64:f.keyCode+32;r.key=h.C0.ESC+String.fromCharCode(i)}}else f.keyCode>=65&&f.keyCode<=90?r.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?r.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?r.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?r.key=h.C0.DEL:f.keyCode===219?r.key=h.C0.ESC:f.keyCode===220?r.key=h.C0.FS:f.keyCode===221&&(r.key=h.C0.GS)}return r}},482:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},s.utf32ToString=function(d,f,c){f===void 0&&(f=0),c===void 0&&(c=d.length);for(var y="",_=f;_<c;++_){var r=d[_];r>65535?(r-=65536,y+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):y+=String.fromCharCode(r)}return y};var v=function(){function d(){this._interim=0}return d.prototype.clear=function(){this._interim=0},d.prototype.decode=function(f,c){var y=f.length;if(!y)return 0;var _=0,r=0;this._interim&&(56320<=(o=f.charCodeAt(r++))&&o<=57343?c[_++]=1024*(this._interim-55296)+o-56320+65536:(c[_++]=this._interim,c[_++]=o),this._interim=0);for(var n=r;n<y;++n){var u=f.charCodeAt(n);if(55296<=u&&u<=56319){if(++n>=y)return this._interim=u,_;var o;56320<=(o=f.charCodeAt(n))&&o<=57343?c[_++]=1024*(u-55296)+o-56320+65536:(c[_++]=u,c[_++]=o)}else u!==65279&&(c[_++]=u)}return _},d}();s.StringToUtf32=v;var h=function(){function d(){this.interim=new Uint8Array(3)}return d.prototype.clear=function(){this.interim.fill(0)},d.prototype.decode=function(f,c){var y=f.length;if(!y)return 0;var _,r,n,u,o=0,i=0,e=0;if(this.interim[0]){var t=!1,a=this.interim[0];a&=(224&a)==192?31:(240&a)==224?15:7;for(var l=0,p=void 0;(p=63&this.interim[++l])&&l<4;)a<<=6,a|=p;for(var g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-l;e<b;){if(e>=y)return 0;if((192&(p=f[e++]))!=128){e--,t=!0;break}this.interim[l++]=p,a<<=6,a|=63&p}t||(g===2?a<128?e--:c[o++]=a:g===3?a<2048||a>=55296&&a<=57343||a===65279||(c[o++]=a):a<65536||a>1114111||(c[o++]=a)),this.interim.fill(0)}for(var m=y-4,S=e;S<y;){for(;!(!(S<m)||128&(_=f[S])||128&(r=f[S+1])||128&(n=f[S+2])||128&(u=f[S+3]));)c[o++]=_,c[o++]=r,c[o++]=n,c[o++]=u,S+=4;if((_=f[S++])<128)c[o++]=_;else if((224&_)==192){if(S>=y)return this.interim[0]=_,o;if((192&(r=f[S++]))!=128){S--;continue}if((i=(31&_)<<6|63&r)<128){S--;continue}c[o++]=i}else if((240&_)==224){if(S>=y)return this.interim[0]=_,o;if((192&(r=f[S++]))!=128){S--;continue}if(S>=y)return this.interim[0]=_,this.interim[1]=r,o;if((192&(n=f[S++]))!=128){S--;continue}if((i=(15&_)<<12|(63&r)<<6|63&n)<2048||i>=55296&&i<=57343||i===65279)continue;c[o++]=i}else if((248&_)==240){if(S>=y)return this.interim[0]=_,o;if((192&(r=f[S++]))!=128){S--;continue}if(S>=y)return this.interim[0]=_,this.interim[1]=r,o;if((192&(n=f[S++]))!=128){S--;continue}if(S>=y)return this.interim[0]=_,this.interim[1]=r,this.interim[2]=n,o;if((192&(u=f[S++]))!=128){S--;continue}if((i=(7&_)<<18|(63&r)<<12|(63&n)<<6|63&u)<65536||i>1114111)continue;c[o++]=i}}return o},d}();s.Utf8ToUtf32=h},225:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;var h,d=v(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],y=function(){function _(){if(this.version="6",!h){h=new Uint8Array(65536),d.fill(h,1),h[0]=0,d.fill(h,0,1,32),d.fill(h,0,127,160),d.fill(h,2,4352,4448),h[9001]=2,h[9002]=2,d.fill(h,2,11904,42192),h[12351]=1,d.fill(h,2,44032,55204),d.fill(h,2,63744,64256),d.fill(h,2,65040,65050),d.fill(h,2,65072,65136),d.fill(h,2,65280,65377),d.fill(h,2,65504,65511);for(var r=0;r<f.length;++r)d.fill(h,0,f[r][0],f[r][1]+1)}}return _.prototype.wcwidth=function(r){return r<32?0:r<127?1:r<65536?h[r]:function(n,u){var o,i=0,e=u.length-1;if(n<u[0][0]||n>u[e][1])return!1;for(;e>=i;)if(n>u[o=i+e>>1][1])i=o+1;else{if(!(n<u[o][0]))return!0;e=o-1}return!1}(r,c)?0:r>=131072&&r<=196605||r>=196608&&r<=262141?2:1},_}();s.UnicodeV6=y},5981:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;var v=typeof queueMicrotask=="undefined"?function(d){Promise.resolve().then(d)}:queueMicrotask,h=function(){function d(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return d.prototype.writeSync=function(f,c){if(c!==void 0&&this._syncCalls>c)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);var _=this._callbacks.shift();_&&_()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},d.prototype.write=function(f,c){var y=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return y._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(c)},d.prototype._innerWrite=function(f,c){var y=this;f===void 0&&(f=0),c===void 0&&(c=!0);for(var _=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var r=this._writeBuffer[this._bufferOffset],n=this._action(r,c);if(n)return void n.catch(function(o){return v(function(){throw o}),Promise.resolve(!1)}).then(function(o){return Date.now()-_>=12?setTimeout(function(){return y._innerWrite(0,o)}):y._innerWrite(_,o)});var u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return y._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},d}();s.WriteBuffer=h},5770:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;var h=v(482),d=v(8742),f=v(5770),c=[],y=function(){function n(){this._handlers=Object.create(null),this._active=c,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return n.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=c},n.prototype.registerHandler=function(u,o){this._handlers[u]===void 0&&(this._handlers[u]=[]);var i=this._handlers[u];return i.push(o),{dispose:function(){var e=i.indexOf(o);e!==-1&&i.splice(e,1)}}},n.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},n.prototype.setHandlerFallback=function(u){this._handlerFb=u},n.prototype.reset=function(){if(this._active.length)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].unhook(!1);this._stack.paused=!1,this._active=c,this._ident=0},n.prototype.hook=function(u,o){if(this.reset(),this._ident=u,this._active=this._handlers[u]||c,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(o);else this._handlerFb(this._ident,"HOOK",o)},n.prototype.put=function(u,o,i){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(u,o,i);else this._handlerFb(this._ident,"PUT",h.utf32ToString(u,o,i))},n.prototype.unhook=function(u,o){if(o===void 0&&(o=!0),this._active.length){var i=!1,e=this._active.length-1,t=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,i=o,t=this._stack.fallThrough,this._stack.paused=!1),!t&&i===!1){for(;e>=0&&(i=this._active[e].unhook(u))!==!0;e--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,i;e--}for(;e>=0;e--)if((i=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",u);this._active=c,this._ident=0},n}();s.DcsParser=y;var _=new d.Params;_.addParam(0);var r=function(){function n(u){this._handler=u,this._data="",this._params=_,this._hitLimit=!1}return n.prototype.hook=function(u){this._params=u.length>1||u.params[0]?u.clone():_,this._data="",this._hitLimit=!1},n.prototype.put=function(u,o,i){this._hitLimit||(this._data+=h.utf32ToString(u,o,i),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},n.prototype.unhook=function(u){var o=this,i=!1;if(this._hitLimit)i=!1;else if(u&&(i=this._handler(this._data,this._params))instanceof Promise)return i.then(function(e){return o._params=_,o._data="",o._hitLimit=!1,e});return this._params=_,this._data="",this._hitLimit=!1,i},n}();s.DcsHandler=r},2015:function(P,s,v){var h,d=this&&this.__extends||(h=function(i,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])})(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}h(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;var f=v(844),c=v(8273),y=v(8742),_=v(6242),r=v(6351),n=function(){function i(e){this.table=new Uint8Array(e)}return i.prototype.setDefault=function(e,t){c.fill(this.table,e<<4|t)},i.prototype.add=function(e,t,a,l){this.table[t<<8|e]=a<<4|l},i.prototype.addMany=function(e,t,a,l){for(var p=0;p<e.length;p++)this.table[t<<8|e[p]]=a<<4|l},i}();s.TransitionTable=n;var u=160;s.VT500_TRANSITION_TABLE=function(){var i=new n(4095),e=Array.apply(null,Array(256)).map(function(b,m){return m}),t=function(b,m){return e.slice(b,m)},a=t(32,127),l=t(0,24);l.push(25),l.push.apply(l,t(28,32));var p,g=t(0,14);for(p in i.setDefault(1,0),i.addMany(a,0,2,0),g)i.addMany([24,26,153,154],p,3,0),i.addMany(t(128,144),p,3,0),i.addMany(t(144,152),p,3,0),i.add(156,p,0,0),i.add(27,p,11,1),i.add(157,p,4,8),i.addMany([152,158,159],p,0,7),i.add(155,p,11,3),i.add(144,p,11,9);return i.addMany(l,0,3,0),i.addMany(l,1,3,1),i.add(127,1,0,1),i.addMany(l,8,0,8),i.addMany(l,3,3,3),i.add(127,3,0,3),i.addMany(l,4,3,4),i.add(127,4,0,4),i.addMany(l,6,3,6),i.addMany(l,5,3,5),i.add(127,5,0,5),i.addMany(l,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(a,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(t(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(a,7,0,7),i.addMany(l,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(t(64,127),3,7,0),i.addMany(t(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(t(48,60),4,8,4),i.addMany(t(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(t(32,64),6,0,6),i.add(127,6,0,6),i.addMany(t(64,127),6,0,0),i.addMany(t(32,48),3,9,5),i.addMany(t(32,48),5,9,5),i.addMany(t(48,64),5,0,6),i.addMany(t(64,127),5,7,0),i.addMany(t(32,48),4,9,5),i.addMany(t(32,48),1,9,2),i.addMany(t(32,48),2,9,2),i.addMany(t(48,127),2,10,0),i.addMany(t(48,80),1,10,0),i.addMany(t(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(t(96,127),1,10,0),i.add(80,1,11,9),i.addMany(l,9,0,9),i.add(127,9,0,9),i.addMany(t(28,32),9,0,9),i.addMany(t(32,48),9,9,12),i.addMany(t(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(l,11,0,11),i.addMany(t(32,128),11,0,11),i.addMany(t(28,32),11,0,11),i.addMany(l,10,0,10),i.add(127,10,0,10),i.addMany(t(28,32),10,0,10),i.addMany(t(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(t(32,48),10,9,12),i.addMany(l,12,0,12),i.add(127,12,0,12),i.addMany(t(28,32),12,0,12),i.addMany(t(32,48),12,9,12),i.addMany(t(48,64),12,0,11),i.addMany(t(64,127),12,12,13),i.addMany(t(64,127),10,12,13),i.addMany(t(64,127),9,12,13),i.addMany(l,13,13,13),i.addMany(a,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(u,0,2,0),i.add(u,8,5,8),i.add(u,6,0,6),i.add(u,11,0,11),i.add(u,13,13,13),i}();var o=function(i){function e(t){t===void 0&&(t=s.VT500_TRANSITION_TABLE);var a=i.call(this)||this;return a._transitions=t,a._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},a.initialState=0,a.currentState=a.initialState,a._params=new y.Params,a._params.addParam(0),a._collect=0,a.precedingCodepoint=0,a._printHandlerFb=function(l,p,g){},a._executeHandlerFb=function(l){},a._csiHandlerFb=function(l,p){},a._escHandlerFb=function(l){},a._errorHandlerFb=function(l){return l},a._printHandler=a._printHandlerFb,a._executeHandlers=Object.create(null),a._csiHandlers=Object.create(null),a._escHandlers=Object.create(null),a._oscParser=new _.OscParser,a._dcsParser=new r.DcsParser,a._errorHandler=a._errorHandlerFb,a.registerEscHandler({final:"\\"},function(){return!0}),a}return d(e,i),e.prototype._identifier=function(t,a){a===void 0&&(a=[64,126]);var l=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if((l=t.prefix.charCodeAt(0))&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var p=0;p<t.intermediates.length;++p){var g=t.intermediates.charCodeAt(p);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=g}}if(t.final.length!==1)throw new Error("final must be a single byte");var b=t.final.charCodeAt(0);if(a[0]>b||b>a[1])throw new Error("final must be in range "+a[0]+" .. "+a[1]);return(l<<=8)|b},e.prototype.identToString=function(t){for(var a=[];t;)a.push(String.fromCharCode(255&t)),t>>=8;return a.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(t){this._printHandler=t},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(t,a){var l=this._identifier(t,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);var p=this._escHandlers[l];return p.push(a),{dispose:function(){var g=p.indexOf(a);g!==-1&&p.splice(g,1)}}},e.prototype.clearEscHandler=function(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]},e.prototype.setEscHandlerFallback=function(t){this._escHandlerFb=t},e.prototype.setExecuteHandler=function(t,a){this._executeHandlers[t.charCodeAt(0)]=a},e.prototype.clearExecuteHandler=function(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(t){this._executeHandlerFb=t},e.prototype.registerCsiHandler=function(t,a){var l=this._identifier(t);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);var p=this._csiHandlers[l];return p.push(a),{dispose:function(){var g=p.indexOf(a);g!==-1&&p.splice(g,1)}}},e.prototype.clearCsiHandler=function(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]},e.prototype.setCsiHandlerFallback=function(t){this._csiHandlerFb=t},e.prototype.registerDcsHandler=function(t,a){return this._dcsParser.registerHandler(this._identifier(t),a)},e.prototype.clearDcsHandler=function(t){this._dcsParser.clearHandler(this._identifier(t))},e.prototype.setDcsHandlerFallback=function(t){this._dcsParser.setHandlerFallback(t)},e.prototype.registerOscHandler=function(t,a){return this._oscParser.registerHandler(t,a)},e.prototype.clearOscHandler=function(t){this._oscParser.clearHandler(t)},e.prototype.setOscHandlerFallback=function(t){this._oscParser.setHandlerFallback(t)},e.prototype.setErrorHandler=function(t){this._errorHandler=t},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(t,a,l,p,g){this._parseStack.state=t,this._parseStack.handlers=a,this._parseStack.handlerPos=l,this._parseStack.transition=p,this._parseStack.chunkPos=g},e.prototype.parse=function(t,a,l){var p,g=0,b=0,m=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,m=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var S=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&C>-1){for(;C>=0&&(p=S[C](this._params))!==!0;C--)if(p instanceof Promise)return this._parseStack.handlerPos=C,p}this._parseStack.handlers=[];break;case 4:if(l===!1&&C>-1){for(;C>=0&&(p=S[C]())!==!0;C--)if(p instanceof Promise)return this._parseStack.handlerPos=C,p}this._parseStack.handlers=[];break;case 6:if(g=t[this._parseStack.chunkPos],p=this._dcsParser.unhook(g!==24&&g!==26,l))return p;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=t[this._parseStack.chunkPos],p=this._oscParser.end(g!==24&&g!==26,l))return p;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,m=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var k=m;k<a;++k){switch(g=t[k],(b=this._transitions.table[this.currentState<<8|(g<160?g:u)])>>4){case 2:for(var w=k+1;;++w){if(w>=a||(g=t[w])<32||g>126&&g<u){this._printHandler(t,k,w),k=w-1;break}if(++w>=a||(g=t[w])<32||g>126&&g<u){this._printHandler(t,k,w),k=w-1;break}if(++w>=a||(g=t[w])<32||g>126&&g<u){this._printHandler(t,k,w),k=w-1;break}if(++w>=a||(g=t[w])<32||g>126&&g<u){this._printHandler(t,k,w),k=w-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:k,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var x=(S=this._csiHandlers[this._collect<<8|g])?S.length-1:-1;x>=0&&(p=S[x](this._params))!==!0;x--)if(p instanceof Promise)return this._preserveStack(3,S,x,b,k),p;x<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++k<a&&(g=t[k])>47&&g<60);k--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:for(var M=this._escHandlers[this._collect<<8|g],E=M?M.length-1:-1;E>=0&&(p=M[E]())!==!0;E--)if(p instanceof Promise)return this._preserveStack(4,M,E,b,k),p;E<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(var D=k+1;;++D)if(D>=a||(g=t[D])===24||g===26||g===27||g>127&&g<u){this._dcsParser.put(t,k,D),k=D-1;break}break;case 14:if(p=this._dcsParser.unhook(g!==24&&g!==26))return this._preserveStack(6,[],0,b,k),p;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var T=k+1;;T++)if(T>=a||(g=t[T])<32||g>127&&g<u){this._oscParser.put(t,k,T),k=T-1;break}break;case 6:if(p=this._oscParser.end(g!==24&&g!==26))return this._preserveStack(5,[],0,b,k),p;g===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}},e}(f.Disposable);s.EscapeSequenceParser=o},6242:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;var h=v(5770),d=v(482),f=[],c=function(){function _(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return _.prototype.registerHandler=function(r,n){this._handlers[r]===void 0&&(this._handlers[r]=[]);var u=this._handlers[r];return u.push(n),{dispose:function(){var o=u.indexOf(n);o!==-1&&u.splice(o,1)}}},_.prototype.clearHandler=function(r){this._handlers[r]&&delete this._handlers[r]},_.prototype.setHandlerFallback=function(r){this._handlerFb=r},_.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},_.prototype.reset=function(){if(this._state===2)for(var r=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;r>=0;--r)this._active[r].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},_.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].start();else this._handlerFb(this._id,"START")},_.prototype._put=function(r,n,u){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(r,n,u);else this._handlerFb(this._id,"PUT",d.utf32ToString(r,n,u))},_.prototype.start=function(){this.reset(),this._state=1},_.prototype.put=function(r,n,u){if(this._state!==3){if(this._state===1)for(;n<u;){var o=r[n++];if(o===59){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+o-48}this._state===2&&u-n>0&&this._put(r,n,u)}},_.prototype.end=function(r,n){if(n===void 0&&(n=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var u=!1,o=this._active.length-1,i=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,u=n,i=this._stack.fallThrough,this._stack.paused=!1),!i&&u===!1){for(;o>=0&&(u=this._active[o].end(r))!==!0;o--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,u;o--}for(;o>=0;o--)if((u=this._active[o].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,u}else this._handlerFb(this._id,"END",r);this._active=f,this._id=-1,this._state=0}},_}();s.OscParser=c;var y=function(){function _(r){this._handler=r,this._data="",this._hitLimit=!1}return _.prototype.start=function(){this._data="",this._hitLimit=!1},_.prototype.put=function(r,n,u){this._hitLimit||(this._data+=d.utf32ToString(r,n,u),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},_.prototype.end=function(r){var n=this,u=!1;if(this._hitLimit)u=!1;else if(r&&(u=this._handler(this._data))instanceof Promise)return u.then(function(o){return n._data="",n._hitLimit=!1,o});return this._data="",this._hitLimit=!1,u},_}();s.OscHandler=y},8742:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;var v=2147483647,h=function(){function d(f,c){if(f===void 0&&(f=32),c===void 0&&(c=32),this.maxLength=f,this.maxSubParamsLength=c,c>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(c),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return d.fromArray=function(f){var c=new d;if(!f.length)return c;for(var y=f[0]instanceof Array?1:0;y<f.length;++y){var _=f[y];if(_ instanceof Array)for(var r=0;r<_.length;++r)c.addSubParam(_[r]);else c.addParam(_)}return c},d.prototype.clone=function(){var f=new d(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},d.prototype.toArray=function(){for(var f=[],c=0;c<this.length;++c){f.push(this.params[c]);var y=this._subParamsIdx[c]>>8,_=255&this._subParamsIdx[c];_-y>0&&f.push(Array.prototype.slice.call(this._subParams,y,_))}return f},d.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},d.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>v?v:f}},d.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>v?v:f,this._subParamsIdx[this.length-1]++}},d.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},d.prototype.getSubParams=function(f){var c=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];return y-c>0?this._subParams.subarray(c,y):null},d.prototype.getSubParamsAll=function(){for(var f={},c=0;c<this.length;++c){var y=this._subParamsIdx[c]>>8,_=255&this._subParamsIdx[c];_-y>0&&(f[c]=this._subParams.slice(y,_))}return f},d.prototype.addDigit=function(f){var c;if(!(this._rejectDigits||!(c=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var y=this._digitIsSub?this._subParams:this.params,_=y[c-1];y[c-1]=~_?Math.min(10*_+f,v):f}},d}();s.Params=h},5741:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0;var v=function(){function h(){this._addons=[]}return h.prototype.dispose=function(){for(var d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()},h.prototype.loadAddon=function(d,f){var c=this,y={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(y),f.dispose=function(){return c._wrappedAddonDispose(y)},f.activate(d)},h.prototype._wrappedAddonDispose=function(d){if(!d.isDisposed){for(var f=-1,c=0;c<this._addons.length;c++)if(this._addons[c]===d){f=c;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(f,1)}},h}();s.AddonManager=v},8771:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;var h=v(3785),d=v(511),f=function(){function c(y,_){this._buffer=y,this.type=_}return c.prototype.init=function(y){return this._buffer=y,this},Object.defineProperty(c.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),c.prototype.getLine=function(y){var _=this._buffer.lines.get(y);if(_)return new h.BufferLineApiView(_)},c.prototype.getNullCell=function(){return new d.CellData},c}();s.BufferApiView=f},3785:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;var h=v(511),d=function(){function f(c){this._line=c}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(c,y){if(!(c<0||c>=this._line.length))return y?(this._line.loadCell(c,y),y):this._line.loadCell(c,new h.CellData)},f.prototype.translateToString=function(c,y,_){return this._line.translateToString(c,y,_)},f}();s.BufferLineApiView=d},8285:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;var h=v(8771),d=v(8460),f=function(){function c(y){var _=this;this._core=y,this._onBufferChange=new d.EventEmitter,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return _._onBufferChange.fire(_.active)})}return Object.defineProperty(c.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),c}();s.BufferNamespaceApi=f},7975:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0;var v=function(){function h(d){this._core=d}return h.prototype.registerCsiHandler=function(d,f){return this._core.registerCsiHandler(d,function(c){return f(c.toArray())})},h.prototype.addCsiHandler=function(d,f){return this.registerCsiHandler(d,f)},h.prototype.registerDcsHandler=function(d,f){return this._core.registerDcsHandler(d,function(c,y){return f(c,y.toArray())})},h.prototype.addDcsHandler=function(d,f){return this.registerDcsHandler(d,f)},h.prototype.registerEscHandler=function(d,f){return this._core.registerEscHandler(d,f)},h.prototype.addEscHandler=function(d,f){return this.registerEscHandler(d,f)},h.prototype.registerOscHandler=function(d,f){return this._core.registerOscHandler(d,f)},h.prototype.addOscHandler=function(d,f){return this.registerOscHandler(d,f)},h}();s.ParserApi=v},7090:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0;var v=function(){function h(d){this._core=d}return h.prototype.register=function(d){this._core.unicodeService.register(d)},Object.defineProperty(h.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(d){this._core.unicodeService.activeVersion=d},enumerable:!1,configurable:!0}),h}();s.UnicodeApi=v},744:function(P,s,v){var h,d=this&&this.__extends||(h=function(o,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(o,i)},function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=o}h(o,i),o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),f=this&&this.__decorate||function(o,i,e,t){var a,l=arguments.length,p=l<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,i,e,t);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(p=(l<3?a(p):l>3?a(i,e,p):a(i,e))||p);return l>3&&p&&Object.defineProperty(i,e,p),p},c=this&&this.__param||function(o,i){return function(e,t){i(e,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;var y=v(2585),_=v(5295),r=v(8460),n=v(844);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;var u=function(o){function i(e){var t=o.call(this)||this;return t._optionsService=e,t.isUserScrolling=!1,t._onResize=new r.EventEmitter,t._onScroll=new r.EventEmitter,t.cols=Math.max(e.options.cols||0,s.MINIMUM_COLS),t.rows=Math.max(e.options.rows||0,s.MINIMUM_ROWS),t.buffers=new _.BufferSet(e,t),t}return d(i,o),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){o.prototype.dispose.call(this),this.buffers.dispose()},i.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},i.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},i.prototype.scroll=function(e,t){t===void 0&&(t=!1);var a,l=this.buffer;(a=this._cachedBlankLine)&&a.length===this.cols&&a.getFg(0)===e.fg&&a.getBg(0)===e.bg||(a=l.getBlankLine(e,t),this._cachedBlankLine=a),a.isWrapped=t;var p=l.ybase+l.scrollTop,g=l.ybase+l.scrollBottom;if(l.scrollTop===0){var b=l.lines.isFull;g===l.lines.length-1?b?l.lines.recycle().copyFrom(a):l.lines.push(a.clone()):l.lines.splice(g+1,0,a.clone()),b?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{var m=g-p+1;l.lines.shiftElements(p+1,m-1,-1),l.lines.set(g,a.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)},i.prototype.scrollLines=function(e,t,a){var l=this.buffer;if(e<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else e+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);var p=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+e,l.ybase),0),p!==l.ydisp&&(t||this._onScroll.fire(l.ydisp))},i.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},i.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;t!==0&&this.scrollLines(t)},f([c(0,y.IOptionsService)],i)}(n.Disposable);s.BufferService=u},7994:(P,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0;var v=function(){function h(){this.glevel=0,this._charsets=[]}return h.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},h.prototype.setgLevel=function(d){this.glevel=d,this.charset=this._charsets[d]},h.prototype.setgCharset=function(d,f){this._charsets[d]=f,this.glevel===d&&(this.charset=f)},h}();s.CharsetService=v},1753:function(P,s,v){var h=this&&this.__decorate||function(o,i,e,t){var a,l=arguments.length,p=l<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,i,e,t);else for(var g=o.length-1;g>=0;g--)(a=o[g])&&(p=(l<3?a(p):l>3?a(i,e,p):a(i,e))||p);return l>3&&p&&Object.defineProperty(i,e,p),p},d=this&&this.__param||function(o,i){return function(e,t){i(e,t,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;var f=v(2585),c=v(8460),y={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(o){return o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)}},VT200:{events:19,restrict:function(o){return o.action!==32}},DRAG:{events:23,restrict:function(o){return o.action!==32||o.button!==3}},ANY:{events:31,restrict:function(o){return!0}}};function _(o,i){var e=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(e|=64,e|=o.action):(e|=3&o.button,4&o.button&&(e|=64),8&o.button&&(e|=128),o.action===32?e|=32:o.action!==0||i||(e|=3)),e}var r=String.fromCharCode,n={DEFAULT:function(o){var i=[_(o,!1)+32,o.col+32,o.row+32];return i[0]>255||i[1]>255||i[2]>255?"":"[M"+r(i[0])+r(i[1])+r(i[2])},SGR:function(o){var i=o.action===0&&o.button!==4?"m":"M";return"[<"+_(o,!0)+";"+o.col+";"+o.row+i}},u=function(){function o(i,e){this._bufferService=i,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new c.EventEmitter,this._lastEvent=null;for(var t=0,a=Object.keys(y);t<a.length;t++){var l=a[t];this.addProtocol(l,y[l])}for(var p=0,g=Object.keys(n);p<g.length;p++){var b=g[p];this.addEncoding(b,n[b])}this.reset()}return o.prototype.addProtocol=function(i,e){this._protocols[i]=e},o.prototype.addEncoding=function(i,e){this._encodings[i]=e},Object.defineProperty(o.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(i){if(!this._protocols[i])throw new Error('unknown protocol "'+i+'"');this._activeProtocol=i,this._onProtocolChange.fire(this._protocols[i].events)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(i){if(!this._encodings[i])throw new Error('unknown encoding "'+i+'"');this._activeEncoding=i},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(o.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),o.prototype.triggerMouseEvent=function(i){if(i.col<0||i.col>=this._bufferService.cols||i.row<0||i.row>=this._bufferService.rows||i.button===4&&i.action===32||i.button===3&&i.action!==32||i.button!==4&&(i.action===2||i.action===3)||(i.col++,i.row++,i.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,i))||!this._protocols[this._activeProtocol].restrict(i))return!1;var e=this._encodings[this._activeEncoding](i);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=i,!0},o.prototype.explainEvents=function(i){return{down:!!(1&i),up:!!(2&i),drag:!!(4&i),move:!!(8&i),wheel:!!(16&i)}},o.prototype._compareEvents=function(i,e){return i.col===e.col&&i.row===e.row&&i.button===e.button&&i.action===e.action&&i.ctrl===e.ctrl&&i.alt===e.alt&&i.shift===e.shift},h([d(0,f.IBufferService),d(1,f.ICoreService)],o)}();s.CoreMouseService=u},6975:function(P,s,v){var h,d=this&&this.__extends||(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(a[p]=l[p])})(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}h(e,t),e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}),f=this&&this.__decorate||function(e,t,a,l){var p,g=arguments.length,b=g<3?t:l===null?l=Object.getOwnPropertyDescriptor(t,a):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(e,t,a,l);else for(var m=e.length-1;m>=0;m--)(p=e[m])&&(b=(g<3?p(b):g>3?p(t,a,b):p(t,a))||b);return g>3&&b&&Object.defineProperty(t,a,b),b},c=this&&this.__param||function(e,t){return function(a,l){t(a,l,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;var y=v(2585),_=v(8460),r=v(1439),n=v(844),u=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=function(e){function t(a,l,p,g){var b=e.call(this)||this;return b._bufferService=l,b._logService=p,b._optionsService=g,b.isCursorInitialized=!1,b.isCursorHidden=!1,b._onData=b.register(new _.EventEmitter),b._onUserInput=b.register(new _.EventEmitter),b._onBinary=b.register(new _.EventEmitter),b._scrollToBottom=a,b.register({dispose:function(){return b._scrollToBottom=void 0}}),b.modes=r.clone(u),b.decPrivateModes=r.clone(o),b}return d(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=r.clone(u),this.decPrivateModes=r.clone(o)},t.prototype.triggerDataEvent=function(a,l){if(l===void 0&&(l=!1),!this._optionsService.options.disableStdin){var p=this._bufferService.buffer;p.ybase!==p.ydisp&&this._scrollToBottom(),l&&this._onUserInput.fire(),this._logService.debug('sending data "'+a+'"',function(){return a.split("").map(function(g){return g.charCodeAt(0)})}),this._onData.fire(a)}},t.prototype.triggerBinaryEvent=function(a){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+a+'"',function(){return a.split("").map(function(l){return l.charCodeAt(0)})}),this._onBinary.fire(a))},f([c(1,y.IBufferService),c(2,y.ILogService),c(3,y.IOptionsService)],t)}(n.Disposable);s.CoreService=i},3730:function(P,s,v){var h=this&&this.__decorate||function(y,_,r,n){var u,o=arguments.length,i=o<3?_:n===null?n=Object.getOwnPropertyDescriptor(_,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(y,_,r,n);else for(var e=y.length-1;e>=0;e--)(u=y[e])&&(i=(o<3?u(i):o>3?u(_,r,i):u(_,r))||i);return o>3&&i&&Object.defineProperty(_,r,i),i},d=this&&this.__param||function(y,_){return function(r,n){_(r,n,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DirtyRowService=void 0;var f=v(2585),c=function(){function y(_){this._bufferService=_,this.clearRange()}return Object.defineProperty(y.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),y.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},y.prototype.markDirty=function(_){_<this._start?this._start=_:_>this._end&&(this._end=_)},y.prototype.markRangeDirty=function(_,r){if(_>r){var n=_;_=r,r=n}_<this._start&&(this._start=_),r>this._end&&(this._end=r)},y.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},h([d(0,f.IBufferService)],y)}();s.DirtyRowService=c},4348:function(P,s,v){var h=this&&this.__spreadArray||function(_,r){for(var n=0,u=r.length,o=_.length;n<u;n++,o++)_[o]=r[n];return _};Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;var d=v(2585),f=v(8343),c=function(){function _(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._entries=new Map;for(var u=0,o=r;u<o.length;u++){var i=o[u],e=i[0],t=i[1];this.set(e,t)}}return _.prototype.set=function(r,n){var u=this._entries.get(r);return this._entries.set(r,n),u},_.prototype.forEach=function(r){this._entries.forEach(function(n,u){return r(u,n)})},_.prototype.has=function(r){return this._entries.has(r)},_.prototype.get=function(r){return this._entries.get(r)},_}();s.ServiceCollection=c;var y=function(){function _(){this._services=new c,this._services.set(d.IInstantiationService,this)}return _.prototype.setService=function(r,n){this._services.set(r,n)},_.prototype.getService=function(r){return this._services.get(r)},_.prototype.createInstance=function(r){for(var n=[],u=1;u<arguments.length;u++)n[u-1]=arguments[u];for(var o=f.getServiceDependencies(r).sort(function(g,b){return g.index-b.index}),i=[],e=0,t=o;e<t.length;e++){var a=t[e],l=this._services.get(a.id);if(!l)throw new Error("[createInstance] "+r.name+" depends on UNKNOWN service "+a.id+".");i.push(l)}var p=o.length>0?o[0].index:n.length;if(n.length!==p)throw new Error("[createInstance] First service dependency of "+r.name+" at position "+(p+1)+" conflicts with "+n.length+" static arguments");return new(r.bind.apply(r,h([void 0],h(h([],n),i))))},_}();s.InstantiationService=y},7866:function(P,s,v){var h=this&&this.__decorate||function(r,n,u,o){var i,e=arguments.length,t=e<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,u):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(r,n,u,o);else for(var a=r.length-1;a>=0;a--)(i=r[a])&&(t=(e<3?i(t):e>3?i(n,u,t):i(n,u))||t);return e>3&&t&&Object.defineProperty(n,u,t),t},d=this&&this.__param||function(r,n){return function(u,o){n(u,o,r)}},f=this&&this.__spreadArray||function(r,n){for(var u=0,o=n.length,i=r.length;u<o;u++,i++)r[i]=n[u];return r};Object.defineProperty(s,"__esModule",{value:!0}),s.LogService=void 0;var c=v(2585),y={debug:c.LogLevelEnum.DEBUG,info:c.LogLevelEnum.INFO,warn:c.LogLevelEnum.WARN,error:c.LogLevelEnum.ERROR,off:c.LogLevelEnum.OFF},_=function(){function r(n){var u=this;this._optionsService=n,this.logLevel=c.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(o){o==="logLevel"&&u._updateLogLevel()})}return r.prototype._updateLogLevel=function(){this.logLevel=y[this._optionsService.options.logLevel]},r.prototype._evalLazyOptionalParams=function(n){for(var u=0;u<n.length;u++)typeof n[u]=="function"&&(n[u]=n[u]())},r.prototype._log=function(n,u,o){this._evalLazyOptionalParams(o),n.call.apply(n,f([console,"xterm.js: "+u],o))},r.prototype.debug=function(n){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=c.LogLevelEnum.DEBUG&&this._log(console.log,n,u)},r.prototype.info=function(n){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=c.LogLevelEnum.INFO&&this._log(console.info,n,u)},r.prototype.warn=function(n){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=c.LogLevelEnum.WARN&&this._log(console.warn,n,u)},r.prototype.error=function(n){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=c.LogLevelEnum.ERROR&&this._log(console.error,n,u)},h([d(0,c.IOptionsService)],r)}();s.LogService=_},7302:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=s.DEFAULT_BELL_SOUND=void 0;var h=v(8460),d=v(6114),f=v(1439);s.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",s.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:s.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:d.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var c=["normal","bold","100","200","300","400","500","600","700","800","900"],y=["cols","rows"],_=function(){function r(n){this._onOptionChange=new h.EventEmitter,this.options=f.clone(s.DEFAULT_OPTIONS);for(var u=0,o=Object.keys(n);u<o.length;u++){var i=o[u];if(i in this.options)try{var e=n[i];this.options[i]=this._sanitizeAndValidateOption(i,e)}catch(t){console.error(t)}}}return Object.defineProperty(r.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),r.prototype.setOption=function(n,u){if(!(n in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+n+'"');if(y.includes(n))throw new Error('Option "'+n+'" can only be set in the constructor');this.options[n]!==u&&(u=this._sanitizeAndValidateOption(n,u),this.options[n]!==u&&(this.options[n]=u,this._onOptionChange.fire(n)))},r.prototype._sanitizeAndValidateOption=function(n,u){switch(n){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":u||(u=s.DEFAULT_OPTIONS[n]);break;case"fontWeight":case"fontWeightBold":if(typeof u=="number"&&1<=u&&u<=1e3)break;u=c.includes(u)?u:s.DEFAULT_OPTIONS[n];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(n+" cannot be less than 1, value: "+u);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(n+" cannot be less than 0, value: "+u);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(n+" cannot be less than or equal to 0, value: "+u);case"rows":case"cols":if(!u&&u!==0)throw new Error(n+" must be numeric, value: "+u)}return u},r.prototype.getOption=function(n){if(!(n in s.DEFAULT_OPTIONS))throw new Error('No option with key "'+n+'"');return this.options[n]},r}();s.OptionsService=_},8343:(P,s)=>{function v(h,d,f){d.di$target===d?d.di$dependencies.push({id:h,index:f}):(d.di$dependencies=[{id:h,index:f}],d.di$target=d)}Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0,s.serviceRegistry=new Map,s.getServiceDependencies=function(h){return h.di$dependencies||[]},s.createDecorator=function(h){if(s.serviceRegistry.has(h))return s.serviceRegistry.get(h);var d=function(f,c,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");v(d,f,y)};return d.toString=function(){return h},s.serviceRegistry.set(h,d),d}},2585:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IUnicodeService=s.LogLevelEnum=s.IOptionsService=s.ILogService=s.IInstantiationService=s.IDirtyRowService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;var h,d=v(8343);s.IBufferService=d.createDecorator("BufferService"),s.ICoreMouseService=d.createDecorator("CoreMouseService"),s.ICoreService=d.createDecorator("CoreService"),s.ICharsetService=d.createDecorator("CharsetService"),s.IDirtyRowService=d.createDecorator("DirtyRowService"),s.IInstantiationService=d.createDecorator("InstantiationService"),s.ILogService=d.createDecorator("LogService"),s.IOptionsService=d.createDecorator("OptionsService"),(h=s.LogLevelEnum||(s.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",s.IUnicodeService=d.createDecorator("UnicodeService")},1480:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;var h=v(8460),d=v(225),f=function(){function c(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter;var y=new d.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}return Object.defineProperty(c.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"activeVersion",{get:function(){return this._active},set:function(y){if(!this._providers[y])throw new Error('unknown Unicode version "'+y+'"');this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)},enumerable:!1,configurable:!0}),c.prototype.register=function(y){this._providers[y.version]=y},c.prototype.wcwidth=function(y){return this._activeProvider.wcwidth(y)},c.prototype.getStringCellWidth=function(y){for(var _=0,r=y.length,n=0;n<r;++n){var u=y.charCodeAt(n);if(55296<=u&&u<=56319){if(++n>=r)return _+this.wcwidth(u);var o=y.charCodeAt(n);56320<=o&&o<=57343?u=1024*(u-55296)+o-56320+65536:_+=this.wcwidth(o)}_+=this.wcwidth(u)}return _},c}();s.UnicodeService=f}},z={};function X(P){var s=z[P];if(s!==void 0)return s.exports;var v=z[P]={exports:{}};return W[P].call(v.exports,v,v.exports,X),v.exports}var G={};return(()=>{var P=G;Object.defineProperty(P,"__esModule",{value:!0}),P.Terminal=void 0;var s=X(3236),v=X(9042),h=X(7975),d=X(7090),f=X(5741),c=X(8285),y=function(){function _(r){this._core=new s.Terminal(r),this._addonManager=new f.AddonManager}return _.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(_.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"unicode",{get:function(){return this._checkProposedApi(),new d.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new c.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"modes",{get:function(){var r=this._core.coreService.decPrivateModes,n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}},enumerable:!1,configurable:!0}),_.prototype.blur=function(){this._core.blur()},_.prototype.focus=function(){this._core.focus()},_.prototype.resize=function(r,n){this._verifyIntegers(r,n),this._core.resize(r,n)},_.prototype.open=function(r){this._core.open(r)},_.prototype.attachCustomKeyEventHandler=function(r){this._core.attachCustomKeyEventHandler(r)},_.prototype.registerLinkMatcher=function(r,n,u){return this._checkProposedApi(),this._core.registerLinkMatcher(r,n,u)},_.prototype.deregisterLinkMatcher=function(r){this._checkProposedApi(),this._core.deregisterLinkMatcher(r)},_.prototype.registerLinkProvider=function(r){return this._checkProposedApi(),this._core.registerLinkProvider(r)},_.prototype.registerCharacterJoiner=function(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)},_.prototype.deregisterCharacterJoiner=function(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)},_.prototype.registerMarker=function(r){return this._checkProposedApi(),this._verifyIntegers(r),this._core.addMarker(r)},_.prototype.addMarker=function(r){return this.registerMarker(r)},_.prototype.hasSelection=function(){return this._core.hasSelection()},_.prototype.select=function(r,n,u){this._verifyIntegers(r,n,u),this._core.select(r,n,u)},_.prototype.getSelection=function(){return this._core.getSelection()},_.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},_.prototype.clearSelection=function(){this._core.clearSelection()},_.prototype.selectAll=function(){this._core.selectAll()},_.prototype.selectLines=function(r,n){this._verifyIntegers(r,n),this._core.selectLines(r,n)},_.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},_.prototype.scrollLines=function(r){this._verifyIntegers(r),this._core.scrollLines(r)},_.prototype.scrollPages=function(r){this._verifyIntegers(r),this._core.scrollPages(r)},_.prototype.scrollToTop=function(){this._core.scrollToTop()},_.prototype.scrollToBottom=function(){this._core.scrollToBottom()},_.prototype.scrollToLine=function(r){this._verifyIntegers(r),this._core.scrollToLine(r)},_.prototype.clear=function(){this._core.clear()},_.prototype.write=function(r,n){this._core.write(r,n)},_.prototype.writeUtf8=function(r,n){this._core.write(r,n)},_.prototype.writeln=function(r,n){this._core.write(r),this._core.write(`\r
`,n)},_.prototype.paste=function(r){this._core.paste(r)},_.prototype.getOption=function(r){return this._core.optionsService.getOption(r)},_.prototype.setOption=function(r,n){this._core.optionsService.setOption(r,n)},_.prototype.refresh=function(r,n){this._verifyIntegers(r,n),this._core.refresh(r,n)},_.prototype.reset=function(){this._core.reset()},_.prototype.loadAddon=function(r){return this._addonManager.loadAddon(this,r)},Object.defineProperty(_,"strings",{get:function(){return v},enumerable:!1,configurable:!0}),_.prototype._verifyIntegers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var u=0,o=r;u<o.length;u++){var i=o[u];if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}},_}();P.Terminal=y})(),G})()})});var Ei=Re((Ot,vi)=>{(function(W,z){typeof Ot=="object"&&typeof vi=="object"?vi.exports=z():typeof define=="function"&&define.amd?define([],z):typeof Ot=="object"?Ot.FitAddon=z():W.FitAddon=z()})(self,function(){return(()=>{"use strict";var W={775:(X,G)=>{Object.defineProperty(G,"__esModule",{value:!0}),G.FitAddon=void 0;var P=function(){function s(){}return s.prototype.activate=function(v){this._terminal=v},s.prototype.dispose=function(){},s.prototype.fit=function(){var v=this.proposeDimensions();if(v&&this._terminal){var h=this._terminal._core;this._terminal.rows===v.rows&&this._terminal.cols===v.cols||(h._renderService.clear(),this._terminal.resize(v.cols,v.rows))}},s.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var v=this._terminal._core;if(v._renderService.dimensions.actualCellWidth!==0&&v._renderService.dimensions.actualCellHeight!==0){var h=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(h.getPropertyValue("height")),f=Math.max(0,parseInt(h.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),y=d-(parseInt(c.getPropertyValue("padding-top"))+parseInt(c.getPropertyValue("padding-bottom"))),_=f-(parseInt(c.getPropertyValue("padding-right"))+parseInt(c.getPropertyValue("padding-left")))-v.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(_/v._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(y/v._renderService.dimensions.actualCellHeight))}}}},s}();G.FitAddon=P}},z={};return function X(G){if(z[G])return z[G].exports;var P=z[G]={exports:{}};return W[G](P,P.exports,X),P.exports}(775)})()})});var Mi=Re((Pt,gi)=>{(function(W,z){typeof Pt=="object"&&typeof gi=="object"?gi.exports=z():typeof define=="function"&&define.amd?define([],z):typeof Pt=="object"?Pt.SearchAddon=z():W.SearchAddon=z()})(self,function(){return(()=>{"use strict";var W={};return(()=>{var z=W;Object.defineProperty(z,"__esModule",{value:!0}),z.SearchAddon=void 0;var X=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?",G=function(){function P(){this._linesCacheTimeoutId=0}return P.prototype.activate=function(s){this._terminal=s},P.prototype.dispose=function(){},P.prototype.findNext=function(s,v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!s||s.length===0)return this._terminal.clearSelection(),!1;var h,d=0,f=0;if(this._terminal.hasSelection()){var c=!!v&&v.incremental;h=this._terminal.getSelectionPosition(),f=c?h.startRow:h.endRow,d=c?h.startColumn:h.endColumn}this._initLinesCache();var y={startRow:f,startCol:d},_=this._findInLine(s,y,v);if(!_)for(var r=f+1;r<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=r,y.startCol=0,!(_=this._findInLine(s,y,v)));r++);if(!_&&f!==0)for(r=0;r<f&&(y.startRow=r,y.startCol=0,!(_=this._findInLine(s,y,v)));r++);return!_&&h&&(y.startRow=h.startRow,y.startCol=0,_=this._findInLine(s,y,v)),this._selectResult(_)},P.prototype.findPrevious=function(s,v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!s||s.length===0)return this._terminal.clearSelection(),!1;var h,d,f=!0,c=this._terminal.buffer.active.baseY+this._terminal.rows,y=this._terminal.cols,_=!!v&&v.incremental;this._terminal.hasSelection()&&(c=(d=this._terminal.getSelectionPosition()).startRow,y=d.startColumn),this._initLinesCache();var r={startRow:c,startCol:y};if(_?(h=this._findInLine(s,r,v,!1))&&h.row===c&&h.col===y||(d&&(r.startRow=d.endRow,r.startCol=d.endColumn),h=this._findInLine(s,r,v,!0)):h=this._findInLine(s,r,v,f),!h){r.startCol=Math.max(r.startCol,this._terminal.cols);for(var n=c-1;n>=0&&(r.startRow=n,!(h=this._findInLine(s,r,v,f)));n--);}if(!h&&c!==this._terminal.buffer.active.baseY+this._terminal.rows)for(n=this._terminal.buffer.active.baseY+this._terminal.rows;n>=c&&(r.startRow=n,!(h=this._findInLine(s,r,v,f)));n--);return!(h||!d)||this._selectResult(h)},P.prototype._initLinesCache=function(){var s=this,v=this._terminal;this._linesCache||(this._linesCache=new Array(v.buffer.active.length),this._cursorMoveListener=v.onCursorMove(function(){return s._destroyLinesCache()}),this._resizeListener=v.onResize(function(){return s._destroyLinesCache()})),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(function(){return s._destroyLinesCache()},15e3)},P.prototype._destroyLinesCache=function(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)},P.prototype._isWholeWord=function(s,v,h){return(s===0||X.includes(v[s-1]))&&(s+h.length===v.length||X.includes(v[s+h.length]))},P.prototype._findInLine=function(s,v,h,d){h===void 0&&(h={}),d===void 0&&(d=!1);var f=this._terminal,c=v.startRow,y=v.startCol,_=f.buffer.active.getLine(c);if(_==null?void 0:_.isWrapped)return d?void(v.startCol+=f.cols):(v.startRow--,v.startCol+=f.cols,this._findInLine(s,v,h));var r=this._linesCache?this._linesCache[c]:void 0;r===void 0&&(r=this._translateBufferLineToStringWithWrap(c,!0),this._linesCache&&(this._linesCache[c]=r));var n=h.caseSensitive?s:s.toLowerCase(),u=h.caseSensitive?r:r.toLowerCase(),o=-1;if(h.regex){var i=RegExp(n,"g"),e=void 0;if(d)for(;e=i.exec(u.slice(0,y));)o=i.lastIndex-e[0].length,s=e[0],i.lastIndex-=s.length-1;else(e=i.exec(u.slice(y)))&&e[0].length>0&&(o=y+(i.lastIndex-e[0].length),s=e[0])}else d?y-n.length>=0&&(o=u.lastIndexOf(n,y-n.length)):o=u.indexOf(n,y);if(o>=0){if(o>=f.cols&&(c+=Math.floor(o/f.cols),o%=f.cols),h.wholeWord&&!this._isWholeWord(o,u,s))return;var t=f.buffer.active.getLine(c);if(t)for(var a=0;a<o;a++){var l=t.getCell(a);if(!l)break;var p=l.getChars();p.length>1&&(o-=p.length-1),l.getWidth()===0&&o++}return{term:s,col:o,row:c}}},P.prototype._translateBufferLineToStringWithWrap=function(s,v){var h,d=this._terminal,f="";do{var c=d.buffer.active.getLine(s+1);h=!!c&&c.isWrapped;var y=d.buffer.active.getLine(s);if(!y)break;f+=y.translateToString(!h&&v).substring(0,d.cols),s++}while(h);return f},P.prototype._selectResult=function(s){var v=this._terminal;if(!s)return v.clearSelection(),!1;if(v.select(s.col,s.row,s.term.length),s.row>=v.buffer.active.viewportY+v.rows||s.row<v.buffer.active.viewportY){var h=s.row-v.buffer.active.viewportY;h-=Math.floor(v.rows/2),v.scrollLines(h)}return!0},P}();z.SearchAddon=G})(),W})()})});var xi=Re((Be,yi)=>{(function(W,z){typeof Be=="object"&&typeof yi=="object"?yi.exports=z():typeof define=="function"&&define.amd?define([],z):typeof Be=="object"?Be.SerializeAddon=z():W.SerializeAddon=z()})(Be,function(){return(()=>{"use strict";var W={};return{44:function(z,X){var G,P=this&&this.__extends||(G=function(d,f){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,y){c.__proto__=y}||function(c,y){for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(c[_]=y[_])})(d,f)},function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function c(){this.constructor=d}G(d,f),d.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)});function s(d,f){return d.getBgColorMode()===f.getBgColorMode()&&d.getBgColor()===f.getBgColor()}Object.defineProperty(X,"__esModule",{value:!0}),X.SerializeAddon=void 0;var v=function(d){function f(c,y){var _=d.call(this,c)||this;return _._terminal=y,_._rowIndex=0,_._allRows=new Array,_._allRowSeparators=new Array,_._currentRow="",_._nullCellCount=0,_._cursorStyle=_._buffer.getNullCell(),_._cursorStyleRow=0,_._cursorStyleCol=0,_._backgroundCell=_._buffer.getNullCell(),_._firstRow=0,_._lastCursorRow=0,_._lastCursorCol=0,_._lastContentCursorRow=0,_._lastContentCursorCol=0,_._thisRowLastChar=_._buffer.getNullCell(),_._thisRowLastSecondChar=_._buffer.getNullCell(),_._nextRowFirstChar=_._buffer.getNullCell(),_}return P(f,d),f.prototype._beforeSerialize=function(c,y,_){this._allRows=new Array(c),this._lastContentCursorRow=y,this._lastCursorRow=y,this._firstRow=y},f.prototype._rowEnd=function(c,y){var _;this._nullCellCount>0&&!s(this._cursorStyle,this._backgroundCell)&&(this._currentRow+="["+this._nullCellCount+"X");var r="";if(!y){c-this._firstRow>=this._terminal.rows&&((_=this._buffer.getLine(this._cursorStyleRow))===null||_===void 0||_.getCell(this._cursorStyleCol,this._backgroundCell));var n=this._buffer.getLine(c),u=this._buffer.getLine(c+1);if(u.isWrapped){r="";var o=n.getCell(n.length-1,this._thisRowLastChar),i=n.getCell(n.length-2,this._thisRowLastSecondChar),e=u.getCell(0,this._nextRowFirstChar),t=e.getWidth()>1,a=!1;(e.getChars()&&t?this._nullCellCount<=1:this._nullCellCount<=0)&&((o.getChars()||o.getWidth()===0)&&s(o,e)&&(a=!0),t&&(i.getChars()||i.getWidth()===0)&&s(o,e)&&s(i,e)&&(a=!0)),a||(r="-".repeat(this._nullCellCount+1),r+="[1D[1X",this._nullCellCount>0&&(r+="[A",r+="["+(n.length-this._nullCellCount)+"C",r+="["+this._nullCellCount+"X",r+="["+(n.length-this._nullCellCount)+"D",r+="[B"),this._lastContentCursorRow=c+1,this._lastContentCursorCol=0,this._lastCursorRow=c+1,this._lastCursorCol=0)}else r=`\r
`,this._lastCursorRow=c+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=r,this._currentRow="",this._nullCellCount=0},f.prototype._diffStyle=function(c,y){var _,r,n=[],u=(r=y,!((_=c).getFgColorMode()===r.getFgColorMode()&&_.getFgColor()===r.getFgColor())),o=!s(c,y),i=!function(t,a){return t.isInverse()===a.isInverse()&&t.isBold()===a.isBold()&&t.isUnderline()===a.isUnderline()&&t.isBlink()===a.isBlink()&&t.isInvisible()===a.isInvisible()&&t.isItalic()===a.isItalic()&&t.isDim()===a.isDim()}(c,y);if(u||o||i)if(c.isAttributeDefault())y.isAttributeDefault()||n.push(0);else{if(u){var e=c.getFgColor();c.isFgRGB()?n.push(38,2,e>>>16&255,e>>>8&255,255&e):c.isFgPalette()?e>=16?n.push(38,5,e):n.push(8&e?90+(7&e):30+(7&e)):n.push(39)}o&&(e=c.getBgColor(),c.isBgRGB()?n.push(48,2,e>>>16&255,e>>>8&255,255&e):c.isBgPalette()?e>=16?n.push(48,5,e):n.push(8&e?100+(7&e):40+(7&e)):n.push(49)),i&&(c.isInverse()!==y.isInverse()&&n.push(c.isInverse()?7:27),c.isBold()!==y.isBold()&&n.push(c.isBold()?1:22),c.isUnderline()!==y.isUnderline()&&n.push(c.isUnderline()?4:24),c.isBlink()!==y.isBlink()&&n.push(c.isBlink()?5:25),c.isInvisible()!==y.isInvisible()&&n.push(c.isInvisible()?8:28),c.isItalic()!==y.isItalic()&&n.push(c.isItalic()?3:23),c.isDim()!==y.isDim()&&n.push(c.isDim()?2:22))}return n},f.prototype._nextCell=function(c,y,_,r){if(c.getWidth()!==0){var n=c.getChars()==="",u=this._diffStyle(c,this._cursorStyle);if(n?!s(this._cursorStyle,c):u.length>0){this._nullCellCount>0&&(s(this._cursorStyle,this._backgroundCell)||(this._currentRow+="["+this._nullCellCount+"X"),this._currentRow+="["+this._nullCellCount+"C",this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=_,this._lastContentCursorCol=this._lastCursorCol=r,this._currentRow+="["+u.join(";")+"m";var o=this._buffer.getLine(_);o!==void 0&&(o.getCell(r,this._cursorStyle),this._cursorStyleRow=_,this._cursorStyleCol=r)}n?this._nullCellCount+=c.getWidth():(this._nullCellCount>0&&(s(this._cursorStyle,this._backgroundCell)||(this._currentRow+="["+this._nullCellCount+"X"),this._currentRow+="["+this._nullCellCount+"C",this._nullCellCount=0),this._currentRow+=c.getChars(),this._lastContentCursorRow=this._lastCursorRow=_,this._lastContentCursorCol=this._lastCursorCol=r+c.getWidth())}},f.prototype._serializeString=function(){var c=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(c=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);for(var y="",_=0;_<c;_++)y+=this._allRows[_],_+1<c&&(y+=this._allRowSeparators[_]);var r,n=this._buffer.baseY+this._buffer.cursorY,u=this._buffer.cursorX;return(n!==this._lastCursorRow||u!==this._lastCursorCol)&&((r=n-this._lastCursorRow)>0?y+="["+r+"B":r<0&&(y+="["+-r+"A"),function(o){o>0?y+="["+o+"C":o<0&&(y+="["+-o+"D")}(u-this._lastCursorCol)),y},f}(function(){function d(f){this._buffer=f}return d.prototype.serialize=function(f,c){var y=this._buffer.getNullCell(),_=this._buffer.getNullCell(),r=y;this._beforeSerialize(c-f,f,c);for(var n=f;n<c;n++){var u=this._buffer.getLine(n);if(u)for(var o=0;o<u.length;o++){var i=u.getCell(o,r===y?_:y);i?(this._nextCell(i,r,n,o),r=i):console.warn("Can't get cell at row="+n+", col="+o)}this._rowEnd(n,n===c-1)}return this._afterSerialize(),this._serializeString()},d.prototype._nextCell=function(f,c,y,_){},d.prototype._rowEnd=function(f,c){},d.prototype._beforeSerialize=function(f,c,y){},d.prototype._afterSerialize=function(){},d.prototype._serializeString=function(){return""},d}()),h=function(){function d(){}return d.prototype.activate=function(f){this._terminal=f},d.prototype._serializeBuffer=function(f,c,y){var _,r,n=c.length,u=new v(c,f),o=y===void 0?n:(_=y+f.rows,r=n,Math.max(0,Math.min(_,r)));return u.serialize(n-o,n)},d.prototype._serializeModes=function(f){var c="",y=f.modes;if(y.applicationCursorKeysMode&&(c+="[?1h"),y.applicationKeypadMode&&(c+="[?66h"),y.bracketedPasteMode&&(c+="[?2004h"),y.insertMode&&(c+="[4h"),y.originMode&&(c+="[?6h"),y.reverseWraparoundMode&&(c+="[?45h"),y.sendFocusMode&&(c+="[?1004h"),y.wraparoundMode===!1&&(c+="[?7l"),y.mouseTrackingMode!=="none")switch(y.mouseTrackingMode){case"x10":c+="[?9h";break;case"vt200":c+="[?1000h";break;case"drag":c+="[?1002h";break;case"any":c+="[?1003h"}return c},d.prototype.serialize=function(f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");var c=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,f);return this._terminal.buffer.active.type==="alternate"&&(c+="[?1049h[H"+this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)),c+this._serializeModes(this._terminal)},d.prototype.dispose=function(){},d}();X.SerializeAddon=h}}[44](0,W),W})()})});var ki=Re((De,mi)=>{(function(W,z){typeof De=="object"&&typeof mi=="object"?mi.exports=z():typeof define=="function"&&define.amd?define([],z):typeof De=="object"?De.Unicode11Addon=z():W.Unicode11Addon=z()})(De,function(){return(()=>{"use strict";var W={433:(P,s,v)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV11=void 0;let h=v(455),d=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],f=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],c=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],y=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],_;function r(n,u){let o,i=0,e=u.length-1;if(n<u[0][0]||n>u[e][1])return!1;for(;e>=i;)if(o=i+e>>1,n>u[o][1])i=o+1;else{if(!(n<u[o][0]))return!0;e=o-1}return!1}s.UnicodeV11=class{constructor(){if(this.version="11",!_){_=new Uint8Array(65536),h.fill(_,1),_[0]=0,h.fill(_,0,1,32),h.fill(_,0,127,160);for(let n=0;n<d.length;++n)h.fill(_,0,d[n][0],d[n][1]+1);for(let n=0;n<c.length;++n)h.fill(_,2,c[n][0],c[n][1]+1)}}wcwidth(n){return n<32?0:n<127?1:n<65536?_[n]:r(n,f)?0:r(n,y)?2:1}}},455:(P,s)=>{function v(h,d,f,c){if(f===void 0&&(f=0),c===void 0&&(c=h.length),f>=h.length)return h;f=(h.length+f)%h.length,c=c>=h.length?h.length:(h.length+c)%h.length;for(var y=f;y<c;++y)h[y]=d;return h}Object.defineProperty(s,"__esModule",{value:!0}),s.concat=s.fillFallback=s.fill=void 0,s.fill=function(h,d,f,c){return h.fill?h.fill(d,f,c):v(h,d,f,c)},s.fillFallback=v,s.concat=function(h,d){var f=new h.constructor(h.length+d.length);return f.set(h),f.set(d,h.length),f}}},z={};function X(P){var s=z[P];if(s!==void 0)return s.exports;var v=z[P]={exports:{}};return W[P](v,v.exports,X),v.exports}var G={};return(()=>{var P=G;Object.defineProperty(P,"__esModule",{value:!0}),P.Unicode11Addon=void 0;let s=X(433);P.Unicode11Addon=class{activate(v){v.unicode.register(new s.UnicodeV11)}dispose(){}}})(),G})()})});var Ai=Te(Li()),Ri=Te(Ei()),Ti=Te(Mi()),Bi=Te(xi()),Di=Te(ki()),Oi;(function(G){G.block="block",G.underline="underline",G.bar="bar"})(Oi||(Oi={}));var Pi;(function(X){X.none="none",X.sound="sound"})(Pi||(Pi={}));var Oe;(function(G){G.hidden="hidden",G.autoHiding="autoHiding",G.visible="visible"})(Oe||(Oe={}));window.chrome.webview.addEventListener("message",W=>{switch(console.log("got message",W),W.data.$type){case"create-terminal":Ji(W.data.options,W.data.colors,W.data.keyBindings);break}});var fe,Pe,Ii,Hi;var Fi;var Ce=document.getElementById("terminal-container");function Ci(W,z,X){return X.split(W).join(z)}function Zi(W){return W=Ci("&quot;",'"',W),W=Ci("&squo;","'",W),Ci("&bsol;","\\",W)}function Ji(W,z,X){for(console.log("createTerminal entered");Ce.children.length;)Ce.removeChild(Ce.children[0]);console.log("removed children"),$i(W.scrollBarStyle),console.log("set scrollbar");let G={fontFamily:W.fontFamily,fontSize:W.fontSize,fontWeight:W.fontWeight,fontWeightBold:er(W.fontWeight),cursorStyle:W.cursorStyle,cursorBlink:W.cursorBlink,bellStyle:W.bellStyle,scrollback:W.scrollBackLimit,allowTransparency:!0,theme:z,windowsMode:!0,wordSeparator:Zi(W.wordSeparator)};fe=new Ai.Terminal(G),console.log("created term"),Ii=new Ti.SearchAddon,fe.loadAddon(Ii),Pe=new Ri.FitAddon,fe.loadAddon(Pe),Hi=new Bi.SerializeAddon,fe.loadAddon(Hi),Fi=new Di.Unicode11Addon,fe.loadAddon(Fi),fe.unicode.activeVersion="11",console.log("done with addons"),fe.open(Ce),Pe.fit(),fe.focus(),console.log("open, fit, focus one"),Qi(W.padding),console.log("set padding");let P;window.onresize=function(){clearTimeout(P),P=setTimeout(()=>Pe.fit(),500)},window.chrome.webview.postMessage({$type:"xterm-initialized",size:{columns:fe.cols,rows:fe.rows}}),console.log("sent size")}function $i(W){switch(W){case Oe.hidden:return Ce.style.setProperty("-ms-overflow-style","none");case Oe.autoHiding:return Ce.style.setProperty("-ms-overflow-style","-ms-autohiding-scrollbar");case Oe.visible:return Ce.style.setProperty("-ms-overflow-style","scrollbar")}}function Qi(W){let z=document.querySelector(".terminal");z.style.padding=W+"px",Pe.fit()}document.oncontextmenu=function(){return!1};function er(W){return parseInt(W.toString())>600?"900":"bold"}})();
//# sourceMappingURL=bundle.js.map

(()=>{var ji=Object.create;var Tr=Object.defineProperty;var Ui=Object.getOwnPropertyDescriptor;var Wi=Object.getOwnPropertyNames;var qi=Object.getPrototypeOf,Ni=Object.prototype.hasOwnProperty;var zi=S=>Tr(S,"__esModule",{value:!0});var we=(S,l)=>()=>(l||S((l={exports:{}}).exports,l),l.exports);var Ki=(S,l,v)=>{if(l&&typeof l=="object"||typeof l=="function")for(let R of Wi(l))!Ni.call(S,R)&&R!=="default"&&Tr(S,R,{get:()=>l[R],enumerable:!(v=Ui(l,R))||v.enumerable});return S},He=S=>Ki(zi(Tr(S!=null?ji(qi(S)):{},"default",S&&S.__esModule&&"default"in S?{get:()=>S.default,enumerable:!0}:{value:S,enumerable:!0})),S);var Jr=we((Xt,Or)=>{(function(S,l){if(typeof Xt=="object"&&typeof Or=="object")Or.exports=l();else if(typeof define=="function"&&define.amd)define([],l);else{var v=l();for(var R in v)(typeof Xt=="object"?Xt:S)[R]=v[R]}})(self,function(){return(()=>{"use strict";var S={4567:function(M,t,u){var h,_=this&&this.__extends||(h=function(r,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])},h(r,e)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}h(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var f=u(9042),s=u(6114),y=u(9924),g=u(3656),n=u(844),o=u(5596),p=u(9631),a=function(r){function e(i,c){var d=r.call(this)||this;d._terminal=i,d._renderService=c,d._liveRegionLineCount=0,d._charsToConsume=[],d._charsToAnnounce="",d._accessibilityTreeRoot=document.createElement("div"),d._accessibilityTreeRoot.setAttribute("role","document"),d._accessibilityTreeRoot.classList.add("xterm-accessibility"),d._accessibilityTreeRoot.tabIndex=0,d._rowContainer=document.createElement("div"),d._rowContainer.setAttribute("role","list"),d._rowContainer.classList.add("xterm-accessibility-tree"),d._rowElements=[];for(var m=0;m<d._terminal.rows;m++)d._rowElements[m]=d._createAccessibilityTreeNode(),d._rowContainer.appendChild(d._rowElements[m]);if(d._topBoundaryFocusListener=function(C){return d._onBoundaryFocus(C,0)},d._bottomBoundaryFocusListener=function(C){return d._onBoundaryFocus(C,1)},d._rowElements[0].addEventListener("focus",d._topBoundaryFocusListener),d._rowElements[d._rowElements.length-1].addEventListener("focus",d._bottomBoundaryFocusListener),d._refreshRowsDimensions(),d._accessibilityTreeRoot.appendChild(d._rowContainer),d._renderRowsDebouncer=new y.TimeBasedDebouncer(d._renderRows.bind(d)),d._refreshRows(),d._liveRegion=document.createElement("div"),d._liveRegion.classList.add("live-region"),d._liveRegion.setAttribute("aria-live","assertive"),d._accessibilityTreeRoot.appendChild(d._liveRegion),!d._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return d._terminal.element.insertAdjacentElement("afterbegin",d._accessibilityTreeRoot),d.register(d._renderRowsDebouncer),d.register(d._terminal.onResize(function(C){return d._onResize(C.rows)})),d.register(d._terminal.onRender(function(C){return d._refreshRows(C.start,C.end)})),d.register(d._terminal.onScroll(function(){return d._refreshRows()})),d.register(d._terminal.onA11yChar(function(C){return d._onChar(C)})),d.register(d._terminal.onLineFeed(function(){return d._onChar(`
`)})),d.register(d._terminal.onA11yTab(function(C){return d._onTab(C)})),d.register(d._terminal.onKey(function(C){return d._onKey(C.key)})),d.register(d._terminal.onBlur(function(){return d._clearLiveRegion()})),d.register(d._renderService.onDimensionsChange(function(){return d._refreshRowsDimensions()})),d._screenDprMonitor=new o.ScreenDprMonitor,d.register(d._screenDprMonitor),d._screenDprMonitor.setListener(function(){return d._refreshRowsDimensions()}),d.register((0,g.addDisposableDomListener)(window,"resize",function(){return d._refreshRowsDimensions()})),d}return _(e,r),e.prototype.dispose=function(){r.prototype.dispose.call(this),(0,p.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(i,c){var d=i.target,m=this._rowElements[c===0?1:this._rowElements.length-2];if(d.getAttribute("aria-posinset")!==(c===0?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===m){var C,E;if(c===0?(C=d,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(C=this._rowElements.shift(),E=d,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){var L=this._createAccessibilityTreeNode();this._rowElements.unshift(L),this._rowContainer.insertAdjacentElement("afterbegin",L)}else L=this._createAccessibilityTreeNode(),this._rowElements.push(L),this._rowContainer.appendChild(L);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},e.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},e.prototype._onTab=function(i){for(var c=0;c<i;c++)this._onChar(" ")},e.prototype._onChar=function(i){var c=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,i===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){c._accessibilityTreeRoot.appendChild(c._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&(0,p.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},e.prototype._refreshRows=function(i,c){this._renderRowsDebouncer.refresh(i,c,this._terminal.rows)},e.prototype._renderRows=function(i,c){for(var d=this._terminal.buffer,m=d.lines.length.toString(),C=i;C<=c;C++){var E=d.translateBufferLineToString(d.ydisp+C,!0),L=(d.ydisp+C+1).toString(),b=this._rowElements[C];b&&(E.length===0?b.innerText="\xA0":b.textContent=E,b.setAttribute("aria-posinset",L),b.setAttribute("aria-setsize",m))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},e.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(n.Disposable);t.AccessibilityManager=a},3614:(M,t)=>{function u(s){return s.replace(/\r?\n/g,"\r")}function h(s,y){return y?"[200~"+s+"[201~":s}function _(s,y,g){s=h(s=u(s),g.decPrivateModes.bracketedPasteMode),g.triggerDataEvent(s,!0),y.value=""}function f(s,y,g){var n=g.getBoundingClientRect(),o=s.clientX-n.left-10,p=s.clientY-n.top-10;y.style.width="20px",y.style.height="20px",y.style.left=o+"px",y.style.top=p+"px",y.style.zIndex="1000",y.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=u,t.bracketTextForPaste=h,t.copyHandler=function(s,y){s.clipboardData&&s.clipboardData.setData("text/plain",y.selectionText),s.preventDefault()},t.handlePasteEvent=function(s,y,g){s.stopPropagation(),s.clipboardData&&_(s.clipboardData.getData("text/plain"),y,g)},t.paste=_,t.moveTextAreaUnderMouseCursor=f,t.rightClickHandler=function(s,y,g,n,o){f(s,y,g),o&&n.rightClickSelect(s),y.value=n.selectionText,y.select()}},4774:(M,t)=>{var u,h,_,f;function s(g){var n=g.toString(16);return n.length<2?"0"+n:n}function y(g,n){return g<n?(n+.05)/(g+.05):(g+.05)/(n+.05)}Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(g){g.toCss=function(n,o,p,a){return a!==void 0?"#"+s(n)+s(o)+s(p)+s(a):"#"+s(n)+s(o)+s(p)},g.toRgba=function(n,o,p,a){return a===void 0&&(a=255),(n<<24|o<<16|p<<8|a)>>>0}}(u=t.channels||(t.channels={})),(h=t.color||(t.color={})).blend=function(g,n){var o=(255&n.rgba)/255;if(o===1)return{css:n.css,rgba:n.rgba};var p=n.rgba>>24&255,a=n.rgba>>16&255,r=n.rgba>>8&255,e=g.rgba>>24&255,i=g.rgba>>16&255,c=g.rgba>>8&255,d=e+Math.round((p-e)*o),m=i+Math.round((a-i)*o),C=c+Math.round((r-c)*o);return{css:u.toCss(d,m,C),rgba:u.toRgba(d,m,C)}},h.isOpaque=function(g){return(255&g.rgba)==255},h.ensureContrastRatio=function(g,n,o){var p=f.ensureContrastRatio(g.rgba,n.rgba,o);if(p)return f.toColor(p>>24&255,p>>16&255,p>>8&255)},h.opaque=function(g){var n=(255|g.rgba)>>>0,o=f.toChannels(n),p=o[0],a=o[1],r=o[2];return{css:u.toCss(p,a,r),rgba:n}},h.opacity=function(g,n){var o=Math.round(255*n),p=f.toChannels(g.rgba),a=p[0],r=p[1],e=p[2];return{css:u.toCss(a,r,e,o),rgba:u.toRgba(a,r,e,o)}},h.toColorRGB=function(g){return[g.rgba>>24&255,g.rgba>>16&255,g.rgba>>8&255]},(t.css||(t.css={})).toColor=function(g){switch(g.length){case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(g){function n(o,p,a){var r=o/255,e=p/255,i=a/255;return .2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}g.relativeLuminance=function(o){return n(o>>16&255,o>>8&255,255&o)},g.relativeLuminance2=n}(_=t.rgb||(t.rgb={})),function(g){function n(p,a,r){for(var e=p>>24&255,i=p>>16&255,c=p>>8&255,d=a>>24&255,m=a>>16&255,C=a>>8&255,E=y(_.relativeLuminance2(d,C,m),_.relativeLuminance2(e,i,c));E<r&&(d>0||m>0||C>0);)d-=Math.max(0,Math.ceil(.1*d)),m-=Math.max(0,Math.ceil(.1*m)),C-=Math.max(0,Math.ceil(.1*C)),E=y(_.relativeLuminance2(d,C,m),_.relativeLuminance2(e,i,c));return(d<<24|m<<16|C<<8|255)>>>0}function o(p,a,r){for(var e=p>>24&255,i=p>>16&255,c=p>>8&255,d=a>>24&255,m=a>>16&255,C=a>>8&255,E=y(_.relativeLuminance2(d,C,m),_.relativeLuminance2(e,i,c));E<r&&(d<255||m<255||C<255);)d=Math.min(255,d+Math.ceil(.1*(255-d))),m=Math.min(255,m+Math.ceil(.1*(255-m))),C=Math.min(255,C+Math.ceil(.1*(255-C))),E=y(_.relativeLuminance2(d,C,m),_.relativeLuminance2(e,i,c));return(d<<24|m<<16|C<<8|255)>>>0}g.ensureContrastRatio=function(p,a,r){var e=_.relativeLuminance(p>>8),i=_.relativeLuminance(a>>8);if(y(e,i)<r)return i<e?n(p,a,r):o(p,a,r)},g.reduceLuminance=n,g.increaseLuminance=o,g.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},g.toColor=function(p,a,r){return{css:u.toCss(p,a,r),rgba:u.toRgba(p,a,r)}}}(f=t.rgba||(t.rgba={})),t.toPaddedHex=s,t.contrastRatio=y},7239:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var u=function(){function h(){this._color={},this._rgba={}}return h.prototype.clear=function(){this._color={},this._rgba={}},h.prototype.setCss=function(_,f,s){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][f]=s},h.prototype.getCss=function(_,f){return this._rgba[_]?this._rgba[_][f]:void 0},h.prototype.setColor=function(_,f,s){this._color[_]||(this._color[_]={}),this._color[_][f]=s},h.prototype.getColor=function(_,f){return this._color[_]?this._color[_][f]:void 0},h}();t.ColorContrastCache=u},5680:function(M,t,u){var h=this&&this.__spreadArray||function(a,r,e){if(e||arguments.length===2)for(var i,c=0,d=r.length;c<d;c++)!i&&c in r||(i||(i=Array.prototype.slice.call(r,0,c)),i[c]=r[c]);return a.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var _=u(4774),f=u(7239),s=_.css.toColor("#ffffff"),y=_.css.toColor("#000000"),g=_.css.toColor("#ffffff"),n=_.css.toColor("#000000"),o={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var a=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],r=[0,95,135,175,215,255],e=0;e<216;e++){var i=r[e/36%6|0],c=r[e/6%6|0],d=r[e%6];a.push({css:_.channels.toCss(i,c,d),rgba:_.channels.toRgba(i,c,d)})}for(e=0;e<24;e++){var m=8+10*e;a.push({css:_.channels.toCss(m,m,m),rgba:_.channels.toRgba(m,m,m)})}return a}());var p=function(){function a(r,e){this.allowTransparency=e;var i=r.createElement("canvas");i.width=1,i.height=1;var c=i.getContext("2d");if(!c)throw new Error("Could not get rendering context");this._ctx=c,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:s,background:y,cursor:g,cursorAccent:n,selectionTransparent:o,selectionOpaque:_.color.blend(y,o),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return a.prototype.onOptionsChange=function(r){r==="minimumContrastRatio"&&this._contrastCache.clear()},a.prototype.setTheme=function(r){r===void 0&&(r={}),this.colors.foreground=this._parseColor(r.foreground,s),this.colors.background=this._parseColor(r.background,y),this.colors.cursor=this._parseColor(r.cursor,g,!0),this.colors.cursorAccent=this._parseColor(r.cursorAccent,n,!0),this.colors.selectionTransparent=this._parseColor(r.selection,o,!0),this.colors.selectionOpaque=_.color.blend(this.colors.background,this.colors.selectionTransparent),_.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=_.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(r.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(r.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(r.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(r.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(r.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(r.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(r.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(r.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(r.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(r.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(r.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(r.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(r.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(r.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(r.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(r.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},a.prototype.restoreColor=function(r){if(r!==void 0)switch(r){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[r]=this._restoreColors.ansi[r]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},a.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:h([],this.colors.ansi,!0)}},a.prototype._parseColor=function(r,e,i){if(i===void 0&&(i=this.allowTransparency),r===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=r,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+r+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var c=this._ctx.getImageData(0,0,1,1).data;if(c[3]!==255){if(!i)return console.warn("Color: "+r+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var d=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(w){return Number(w)}),m=d[0],C=d[1],E=d[2],L=d[3],b=Math.round(255*L);return{rgba:_.channels.toRgba(m,C,E,b),css:r}}return{css:this._ctx.fillStyle,rgba:_.channels.toRgba(c[0],c[1],c[2],c[3])}},a}();t.ColorManager=p},9631:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var u,h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];for(var f=0,s=h;f<s.length;f++){var y=s[f];(u=y==null?void 0:y.parentElement)===null||u===void 0||u.removeChild(y)}}},3656:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(u,h,_,f){u.addEventListener(h,_,f);var s=!1;return{dispose:function(){s||(s=!0,u.removeEventListener(h,_,f))}}}},3551:function(M,t,u){var h=this&&this.__decorate||function(n,o,p,a){var r,e=arguments.length,i=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,p):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,o,p,a);else for(var c=n.length-1;c>=0;c--)(r=n[c])&&(i=(e<3?r(i):e>3?r(o,p,i):r(o,p))||i);return e>3&&i&&Object.defineProperty(o,p,i),i},_=this&&this.__param||function(n,o){return function(p,a){o(p,a,n)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var f=u(8460),s=u(2585),y=function(){function n(o,p,a){this._bufferService=o,this._logService=p,this._unicodeService=a,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(n.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),n.prototype.attachToDom=function(o,p){this._element=o,this._mouseZoneManager=p},n.prototype.linkifyRows=function(o,p){var a=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=o,this._rowsToLinkify.end=p):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,o),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,p)),this._mouseZoneManager.clearAll(o,p),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return a._linkifyRows()},n._timeBeforeLatency))},n.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var o=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var p=o.ydisp+this._rowsToLinkify.start;if(!(p>=o.lines.length)){for(var a=o.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,p,a,r,r);e.hasNext();)for(var i=e.next(),c=0;c<this._linkMatchers.length;c++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[c]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},n.prototype.registerLinkMatcher=function(o,p,a){if(a===void 0&&(a={}),!p)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:o,handler:p,matchIndex:a.matchIndex,validationCallback:a.validationCallback,hoverTooltipCallback:a.tooltipCallback,hoverLeaveCallback:a.leaveCallback,willLinkActivate:a.willLinkActivate,priority:a.priority||0};return this._addLinkMatcherToList(r),r.id},n.prototype._addLinkMatcherToList=function(o){if(this._linkMatchers.length!==0){for(var p=this._linkMatchers.length-1;p>=0;p--)if(o.priority<=this._linkMatchers[p].priority)return void this._linkMatchers.splice(p+1,0,o);this._linkMatchers.splice(0,0,o)}else this._linkMatchers.push(o)},n.prototype.deregisterLinkMatcher=function(o){for(var p=0;p<this._linkMatchers.length;p++)if(this._linkMatchers[p].id===o)return this._linkMatchers.splice(p,1),!0;return!1},n.prototype._doLinkifyRow=function(o,p,a){for(var r,e=this,i=new RegExp(a.regex.source,(a.regex.flags||"")+"g"),c=-1,d=function(){var C=r[typeof a.matchIndex!="number"?0:a.matchIndex];if(!C)return m._logService.debug("match found without corresponding matchIndex",r,a),"break";if(c=p.indexOf(C,c+1),i.lastIndex=c+C.length,c<0)return"break";var E=m._bufferService.buffer.stringIndexToBufferIndex(o,c);if(E[0]<0)return"break";var L=m._bufferService.buffer.lines.get(E[0]);if(!L)return"break";var b=L.getFg(E[1]),w=b?b>>9&511:void 0;a.validationCallback?a.validationCallback(C,function(B){e._rowsTimeoutId||B&&e._addLink(E[1],E[0]-e._bufferService.buffer.ydisp,C,a,w)}):m._addLink(E[1],E[0]-m._bufferService.buffer.ydisp,C,a,w)},m=this;(r=i.exec(p))!==null&&d()!=="break";);},n.prototype._addLink=function(o,p,a,r,e){var i=this;if(this._mouseZoneManager&&this._element){var c=this._unicodeService.getStringCellWidth(a),d=o%this._bufferService.cols,m=p+Math.floor(o/this._bufferService.cols),C=(d+c)%this._bufferService.cols,E=m+Math.floor((d+c)/this._bufferService.cols);C===0&&(C=this._bufferService.cols,E--),this._mouseZoneManager.add(new g(d+1,m+1,C+1,E+1,function(L){if(r.handler)return r.handler(L,a);var b=window.open();b?(b.opener=null,b.location.href=a):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(d,m,C,E,e)),i._element.classList.add("xterm-cursor-pointer")},function(L){i._onLinkTooltip.fire(i._createLinkHoverEvent(d,m,C,E,e)),r.hoverTooltipCallback&&r.hoverTooltipCallback(L,a,{start:{x:d,y:m},end:{x:C,y:E}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(d,m,C,E,e)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(L){return!r.willLinkActivate||r.willLinkActivate(L,a)}))}},n.prototype._createLinkHoverEvent=function(o,p,a,r,e){return{x1:o,y1:p,x2:a,y2:r,cols:this._bufferService.cols,fg:e}},n._timeBeforeLatency=200,n=h([_(0,s.IBufferService),_(1,s.ILogService),_(2,s.IUnicodeService)],n)}();t.Linkifier=y;var g=function(n,o,p,a,r,e,i,c,d){this.x1=n,this.y1=o,this.x2=p,this.y2=a,this.clickCallback=r,this.hoverCallback=e,this.tooltipCallback=i,this.leaveCallback=c,this.willLinkActivate=d};t.MouseZone=g},6465:function(M,t,u){var h,_=this&&this.__extends||(h=function(a,r){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=a}h(a,r),a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),f=this&&this.__decorate||function(a,r,e,i){var c,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(a,r,e,i);else for(var C=a.length-1;C>=0;C--)(c=a[C])&&(m=(d<3?c(m):d>3?c(r,e,m):c(r,e))||m);return d>3&&m&&Object.defineProperty(r,e,m),m},s=this&&this.__param||function(a,r){return function(e,i){r(e,i,a)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var y=u(2585),g=u(8460),n=u(844),o=u(3656),p=function(a){function r(e){var i=a.call(this)||this;return i._bufferService=e,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new g.EventEmitter),i._onHideLinkUnderline=i.register(new g.EventEmitter),i.register((0,n.getDisposeArrayDisposable)(i._linkCacheDisposables)),i}return _(r,a),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(e){var i=this;return this._linkProviders.push(e),{dispose:function(){var c=i._linkProviders.indexOf(e);c!==-1&&i._linkProviders.splice(c,1)}}},r.prototype.attachToDom=function(e,i,c){var d=this;this._element=e,this._mouseService=i,this._renderService=c,this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",function(){d._isMouseOut=!0,d._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},r.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var c=e.composedPath(),d=0;d<c.length;d++){var m=c[d];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},r.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},r.prototype._askForLink=function(e,i){var c,d=this;this._activeProviderReplies&&i||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(function(C){C==null||C.forEach(function(E){E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var m=!1;this._linkProviders.forEach(function(C,E){var L;i?((L=d._activeProviderReplies)===null||L===void 0?void 0:L.get(E))&&(m=d._checkLinkProviderResult(E,e,m)):C.provideLinks(e.y,function(b){var w,B;if(!d._isMouseOut){var k=b==null?void 0:b.map(function(F){return{link:F}});(w=d._activeProviderReplies)===null||w===void 0||w.set(E,k),m=d._checkLinkProviderResult(E,e,m),((B=d._activeProviderReplies)===null||B===void 0?void 0:B.size)===d._linkProviders.length&&d._removeIntersectingLinks(e.y,d._activeProviderReplies)}})})},r.prototype._removeIntersectingLinks=function(e,i){for(var c=new Set,d=0;d<i.size;d++){var m=i.get(d);if(m)for(var C=0;C<m.length;C++)for(var E=m[C],L=E.link.range.start.y<e?0:E.link.range.start.x,b=E.link.range.end.y>e?this._bufferService.cols:E.link.range.end.x,w=L;w<=b;w++){if(c.has(w)){m.splice(C--,1);break}c.add(w)}}},r.prototype._checkLinkProviderResult=function(e,i,c){var d,m=this;if(!this._activeProviderReplies)return c;for(var C=this._activeProviderReplies.get(e),E=!1,L=0;L<e;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(E=!0);if(!E&&C){var b=C.find(function(B){return m._linkAtPosition(B.link,i)});b&&(c=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(L=0;L<this._activeProviderReplies.size;L++){var w=(d=this._activeProviderReplies.get(L))===null||d===void 0?void 0:d.find(function(B){return m._linkAtPosition(B.link,i)});if(w){c=!0,this._handleNewLink(w);break}}return c},r.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(e,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,n.disposeArray)(this._linkCacheDisposables))},r.prototype._handleNewLink=function(e){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(e.link,c)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var d,m;return(m=(d=i._currentLink)===null||d===void 0?void 0:d.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:function(d){var m,C;((m=i._currentLink)===null||m===void 0?void 0:m.state)&&i._currentLink.state.decorations.pointerCursor!==d&&(i._currentLink.state.decorations.pointerCursor=d,i._currentLink.state.isHovered&&((C=i._element)===null||C===void 0||C.classList.toggle("xterm-cursor-pointer",d)))}},underline:{get:function(){var d,m;return(m=(d=i._currentLink)===null||d===void 0?void 0:d.state)===null||m===void 0?void 0:m.decorations.underline},set:function(d){var m,C,E;((m=i._currentLink)===null||m===void 0?void 0:m.state)&&((E=(C=i._currentLink)===null||C===void 0?void 0:C.state)===null||E===void 0?void 0:E.decorations.underline)!==d&&(i._currentLink.state.decorations.underline=d,i._currentLink.state.isHovered&&i._fireUnderlineEvent(e.link,d))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(d){var m=d.start===0?0:d.start+1+i._bufferService.buffer.ydisp;i._clearCurrentLink(m,d.end+1+i._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(e,i,c){var d;((d=this._currentLink)===null||d===void 0?void 0:d.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(c,i.text)},r.prototype._fireUnderlineEvent=function(e,i){var c=e.range,d=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-d-1,c.end.x,c.end.y-d-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)},r.prototype._linkLeave=function(e,i,c){var d;((d=this._currentLink)===null||d===void 0?void 0:d.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(c,i.text)},r.prototype._linkAtPosition=function(e,i){var c=e.range.start.y===e.range.end.y,d=e.range.start.y<i.y,m=e.range.end.y>i.y;return(c&&e.range.start.x<=i.x&&e.range.end.x>=i.x||d&&e.range.end.x>=i.x||m&&e.range.start.x<=i.x||d&&m)&&e.range.start.y<=i.y&&e.range.end.y>=i.y},r.prototype._positionFromMouseEvent=function(e,i,c){var d=c.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(e,i,c,d,m){return{x1:e,y1:i,x2:c,y2:d,cols:this._bufferService.cols,fg:m}},f([s(0,y.IBufferService)],r)}(n.Disposable);t.Linkifier2=p},9042:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(M,t,u){var h,_=this&&this.__extends||(h=function(a,r){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=a}h(a,r),a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),f=this&&this.__decorate||function(a,r,e,i){var c,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(a,r,e,i);else for(var C=a.length-1;C>=0;C--)(c=a[C])&&(m=(d<3?c(m):d>3?c(r,e,m):c(r,e))||m);return d>3&&m&&Object.defineProperty(r,e,m),m},s=this&&this.__param||function(a,r){return function(e,i){r(e,i,a)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var y=u(844),g=u(3656),n=u(4725),o=u(2585),p=function(a){function r(e,i,c,d,m,C){var E=a.call(this)||this;return E._element=e,E._screenElement=i,E._bufferService=c,E._mouseService=d,E._selectionService=m,E._optionsService=C,E._zones=[],E._areZonesActive=!1,E._lastHoverCoords=[void 0,void 0],E._initialSelectionLength=0,E.register((0,g.addDisposableDomListener)(E._element,"mousedown",function(L){return E._onMouseDown(L)})),E._mouseMoveListener=function(L){return E._onMouseMove(L)},E._mouseLeaveListener=function(L){return E._onMouseLeave(L)},E._clickListener=function(L){return E._onClick(L)},E}return _(r,a),r.prototype.dispose=function(){a.prototype.dispose.call(this),this._deactivate()},r.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},r.prototype.clearAll=function(e,i){if(this._zones.length!==0){e&&i||(e=0,i=this._bufferService.rows-1);for(var c=0;c<this._zones.length;c++){var d=this._zones[c];(d.y1>e&&d.y1<=i+1||d.y2>e&&d.y2<=i+1||d.y1<e&&d.y2>i+1)&&(this._currentZone&&this._currentZone===d&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(c--,1))}this._zones.length===0&&this._deactivate()}},r.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},r.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},r.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},r.prototype._onHover=function(e){var i=this,c=this._findZoneEventAt(e);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},r.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var i=this._findZoneEventAt(e);i==null||i.tooltipCallback(e)},r.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var i=this._findZoneEventAt(e);(i==null?void 0:i.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},r.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},r.prototype._onClick=function(e){var i=this._findZoneEventAt(e),c=this._getSelectionLength();i&&c===this._initialSelectionLength&&(i.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},r.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},r.prototype._findZoneEventAt=function(e){var i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var c=i[0],d=i[1],m=0;m<this._zones.length;m++){var C=this._zones[m];if(C.y1===C.y2){if(d===C.y1&&c>=C.x1&&c<C.x2)return C}else if(d===C.y1&&c>=C.x1||d===C.y2&&c<C.x2||d>C.y1&&d<C.y2)return C}},f([s(2,o.IBufferService),s(3,n.IMouseService),s(4,n.ISelectionService),s(5,o.IOptionsService)],r)}(y.Disposable);t.MouseZoneManager=p},6193:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var u=function(){function h(_){this._renderCallback=_}return h.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},h.prototype.refresh=function(_,f,s){var y=this;this._rowCount=s,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return y._innerRefresh()}))},h.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,f)}},h}();t.RenderDebouncer=u},5596:function(M,t,u){var h,_=this&&this.__extends||(h=function(s,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,n){g.__proto__=n}||function(g,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(g[o]=n[o])},h(s,y)},function(s,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function g(){this.constructor=s}h(s,y),s.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var f=function(s){function y(){var g=s!==null&&s.apply(this,arguments)||this;return g._currentDevicePixelRatio=window.devicePixelRatio,g}return _(y,s),y.prototype.setListener=function(g){var n=this;this._listener&&this.clearListener(),this._listener=g,this._outerListener=function(){n._listener&&(n._listener(window.devicePixelRatio,n._currentDevicePixelRatio),n._updateDpr())},this._updateDpr()},y.prototype.dispose=function(){s.prototype.dispose.call(this),this.clearListener()},y.prototype._updateDpr=function(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},y.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},y}(u(844).Disposable);t.ScreenDprMonitor=f},3236:function(M,t,u){var h,_=this&&this.__extends||(h=function(Z,A){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var N in P)Object.prototype.hasOwnProperty.call(P,N)&&(D[N]=P[N])},h(Z,A)},function(Z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function D(){this.constructor=Z}h(Z,A),Z.prototype=A===null?Object.create(A):(D.prototype=A.prototype,new D)});Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var f=u(2950),s=u(1680),y=u(3614),g=u(2584),n=u(5435),o=u(3525),p=u(3551),a=u(9312),r=u(6114),e=u(3656),i=u(9042),c=u(357),d=u(6954),m=u(4567),C=u(1296),E=u(7399),L=u(8460),b=u(8437),w=u(5680),B=u(3230),k=u(4725),F=u(428),O=u(8934),x=u(6465),T=u(5114),I=u(8969),j=u(4774),z=u(4269),K=u(5941),X=typeof window!="undefined"?window.document:null,$=function(Z){function A(D){D===void 0&&(D={});var P=Z.call(this,D)||this;return P.browser=r,P._keyDownHandled=!1,P._keyPressHandled=!1,P._unprocessedDeadKey=!1,P._onCursorMove=new L.EventEmitter,P._onKey=new L.EventEmitter,P._onRender=new L.EventEmitter,P._onSelectionChange=new L.EventEmitter,P._onTitleChange=new L.EventEmitter,P._onBell=new L.EventEmitter,P._onFocus=new L.EventEmitter,P._onBlur=new L.EventEmitter,P._onA11yCharEmitter=new L.EventEmitter,P._onA11yTabEmitter=new L.EventEmitter,P._setup(),P.linkifier=P._instantiationService.createInstance(p.Linkifier),P.linkifier2=P.register(P._instantiationService.createInstance(x.Linkifier2)),P.register(P._inputHandler.onRequestBell(function(){return P.bell()})),P.register(P._inputHandler.onRequestRefreshRows(function(N,H){return P.refresh(N,H)})),P.register(P._inputHandler.onRequestSendFocus(function(){return P._reportFocus()})),P.register(P._inputHandler.onRequestReset(function(){return P.reset()})),P.register(P._inputHandler.onRequestWindowsOptionsReport(function(N){return P._reportWindowsOptions(N)})),P.register(P._inputHandler.onColor(function(N){return P._handleColorEvent(N)})),P.register((0,L.forwardEvent)(P._inputHandler.onCursorMove,P._onCursorMove)),P.register((0,L.forwardEvent)(P._inputHandler.onTitleChange,P._onTitleChange)),P.register((0,L.forwardEvent)(P._inputHandler.onA11yChar,P._onA11yCharEmitter)),P.register((0,L.forwardEvent)(P._inputHandler.onA11yTab,P._onA11yTabEmitter)),P.register(P._bufferService.onResize(function(N){return P._afterResize(N.cols,N.rows)})),P}return _(A,Z),Object.defineProperty(A.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),A.prototype._handleColorEvent=function(D){var P,N;if(this._colorManager){for(var H=0,V=D;H<V.length;H++){var Y=V[H],J=void 0,ee="";switch(Y.index){case 256:J="foreground",ee="10";break;case 257:J="background",ee="11";break;case 258:J="cursor",ee="12";break;default:J="ansi",ee="4;"+Y.index}if(J)switch(Y.type){case 0:var oe=j.color.toColorRGB(J==="ansi"?this._colorManager.colors.ansi[Y.index]:this._colorManager.colors[J]);this.coreService.triggerDataEvent(g.C0.ESC+"]"+ee+";"+(0,K.toRgbString)(oe)+g.C0.BEL);break;case 1:J==="ansi"?this._colorManager.colors.ansi[Y.index]=j.rgba.toColor.apply(j.rgba,Y.color):this._colorManager.colors[J]=j.rgba.toColor.apply(j.rgba,Y.color);break;case 2:this._colorManager.restoreColor(Y.index)}}(P=this._renderService)===null||P===void 0||P.setColors(this._colorManager.colors),(N=this.viewport)===null||N===void 0||N.onThemeChange(this._colorManager.colors)}},A.prototype.dispose=function(){var D,P,N;this._isDisposed||(Z.prototype.dispose.call(this),(D=this._renderService)===null||D===void 0||D.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(N=(P=this.element)===null||P===void 0?void 0:P.parentNode)===null||N===void 0||N.removeChild(this.element))},A.prototype._setup=function(){Z.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(A.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),A.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},A.prototype._updateOptions=function(D){var P,N,H,V;switch(Z.prototype._updateOptions.call(this,D),D){case"fontFamily":case"fontSize":(P=this._renderService)===null||P===void 0||P.clear(),(N=this._charSizeService)===null||N===void 0||N.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(H=this.viewport)===null||H===void 0||H.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new m.AccessibilityManager(this,this._renderService)):((V=this._accessibilityManager)===null||V===void 0||V.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},A.prototype._onTextAreaFocus=function(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(g.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},A.prototype.blur=function(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()},A.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(g.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},A.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var D=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get(D);if(P){var N=Math.min(this.buffer.x,this.cols-1),H=this._renderService.dimensions.actualCellHeight,V=P.getWidth(N),Y=this._renderService.dimensions.actualCellWidth*V,J=this.buffer.y*this._renderService.dimensions.actualCellHeight,ee=N*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=ee+"px",this.textarea.style.top=J+"px",this.textarea.style.width=Y+"px",this.textarea.style.height=H+"px",this.textarea.style.lineHeight=H+"px",this.textarea.style.zIndex="-5"}}},A.prototype._initGlobal=function(){var D=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(N){D.hasSelection()&&(0,y.copyHandler)(N,D._selectionService)}));var P=function(N){return(0,y.handlePasteEvent)(N,D.textarea,D.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",P)),this.register((0,e.addDisposableDomListener)(this.element,"paste",P)),r.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(N){N.button===2&&(0,y.rightClickHandler)(N,D.textarea,D.screenElement,D._selectionService,D.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",function(N){(0,y.rightClickHandler)(N,D.textarea,D.screenElement,D._selectionService,D.options.rightClickSelectsWord)})),r.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(N){N.button===1&&(0,y.moveTextAreaUnderMouseCursor)(N,D.textarea,D.screenElement)}))},A.prototype._bindKeys=function(){var D=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(P){return D._keyUp(P)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(P){return D._keyDown(P)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(P){return D._keyPress(P)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return D._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(P){return D._compositionHelper.compositionupdate(P)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return D._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(P){return D._inputEvent(P)},!0)),this.register(this.onRender(function(){return D._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(P){return D._queueLinkification(P.start,P.end)}))},A.prototype.open=function(D){var P=this;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),D.appendChild(this.element);var N=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(Y){return P._onTextAreaFocus(Y)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return P._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var H=this._instantiationService.createInstance(T.CoreBrowserService,this.textarea);this._instantiationService.setService(k.ICoreBrowserService,H),this._charSizeService=this._instantiationService.createInstance(F.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new w.ColorManager(X,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Y){return P._colorManager.onOptionsChange(Y)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(z.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService);var V=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(B.RenderService,V,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(Y){return P._onRender.fire(Y)})),this.onResize(function(Y){return P._renderService.resize(Y.cols,Y.rows)}),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(N),this._soundService=this._instantiationService.createInstance(c.SoundService),this._instantiationService.setService(k.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(O.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(s.Viewport,function(Y){return P.scrollLines(Y,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return P.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){P._renderService.onCursorMove(),P._syncTextArea()})),this.register(this.onResize(function(){return P._renderService.onResize(P.cols,P.rows)})),this.register(this.onBlur(function(){return P._renderService.onBlur()})),this.register(this.onFocus(function(){return P._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return P.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(a.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Y){return P.scrollLines(Y.amount,Y.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return P._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Y){return P._renderService.onSelectionChanged(Y.start,Y.end,Y.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Y){P.textarea.value=Y,P.textarea.focus(),P.textarea.select()})),this.register(this._onScroll.event(function(Y){P.viewport.syncScrollArea(),P._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return P._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(d.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return P._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(Y){return P._selectionService.onMouseDown(Y)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new m.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},A.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(o.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(C.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},A.prototype._setTheme=function(D){var P,N,H;this._theme=D,(P=this._colorManager)===null||P===void 0||P.setTheme(D),(N=this._renderService)===null||N===void 0||N.setColors(this._colorManager.colors),(H=this.viewport)===null||H===void 0||H.onThemeChange(this._colorManager.colors)},A.prototype.bindMouse=function(){var D=this,P=this,N=this.element;function H(G){var ne,le,de=P._mouseService.getRawByteCoords(G,P.screenElement,P.cols,P.rows);if(!de)return!1;switch(G.overrideType||G.type){case"mousemove":le=32,G.buttons===void 0?(ne=3,G.button!==void 0&&(ne=G.button<3?G.button:3)):ne=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":le=0,ne=G.button<3?G.button:3;break;case"mousedown":le=1,ne=G.button<3?G.button:3;break;case"wheel":G.deltaY!==0&&(le=G.deltaY<0?0:1),ne=4;break;default:return!1}return!(le===void 0||ne===void 0||ne>4)&&P.coreMouseService.triggerMouseEvent({col:de.x-33,row:de.y-33,button:ne,action:le,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}var V={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y=function(G){return H(G),G.buttons||(D._document.removeEventListener("mouseup",V.mouseup),V.mousedrag&&D._document.removeEventListener("mousemove",V.mousedrag)),D.cancel(G)},J=function(G){return H(G),D.cancel(G,!0)},ee=function(G){G.buttons&&H(G)},oe=function(G){G.buttons||H(G)};this.register(this.coreMouseService.onProtocolChange(function(G){G?(D.optionsService.options.logLevel==="debug"&&D._logService.debug("Binding to mouse events:",D.coreMouseService.explainEvents(G)),D.element.classList.add("enable-mouse-events"),D._selectionService.disable()):(D._logService.debug("Unbinding from mouse events."),D.element.classList.remove("enable-mouse-events"),D._selectionService.enable()),8&G?V.mousemove||(N.addEventListener("mousemove",oe),V.mousemove=oe):(N.removeEventListener("mousemove",V.mousemove),V.mousemove=null),16&G?V.wheel||(N.addEventListener("wheel",J,{passive:!1}),V.wheel=J):(N.removeEventListener("wheel",V.wheel),V.wheel=null),2&G?V.mouseup||(V.mouseup=Y):(D._document.removeEventListener("mouseup",V.mouseup),V.mouseup=null),4&G?V.mousedrag||(V.mousedrag=ee):(D._document.removeEventListener("mousemove",V.mousedrag),V.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(N,"mousedown",function(G){if(G.preventDefault(),D.focus(),D.coreMouseService.areMouseEventsActive&&!D._selectionService.shouldForceSelection(G))return H(G),V.mouseup&&D._document.addEventListener("mouseup",V.mouseup),V.mousedrag&&D._document.addEventListener("mousemove",V.mousedrag),D.cancel(G)})),this.register((0,e.addDisposableDomListener)(N,"wheel",function(G){if(!V.wheel){if(!D.buffer.hasScrollback){var ne=D.viewport.getLinesScrolled(G);if(ne===0)return;for(var le=g.C0.ESC+(D.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B"),de="",Oe=0;Oe<Math.abs(ne);Oe++)de+=le;return D.coreService.triggerDataEvent(de,!0),D.cancel(G,!0)}return D.viewport.onWheel(G)?D.cancel(G):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(N,"touchstart",function(G){if(!D.coreMouseService.areMouseEventsActive)return D.viewport.onTouchStart(G),D.cancel(G)},{passive:!0})),this.register((0,e.addDisposableDomListener)(N,"touchmove",function(G){if(!D.coreMouseService.areMouseEventsActive)return D.viewport.onTouchMove(G)?void 0:D.cancel(G)},{passive:!1}))},A.prototype.refresh=function(D,P){var N;(N=this._renderService)===null||N===void 0||N.refreshRows(D,P)},A.prototype._queueLinkification=function(D,P){var N;(N=this.linkifier)===null||N===void 0||N.linkifyRows(D,P)},A.prototype.updateCursorStyle=function(D){var P;((P=this._selectionService)===null||P===void 0?void 0:P.shouldColumnSelect(D))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},A.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},A.prototype.scrollLines=function(D,P,N){N===void 0&&(N=0),Z.prototype.scrollLines.call(this,D,P,N),this.refresh(0,this.rows-1)},A.prototype.paste=function(D){(0,y.paste)(D,this.textarea,this.coreService)},A.prototype.attachCustomKeyEventHandler=function(D){this._customKeyEventHandler=D},A.prototype.registerLinkMatcher=function(D,P,N){var H=this.linkifier.registerLinkMatcher(D,P,N);return this.refresh(0,this.rows-1),H},A.prototype.deregisterLinkMatcher=function(D){this.linkifier.deregisterLinkMatcher(D)&&this.refresh(0,this.rows-1)},A.prototype.registerLinkProvider=function(D){return this.linkifier2.registerLinkProvider(D)},A.prototype.registerCharacterJoiner=function(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var P=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),P},A.prototype.deregisterCharacterJoiner=function(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)},Object.defineProperty(A.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),A.prototype.addMarker=function(D){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)},A.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},A.prototype.select=function(D,P,N){this._selectionService.setSelection(D,P,N)},A.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},A.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},A.prototype.clearSelection=function(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()},A.prototype.selectAll=function(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()},A.prototype.selectLines=function(D,P){var N;(N=this._selectionService)===null||N===void 0||N.selectLines(D,P)},A.prototype._keyDown=function(D){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(!this._compositionHelper.keydown(D))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var P=(0,E.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),P.type===3||P.type===2){var N=this.rows-1;return this.scrollLines(P.type===2?-N:N),this.cancel(D,!0)}return P.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(P.cancel&&this.cancel(D,!0),!P.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(P.key!==g.C0.ETX&&P.key!==g.C0.CR||(this.textarea.value=""),this._onKey.fire({key:P.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(P.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(D,!0))))},A.prototype._isThirdLevelShift=function(D,P){var N=D.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||D.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||D.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?N:N&&(!P.keyCode||P.keyCode>47)},A.prototype._keyUp=function(D){this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)},A.prototype._keyPress=function(D){var P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)P=D.charCode;else if(D.which===null||D.which===void 0)P=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;P=D.which}return!(!P||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},A.prototype._inputEvent=function(D){if(D.data&&D.inputType==="insertText"&&!D.composed&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var P=D.data;return this.coreService.triggerDataEvent(P,!0),this.cancel(D),!0}return!1},A.prototype.bell=function(){var D;this._soundBell()&&((D=this._soundService)===null||D===void 0||D.playBellSound()),this._onBell.fire()},A.prototype.resize=function(D,P){D!==this.cols||P!==this.rows?Z.prototype.resize.call(this,D,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},A.prototype._afterResize=function(D,P){var N,H;(N=this._charSizeService)===null||N===void 0||N.measure(),(H=this.viewport)===null||H===void 0||H.syncScrollArea(!0)},A.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var D=1;D<this.rows;D++)this.buffer.lines.push(this.buffer.getBlankLine(b.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},A.prototype.reset=function(){var D,P;this.options.rows=this.rows,this.options.cols=this.cols;var N=this._customKeyEventHandler;this._setup(),Z.prototype.reset.call(this),(D=this._selectionService)===null||D===void 0||D.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1),(P=this.viewport)===null||P===void 0||P.syncScrollArea()},A.prototype.clearTextureAtlas=function(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()},A.prototype._reportFocus=function(){var D;((D=this.element)===null||D===void 0?void 0:D.classList.contains("focus"))?this.coreService.triggerDataEvent(g.C0.ESC+"[I"):this.coreService.triggerDataEvent(g.C0.ESC+"[O")},A.prototype._reportWindowsOptions=function(D){if(this._renderService)switch(D){case n.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var P=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),N=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(g.C0.ESC+"[4;"+N+";"+P+"t");break;case n.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var H=this._renderService.dimensions.scaledCellWidth.toFixed(0),V=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(g.C0.ESC+"[6;"+V+";"+H+"t")}},A.prototype.cancel=function(D,P){if(this.options.cancelEvents||P)return D.preventDefault(),D.stopPropagation(),!1},A.prototype._visualBell=function(){return!1},A.prototype._soundBell=function(){return this.options.bellStyle==="sound"},A}(I.CoreTerminal);t.Terminal=$},9924:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0;var u=function(){function h(_,f){f===void 0&&(f=1e3),this._renderCallback=_,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return h.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},h.prototype.refresh=function(_,f,s){var y=this;this._rowCount=s,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){var n=g-this._lastRefreshMs,o=this._debounceThresholdMS-n;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){y._lastRefreshMs=Date.now(),y._innerRefresh(),y._additionalRefreshRequested=!1,y._refreshTimeoutID=void 0},o)}},h.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,f)}},h}();t.TimeBasedDebouncer=u},1680:function(M,t,u){var h,_=this&&this.__extends||(h=function(a,r){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=a}h(a,r),a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),f=this&&this.__decorate||function(a,r,e,i){var c,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(a,r,e,i);else for(var C=a.length-1;C>=0;C--)(c=a[C])&&(m=(d<3?c(m):d>3?c(r,e,m):c(r,e))||m);return d>3&&m&&Object.defineProperty(r,e,m),m},s=this&&this.__param||function(a,r){return function(e,i){r(e,i,a)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var y=u(844),g=u(3656),n=u(4725),o=u(2585),p=function(a){function r(e,i,c,d,m,C,E,L){var b=a.call(this)||this;return b._scrollLines=e,b._viewportElement=i,b._scrollArea=c,b._element=d,b._bufferService=m,b._optionsService=C,b._charSizeService=E,b._renderService=L,b.scrollBarWidth=0,b._currentRowHeight=0,b._currentScaledCellHeight=0,b._lastRecordedBufferLength=0,b._lastRecordedViewportHeight=0,b._lastRecordedBufferHeight=0,b._lastTouchY=0,b._lastScrollTop=0,b._lastHadScrollBar=!1,b._wheelPartialScroll=0,b._refreshAnimationFrame=null,b._ignoreNextScrollEvent=!1,b.scrollBarWidth=b._viewportElement.offsetWidth-b._scrollArea.offsetWidth||15,b._lastHadScrollBar=!0,b.register((0,g.addDisposableDomListener)(b._viewportElement,"scroll",b._onScroll.bind(b))),b._activeBuffer=b._bufferService.buffer,b.register(b._bufferService.buffers.onBufferActivate(function(w){return b._activeBuffer=w.activeBuffer})),b._renderDimensions=b._renderService.dimensions,b.register(b._renderService.onDimensionsChange(function(w){return b._renderDimensions=w})),setTimeout(function(){return b.syncScrollArea()},0),b}return _(r,a),r.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},r.prototype._refresh=function(e){var i=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},r.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var c=window.getComputedStyle(this._element),d=parseInt(c.paddingLeft)+parseInt(c.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?d:0)).toString()+"px",this._refreshAnimationFrame=null},r.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},r.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},r.prototype._bubbleScroll=function(e,i){var c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(i<0&&this._viewportElement.scrollTop!==0||i>0&&c<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},r.prototype.onWheel=function(e){var i=this._getPixelsScrolled(e);return i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},r.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},r.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=this._currentRowHeight+0,this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},r.prototype._applyScrollModifier=function(e,i){var c=this._optionsService.options.fastScrollModifier;return c==="alt"&&i.altKey||c==="ctrl"&&i.ctrlKey||c==="shift"&&i.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},r.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},r.prototype.onTouchMove=function(e){var i=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,i!==0&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(e,i))},f([s(4,o.IBufferService),s(5,o.IOptionsService),s(6,n.ICharSizeService),s(7,n.IRenderService)],r)}(y.Disposable);t.Viewport=p},2950:function(M,t,u){var h=this&&this.__decorate||function(g,n,o,p){var a,r=arguments.length,e=r<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(g,n,o,p);else for(var i=g.length-1;i>=0;i--)(a=g[i])&&(e=(r<3?a(e):r>3?a(n,o,e):a(n,o))||e);return r>3&&e&&Object.defineProperty(n,o,e),e},_=this&&this.__param||function(g,n){return function(o,p){n(o,p,g)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var f=u(4725),s=u(2585),y=function(){function g(n,o,p,a,r,e){this._textarea=n,this._compositionView=o,this._bufferService=p,this._optionsService=a,this._coreService=r,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(g.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),g.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},g.prototype.compositionupdate=function(n){var o=this;this._compositionView.textContent=n.data,this.updateCompositionElements(),setTimeout(function(){o._compositionPosition.end=o._textarea.value.length},0)},g.prototype.compositionend=function(){this._finalizeComposition(!0)},g.prototype.keydown=function(n){if(this._isComposing||this._isSendingComposition){if(n.keyCode===229||n.keyCode===16||n.keyCode===17||n.keyCode===18)return!1;this._finalizeComposition(!1)}return n.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},g.prototype._finalizeComposition=function(n){var o=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,n){var p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(o._isSendingComposition){o._isSendingComposition=!1;var r;p.start+=o._dataAlreadySent.length,(r=o._isComposing?o._textarea.value.substring(p.start,p.end):o._textarea.value.substring(p.start)).length>0&&o._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;var a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}},g.prototype._handleAnyTextareaChanges=function(){var n=this,o=this._textarea.value;setTimeout(function(){if(!n._isComposing){var p=n._textarea.value.replace(o,"");p.length>0&&(n._dataAlreadySent=p,n._coreService.triggerDataEvent(p,!0))}},0)},g.prototype.updateCompositionElements=function(n){var o=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=p*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}n||setTimeout(function(){return o.updateCompositionElements(!0)},0)}},h([_(2,s.IBufferService),_(3,s.IOptionsService),_(4,s.ICoreService),_(5,f.IRenderService)],g)}();t.CompositionHelper=y},9806:(M,t)=>{function u(h,_){var f=_.getBoundingClientRect();return[h.clientX-f.left,h.clientY-f.top]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=u,t.getCoords=function(h,_,f,s,y,g,n,o){if(y){var p=u(h,_);if(p)return p[0]=Math.ceil((p[0]+(o?g/2:0))/g),p[1]=Math.ceil(p[1]/n),p[0]=Math.min(Math.max(p[0],1),f+(o?1:0)),p[1]=Math.min(Math.max(p[1],1),s),p}},t.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},9504:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var h=u(2584);function _(o,p,a,r){var e=o-f(a,o),i=p-f(a,p),c=Math.abs(e-i)-function(d,m,C){for(var E=0,L=d-f(C,d),b=m-f(C,m),w=0;w<Math.abs(L-b);w++){var B=s(d,m)==="A"?-1:1,k=C.buffer.lines.get(L+B*w);(k==null?void 0:k.isWrapped)&&E++}return E}(o,p,a);return n(c,g(s(o,p),r))}function f(o,p){for(var a=0,r=o.buffer.lines.get(p),e=r==null?void 0:r.isWrapped;e&&p>=0&&p<o.rows;)a++,e=(r=o.buffer.lines.get(--p))==null?void 0:r.isWrapped;return a}function s(o,p){return o>p?"A":"B"}function y(o,p,a,r,e,i){for(var c=o,d=p,m="";c!==a||d!==r;)c+=e?1:-1,e&&c>i.cols-1?(m+=i.buffer.translateBufferLineToString(d,!1,o,c),c=0,o=0,d++):!e&&c<0&&(m+=i.buffer.translateBufferLineToString(d,!1,0,o+1),o=c=i.cols-1,d--);return m+i.buffer.translateBufferLineToString(d,!1,o,c)}function g(o,p){var a=p?"O":"[";return h.C0.ESC+a+o}function n(o,p){o=Math.floor(o);for(var a="",r=0;r<o;r++)a+=p;return a}t.moveToCellSequence=function(o,p,a,r){var e,i=a.buffer.x,c=a.buffer.y;if(!a.buffer.hasScrollback)return function(m,C,E,L,b,w){return _(C,L,b,w).length===0?"":n(y(m,C,m,C-f(b,C),!1,b).length,g("D",w))}(i,c,0,p,a,r)+_(c,p,a,r)+function(m,C,E,L,b,w){var B;B=_(C,L,b,w).length>0?L-f(b,L):C;var k=L,F=function(O,x,T,I,j,z){var K;return K=_(T,I,j,z).length>0?I-f(j,I):x,O<T&&K<=I||O>=T&&K<I?"C":"D"}(m,C,E,L,b,w);return n(y(m,B,E,k,F==="C",b).length,g(F,w))}(i,c,o,p,a,r);if(c===p)return e=i>o?"D":"C",n(Math.abs(i-o),g(e,r));e=c>p?"D":"C";var d=Math.abs(c-p);return n(function(m,C){return C.cols-m}(c>p?o:i,a)+(d-1)*a.cols+1+((c>p?i:o)-1),g(e,r))}},1546:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var h=u(643),_=u(8803),f=u(1420),s=u(3734),y=u(1752),g=u(4774),n=u(9631),o=u(8978),p=function(){function a(r,e,i,c,d,m,C,E){this._container=r,this._alpha=c,this._colors=d,this._rendererId=m,this._bufferService=C,this._optionsService=E,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return a.prototype.dispose=function(){var r;(0,n.removeElementFromParent)(this._canvas),(r=this._charAtlas)===null||r===void 0||r.dispose()},a.prototype._initCanvas=function(){this._ctx=(0,y.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},a.prototype.onOptionsChanged=function(){},a.prototype.onBlur=function(){},a.prototype.onFocus=function(){},a.prototype.onCursorMove=function(){},a.prototype.onGridChanged=function(r,e){},a.prototype.onSelectionChanged=function(r,e,i){i===void 0&&(i=!1)},a.prototype.setColors=function(r){this._refreshCharAtlas(r)},a.prototype._setTransparency=function(r){if(r!==this._alpha){var e=this._canvas;this._alpha=r,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},a.prototype._refreshCharAtlas=function(r){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(this._optionsService.options,this._rendererId,r,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},a.prototype.resize=function(r){this._scaledCellWidth=r.scaledCellWidth,this._scaledCellHeight=r.scaledCellHeight,this._scaledCharWidth=r.scaledCharWidth,this._scaledCharHeight=r.scaledCharHeight,this._scaledCharLeft=r.scaledCharLeft,this._scaledCharTop=r.scaledCharTop,this._canvas.width=r.scaledCanvasWidth,this._canvas.height=r.scaledCanvasHeight,this._canvas.style.width=r.canvasWidth+"px",this._canvas.style.height=r.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},a.prototype.clearTextureAtlas=function(){var r;(r=this._charAtlas)===null||r===void 0||r.clear()},a.prototype._fillCells=function(r,e,i,c){this._ctx.fillRect(r*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight)},a.prototype._fillMiddleLineAtCells=function(r,e,i){i===void 0&&(i=1);var c=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(r*this._scaledCellWidth,(e+1)*this._scaledCellHeight-c-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillBottomLineAtCells=function(r,e,i){i===void 0&&(i=1),this._ctx.fillRect(r*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillLeftLineAtCell=function(r,e,i){this._ctx.fillRect(r*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},a.prototype._strokeRectAtCell=function(r,e,i,c){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(r*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)},a.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},a.prototype._clearCells=function(r,e,i,c){this._alpha?this._ctx.clearRect(r*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(r*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight))},a.prototype._fillCharTrueColor=function(r,e,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipRow(i);var c=!1;this._optionsService.options.customGlyphs!==!1&&(c=(0,o.tryDrawCustomChar)(this._ctx,r.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(r.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},a.prototype._drawChars=function(r,e,i){var c,d,m,C=this._getContrastColor(r);C||r.isFgRGB()||r.isBgRGB()?this._drawUncachedChars(r,e,i,C):(r.isInverse()?(d=r.isBgDefault()?_.INVERTED_DEFAULT_COLOR:r.getBgColor(),m=r.isFgDefault()?_.INVERTED_DEFAULT_COLOR:r.getFgColor()):(m=r.isBgDefault()?h.DEFAULT_COLOR:r.getBgColor(),d=r.isFgDefault()?h.DEFAULT_COLOR:r.getFgColor()),d+=this._optionsService.options.drawBoldTextInBrightColors&&r.isBold()&&d<8?8:0,this._currentGlyphIdentifier.chars=r.getChars()||h.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=r.getCode()||h.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=m,this._currentGlyphIdentifier.fg=d,this._currentGlyphIdentifier.bold=!!r.isBold(),this._currentGlyphIdentifier.dim=!!r.isDim(),this._currentGlyphIdentifier.italic=!!r.isItalic(),((c=this._charAtlas)===null||c===void 0?void 0:c.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(r,e,i))},a.prototype._drawUncachedChars=function(r,e,i,c){if(this._ctx.save(),this._ctx.font=this._getFont(!!r.isBold(),!!r.isItalic()),this._ctx.textBaseline=_.TEXT_BASELINE,r.isInverse())if(c)this._ctx.fillStyle=c.css;else if(r.isBgDefault())this._ctx.fillStyle=g.color.opaque(this._colors.background).css;else if(r.isBgRGB())this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(r.getBgColor()).join(",")+")";else{var d=r.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&r.isBold()&&d<8&&(d+=8),this._ctx.fillStyle=this._colors.ansi[d].css}else if(c)this._ctx.fillStyle=c.css;else if(r.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(r.isFgRGB())this._ctx.fillStyle="rgb("+s.AttributeData.toColorRGB(r.getFgColor()).join(",")+")";else{var m=r.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&r.isBold()&&m<8&&(m+=8),this._ctx.fillStyle=this._colors.ansi[m].css}this._clipRow(i),r.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var C=!1;this._optionsService.options.customGlyphs!==!1&&(C=(0,o.tryDrawCustomChar)(this._ctx,r.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),C||this._ctx.fillText(r.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},a.prototype._clipRow=function(r){this._ctx.beginPath(),this._ctx.rect(0,r*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},a.prototype._getFont=function(r,e){return(e?"italic":"")+" "+(r?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},a.prototype._getContrastColor=function(r){if(this._optionsService.options.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(r.bg,r.fg);if(e!==void 0)return e||void 0;var i=r.getFgColor(),c=r.getFgColorMode(),d=r.getBgColor(),m=r.getBgColorMode(),C=!!r.isInverse(),E=!!r.isInverse();if(C){var L=i;i=d,d=L;var b=c;c=m,m=b}var w=this._resolveBackgroundRgba(m,d,C),B=this._resolveForegroundRgba(c,i,C,E),k=g.rgba.ensureContrastRatio(w,B,this._optionsService.options.minimumContrastRatio);if(k){var F={css:g.channels.toCss(k>>24&255,k>>16&255,k>>8&255),rgba:k};return this._colors.contrastCache.setColor(r.bg,r.fg,F),F}this._colors.contrastCache.setColor(r.bg,r.fg,null)}},a.prototype._resolveBackgroundRgba=function(r,e,i){switch(r){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},a.prototype._resolveForegroundRgba=function(r,e,i,c){switch(r){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&c&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},a}();t.BaseRenderLayer=p},2512:function(M,t,u){var h,_=this&&this.__extends||(h=function(e,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(c[m]=d[m])},h(e,i)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=e}h(e,i),e.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}),f=this&&this.__decorate||function(e,i,c,d){var m,C=arguments.length,E=C<3?i:d===null?d=Object.getOwnPropertyDescriptor(i,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,i,c,d);else for(var L=e.length-1;L>=0;L--)(m=e[L])&&(E=(C<3?m(E):C>3?m(i,c,E):m(i,c))||E);return C>3&&E&&Object.defineProperty(i,c,E),E},s=this&&this.__param||function(e,i){return function(c,d){i(c,d,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var y=u(1546),g=u(511),n=u(2585),o=u(4725),p=600,a=function(e){function i(c,d,m,C,E,L,b,w,B){var k=e.call(this,c,"cursor",d,!0,m,C,L,b)||this;return k._onRequestRedraw=E,k._coreService=w,k._coreBrowserService=B,k._cell=new g.CellData,k._state={x:0,y:0,isFocused:!1,style:"",width:0},k._cursorRenderers={bar:k._renderBarCursor.bind(k),block:k._renderBlockCursor.bind(k),underline:k._renderUnderlineCursor.bind(k)},k}return _(i,e),i.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},i.prototype.resize=function(c){e.prototype.resize.call(this,c),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){var c;this._clearCursor(),(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation(),this.onOptionsChanged()},i.prototype.onBlur=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var c,d=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new r(this._coreBrowserService.isFocused,function(){d._render(!0)})):((c=this._cursorBlinkStateManager)===null||c===void 0||c.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){var c;(c=this._cursorBlinkStateManager)===null||c===void 0||c.restartBlinkAnimation()},i.prototype.onGridChanged=function(c,d){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(c){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var d=this._bufferService.buffer.ybase+this._bufferService.buffer.y,m=d-this._bufferService.buffer.ydisp;if(m<0||m>=this._bufferService.rows)this._clearCursor();else{var C=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(d).loadCell(C,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var E=this._optionsService.options.cursorStyle;return E&&E!=="block"?this._cursorRenderers[E](C,m,this._cell):this._renderBlurCursor(C,m,this._cell),this._ctx.restore(),this._state.x=C,this._state.y=m,this._state.isFocused=!1,this._state.style=E,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===C&&this._state.y===m&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](C,m,this._cell),this._ctx.restore(),this._state.x=C,this._state.y=m,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(c,d,m){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(c,d,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(c,d,m){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(c,d,m.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(m,c,d),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(c,d,m){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(c,d),this._ctx.restore()},i.prototype._renderBlurCursor=function(c,d,m){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(c,d,m.getWidth(),1),this._ctx.restore()},f([s(5,n.IBufferService),s(6,n.IOptionsService),s(7,n.ICoreService),s(8,o.ICoreBrowserService)],i)}(y.BaseRenderLayer);t.CursorRenderLayer=a;var r=function(){function e(i,c){this._renderCallback=c,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},e.prototype._restartInterval=function(i){var c=this;i===void 0&&(i=p),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(c._animationTimeRestarted){var d=p-(Date.now()-c._animationTimeRestarted);if(c._animationTimeRestarted=void 0,d>0)return void c._restartInterval(d)}c.isCursorVisible=!1,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0}),c._blinkInterval=window.setInterval(function(){if(c._animationTimeRestarted){var m=p-(Date.now()-c._animationTimeRestarted);return c._animationTimeRestarted=void 0,void c._restartInterval(m)}c.isCursorVisible=!c.isCursorVisible,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0})},p)},i)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(M,t,u)=>{var h,_,f,s,y,g,n,o,p,a,r,e,i,c,d,m,C,E,L,b,w,B,k,F,O,x,T,I,j,z,K,X,$,Z,A,D,P,N,H,V,Y,J,ee,oe,G,ne,le,de,Oe,tr,rr,ir,nr,or,sr,ar,cr,lr,hr,ur,fr,dr,Je,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,dt,_t,pt,vt,gt,yt,mt,Ct,St,bt,wt,Lt,Et,xt,At,Mt,Rt,kt,Bt,Tt,Ot,Dt,Pt,It,Ht,Ft,jt,Ut,Wt,qt,Nt,zt,Kt,Vt,Gt,_r,pr,vr,gr,yr,mr,Cr,Sr,br,wr,Lr,Er,xr,Ar,Mr,Rr;Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var Xr=u(1752);t.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Pi={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"\u2500":(h={},h[1]="M0,.5 L1,.5",h),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(s={},s[3]="M.5,0 L.5,1",s),"\u250C":(y={},y[1]="M0.5,1 L.5,.5 L1,.5",y),"\u250F":(g={},g[3]="M0.5,1 L.5,.5 L1,.5",g),"\u2510":(n={},n[1]="M0,.5 L.5,.5 L.5,1",n),"\u2513":(o={},o[3]="M0,.5 L.5,.5 L.5,1",o),"\u2514":(p={},p[1]="M.5,0 L.5,.5 L1,.5",p),"\u2517":(a={},a[3]="M.5,0 L.5,.5 L1,.5",a),"\u2518":(r={},r[1]="M.5,0 L.5,.5 L0,.5",r),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(i={},i[1]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2523":(c={},c[3]="M.5,0 L.5,1 M.5,.5 L1,.5",c),"\u2524":(d={},d[1]="M.5,0 L.5,1 M.5,.5 L0,.5",d),"\u252B":(m={},m[3]="M.5,0 L.5,1 M.5,.5 L0,.5",m),"\u252C":(C={},C[1]="M0,.5 L1,.5 M.5,.5 L.5,1",C),"\u2533":(E={},E[3]="M0,.5 L1,.5 M.5,.5 L.5,1",E),"\u2534":(L={},L[1]="M0,.5 L1,.5 M.5,.5 L.5,0",L),"\u253B":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"\u253C":(w={},w[1]="M0,.5 L1,.5 M.5,0 L.5,1",w),"\u254B":(B={},B[3]="M0,.5 L1,.5 M.5,0 L.5,1",B),"\u2574":(k={},k[1]="M.5,.5 L0,.5",k),"\u2578":(F={},F[3]="M.5,.5 L0,.5",F),"\u2575":(O={},O[1]="M.5,.5 L.5,0",O),"\u2579":(x={},x[3]="M.5,.5 L.5,0",x),"\u2576":(T={},T[1]="M.5,.5 L1,.5",T),"\u257A":(I={},I[3]="M.5,.5 L1,.5",I),"\u2577":(j={},j[1]="M.5,.5 L.5,1",j),"\u257B":(z={},z[3]="M.5,.5 L.5,1",z),"\u2550":(K={},K[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},K),"\u2551":(X={},X[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},X),"\u2552":($={},$[1]=function(W,U){return"M.5,1 L.5,"+(.5-U)+" L1,"+(.5-U)+" M.5,"+(.5+U)+" L1,"+(.5+U)},$),"\u2553":(Z={},Z[1]=function(W,U){return"M"+(.5-W)+",1 L"+(.5-W)+",.5 L1,.5 M"+(.5+W)+",.5 L"+(.5+W)+",1"},Z),"\u2554":(A={},A[1]=function(W,U){return"M1,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1"},A),"\u2555":(D={},D[1]=function(W,U){return"M0,"+(.5-U)+" L.5,"+(.5-U)+" L.5,1 M0,"+(.5+U)+" L.5,"+(.5+U)},D),"\u2556":(P={},P[1]=function(W,U){return"M"+(.5+W)+",1 L"+(.5+W)+",.5 L0,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1"},P),"\u2557":(N={},N[1]=function(W,U){return"M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M0,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",1"},N),"\u2558":(H={},H[1]=function(W,U){return"M.5,0 L.5,"+(.5+U)+" L1,"+(.5+U)+" M.5,"+(.5-U)+" L1,"+(.5-U)},H),"\u2559":(V={},V[1]=function(W,U){return"M1,.5 L"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},V),"\u255A":(Y={},Y[1]=function(W,U){return"M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0 M1,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",0"},Y),"\u255B":(J={},J[1]=function(W,U){return"M0,"+(.5+U)+" L.5,"+(.5+U)+" L.5,0 M0,"+(.5-U)+" L.5,"+(.5-U)},J),"\u255C":(ee={},ee[1]=function(W,U){return"M0,.5 L"+(.5+W)+",.5 L"+(.5+W)+",0 M"+(.5-W)+",.5 L"+(.5-W)+",0"},ee),"\u255D":(oe={},oe[1]=function(W,U){return"M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M0,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",0"},oe),"\u255E":(G={},G[1]=function(W,U){return"M.5,0 L.5,1 M.5,"+(.5-U)+" L1,"+(.5-U)+" M.5,"+(.5+U)+" L1,"+(.5+U)},G),"\u255F":(ne={},ne[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1 M"+(.5+W)+",.5 L1,.5"},ne),"\u2560":(le={},le[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},le),"\u2561":(de={},de[1]=function(W,U){return"M.5,0 L.5,1 M0,"+(.5-U)+" L.5,"+(.5-U)+" M0,"+(.5+U)+" L.5,"+(.5+U)},de),"\u2562":(Oe={},Oe[1]=function(W,U){return"M0,.5 L"+(.5-W)+",.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},Oe),"\u2563":(tr={},tr[1]=function(W,U){return"M"+(.5+W)+",0 L"+(.5+W)+",1 M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0"},tr),"\u2564":(rr={},rr[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)+" M.5,"+(.5+U)+" L.5,1"},rr),"\u2565":(ir={},ir[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1 M"+(.5+W)+",.5 L"+(.5+W)+",1"},ir),"\u2566":(nr={},nr[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1"},nr),"\u2567":(or={},or[1]=function(W,U){return"M.5,0 L.5,"+(.5-U)+" M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},or),"\u2568":(sr={},sr[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},sr),"\u2569":(ar={},ar[1]=function(W,U){return"M0,"+(.5+U)+" L1,"+(.5+U)+" M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},ar),"\u256A":(cr={},cr[1]=function(W,U){return"M.5,0 L.5,1 M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},cr),"\u256B":(lr={},lr[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},lr),"\u256C":(hr={},hr[1]=function(W,U){return"M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1 M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},hr),"\u2571":(ur={},ur[1]="M1,0 L0,1",ur),"\u2572":(fr={},fr[1]="M0,0 L1,1",fr),"\u2573":(dr={},dr[1]="M1,0 L0,1 M0,0 L1,1",dr),"\u257C":(Je={},Je[1]="M.5,.5 L0,.5",Je[3]="M.5,.5 L1,.5",Je),"\u257D":(Qe={},Qe[1]="M.5,.5 L.5,0",Qe[3]="M.5,.5 L.5,1",Qe),"\u257E":(et={},et[1]="M.5,.5 L1,.5",et[3]="M.5,.5 L0,.5",et),"\u257F":(tt={},tt[1]="M.5,.5 L.5,1",tt[3]="M.5,.5 L.5,0",tt),"\u250D":(rt={},rt[1]="M.5,.5 L.5,1",rt[3]="M.5,.5 L1,.5",rt),"\u250E":(it={},it[1]="M.5,.5 L1,.5",it[3]="M.5,.5 L.5,1",it),"\u2511":(nt={},nt[1]="M.5,.5 L.5,1",nt[3]="M.5,.5 L0,.5",nt),"\u2512":(ot={},ot[1]="M.5,.5 L0,.5",ot[3]="M.5,.5 L.5,1",ot),"\u2515":(st={},st[1]="M.5,.5 L.5,0",st[3]="M.5,.5 L1,.5",st),"\u2516":(at={},at[1]="M.5,.5 L1,.5",at[3]="M.5,.5 L.5,0",at),"\u2519":(ct={},ct[1]="M.5,.5 L.5,0",ct[3]="M.5,.5 L0,.5",ct),"\u251A":(lt={},lt[1]="M.5,.5 L0,.5",lt[3]="M.5,.5 L.5,0",lt),"\u251D":(ht={},ht[1]="M.5,0 L.5,1",ht[3]="M.5,.5 L1,.5",ht),"\u251E":(ut={},ut[1]="M0.5,1 L.5,.5 L1,.5",ut[3]="M.5,.5 L.5,0",ut),"\u251F":(ft={},ft[1]="M.5,0 L.5,.5 L1,.5",ft[3]="M.5,.5 L.5,1",ft),"\u2520":(dt={},dt[1]="M.5,.5 L1,.5",dt[3]="M.5,0 L.5,1",dt),"\u2521":(_t={},_t[1]="M.5,.5 L.5,1",_t[3]="M.5,0 L.5,.5 L1,.5",_t),"\u2522":(pt={},pt[1]="M.5,.5 L.5,0",pt[3]="M0.5,1 L.5,.5 L1,.5",pt),"\u2525":(vt={},vt[1]="M.5,0 L.5,1",vt[3]="M.5,.5 L0,.5",vt),"\u2526":(gt={},gt[1]="M0,.5 L.5,.5 L.5,1",gt[3]="M.5,.5 L.5,0",gt),"\u2527":(yt={},yt[1]="M.5,0 L.5,.5 L0,.5",yt[3]="M.5,.5 L.5,1",yt),"\u2528":(mt={},mt[1]="M.5,.5 L0,.5",mt[3]="M.5,0 L.5,1",mt),"\u2529":(Ct={},Ct[1]="M.5,.5 L.5,1",Ct[3]="M.5,0 L.5,.5 L0,.5",Ct),"\u252A":(St={},St[1]="M.5,.5 L.5,0",St[3]="M0,.5 L.5,.5 L.5,1",St),"\u252D":(bt={},bt[1]="M0.5,1 L.5,.5 L1,.5",bt[3]="M.5,.5 L0,.5",bt),"\u252E":(wt={},wt[1]="M0,.5 L.5,.5 L.5,1",wt[3]="M.5,.5 L1,.5",wt),"\u252F":(Lt={},Lt[1]="M.5,.5 L.5,1",Lt[3]="M0,.5 L1,.5",Lt),"\u2530":(Et={},Et[1]="M0,.5 L1,.5",Et[3]="M.5,.5 L.5,1",Et),"\u2531":(xt={},xt[1]="M.5,.5 L1,.5",xt[3]="M0,.5 L.5,.5 L.5,1",xt),"\u2532":(At={},At[1]="M.5,.5 L0,.5",At[3]="M0.5,1 L.5,.5 L1,.5",At),"\u2535":(Mt={},Mt[1]="M.5,0 L.5,.5 L1,.5",Mt[3]="M.5,.5 L0,.5",Mt),"\u2536":(Rt={},Rt[1]="M.5,0 L.5,.5 L0,.5",Rt[3]="M.5,.5 L1,.5",Rt),"\u2537":(kt={},kt[1]="M.5,.5 L.5,0",kt[3]="M0,.5 L1,.5",kt),"\u2538":(Bt={},Bt[1]="M0,.5 L1,.5",Bt[3]="M.5,.5 L.5,0",Bt),"\u2539":(Tt={},Tt[1]="M.5,.5 L1,.5",Tt[3]="M.5,0 L.5,.5 L0,.5",Tt),"\u253A":(Ot={},Ot[1]="M.5,.5 L0,.5",Ot[3]="M.5,0 L.5,.5 L1,.5",Ot),"\u253D":(Dt={},Dt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Dt[3]="M.5,.5 L0,.5",Dt),"\u253E":(Pt={},Pt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Pt[3]="M.5,.5 L1,.5",Pt),"\u253F":(It={},It[1]="M.5,0 L.5,1",It[3]="M0,.5 L1,.5",It),"\u2540":(Ht={},Ht[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ht[3]="M.5,.5 L.5,0",Ht),"\u2541":(Ft={},Ft[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ft[3]="M.5,.5 L.5,1",Ft),"\u2542":(jt={},jt[1]="M0,.5 L1,.5",jt[3]="M.5,0 L.5,1",jt),"\u2543":(Ut={},Ut[1]="M0.5,1 L.5,.5 L1,.5",Ut[3]="M.5,0 L.5,.5 L0,.5",Ut),"\u2544":(Wt={},Wt[1]="M0,.5 L.5,.5 L.5,1",Wt[3]="M.5,0 L.5,.5 L1,.5",Wt),"\u2545":(qt={},qt[1]="M.5,0 L.5,.5 L1,.5",qt[3]="M0,.5 L.5,.5 L.5,1",qt),"\u2546":(Nt={},Nt[1]="M.5,0 L.5,.5 L0,.5",Nt[3]="M0.5,1 L.5,.5 L1,.5",Nt),"\u2547":(zt={},zt[1]="M.5,.5 L.5,1",zt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",zt),"\u2548":(Kt={},Kt[1]="M.5,.5 L.5,0",Kt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Kt),"\u2549":(Vt={},Vt[1]="M.5,.5 L1,.5",Vt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Vt),"\u254A":(Gt={},Gt[1]="M.5,.5 L0,.5",Gt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Gt),"\u254C":(_r={},_r[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",_r),"\u254D":(pr={},pr[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",pr),"\u2504":(vr={},vr[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",vr),"\u2505":(gr={},gr[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",gr),"\u2508":(yr={},yr[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",yr),"\u2509":(mr={},mr[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",mr),"\u254E":(Cr={},Cr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Cr),"\u254F":(Sr={},Sr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Sr),"\u2506":(br={},br[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",br),"\u2507":(wr={},wr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",wr),"\u250A":(Lr={},Lr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Lr),"\u250B":(Er={},Er[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Er),"\u256D":(xr={},xr[1]="C.5,1,.5,.5,1,.5",xr),"\u256E":(Ar={},Ar[1]="C.5,1,.5,.5,0,.5",Ar),"\u256F":(Mr={},Mr[1]="C.5,0,.5,.5,0,.5",Mr),"\u2570":(Rr={},Rr[1]="C.5,0,.5,.5,1,.5",Rr)},t.tryDrawCustomChar=function(W,U,_e,qe,Ne,te){var pe=t.blockElementDefinitions[U];if(pe)return function(se,ge,Ke,Ve,De,Pe){for(var he=0;he<ge.length;he++){var ce=ge[he],Q=De/8,Ce=Pe/8;se.fillRect(Ke+ce.x*Q,Ve+ce.y*Ce,ce.w*Q,ce.h*Ce)}}(W,pe,_e,qe,Ne,te),!0;var ve=Pi[U];if(ve)return function(se,ge,Ke,Ve,De,Pe){var he,ce=$r.get(ge);ce||(ce=new Map,$r.set(ge,ce));var Q=se.fillStyle;if(typeof Q!="string")throw new Error('Unexpected fillStyle type "'+Q+'"');var Ce=ce.get(Q);if(!Ce){var fe=ge[0].length,Ee=ge.length,xe=document.createElement("canvas");xe.width=fe,xe.height=Ee;var Yt=(0,Xr.throwIfFalsy)(xe.getContext("2d")),be=new ImageData(fe,Ee),Ie=void 0,Ae=void 0,kr=void 0,Br=void 0;if(Q.startsWith("#"))Ie=parseInt(Q.substr(1,2),16),Ae=parseInt(Q.substr(3,2),16),kr=parseInt(Q.substr(5,2),16),Br=Q.length>7&&parseInt(Q.substr(7,2),16)||1;else{if(!Q.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Q+'" when drawing pattern glyph');Ie=(he=Q.substring(5,Q.length-1).split(",").map(function(Fi){return parseFloat(Fi)}))[0],Ae=he[1],kr=he[2],Br=he[3]}for(var Me=0;Me<Ee;Me++)for(var Re=0;Re<fe;Re++)be.data[4*(Me*fe+Re)]=Ie,be.data[4*(Me*fe+Re)+1]=Ae,be.data[4*(Me*fe+Re)+2]=kr,be.data[4*(Me*fe+Re)+3]=ge[Me][Re]*(255*Br);Yt.putImageData(be,0,0),Ce=(0,Xr.throwIfFalsy)(se.createPattern(xe,null)),ce.set(Q,Ce)}se.fillStyle=Ce,se.fillRect(Ke,Ve,De,Pe)}(W,ve,_e,qe,Ne,te),!0;var ze=t.boxDrawingDefinitions[U];return!!ze&&(function(se,ge,Ke,Ve,De,Pe){se.strokeStyle=se.fillStyle;for(var he=0,ce=Object.entries(ge);he<ce.length;he++){var Q=ce[he],Ce=Q[0],fe=Q[1];se.beginPath(),se.lineWidth=window.devicePixelRatio*Number.parseInt(Ce);for(var Ee=0,xe=(typeof fe=="function"?fe(.15,.15/Pe*De):fe).split(" ");Ee<xe.length;Ee++){var Yt=xe[Ee],be=Yt[0],Ie=Ii[be];if(Ie){var Ae=Yt.substring(1).split(",");Ae[0]&&Ae[1]&&Ie(se,Hi(Ae,De,Pe,Ke,Ve))}else console.error('Could not find drawing instructions for "'+be+'"')}se.stroke(),se.closePath()}}(W,ze,_e,qe,Ne,te),!0)};var $r=new Map;function Zr(W,U,_e){return _e===void 0&&(_e=0),Math.max(Math.min(W,U),_e)}var Ii={C:function(W,U){return W.bezierCurveTo(U[0],U[1],U[2],U[3],U[4],U[5])},L:function(W,U){return W.lineTo(U[0],U[1])},M:function(W,U){return W.moveTo(U[0],U[1])}};function Hi(W,U,_e,qe,Ne){var te=W.map(function(ze){return parseFloat(ze)||parseInt(ze)});if(te.length<2)throw new Error("Too few arguments for instruction");for(var pe=0;pe<te.length;pe+=2)te[pe]*=U,te[pe]!==0&&(te[pe]=Zr(Math.round(te[pe]+.5)-.5,U,0)),te[pe]+=qe;for(var ve=1;ve<te.length;ve+=2)te[ve]*=_e,te[ve]!==0&&(te[ve]=Zr(Math.round(te[ve]+.5)-.5,_e,0)),te[ve]+=Ne;return te}},3700:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var u=function(){function h(){this.cache=[]}return h.prototype.resize=function(_,f){for(var s=0;s<_;s++){this.cache.length<=s&&this.cache.push([]);for(var y=this.cache[s].length;y<f;y++)this.cache[s].push(void 0);this.cache[s].length=f}this.cache.length=_},h.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var f=0;f<this.cache[_].length;f++)this.cache[_][f]=void 0},h}();t.GridCache=u},5098:function(M,t,u){var h,_=this&&this.__extends||(h=function(a,r){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=a}h(a,r),a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),f=this&&this.__decorate||function(a,r,e,i){var c,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(a,r,e,i);else for(var C=a.length-1;C>=0;C--)(c=a[C])&&(m=(d<3?c(m):d>3?c(r,e,m):c(r,e))||m);return d>3&&m&&Object.defineProperty(r,e,m),m},s=this&&this.__param||function(a,r){return function(e,i){r(e,i,a)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var y=u(1546),g=u(8803),n=u(2040),o=u(2585),p=function(a){function r(e,i,c,d,m,C,E,L){var b=a.call(this,e,"link",i,!0,c,d,E,L)||this;return m.onShowLinkUnderline(function(w){return b._onShowLinkUnderline(w)}),m.onHideLinkUnderline(function(w){return b._onHideLinkUnderline(w)}),C.onShowLinkUnderline(function(w){return b._onShowLinkUnderline(w)}),C.onHideLinkUnderline(function(w){return b._onHideLinkUnderline(w)}),b}return _(r,a),r.prototype.resize=function(e){a.prototype.resize.call(this,e),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onShowLinkUnderline=function(e){if(e.fg===g.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,n.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var i=e.y1+1;i<e.y2;i++)this._fillBottomLineAtCells(0,i,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},r.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([s(6,o.IBufferService),s(7,o.IOptionsService)],r)}(y.BaseRenderLayer);t.LinkRenderLayer=p},3525:function(M,t,u){var h,_=this&&this.__extends||(h=function(m,C){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,L){E.__proto__=L}||function(E,L){for(var b in L)Object.prototype.hasOwnProperty.call(L,b)&&(E[b]=L[b])},h(m,C)},function(m,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function E(){this.constructor=m}h(m,C),m.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}),f=this&&this.__decorate||function(m,C,E,L){var b,w=arguments.length,B=w<3?C:L===null?L=Object.getOwnPropertyDescriptor(C,E):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(m,C,E,L);else for(var k=m.length-1;k>=0;k--)(b=m[k])&&(B=(w<3?b(B):w>3?b(C,E,B):b(C,E))||B);return w>3&&B&&Object.defineProperty(C,E,B),B},s=this&&this.__param||function(m,C){return function(E,L){C(E,L,m)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var y=u(9596),g=u(4149),n=u(2512),o=u(5098),p=u(844),a=u(4725),r=u(2585),e=u(1420),i=u(8460),c=1,d=function(m){function C(E,L,b,w,B,k,F,O){var x=m.call(this)||this;x._colors=E,x._screenElement=L,x._bufferService=k,x._charSizeService=F,x._optionsService=O,x._id=c++,x._onRequestRedraw=new i.EventEmitter;var T=x._optionsService.options.allowTransparency;return x._renderLayers=[B.createInstance(y.TextRenderLayer,x._screenElement,0,x._colors,T,x._id),B.createInstance(g.SelectionRenderLayer,x._screenElement,1,x._colors,x._id),B.createInstance(o.LinkRenderLayer,x._screenElement,2,x._colors,x._id,b,w),B.createInstance(n.CursorRenderLayer,x._screenElement,3,x._colors,x._id,x._onRequestRedraw)],x.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},x._devicePixelRatio=window.devicePixelRatio,x._updateDimensions(),x.onOptionsChanged(),x}return _(C,m),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){for(var E=0,L=this._renderLayers;E<L.length;E++)L[E].dispose();m.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},C.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},C.prototype.setColors=function(E){this._colors=E;for(var L=0,b=this._renderLayers;L<b.length;L++){var w=b[L];w.setColors(this._colors),w.reset()}},C.prototype.onResize=function(E,L){this._updateDimensions();for(var b=0,w=this._renderLayers;b<w.length;b++)w[b].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},C.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},C.prototype.onBlur=function(){this._runOperation(function(E){return E.onBlur()})},C.prototype.onFocus=function(){this._runOperation(function(E){return E.onFocus()})},C.prototype.onSelectionChanged=function(E,L,b){b===void 0&&(b=!1),this._runOperation(function(w){return w.onSelectionChanged(E,L,b)})},C.prototype.onCursorMove=function(){this._runOperation(function(E){return E.onCursorMove()})},C.prototype.onOptionsChanged=function(){this._runOperation(function(E){return E.onOptionsChanged()})},C.prototype.clear=function(){this._runOperation(function(E){return E.reset()})},C.prototype._runOperation=function(E){for(var L=0,b=this._renderLayers;L<b.length;L++)E(b[L])},C.prototype.renderRows=function(E,L){for(var b=0,w=this._renderLayers;b<w.length;b++)w[b].onGridChanged(E,L)},C.prototype.clearTextureAtlas=function(){for(var E=0,L=this._renderLayers;E<L.length;E++)L[E].clearTextureAtlas()},C.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([s(4,r.IInstantiationService),s(5,r.IBufferService),s(6,a.ICharSizeService),s(7,r.IOptionsService)],C)}(p.Disposable);t.Renderer=d},1752:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfFalsy=void 0,t.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u}},4149:function(M,t,u){var h,_=this&&this.__extends||(h=function(o,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(a[e]=r[e])},h(o,p)},function(o,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function a(){this.constructor=o}h(o,p),o.prototype=p===null?Object.create(p):(a.prototype=p.prototype,new a)}),f=this&&this.__decorate||function(o,p,a,r){var e,i=arguments.length,c=i<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,a):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,p,a,r);else for(var d=o.length-1;d>=0;d--)(e=o[d])&&(c=(i<3?e(c):i>3?e(p,a,c):e(p,a))||c);return i>3&&c&&Object.defineProperty(p,a,c),c},s=this&&this.__param||function(o,p){return function(a,r){p(a,r,o)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var y=u(1546),g=u(2585),n=function(o){function p(a,r,e,i,c,d){var m=o.call(this,a,"selection",r,!0,e,i,c,d)||this;return m._clearState(),m}return _(p,o),p.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},p.prototype.resize=function(a){o.prototype.resize.call(this,a),this._clearState()},p.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},p.prototype.onSelectionChanged=function(a,r,e){if(this._didStateChange(a,r,e,this._bufferService.buffer.ydisp))if(this._clearAll(),a&&r){var i=a[1]-this._bufferService.buffer.ydisp,c=r[1]-this._bufferService.buffer.ydisp,d=Math.max(i,0),m=Math.min(c,this._bufferService.rows-1);if(d>=this._bufferService.rows||m<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var C=a[0],E=r[0]-C,L=m-d+1;this._fillCells(C,d,E,L)}else{C=i===d?a[0]:0;var b=d===c?r[0]:this._bufferService.cols;this._fillCells(C,d,b-C,1);var w=Math.max(m-d-1,0);if(this._fillCells(0,d+1,this._bufferService.cols,w),d!==m){var B=c===m?r[0]:this._bufferService.cols;this._fillCells(0,m,B,1)}}this._state.start=[a[0],a[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},p.prototype._didStateChange=function(a,r,e,i){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(r,this._state.end)||e!==this._state.columnSelectMode||i!==this._state.ydisp},p.prototype._areCoordinatesEqual=function(a,r){return!(!a||!r)&&a[0]===r[0]&&a[1]===r[1]},f([s(4,g.IBufferService),s(5,g.IOptionsService)],p)}(y.BaseRenderLayer);t.SelectionRenderLayer=n},9596:function(M,t,u){var h,_=this&&this.__extends||(h=function(c,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,C){m.__proto__=C}||function(m,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(m[E]=C[E])},h(c,d)},function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function m(){this.constructor=c}h(c,d),c.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}),f=this&&this.__decorate||function(c,d,m,C){var E,L=arguments.length,b=L<3?d:C===null?C=Object.getOwnPropertyDescriptor(d,m):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,d,m,C);else for(var w=c.length-1;w>=0;w--)(E=c[w])&&(b=(L<3?E(b):L>3?E(d,m,b):E(d,m))||b);return L>3&&b&&Object.defineProperty(d,m,b),b},s=this&&this.__param||function(c,d){return function(m,C){d(m,C,c)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var y=u(3700),g=u(1546),n=u(3734),o=u(643),p=u(511),a=u(2585),r=u(4725),e=u(4269),i=function(c){function d(m,C,E,L,b,w,B,k){var F=c.call(this,m,"text",C,L,E,b,w,B)||this;return F._characterJoinerService=k,F._characterWidth=0,F._characterFont="",F._characterOverlapCache={},F._workCell=new p.CellData,F._state=new y.GridCache,F}return _(d,c),d.prototype.resize=function(m){c.prototype.resize.call(this,m);var C=this._getFont(!1,!1);this._characterWidth===m.scaledCharWidth&&this._characterFont===C||(this._characterWidth=m.scaledCharWidth,this._characterFont=C,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},d.prototype.reset=function(){this._state.clear(),this._clearAll()},d.prototype._forEachCell=function(m,C,E){for(var L=m;L<=C;L++)for(var b=L+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.lines.get(b),B=this._characterJoinerService.getJoinedCharacters(b),k=0;k<this._bufferService.cols;k++){w.loadCell(k,this._workCell);var F=this._workCell,O=!1,x=k;if(F.getWidth()!==0){if(B.length>0&&k===B[0][0]){O=!0;var T=B.shift();F=new e.JoinedCellData(this._workCell,w.translateToString(!0,T[0],T[1]),T[1]-T[0]),x=T[1]-1}!O&&this._isOverlapping(F)&&x<w.length-1&&w.getCodePoint(x+1)===o.NULL_CELL_CODE&&(F.content&=-12582913,F.content|=2<<22),E(F,k,L),k=x}}},d.prototype._drawBackground=function(m,C){var E=this,L=this._ctx,b=this._bufferService.cols,w=0,B=0,k=null;L.save(),this._forEachCell(m,C,function(F,O,x){var T=null;F.isInverse()?T=F.isFgDefault()?E._colors.foreground.css:F.isFgRGB()?"rgb("+n.AttributeData.toColorRGB(F.getFgColor()).join(",")+")":E._colors.ansi[F.getFgColor()].css:F.isBgRGB()?T="rgb("+n.AttributeData.toColorRGB(F.getBgColor()).join(",")+")":F.isBgPalette()&&(T=E._colors.ansi[F.getBgColor()].css),k===null&&(w=O,B=x),x!==B?(L.fillStyle=k||"",E._fillCells(w,B,b-w,1),w=O,B=x):k!==T&&(L.fillStyle=k||"",E._fillCells(w,B,O-w,1),w=O,B=x),k=T}),k!==null&&(L.fillStyle=k,this._fillCells(w,B,b-w,1)),L.restore()},d.prototype._drawForeground=function(m,C){var E=this;this._forEachCell(m,C,function(L,b,w){if(!L.isInvisible()&&(E._drawChars(L,b,w),L.isUnderline()||L.isStrikethrough())){if(E._ctx.save(),L.isInverse())if(L.isBgDefault())E._ctx.fillStyle=E._colors.background.css;else if(L.isBgRGB())E._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(L.getBgColor()).join(",")+")";else{var B=L.getBgColor();E._optionsService.options.drawBoldTextInBrightColors&&L.isBold()&&B<8&&(B+=8),E._ctx.fillStyle=E._colors.ansi[B].css}else if(L.isFgDefault())E._ctx.fillStyle=E._colors.foreground.css;else if(L.isFgRGB())E._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(L.getFgColor()).join(",")+")";else{var k=L.getFgColor();E._optionsService.options.drawBoldTextInBrightColors&&L.isBold()&&k<8&&(k+=8),E._ctx.fillStyle=E._colors.ansi[k].css}L.isStrikethrough()&&E._fillMiddleLineAtCells(b,w,L.getWidth()),L.isUnderline()&&E._fillBottomLineAtCells(b,w,L.getWidth()),E._ctx.restore()}})},d.prototype.onGridChanged=function(m,C){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,m,this._bufferService.cols,C-m+1),this._drawBackground(m,C),this._drawForeground(m,C))},d.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},d.prototype._isOverlapping=function(m){if(m.getWidth()!==1||m.getCode()<256)return!1;var C=m.getChars();if(this._characterOverlapCache.hasOwnProperty(C))return this._characterOverlapCache[C];this._ctx.save(),this._ctx.font=this._characterFont;var E=Math.floor(this._ctx.measureText(C).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[C]=E,E},f([s(5,a.IBufferService),s(6,a.IOptionsService),s(7,r.ICharacterJoinerService)],d)}(g.BaseRenderLayer);t.TextRenderLayer=i},9616:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var u=function(){function h(){this._didWarmUp=!1}return h.prototype.dispose=function(){},h.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},h.prototype._doWarmUp=function(){},h.prototype.clear=function(){},h.prototype.beginFrame=function(){},h}();t.BaseCharAtlas=u},1420:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var h=u(2040),_=u(1906),f=[];t.acquireCharAtlas=function(s,y,g,n,o){for(var p=(0,h.generateConfig)(n,o,s,g),a=0;a<f.length;a++){var r=(e=f[a]).ownedBy.indexOf(y);if(r>=0){if((0,h.configEquals)(e.config,p))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(a,1)):e.ownedBy.splice(r,1);break}}for(a=0;a<f.length;a++){var e=f[a];if((0,h.configEquals)(e.config,p))return e.ownedBy.push(y),e.atlas}var i={atlas:new _.DynamicCharAtlas(document,p),config:p,ownedBy:[y]};return f.push(i),i.atlas},t.removeTerminalFromCache=function(s){for(var y=0;y<f.length;y++){var g=f[y].ownedBy.indexOf(s);if(g!==-1){f[y].ownedBy.length===1?(f[y].atlas.dispose(),f.splice(y,1)):f[y].ownedBy.splice(g,1);break}}}},2040:function(M,t,u){var h=this&&this.__spreadArray||function(f,s,y){if(y||arguments.length===2)for(var g,n=0,o=s.length;n<o;n++)!g&&n in s||(g||(g=Array.prototype.slice.call(s,0,n)),g[n]=s[n]);return f.concat(g||Array.prototype.slice.call(s))};Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var _=u(643);t.generateConfig=function(f,s,y,g){var n={foreground:g.foreground,background:g.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:h([],g.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:f,scaledCharHeight:s,fontFamily:y.fontFamily,fontSize:y.fontSize,fontWeight:y.fontWeight,fontWeightBold:y.fontWeightBold,allowTransparency:y.allowTransparency,colors:n}},t.configEquals=function(f,s){for(var y=0;y<f.colors.ansi.length;y++)if(f.colors.ansi[y].rgba!==s.colors.ansi[y].rgba)return!1;return f.devicePixelRatio===s.devicePixelRatio&&f.fontFamily===s.fontFamily&&f.fontSize===s.fontSize&&f.fontWeight===s.fontWeight&&f.fontWeightBold===s.fontWeightBold&&f.allowTransparency===s.allowTransparency&&f.scaledCharWidth===s.scaledCharWidth&&f.scaledCharHeight===s.scaledCharHeight&&f.colors.foreground===s.colors.foreground&&f.colors.background===s.colors.background},t.is256Color=function(f){return f<_.DEFAULT_COLOR}},8803:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;var h=u(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=h.isFirefox?"bottom":"ideographic",t.CHAR_ATLAS_CELL_SPACING=1},1906:function(M,t,u){var h,_=this&&this.__extends||(h=function(C,E){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,b){L.__proto__=b}||function(L,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(L[w]=b[w])},h(C,E)},function(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function L(){this.constructor=C}h(C,E),C.prototype=E===null?Object.create(E):(L.prototype=E.prototype,new L)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var f=u(8803),s=u(9616),y=u(5680),g=u(7001),n=u(6114),o=u(1752),p=u(4774),a=1024,r=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function i(C){return C.code<<21|C.bg<<12|C.fg<<3|(C.bold?0:4)+(C.dim?0:2)+(C.italic?0:1)}t.getGlyphCacheKey=i;var c=function(C){function E(L,b){var w=C.call(this)||this;w._config=b,w._drawToCacheCount=0,w._glyphsWaitingOnBitmap=[],w._bitmapCommitTimeout=null,w._bitmap=null,w._cacheCanvas=L.createElement("canvas"),w._cacheCanvas.width=a,w._cacheCanvas.height=r,w._cacheCtx=(0,o.throwIfFalsy)(w._cacheCanvas.getContext("2d",{alpha:!0}));var B=L.createElement("canvas");B.width=w._config.scaledCharWidth,B.height=w._config.scaledCharHeight,w._tmpCtx=(0,o.throwIfFalsy)(B.getContext("2d",{alpha:w._config.allowTransparency})),w._width=Math.floor(a/w._config.scaledCharWidth),w._height=Math.floor(r/w._config.scaledCharHeight);var k=w._width*w._height;return w._cacheMap=new g.LRUMap(k),w._cacheMap.prealloc(k),w}return _(E,C),E.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},E.prototype.beginFrame=function(){this._drawToCacheCount=0},E.prototype.clear=function(){if(this._cacheMap.size>0){var L=this._width*this._height;this._cacheMap=new g.LRUMap(L),this._cacheMap.prealloc(L)}this._cacheCtx.clearRect(0,0,a,r),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},E.prototype.draw=function(L,b,w,B){if(b.code===32)return!0;if(!this._canCache(b))return!1;var k=i(b),F=this._cacheMap.get(k);if(F!=null)return this._drawFromCache(L,F,w,B),!0;if(this._drawToCacheCount<100){var O;O=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var x=this._drawToCache(b,O);return this._cacheMap.set(k,x),this._drawFromCache(L,x,w,B),!0}return!1},E.prototype._canCache=function(L){return L.code<256},E.prototype._toCoordinateX=function(L){return L%this._width*this._config.scaledCharWidth},E.prototype._toCoordinateY=function(L){return Math.floor(L/this._width)*this._config.scaledCharHeight},E.prototype._drawFromCache=function(L,b,w,B){if(!b.isEmpty){var k=this._toCoordinateX(b.index),F=this._toCoordinateY(b.index);L.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,k,F,this._config.scaledCharWidth,this._config.scaledCharHeight,w,B,this._config.scaledCharWidth,this._config.scaledCharHeight)}},E.prototype._getColorFromAnsiIndex=function(L){return L<this._config.colors.ansi.length?this._config.colors.ansi[L]:y.DEFAULT_ANSI_COLORS[L]},E.prototype._getBackgroundColor=function(L){return this._config.allowTransparency?e:L.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:L.bg<256?this._getColorFromAnsiIndex(L.bg):this._config.colors.background},E.prototype._getForegroundColor=function(L){return L.fg===f.INVERTED_DEFAULT_COLOR?p.color.opaque(this._config.colors.background):L.fg<256?this._getColorFromAnsiIndex(L.fg):this._config.colors.foreground},E.prototype._drawToCache=function(L,b){this._drawToCacheCount++,this._tmpCtx.save();var w=this._getBackgroundColor(L);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=w.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var B=L.bold?this._config.fontWeightBold:this._config.fontWeight,k=L.italic?"italic":"";this._tmpCtx.font=k+" "+B+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(L).css,L.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(L.chars,0,this._config.scaledCharHeight);var F=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),O=!1;if(this._config.allowTransparency||(O=m(F,w)),O&&L.chars==="_"&&!this._config.allowTransparency)for(var x=1;x<=5&&(this._tmpCtx.fillText(L.chars,0,this._config.scaledCharHeight-x),O=m(F=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),w));x++);this._tmpCtx.restore();var T=this._toCoordinateX(b),I=this._toCoordinateY(b);this._cacheCtx.putImageData(F,T,I);var j={index:b,isEmpty:O,inBitmap:!1};return this._addGlyphToBitmap(j),j},E.prototype._addGlyphToBitmap=function(L){var b=this;!("createImageBitmap"in window)||n.isFirefox||n.isSafari||(this._glyphsWaitingOnBitmap.push(L),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return b._generateBitmap()},100)))},E.prototype._generateBitmap=function(){var L=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(w){L._bitmap=w;for(var B=0;B<b.length;B++)b[B].inBitmap=!0}),this._bitmapCommitTimeout=null},E}(s.BaseCharAtlas);t.DynamicCharAtlas=c;var d=function(C){function E(L,b){return C.call(this)||this}return _(E,C),E.prototype.draw=function(L,b,w,B){return!1},E}(s.BaseCharAtlas);function m(C,E){for(var L=!0,b=E.rgba>>>24,w=E.rgba>>>16&255,B=E.rgba>>>8&255,k=0;k<C.data.length;k+=4)C.data[k]===b&&C.data[k+1]===w&&C.data[k+2]===B?C.data[k+3]=0:L=!1;return L}t.NoneCharAtlas=d},7001:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var u=function(){function h(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return h.prototype._unlinkNode=function(_){var f=_.prev,s=_.next;_===this._head&&(this._head=s),_===this._tail&&(this._tail=f),f!==null&&(f.next=s),s!==null&&(s.prev=f)},h.prototype._appendNode=function(_){var f=this._tail;f!==null&&(f.next=_),_.prev=f,_.next=null,this._tail=_,this._head===null&&(this._head=_)},h.prototype.prealloc=function(_){for(var f=this._nodePool,s=0;s<_;s++)f.push({prev:null,next:null,key:null,value:null})},h.prototype.get=function(_){var f=this._map[_];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},h.prototype.peekValue=function(_){var f=this._map[_];return f!==void 0?f.value:null},h.prototype.peek=function(){var _=this._head;return _===null?null:_.value},h.prototype.set=function(_,f){var s=this._map[_];if(s!==void 0)s=this._map[_],this._unlinkNode(s),s.value=f;else if(this.size>=this.capacity)s=this._head,this._unlinkNode(s),delete this._map[s.key],s.key=_,s.value=f,this._map[_]=s;else{var y=this._nodePool;y.length>0?((s=y.pop()).key=_,s.value=f):s={prev:null,next:null,key:_,value:f},this._map[_]=s,this.size++}this._appendNode(s)},h}();t.LRUMap=u},1296:function(M,t,u){var h,_=this&&this.__extends||(h=function(L,b){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,B){w.__proto__=B}||function(w,B){for(var k in B)Object.prototype.hasOwnProperty.call(B,k)&&(w[k]=B[k])},h(L,b)},function(L,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function w(){this.constructor=L}h(L,b),L.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}),f=this&&this.__decorate||function(L,b,w,B){var k,F=arguments.length,O=F<3?b:B===null?B=Object.getOwnPropertyDescriptor(b,w):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(L,b,w,B);else for(var x=L.length-1;x>=0;x--)(k=L[x])&&(O=(F<3?k(O):F>3?k(b,w,O):k(b,w))||O);return F>3&&O&&Object.defineProperty(b,w,O),O},s=this&&this.__param||function(L,b){return function(w,B){b(w,B,L)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var y=u(3787),g=u(8803),n=u(844),o=u(4725),p=u(2585),a=u(8460),r=u(4774),e=u(9631),i="xterm-dom-renderer-owner-",c="xterm-fg-",d="xterm-bg-",m="xterm-focus",C=1,E=function(L){function b(w,B,k,F,O,x,T,I,j,z){var K=L.call(this)||this;return K._colors=w,K._element=B,K._screenElement=k,K._viewportElement=F,K._linkifier=O,K._linkifier2=x,K._charSizeService=I,K._optionsService=j,K._bufferService=z,K._terminalClass=C++,K._rowElements=[],K._rowContainer=document.createElement("div"),K._rowContainer.classList.add("xterm-rows"),K._rowContainer.style.lineHeight="normal",K._rowContainer.setAttribute("aria-hidden","true"),K._refreshRowElements(K._bufferService.cols,K._bufferService.rows),K._selectionContainer=document.createElement("div"),K._selectionContainer.classList.add("xterm-selection"),K._selectionContainer.setAttribute("aria-hidden","true"),K.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},K._updateDimensions(),K._injectCss(),K._rowFactory=T.createInstance(y.DomRendererRowFactory,document,K._colors),K._element.classList.add(i+K._terminalClass),K._screenElement.appendChild(K._rowContainer),K._screenElement.appendChild(K._selectionContainer),K._linkifier.onShowLinkUnderline(function(X){return K._onLinkHover(X)}),K._linkifier.onHideLinkUnderline(function(X){return K._onLinkLeave(X)}),K._linkifier2.onShowLinkUnderline(function(X){return K._onLinkHover(X)}),K._linkifier2.onHideLinkUnderline(function(X){return K._onLinkLeave(X)}),K}return _(b,L),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return new a.EventEmitter().event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),L.prototype.dispose.call(this)},b.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var w=0,B=this._rowElements;w<B.length;w++){var k=B[w];k.style.width=this.dimensions.canvasWidth+"px",k.style.height=this.dimensions.actualCellHeight+"px",k.style.lineHeight=this.dimensions.actualCellHeight+"px",k.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var F=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=F,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.setColors=function(w){this._colors=w,this._injectCss()},b.prototype._injectCss=function(){var w=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var B=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";B+=this._terminalSelector+" span:not(."+y.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+y.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+y.ITALIC_CLASS+" { font-style: italic;}",B+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",B+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",B+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+":not(."+y.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",B+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(k,F){B+=w._terminalSelector+" ."+c+F+" { color: "+k.css+"; }"+w._terminalSelector+" ."+d+F+" { background-color: "+k.css+"; }"}),B+=this._terminalSelector+" ."+c+g.INVERTED_DEFAULT_COLOR+" { color: "+r.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+d+g.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=B},b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},b.prototype._refreshRowElements=function(w,B){for(var k=this._rowElements.length;k<=B;k++){var F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>B;)this._rowContainer.removeChild(this._rowElements.pop())},b.prototype.onResize=function(w,B){this._refreshRowElements(w,B),this._updateDimensions()},b.prototype.onCharSizeChanged=function(){this._updateDimensions()},b.prototype.onBlur=function(){this._rowContainer.classList.remove(m)},b.prototype.onFocus=function(){this._rowContainer.classList.add(m)},b.prototype.onSelectionChanged=function(w,B,k){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(w&&B){var F=w[1]-this._bufferService.buffer.ydisp,O=B[1]-this._bufferService.buffer.ydisp,x=Math.max(F,0),T=Math.min(O,this._bufferService.rows-1);if(!(x>=this._bufferService.rows||T<0)){var I=document.createDocumentFragment();if(k)I.appendChild(this._createSelectionElement(x,w[0],B[0],T-x+1));else{var j=F===x?w[0]:0,z=x===O?B[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(x,j,z));var K=T-x-1;if(I.appendChild(this._createSelectionElement(x+1,0,this._bufferService.cols,K)),x!==T){var X=O===T?B[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(T,0,X))}}this._selectionContainer.appendChild(I)}}},b.prototype._createSelectionElement=function(w,B,k,F){F===void 0&&(F=1);var O=document.createElement("div");return O.style.height=F*this.dimensions.actualCellHeight+"px",O.style.top=w*this.dimensions.actualCellHeight+"px",O.style.left=B*this.dimensions.actualCellWidth+"px",O.style.width=this.dimensions.actualCellWidth*(k-B)+"px",O},b.prototype.onCursorMove=function(){},b.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},b.prototype.clear=function(){for(var w=0,B=this._rowElements;w<B.length;w++)B[w].innerText=""},b.prototype.renderRows=function(w,B){for(var k=this._bufferService.buffer.ybase+this._bufferService.buffer.y,F=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),O=this._optionsService.options.cursorBlink,x=w;x<=B;x++){var T=this._rowElements[x];T.innerText="";var I=x+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(I),z=this._optionsService.options.cursorStyle;T.appendChild(this._rowFactory.createRow(j,I,I===k,z,F,O,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(b.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),b.prototype._onLinkHover=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)},b.prototype._onLinkLeave=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)},b.prototype._setCellUnderline=function(w,B,k,F,O,x){for(;w!==B||k!==F;){var T=this._rowElements[k];if(!T)return;var I=T.children[w];I&&(I.style.textDecoration=x?"underline":"none"),++w>=O&&(w=0,k++)}},f([s(6,p.IInstantiationService),s(7,o.ICharSizeService),s(8,p.IOptionsService),s(9,p.IBufferService)],b)}(n.Disposable);t.DomRenderer=E},3787:function(M,t,u){var h=this&&this.__decorate||function(e,i,c,d){var m,C=arguments.length,E=C<3?i:d===null?d=Object.getOwnPropertyDescriptor(i,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,i,c,d);else for(var L=e.length-1;L>=0;L--)(m=e[L])&&(E=(C<3?m(E):C>3?m(i,c,E):m(i,c))||E);return C>3&&E&&Object.defineProperty(i,c,E),E},_=this&&this.__param||function(e,i){return function(c,d){i(c,d,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.STRIKETHROUGH_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var f=u(8803),s=u(643),y=u(511),g=u(2585),n=u(4774),o=u(4725),p=u(4269);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.STRIKETHROUGH_CLASS="xterm-strikethrough",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var a=function(){function e(i,c,d,m,C){this._document=i,this._colors=c,this._characterJoinerService=d,this._optionsService=m,this._coreService=C,this._workCell=new y.CellData}return e.prototype.setColors=function(i){this._colors=i},e.prototype.createRow=function(i,c,d,m,C,E,L,b){for(var w=this._document.createDocumentFragment(),B=this._characterJoinerService.getJoinedCharacters(c),k=0,F=Math.min(i.length,b)-1;F>=0;F--)if(i.loadCell(F,this._workCell).getCode()!==s.NULL_CELL_CODE||d&&F===C){k=F+1;break}for(F=0;F<k;F++){i.loadCell(F,this._workCell);var O=this._workCell.getWidth();if(O!==0){var x=!1,T=F,I=this._workCell;if(B.length>0&&F===B[0][0]){x=!0;var j=B.shift();I=new p.JoinedCellData(this._workCell,i.translateToString(!0,j[0],j[1]),j[1]-j[0]),T=j[1]-1,O=I.getWidth()}var z=this._document.createElement("span");if(O>1&&(z.style.width=L*O+"px"),x&&(z.style.display="inline",C>=F&&C<=T&&(C=F)),!this._coreService.isCursorHidden&&d&&F===C)switch(z.classList.add(t.CURSOR_CLASS),E&&z.classList.add(t.CURSOR_BLINK_CLASS),m){case"bar":z.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":z.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:z.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}I.isBold()&&z.classList.add(t.BOLD_CLASS),I.isItalic()&&z.classList.add(t.ITALIC_CLASS),I.isDim()&&z.classList.add(t.DIM_CLASS),I.isUnderline()&&z.classList.add(t.UNDERLINE_CLASS),I.isInvisible()?z.textContent=s.WHITESPACE_CELL_CHAR:z.textContent=I.getChars()||s.WHITESPACE_CELL_CHAR,I.isStrikethrough()&&z.classList.add(t.STRIKETHROUGH_CLASS);var K=I.getFgColor(),X=I.getFgColorMode(),$=I.getBgColor(),Z=I.getBgColorMode(),A=!!I.isInverse();if(A){var D=K;K=$,$=D;var P=X;X=Z,Z=P}switch(X){case 16777216:case 33554432:I.isBold()&&K<8&&this._optionsService.options.drawBoldTextInBrightColors&&(K+=8),this._applyMinimumContrast(z,this._colors.background,this._colors.ansi[K])||z.classList.add("xterm-fg-"+K);break;case 50331648:var N=n.rgba.toColor(K>>16&255,K>>8&255,255&K);this._applyMinimumContrast(z,this._colors.background,N)||this._addStyle(z,"color:#"+r(K.toString(16),"0",6));break;default:this._applyMinimumContrast(z,this._colors.background,this._colors.foreground)||A&&z.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch(Z){case 16777216:case 33554432:z.classList.add("xterm-bg-"+$);break;case 50331648:this._addStyle(z,"background-color:#"+r($.toString(16),"0",6));break;default:A&&z.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}w.appendChild(z),F=T}}return w},e.prototype._applyMinimumContrast=function(i,c,d){if(this._optionsService.options.minimumContrastRatio===1)return!1;var m=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return m===void 0&&(m=n.color.ensureContrastRatio(c,d,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,m??null)),!!m&&(this._addStyle(i,"color:"+m.css),!0)},e.prototype._addStyle=function(i,c){i.setAttribute("style",""+(i.getAttribute("style")||"")+c+";")},h([_(2,o.ICharacterJoinerService),_(3,g.IOptionsService),_(4,g.ICoreService)],e)}();function r(e,i,c){for(;e.length<c;)e=i+e;return e}t.DomRendererRowFactory=a},456:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var u=function(){function h(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return h.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(h.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?_%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)-1]:[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),h.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,f=this.selectionEnd;return!(!_||!f)&&(_[1]>f[1]||_[1]===f[1]&&_[0]>f[0])},h.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},h}();t.SelectionModel=u},428:function(M,t,u){var h=this&&this.__decorate||function(n,o,p,a){var r,e=arguments.length,i=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,p):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,o,p,a);else for(var c=n.length-1;c>=0;c--)(r=n[c])&&(i=(e<3?r(i):e>3?r(o,p,i):r(o,p))||i);return e>3&&i&&Object.defineProperty(o,p,i),i},_=this&&this.__param||function(n,o){return function(p,a){o(p,a,n)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var f=u(2585),s=u(8460),y=function(){function n(o,p,a){this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new g(o,p,this._optionsService)}return Object.defineProperty(n.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),n.prototype.measure=function(){var o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())},h([_(2,f.IOptionsService)],n)}();t.CharSizeService=y;var g=function(){function n(o,p,a){this._document=o,this._parentElement=p,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return n.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var o=this._measureElement.getBoundingClientRect();return o.width!==0&&o.height!==0&&(this._result.width=o.width,this._result.height=Math.ceil(o.height)),this._result},n}()},4269:function(M,t,u){var h,_=this&&this.__extends||(h=function(r,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])},h(r,e)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}h(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}),f=this&&this.__decorate||function(r,e,i,c){var d,m=arguments.length,C=m<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,e,i,c);else for(var E=r.length-1;E>=0;E--)(d=r[E])&&(C=(m<3?d(C):m>3?d(e,i,C):d(e,i))||C);return m>3&&C&&Object.defineProperty(e,i,C),C},s=this&&this.__param||function(r,e){return function(i,c){e(i,c,r)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var y=u(3734),g=u(643),n=u(511),o=u(2585),p=function(r){function e(i,c,d){var m=r.call(this)||this;return m.content=0,m.combinedData="",m.fg=i.fg,m.bg=i.bg,m.combinedData=c,m._width=d,m}return _(e,r),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(i){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(y.AttributeData);t.JoinedCellData=p;var a=function(){function r(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new n.CellData}return r.prototype.register=function(e){var i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id},r.prototype.deregister=function(e){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];for(var c=[],d=i.translateToString(!0),m=0,C=0,E=0,L=i.getFg(0),b=i.getBg(0),w=0;w<i.getTrimmedLength();w++)if(i.loadCell(w,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==b){if(w-m>1)for(var B=this._getJoinedRanges(d,E,C,i,m),k=0;k<B.length;k++)c.push(B[k]);m=w,E=C,L=this._workCell.fg,b=this._workCell.bg}C+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-m>1)for(B=this._getJoinedRanges(d,E,C,i,m),k=0;k<B.length;k++)c.push(B[k]);return c},r.prototype._getJoinedRanges=function(e,i,c,d,m){var C=e.substring(i,c),E=[];try{E=this._characterJoiners[0].handler(C)}catch(B){console.error(B)}for(var L=1;L<this._characterJoiners.length;L++)try{for(var b=this._characterJoiners[L].handler(C),w=0;w<b.length;w++)r._mergeRanges(E,b[w])}catch(B){console.error(B)}return this._stringRangesToCellRanges(E,d,m),E},r.prototype._stringRangesToCellRanges=function(e,i,c){var d=0,m=!1,C=0,E=e[d];if(E){for(var L=c;L<this._bufferService.cols;L++){var b=i.getWidth(L),w=i.getString(L).length||g.WHITESPACE_CELL_CHAR.length;if(b!==0){if(!m&&E[0]<=C&&(E[0]=L,m=!0),E[1]<=C){if(E[1]=L,!(E=e[++d]))break;E[0]<=C?(E[0]=L,m=!0):m=!1}C+=w}}E&&(E[1]=this._bufferService.cols)}},r._mergeRanges=function(e,i){for(var c=!1,d=0;d<e.length;d++){var m=e[d];if(c){if(i[1]<=m[0])return e[d-1][1]=i[1],e;if(i[1]<=m[1])return e[d-1][1]=Math.max(i[1],m[1]),e.splice(d,1),e;e.splice(d,1),d--}else{if(i[1]<=m[0])return e.splice(d,0,i),e;if(i[1]<=m[1])return m[0]=Math.min(i[0],m[0]),e;i[0]<m[1]&&(m[0]=Math.min(i[0],m[0]),c=!0)}}return c?e[e.length-1][1]=i[1]:e.push(i),e},r=f([s(0,o.IBufferService)],r)}();t.CharacterJoinerService=a},5114:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var u=function(){function h(_){this._textarea=_}return Object.defineProperty(h.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),h}();t.CoreBrowserService=u},8934:function(M,t,u){var h=this&&this.__decorate||function(g,n,o,p){var a,r=arguments.length,e=r<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(g,n,o,p);else for(var i=g.length-1;i>=0;i--)(a=g[i])&&(e=(r<3?a(e):r>3?a(n,o,e):a(n,o))||e);return r>3&&e&&Object.defineProperty(n,o,e),e},_=this&&this.__param||function(g,n){return function(o,p){n(o,p,g)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var f=u(4725),s=u(9806),y=function(){function g(n,o){this._renderService=n,this._charSizeService=o}return g.prototype.getCoords=function(n,o,p,a,r){return(0,s.getCoords)(n,o,p,a,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},g.prototype.getRawByteCoords=function(n,o,p,a){var r=this.getCoords(n,o,p,a);return(0,s.getRawByteCoords)(r)},h([_(0,f.IRenderService),_(1,f.ICharSizeService)],g)}();t.MouseService=y},3230:function(M,t,u){var h,_=this&&this.__extends||(h=function(i,c){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(d[C]=m[C])},h(i,c)},function(i,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=i}h(i,c),i.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}),f=this&&this.__decorate||function(i,c,d,m){var C,E=arguments.length,L=E<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(i,c,d,m);else for(var b=i.length-1;b>=0;b--)(C=i[b])&&(L=(E<3?C(L):E>3?C(c,d,L):C(c,d))||L);return E>3&&L&&Object.defineProperty(c,d,L),L},s=this&&this.__param||function(i,c){return function(d,m){c(d,m,i)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var y=u(6193),g=u(8460),n=u(844),o=u(5596),p=u(3656),a=u(2585),r=u(4725),e=function(i){function c(d,m,C,E,L,b){var w=i.call(this)||this;if(w._renderer=d,w._rowCount=m,w._charSizeService=L,w._isPaused=!1,w._needsFullRefresh=!1,w._isNextRenderRedrawOnly=!0,w._needsSelectionRefresh=!1,w._canvasWidth=0,w._canvasHeight=0,w._selectionState={start:void 0,end:void 0,columnSelectMode:!1},w._onDimensionsChange=new g.EventEmitter,w._onRender=new g.EventEmitter,w._onRefreshRequest=new g.EventEmitter,w.register({dispose:function(){return w._renderer.dispose()}}),w._renderDebouncer=new y.RenderDebouncer(function(k,F){return w._renderRows(k,F)}),w.register(w._renderDebouncer),w._screenDprMonitor=new o.ScreenDprMonitor,w._screenDprMonitor.setListener(function(){return w.onDevicePixelRatioChange()}),w.register(w._screenDprMonitor),w.register(b.onResize(function(k){return w._fullRefresh()})),w.register(E.onOptionChange(function(){return w._renderer.onOptionsChanged()})),w.register(w._charSizeService.onCharSizeChange(function(){return w.onCharSizeChanged()})),w._renderer.onRequestRedraw(function(k){return w.refreshRows(k.start,k.end,!0)}),w.register((0,p.addDisposableDomListener)(window,"resize",function(){return w.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var B=new IntersectionObserver(function(k){return w._onIntersectionChange(k[k.length-1])},{threshold:0});B.observe(C),w.register({dispose:function(){return B.disconnect()}})}return w}return _(c,i),Object.defineProperty(c.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),c.prototype._onIntersectionChange=function(d){this._isPaused=d.isIntersecting===void 0?d.intersectionRatio===0:!d.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},c.prototype.refreshRows=function(d,m,C){C===void 0&&(C=!1),this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(d,m,this._rowCount))},c.prototype._renderRows=function(d,m){this._renderer.renderRows(d,m),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:d,end:m}),this._isNextRenderRedrawOnly=!0},c.prototype.resize=function(d,m){this._rowCount=m,this._fireOnCanvasResize()},c.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},c.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},c.prototype.dispose=function(){i.prototype.dispose.call(this)},c.prototype.setRenderer=function(d){var m=this;this._renderer.dispose(),this._renderer=d,this._renderer.onRequestRedraw(function(C){return m.refreshRows(C.start,C.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},c.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},c.prototype.clearTextureAtlas=function(){var d,m;(m=(d=this._renderer)===null||d===void 0?void 0:d.clearTextureAtlas)===null||m===void 0||m.call(d),this._fullRefresh()},c.prototype.setColors=function(d){this._renderer.setColors(d),this._fullRefresh()},c.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},c.prototype.onResize=function(d,m){this._renderer.onResize(d,m),this._fullRefresh()},c.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},c.prototype.onBlur=function(){this._renderer.onBlur()},c.prototype.onFocus=function(){this._renderer.onFocus()},c.prototype.onSelectionChanged=function(d,m,C){this._selectionState.start=d,this._selectionState.end=m,this._selectionState.columnSelectMode=C,this._renderer.onSelectionChanged(d,m,C)},c.prototype.onCursorMove=function(){this._renderer.onCursorMove()},c.prototype.clear=function(){this._renderer.clear()},f([s(3,a.IOptionsService),s(4,r.ICharSizeService),s(5,a.IBufferService)],c)}(n.Disposable);t.RenderService=e},9312:function(M,t,u){var h,_=this&&this.__extends||(h=function(E,L){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var B in w)Object.prototype.hasOwnProperty.call(w,B)&&(b[B]=w[B])},h(E,L)},function(E,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function b(){this.constructor=E}h(E,L),E.prototype=L===null?Object.create(L):(b.prototype=L.prototype,new b)}),f=this&&this.__decorate||function(E,L,b,w){var B,k=arguments.length,F=k<3?L:w===null?w=Object.getOwnPropertyDescriptor(L,b):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(E,L,b,w);else for(var O=E.length-1;O>=0;O--)(B=E[O])&&(F=(k<3?B(F):k>3?B(L,b,F):B(L,b))||F);return k>3&&F&&Object.defineProperty(L,b,F),F},s=this&&this.__param||function(E,L){return function(b,w){L(b,w,E)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var y=u(6114),g=u(456),n=u(511),o=u(8460),p=u(4725),a=u(2585),r=u(9806),e=u(9504),i=u(844),c=u(4841),d=String.fromCharCode(160),m=new RegExp(d,"g"),C=function(E){function L(b,w,B,k,F,O,x,T){var I=E.call(this)||this;return I._element=b,I._screenElement=w,I._linkifier=B,I._bufferService=k,I._coreService=F,I._mouseService=O,I._optionsService=x,I._renderService=T,I._dragScrollAmount=0,I._enabled=!0,I._workCell=new n.CellData,I._mouseDownTimeStamp=0,I._oldHasSelection=!1,I._oldSelectionStart=void 0,I._oldSelectionEnd=void 0,I._onLinuxMouseSelection=I.register(new o.EventEmitter),I._onRedrawRequest=I.register(new o.EventEmitter),I._onSelectionChange=I.register(new o.EventEmitter),I._onRequestScrollLines=I.register(new o.EventEmitter),I._mouseMoveListener=function(j){return I._onMouseMove(j)},I._mouseUpListener=function(j){return I._onMouseUp(j)},I._coreService.onUserInput(function(){I.hasSelection&&I.clearSelection()}),I._trimListener=I._bufferService.buffer.lines.onTrim(function(j){return I._onTrim(j)}),I.register(I._bufferService.buffers.onBufferActivate(function(j){return I._onBufferActivate(j)})),I.enable(),I._model=new g.SelectionModel(I._bufferService),I._activeSelectionMode=0,I}return _(L,E),Object.defineProperty(L.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),L.prototype.dispose=function(){this._removeMouseDownListeners()},L.prototype.reset=function(){this.clearSelection()},L.prototype.disable=function(){this.clearSelection(),this._enabled=!1},L.prototype.enable=function(){this._enabled=!0},Object.defineProperty(L.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"hasSelection",{get:function(){var b=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!b||!w||b[0]===w[0]&&b[1]===w[1])},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectionText",{get:function(){var b=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!b||!w)return"";var B=this._bufferService.buffer,k=[];if(this._activeSelectionMode===3){if(b[0]===w[0])return"";for(var F=b[1];F<=w[1];F++){var O=B.translateBufferLineToString(F,!0,b[0],w[0]);k.push(O)}}else{var x=b[1]===w[1]?w[0]:void 0;for(k.push(B.translateBufferLineToString(b[1],!0,b[0],x)),F=b[1]+1;F<=w[1]-1;F++){var T=B.lines.get(F);O=B.translateBufferLineToString(F,!0),(T==null?void 0:T.isWrapped)?k[k.length-1]+=O:k.push(O)}b[1]!==w[1]&&(T=B.lines.get(w[1]),O=B.translateBufferLineToString(w[1],!0,0,w[0]),T&&T.isWrapped?k[k.length-1]+=O:k.push(O))}return k.map(function(I){return I.replace(m," ")}).join(y.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),L.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},L.prototype.refresh=function(b){var w=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return w._refresh()})),y.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},L.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},L.prototype._isClickInSelection=function(b){var w=this._getMouseBufferCoords(b),B=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!!(B&&k&&w)&&this._areCoordsInSelection(w,B,k)},L.prototype._areCoordsInSelection=function(b,w,B){return b[1]>w[1]&&b[1]<B[1]||w[1]===B[1]&&b[1]===w[1]&&b[0]>=w[0]&&b[0]<B[0]||w[1]<B[1]&&b[1]===B[1]&&b[0]<B[0]||w[1]<B[1]&&b[1]===w[1]&&b[0]>=w[0]},L.prototype._selectWordAtCursor=function(b,w){var B,k,F=(k=(B=this._linkifier.currentLink)===null||B===void 0?void 0:B.link)===null||k===void 0?void 0:k.range;if(F)return this._model.selectionStart=[F.start.x-1,F.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(F,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var O=this._getMouseBufferCoords(b);return!!O&&(this._selectWordAt(O,w),this._model.selectionEnd=void 0,!0)},L.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},L.prototype.selectLines=function(b,w){this._model.clearSelection(),b=Math.max(b,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()},L.prototype._onTrim=function(b){this._model.onTrim(b)&&this.refresh()},L.prototype._getMouseBufferCoords=function(b){var w=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w},L.prototype._getMouseEventScrollAmount=function(b){var w=(0,r.getCoordsRelativeToElement)(b,this._screenElement)[1],B=this._renderService.dimensions.canvasHeight;return w>=0&&w<=B?0:(w>B&&(w-=B),w=Math.min(Math.max(w,-50),50),(w/=50)/Math.abs(w)+Math.round(14*w))},L.prototype.shouldForceSelection=function(b){return y.isMac?b.altKey&&this._optionsService.options.macOptionClickForcesSelection:b.shiftKey},L.prototype.onMouseDown=function(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._onIncrementalClick(b):b.detail===1?this._onSingleClick(b):b.detail===2?this._onDoubleClick(b):b.detail===3&&this._onTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}},L.prototype._addMouseDownListeners=function(){var b=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return b._dragScroll()},50)},L.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},L.prototype._onIncrementalClick=function(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))},L.prototype._onSingleClick=function(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),this._model.selectionStart){this._model.selectionEnd=void 0;var w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},L.prototype._onDoubleClick=function(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)},L.prototype._onTripleClick=function(b){var w=this._getMouseBufferCoords(b);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))},L.prototype.shouldColumnSelect=function(b){return b.altKey&&!(y.isMac&&this._optionsService.options.macOptionClickForcesSelection)},L.prototype._onMouseMove=function(b){if(b.stopImmediatePropagation(),this._model.selectionStart){var w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){var k=B.lines.get(this._model.selectionEnd[1]);k&&k.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},L.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}},L.prototype._onMouseUp=function(b){var w=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&b.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var B=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&B[0]!==void 0&&B[1]!==void 0){var k=(0,e.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(k,!0)}}}else this._fireEventIfSelectionChanged()},L.prototype._fireEventIfSelectionChanged=function(){var b=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,B=!(!b||!w||b[0]===w[0]&&b[1]===w[1]);B?b&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,w,B)):this._oldHasSelection&&this._fireOnSelectionChange(b,w,B)},L.prototype._fireOnSelectionChange=function(b,w,B){this._oldSelectionStart=b,this._oldSelectionEnd=w,this._oldHasSelection=B,this._onSelectionChange.fire()},L.prototype._onBufferActivate=function(b){var w=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(function(B){return w._onTrim(B)})},L.prototype._convertViewportColToCharacterIndex=function(b,w){for(var B=w[0],k=0;w[0]>=k;k++){var F=b.loadCell(k,this._workCell).getChars().length;this._workCell.getWidth()===0?B--:F>1&&w[0]!==k&&(B+=F-1)}return B},L.prototype.setSelection=function(b,w,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,w],this._model.selectionStartLength=B,this.refresh()},L.prototype.rightClickSelect=function(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},L.prototype._getWordAt=function(b,w,B,k){if(B===void 0&&(B=!0),k===void 0&&(k=!0),!(b[0]>=this._bufferService.cols)){var F=this._bufferService.buffer,O=F.lines.get(b[1]);if(O){var x=F.translateBufferLineToString(b[1],!1),T=this._convertViewportColToCharacterIndex(O,b),I=T,j=b[0]-T,z=0,K=0,X=0,$=0;if(x.charAt(T)===" "){for(;T>0&&x.charAt(T-1)===" ";)T--;for(;I<x.length&&x.charAt(I+1)===" ";)I++}else{var Z=b[0],A=b[0];O.getWidth(Z)===0&&(z++,Z--),O.getWidth(A)===2&&(K++,A++);var D=O.getString(A).length;for(D>1&&($+=D-1,I+=D-1);Z>0&&T>0&&!this._isCharWordSeparator(O.loadCell(Z-1,this._workCell));){O.loadCell(Z-1,this._workCell);var P=this._workCell.getChars().length;this._workCell.getWidth()===0?(z++,Z--):P>1&&(X+=P-1,T-=P-1),T--,Z--}for(;A<O.length&&I+1<x.length&&!this._isCharWordSeparator(O.loadCell(A+1,this._workCell));){O.loadCell(A+1,this._workCell);var N=this._workCell.getChars().length;this._workCell.getWidth()===2?(K++,A++):N>1&&($+=N-1,I+=N-1),I++,A++}}I++;var H=T+j-z+X,V=Math.min(this._bufferService.cols,I-T+z+K-X-$);if(w||x.slice(T,I).trim()!==""){if(B&&H===0&&O.getCodePoint(0)!==32){var Y=F.lines.get(b[1]-1);if(Y&&O.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){var J=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(J){var ee=this._bufferService.cols-J.start;H-=ee,V+=ee}}}if(k&&H+V===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){var oe=F.lines.get(b[1]+1);if((oe==null?void 0:oe.isWrapped)&&oe.getCodePoint(0)!==32){var G=this._getWordAt([0,b[1]+1],!1,!1,!0);G&&(V+=G.length)}}return{start:H,length:V}}}}},L.prototype._selectWordAt=function(b,w){var B=this._getWordAt(b,w);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[B.start,b[1]],this._model.selectionStartLength=B.length}},L.prototype._selectToWordAt=function(b){var w=this._getWordAt(b,!0);if(w){for(var B=b[1];w.start<0;)w.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,B]}},L.prototype._isCharWordSeparator=function(b){return b.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(b.getChars())>=0},L.prototype._selectLineAt=function(b){var w=this._bufferService.buffer.getWrappedRangeForLine(b);this._model.selectionStart=[0,w.first],this._model.selectionEnd=[this._bufferService.cols,w.last],this._model.selectionStartLength=0},f([s(3,a.IBufferService),s(4,a.ICoreService),s(5,p.IMouseService),s(6,a.IOptionsService),s(7,p.IRenderService)],L)}(i.Disposable);t.SelectionService=C},4725:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICharacterJoinerService=t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var h=u(8343);t.ICharSizeService=(0,h.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),t.IMouseService=(0,h.createDecorator)("MouseService"),t.IRenderService=(0,h.createDecorator)("RenderService"),t.ISelectionService=(0,h.createDecorator)("SelectionService"),t.ISoundService=(0,h.createDecorator)("SoundService"),t.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService")},357:function(M,t,u){var h=this&&this.__decorate||function(y,g,n,o){var p,a=arguments.length,r=a<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(y,g,n,o);else for(var e=y.length-1;e>=0;e--)(p=y[e])&&(r=(a<3?p(r):a>3?p(g,n,r):p(g,n))||r);return a>3&&r&&Object.defineProperty(g,n,r),r},_=this&&this.__param||function(y,g){return function(n,o){g(n,o,y)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var f=u(2585),s=function(){function y(g){this._optionsService=g}return Object.defineProperty(y,"audioContext",{get:function(){if(!y._audioContext){var g=window.AudioContext||window.webkitAudioContext;if(!g)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;y._audioContext=new g}return y._audioContext},enumerable:!1,configurable:!0}),y.prototype.playBellSound=function(){var g=y.audioContext;if(g){var n=g.createBufferSource();g.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(o){n.buffer=o,n.connect(g.destination),n.start(0)})}},y.prototype._base64ToArrayBuffer=function(g){for(var n=window.atob(g),o=n.length,p=new Uint8Array(o),a=0;a<o;a++)p[a]=n.charCodeAt(a);return p.buffer},y.prototype._removeMimeType=function(g){return g.split(",")[1]},y=h([_(0,f.IOptionsService)],y)}();t.SoundService=s},6349:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var h=u(8460),_=function(){function f(s){this._maxLength=s,this.onDeleteEmitter=new h.EventEmitter,this.onInsertEmitter=new h.EventEmitter,this.onTrimEmitter=new h.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(s){if(this._maxLength!==s){for(var y=new Array(s),g=0;g<Math.min(s,this.length);g++)y[g]=this._array[this._getCyclicIndex(g)];this._array=y,this._maxLength=s,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(s){if(s>this._length)for(var y=this._length;y<s;y++)this._array[y]=void 0;this._length=s},enumerable:!1,configurable:!0}),f.prototype.get=function(s){return this._array[this._getCyclicIndex(s)]},f.prototype.set=function(s,y){this._array[this._getCyclicIndex(s)]=y},f.prototype.push=function(s){this._array[this._getCyclicIndex(this._length)]=s,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(s,y){for(var g=[],n=2;n<arguments.length;n++)g[n-2]=arguments[n];if(y){for(var o=s;o<this._length-y;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+y)];this._length-=y,this.onDeleteEmitter.fire({index:s,amount:y})}for(o=this._length-1;o>=s;o--)this._array[this._getCyclicIndex(o+g.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<g.length;o++)this._array[this._getCyclicIndex(s+o)]=g[o];if(g.length&&this.onInsertEmitter.fire({index:s,amount:g.length}),this._length+g.length>this._maxLength){var p=this._length+g.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=g.length},f.prototype.trimStart=function(s){s>this._length&&(s=this._length),this._startIndex+=s,this._length-=s,this.onTrimEmitter.fire(s)},f.prototype.shiftElements=function(s,y,g){if(!(y<=0)){if(s<0||s>=this._length)throw new Error("start argument out of range");if(s+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(var n=y-1;n>=0;n--)this.set(s+n+g,this.get(s+n));var o=s+y+g-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(n=0;n<y;n++)this.set(s+n+g,this.get(s+n))}},f.prototype._getCyclicIndex=function(s){return(this._startIndex+s)%this._maxLength},f}();t.CircularList=_},1439:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function u(h,_){if(_===void 0&&(_=5),typeof h!="object")return h;var f=Array.isArray(h)?[]:{};for(var s in h)f[s]=_<=1?h[s]:h[s]&&u(h[s],_-1);return f}},8969:function(M,t,u){var h,_=this&&this.__extends||(h=function(b,w){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,k){B.__proto__=k}||function(B,k){for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&(B[F]=k[F])},h(b,w)},function(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function B(){this.constructor=b}h(b,w),b.prototype=w===null?Object.create(w):(B.prototype=w.prototype,new B)});Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var f=u(844),s=u(2585),y=u(4348),g=u(7866),n=u(744),o=u(7302),p=u(6975),a=u(8460),r=u(1753),e=u(3730),i=u(1480),c=u(7994),d=u(9282),m=u(5435),C=u(5981),E=!1,L=function(b){function w(B){var k=b.call(this)||this;return k._onBinary=new a.EventEmitter,k._onData=new a.EventEmitter,k._onLineFeed=new a.EventEmitter,k._onResize=new a.EventEmitter,k._onScroll=new a.EventEmitter,k._instantiationService=new y.InstantiationService,k.optionsService=new o.OptionsService(B),k._instantiationService.setService(s.IOptionsService,k.optionsService),k._bufferService=k.register(k._instantiationService.createInstance(n.BufferService)),k._instantiationService.setService(s.IBufferService,k._bufferService),k._logService=k._instantiationService.createInstance(g.LogService),k._instantiationService.setService(s.ILogService,k._logService),k.coreService=k.register(k._instantiationService.createInstance(p.CoreService,function(){return k.scrollToBottom()})),k._instantiationService.setService(s.ICoreService,k.coreService),k.coreMouseService=k._instantiationService.createInstance(r.CoreMouseService),k._instantiationService.setService(s.ICoreMouseService,k.coreMouseService),k._dirtyRowService=k._instantiationService.createInstance(e.DirtyRowService),k._instantiationService.setService(s.IDirtyRowService,k._dirtyRowService),k.unicodeService=k._instantiationService.createInstance(i.UnicodeService),k._instantiationService.setService(s.IUnicodeService,k.unicodeService),k._charsetService=k._instantiationService.createInstance(c.CharsetService),k._instantiationService.setService(s.ICharsetService,k._charsetService),k._inputHandler=new m.InputHandler(k._bufferService,k._charsetService,k.coreService,k._dirtyRowService,k._logService,k.optionsService,k.coreMouseService,k.unicodeService),k.register((0,a.forwardEvent)(k._inputHandler.onLineFeed,k._onLineFeed)),k.register(k._inputHandler),k.register((0,a.forwardEvent)(k._bufferService.onResize,k._onResize)),k.register((0,a.forwardEvent)(k.coreService.onData,k._onData)),k.register((0,a.forwardEvent)(k.coreService.onBinary,k._onBinary)),k.register(k.optionsService.onOptionChange(function(F){return k._updateOptions(F)})),k.register(k._bufferService.onScroll(function(F){k._onScroll.fire({position:k._bufferService.buffer.ydisp,source:0}),k._dirtyRowService.markRangeDirty(k._bufferService.buffer.scrollTop,k._bufferService.buffer.scrollBottom)})),k.register(k._inputHandler.onScroll(function(F){k._onScroll.fire({position:k._bufferService.buffer.ydisp,source:0}),k._dirtyRowService.markRangeDirty(k._bufferService.buffer.scrollTop,k._bufferService.buffer.scrollBottom)})),k._writeBuffer=new C.WriteBuffer(function(F,O){return k._inputHandler.parse(F,O)}),k}return _(w,b),Object.defineProperty(w.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onScroll",{get:function(){var B=this;return this._onScrollApi||(this._onScrollApi=new a.EventEmitter,this.register(this._onScroll.event(function(k){var F;(F=B._onScrollApi)===null||F===void 0||F.fire(k.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"options",{get:function(){return this.optionsService.options},set:function(B){for(var k in B)this.optionsService.options[k]=B[k]},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){var B;this._isDisposed||(b.prototype.dispose.call(this),(B=this._windowsMode)===null||B===void 0||B.dispose(),this._windowsMode=void 0)},w.prototype.write=function(B,k){this._writeBuffer.write(B,k)},w.prototype.writeSync=function(B,k){this._logService.logLevel<=s.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(B,k)},w.prototype.resize=function(B,k){isNaN(B)||isNaN(k)||(B=Math.max(B,n.MINIMUM_COLS),k=Math.max(k,n.MINIMUM_ROWS),this._bufferService.resize(B,k))},w.prototype.scroll=function(B,k){k===void 0&&(k=!1),this._bufferService.scroll(B,k)},w.prototype.scrollLines=function(B,k,F){this._bufferService.scrollLines(B,k,F)},w.prototype.scrollPages=function(B){this._bufferService.scrollPages(B)},w.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},w.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},w.prototype.scrollToLine=function(B){this._bufferService.scrollToLine(B)},w.prototype.registerEscHandler=function(B,k){return this._inputHandler.registerEscHandler(B,k)},w.prototype.registerDcsHandler=function(B,k){return this._inputHandler.registerDcsHandler(B,k)},w.prototype.registerCsiHandler=function(B,k){return this._inputHandler.registerCsiHandler(B,k)},w.prototype.registerOscHandler=function(B,k){return this._inputHandler.registerOscHandler(B,k)},w.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},w.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},w.prototype._updateOptions=function(B){var k;switch(B){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((k=this._windowsMode)===null||k===void 0||k.dispose(),this._windowsMode=void 0)}},w.prototype._enableWindowsMode=function(){var B=this;if(!this._windowsMode){var k=[];k.push(this.onLineFeed(d.updateWindowsModeWrappedState.bind(null,this._bufferService))),k.push(this.registerCsiHandler({final:"H"},function(){return(0,d.updateWindowsModeWrappedState)(B._bufferService),!1})),this._windowsMode={dispose:function(){for(var F=0,O=k;F<O.length;F++)O[F].dispose()}}}},w}(f.Disposable);t.CoreTerminal=L},8460:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var u=function(){function h(){this._listeners=[],this._disposed=!1}return Object.defineProperty(h.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var s=0;s<_._listeners.length;s++)if(_._listeners[s]===f)return void _._listeners.splice(s,1)}}}}),this._event},enumerable:!1,configurable:!0}),h.prototype.fire=function(_,f){for(var s=[],y=0;y<this._listeners.length;y++)s.push(this._listeners[y]);for(y=0;y<s.length;y++)s[y].call(void 0,_,f)},h.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},h}();t.EventEmitter=u,t.forwardEvent=function(h,_){return h(function(f){return _.fire(f)})}},5435:function(M,t,u){var h,_=this&&this.__extends||(h=function(F,O){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(x[I]=T[I])},h(F,O)},function(F,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=F}h(F,O),F.prototype=O===null?Object.create(O):(x.prototype=O.prototype,new x)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;var f,s=u(2584),y=u(7116),g=u(2015),n=u(844),o=u(8273),p=u(482),a=u(8437),r=u(8460),e=u(643),i=u(511),c=u(3734),d=u(2585),m=u(6242),C=u(6351),E=u(5941),L={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function w(F,O){if(F>24)return O.setWinLines||!1;switch(F){case 1:return!!O.restoreWin;case 2:return!!O.minimizeWin;case 3:return!!O.setWinPosition;case 4:return!!O.setWinSizePixels;case 5:return!!O.raiseWin;case 6:return!!O.lowerWin;case 7:return!!O.refreshWin;case 8:return!!O.setWinSizeChars;case 9:return!!O.maximizeWin;case 10:return!!O.fullscreenWin;case 11:return!!O.getWinState;case 13:return!!O.getWinPosition;case 14:return!!O.getWinSizePixels;case 15:return!!O.getScreenSizePixels;case 16:return!!O.getCellSizePixels;case 18:return!!O.getWinSizeChars;case 19:return!!O.getScreenSizeChars;case 20:return!!O.getIconTitle;case 21:return!!O.getWinTitle;case 22:return!!O.pushTitle;case 23:return!!O.popTitle;case 24:return!!O.setWinLines}return!1}(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));var B=function(){function F(O,x,T,I){this._bufferService=O,this._coreService=x,this._logService=T,this._optionsService=I,this._data=new Uint32Array(0)}return F.prototype.hook=function(O){this._data=new Uint32Array(0)},F.prototype.put=function(O,x,T){this._data=(0,o.concat)(this._data,O.subarray(x,T))},F.prototype.unhook=function(O){if(!O)return this._data=new Uint32Array(0),!0;var x=(0,p.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),x){case'"q':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0"q'+s.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61;1"p'+s.C0.ESC+"\\");break;case"r":var T=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+T+s.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(s.C0.ESC+"P1$r0m"+s.C0.ESC+"\\");break;case" q":var I={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];I-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+I+" q"+s.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",x),this._coreService.triggerDataEvent(s.C0.ESC+"P0$r"+s.C0.ESC+"\\")}return!0},F}(),k=function(F){function O(x,T,I,j,z,K,X,$,Z){Z===void 0&&(Z=new g.EscapeSequenceParser);var A=F.call(this)||this;A._bufferService=x,A._charsetService=T,A._coreService=I,A._dirtyRowService=j,A._logService=z,A._optionsService=K,A._coreMouseService=X,A._unicodeService=$,A._parser=Z,A._parseBuffer=new Uint32Array(4096),A._stringDecoder=new p.StringToUtf32,A._utf8Decoder=new p.Utf8ToUtf32,A._workCell=new i.CellData,A._windowTitle="",A._iconName="",A._windowTitleStack=[],A._iconNameStack=[],A._curAttrData=a.DEFAULT_ATTR_DATA.clone(),A._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),A._onRequestBell=new r.EventEmitter,A._onRequestRefreshRows=new r.EventEmitter,A._onRequestReset=new r.EventEmitter,A._onRequestSendFocus=new r.EventEmitter,A._onRequestSyncScrollBar=new r.EventEmitter,A._onRequestWindowsOptionsReport=new r.EventEmitter,A._onA11yChar=new r.EventEmitter,A._onA11yTab=new r.EventEmitter,A._onCursorMove=new r.EventEmitter,A._onLineFeed=new r.EventEmitter,A._onScroll=new r.EventEmitter,A._onTitleChange=new r.EventEmitter,A._onColor=new r.EventEmitter,A._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},A._specialColors=[256,257,258],A.register(A._parser),A._activeBuffer=A._bufferService.buffer,A.register(A._bufferService.buffers.onBufferActivate(function(H){return A._activeBuffer=H.activeBuffer})),A._parser.setCsiHandlerFallback(function(H,V){A._logService.debug("Unknown CSI code: ",{identifier:A._parser.identToString(H),params:V.toArray()})}),A._parser.setEscHandlerFallback(function(H){A._logService.debug("Unknown ESC code: ",{identifier:A._parser.identToString(H)})}),A._parser.setExecuteHandlerFallback(function(H){A._logService.debug("Unknown EXECUTE code: ",{code:H})}),A._parser.setOscHandlerFallback(function(H,V,Y){A._logService.debug("Unknown OSC code: ",{identifier:H,action:V,data:Y})}),A._parser.setDcsHandlerFallback(function(H,V,Y){V==="HOOK"&&(Y=Y.toArray()),A._logService.debug("Unknown DCS code: ",{identifier:A._parser.identToString(H),action:V,payload:Y})}),A._parser.setPrintHandler(function(H,V,Y){return A.print(H,V,Y)}),A._parser.registerCsiHandler({final:"@"},function(H){return A.insertChars(H)}),A._parser.registerCsiHandler({intermediates:" ",final:"@"},function(H){return A.scrollLeft(H)}),A._parser.registerCsiHandler({final:"A"},function(H){return A.cursorUp(H)}),A._parser.registerCsiHandler({intermediates:" ",final:"A"},function(H){return A.scrollRight(H)}),A._parser.registerCsiHandler({final:"B"},function(H){return A.cursorDown(H)}),A._parser.registerCsiHandler({final:"C"},function(H){return A.cursorForward(H)}),A._parser.registerCsiHandler({final:"D"},function(H){return A.cursorBackward(H)}),A._parser.registerCsiHandler({final:"E"},function(H){return A.cursorNextLine(H)}),A._parser.registerCsiHandler({final:"F"},function(H){return A.cursorPrecedingLine(H)}),A._parser.registerCsiHandler({final:"G"},function(H){return A.cursorCharAbsolute(H)}),A._parser.registerCsiHandler({final:"H"},function(H){return A.cursorPosition(H)}),A._parser.registerCsiHandler({final:"I"},function(H){return A.cursorForwardTab(H)}),A._parser.registerCsiHandler({final:"J"},function(H){return A.eraseInDisplay(H)}),A._parser.registerCsiHandler({prefix:"?",final:"J"},function(H){return A.eraseInDisplay(H)}),A._parser.registerCsiHandler({final:"K"},function(H){return A.eraseInLine(H)}),A._parser.registerCsiHandler({prefix:"?",final:"K"},function(H){return A.eraseInLine(H)}),A._parser.registerCsiHandler({final:"L"},function(H){return A.insertLines(H)}),A._parser.registerCsiHandler({final:"M"},function(H){return A.deleteLines(H)}),A._parser.registerCsiHandler({final:"P"},function(H){return A.deleteChars(H)}),A._parser.registerCsiHandler({final:"S"},function(H){return A.scrollUp(H)}),A._parser.registerCsiHandler({final:"T"},function(H){return A.scrollDown(H)}),A._parser.registerCsiHandler({final:"X"},function(H){return A.eraseChars(H)}),A._parser.registerCsiHandler({final:"Z"},function(H){return A.cursorBackwardTab(H)}),A._parser.registerCsiHandler({final:"`"},function(H){return A.charPosAbsolute(H)}),A._parser.registerCsiHandler({final:"a"},function(H){return A.hPositionRelative(H)}),A._parser.registerCsiHandler({final:"b"},function(H){return A.repeatPrecedingCharacter(H)}),A._parser.registerCsiHandler({final:"c"},function(H){return A.sendDeviceAttributesPrimary(H)}),A._parser.registerCsiHandler({prefix:">",final:"c"},function(H){return A.sendDeviceAttributesSecondary(H)}),A._parser.registerCsiHandler({final:"d"},function(H){return A.linePosAbsolute(H)}),A._parser.registerCsiHandler({final:"e"},function(H){return A.vPositionRelative(H)}),A._parser.registerCsiHandler({final:"f"},function(H){return A.hVPosition(H)}),A._parser.registerCsiHandler({final:"g"},function(H){return A.tabClear(H)}),A._parser.registerCsiHandler({final:"h"},function(H){return A.setMode(H)}),A._parser.registerCsiHandler({prefix:"?",final:"h"},function(H){return A.setModePrivate(H)}),A._parser.registerCsiHandler({final:"l"},function(H){return A.resetMode(H)}),A._parser.registerCsiHandler({prefix:"?",final:"l"},function(H){return A.resetModePrivate(H)}),A._parser.registerCsiHandler({final:"m"},function(H){return A.charAttributes(H)}),A._parser.registerCsiHandler({final:"n"},function(H){return A.deviceStatus(H)}),A._parser.registerCsiHandler({prefix:"?",final:"n"},function(H){return A.deviceStatusPrivate(H)}),A._parser.registerCsiHandler({intermediates:"!",final:"p"},function(H){return A.softReset(H)}),A._parser.registerCsiHandler({intermediates:" ",final:"q"},function(H){return A.setCursorStyle(H)}),A._parser.registerCsiHandler({final:"r"},function(H){return A.setScrollRegion(H)}),A._parser.registerCsiHandler({final:"s"},function(H){return A.saveCursor(H)}),A._parser.registerCsiHandler({final:"t"},function(H){return A.windowOptions(H)}),A._parser.registerCsiHandler({final:"u"},function(H){return A.restoreCursor(H)}),A._parser.registerCsiHandler({intermediates:"'",final:"}"},function(H){return A.insertColumns(H)}),A._parser.registerCsiHandler({intermediates:"'",final:"~"},function(H){return A.deleteColumns(H)}),A._parser.setExecuteHandler(s.C0.BEL,function(){return A.bell()}),A._parser.setExecuteHandler(s.C0.LF,function(){return A.lineFeed()}),A._parser.setExecuteHandler(s.C0.VT,function(){return A.lineFeed()}),A._parser.setExecuteHandler(s.C0.FF,function(){return A.lineFeed()}),A._parser.setExecuteHandler(s.C0.CR,function(){return A.carriageReturn()}),A._parser.setExecuteHandler(s.C0.BS,function(){return A.backspace()}),A._parser.setExecuteHandler(s.C0.HT,function(){return A.tab()}),A._parser.setExecuteHandler(s.C0.SO,function(){return A.shiftOut()}),A._parser.setExecuteHandler(s.C0.SI,function(){return A.shiftIn()}),A._parser.setExecuteHandler(s.C1.IND,function(){return A.index()}),A._parser.setExecuteHandler(s.C1.NEL,function(){return A.nextLine()}),A._parser.setExecuteHandler(s.C1.HTS,function(){return A.tabSet()}),A._parser.registerOscHandler(0,new m.OscHandler(function(H){return A.setTitle(H),A.setIconName(H),!0})),A._parser.registerOscHandler(1,new m.OscHandler(function(H){return A.setIconName(H)})),A._parser.registerOscHandler(2,new m.OscHandler(function(H){return A.setTitle(H)})),A._parser.registerOscHandler(4,new m.OscHandler(function(H){return A.setOrReportIndexedColor(H)})),A._parser.registerOscHandler(10,new m.OscHandler(function(H){return A.setOrReportFgColor(H)})),A._parser.registerOscHandler(11,new m.OscHandler(function(H){return A.setOrReportBgColor(H)})),A._parser.registerOscHandler(12,new m.OscHandler(function(H){return A.setOrReportCursorColor(H)})),A._parser.registerOscHandler(104,new m.OscHandler(function(H){return A.restoreIndexedColor(H)})),A._parser.registerOscHandler(110,new m.OscHandler(function(H){return A.restoreFgColor(H)})),A._parser.registerOscHandler(111,new m.OscHandler(function(H){return A.restoreBgColor(H)})),A._parser.registerOscHandler(112,new m.OscHandler(function(H){return A.restoreCursorColor(H)})),A._parser.registerEscHandler({final:"7"},function(){return A.saveCursor()}),A._parser.registerEscHandler({final:"8"},function(){return A.restoreCursor()}),A._parser.registerEscHandler({final:"D"},function(){return A.index()}),A._parser.registerEscHandler({final:"E"},function(){return A.nextLine()}),A._parser.registerEscHandler({final:"H"},function(){return A.tabSet()}),A._parser.registerEscHandler({final:"M"},function(){return A.reverseIndex()}),A._parser.registerEscHandler({final:"="},function(){return A.keypadApplicationMode()}),A._parser.registerEscHandler({final:">"},function(){return A.keypadNumericMode()}),A._parser.registerEscHandler({final:"c"},function(){return A.fullReset()}),A._parser.registerEscHandler({final:"n"},function(){return A.setgLevel(2)}),A._parser.registerEscHandler({final:"o"},function(){return A.setgLevel(3)}),A._parser.registerEscHandler({final:"|"},function(){return A.setgLevel(3)}),A._parser.registerEscHandler({final:"}"},function(){return A.setgLevel(2)}),A._parser.registerEscHandler({final:"~"},function(){return A.setgLevel(1)}),A._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return A.selectDefaultCharset()}),A._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return A.selectDefaultCharset()});var D=function(H){P._parser.registerEscHandler({intermediates:"(",final:H},function(){return A.selectCharset("("+H)}),P._parser.registerEscHandler({intermediates:")",final:H},function(){return A.selectCharset(")"+H)}),P._parser.registerEscHandler({intermediates:"*",final:H},function(){return A.selectCharset("*"+H)}),P._parser.registerEscHandler({intermediates:"+",final:H},function(){return A.selectCharset("+"+H)}),P._parser.registerEscHandler({intermediates:"-",final:H},function(){return A.selectCharset("-"+H)}),P._parser.registerEscHandler({intermediates:".",final:H},function(){return A.selectCharset("."+H)}),P._parser.registerEscHandler({intermediates:"/",final:H},function(){return A.selectCharset("/"+H)})},P=this;for(var N in y.CHARSETS)D(N);return A._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return A.screenAlignmentPattern()}),A._parser.setErrorHandler(function(H){return A._logService.error("Parsing error: ",H),H}),A._parser.registerDcsHandler({intermediates:"$",final:"q"},new B(A._bufferService,A._coreService,A._logService,A._optionsService)),A}return _(O,F),Object.defineProperty(O.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),O.prototype.dispose=function(){F.prototype.dispose.call(this)},O.prototype._preserveStack=function(x,T,I,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=I,this._parseStack.position=j},O.prototype._logSlowResolvingAsync=function(x){this._logService.logLevel<=d.LogLevelEnum.WARN&&Promise.race([x,new Promise(function(T,I){return setTimeout(function(){return I("#SLOW_TIMEOUT")},5e3)})]).catch(function(T){if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})},O.prototype.parse=function(x,T){var I,j=this._activeBuffer.x,z=this._activeBuffer.y,K=0,X=this._parseStack.paused;if(X){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(I),I;j=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>b&&(K=this._parseStack.position+b)}if(this._logService.logLevel<=d.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?' "'+x+'"':""),typeof x=="string"?x.split("").map(function(D){return D.charCodeAt(0)}):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(x.length,b))),X||this._dirtyRowService.clearRange(),x.length>b)for(var $=K;$<x.length;$+=b){var Z=$+b<x.length?$+b:x.length,A=typeof x=="string"?this._stringDecoder.decode(x.substring($,Z),this._parseBuffer):this._utf8Decoder.decode(x.subarray($,Z),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,A))return this._preserveStack(j,z,A,$),this._logSlowResolvingAsync(I),I}else if(!X&&(A=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer),I=this._parser.parse(this._parseBuffer,A)))return this._preserveStack(j,z,A,0),this._logSlowResolvingAsync(I),I;this._activeBuffer.x===j&&this._activeBuffer.y===z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},O.prototype.print=function(x,T,I){var j,z,K=this._charsetService.charset,X=this._optionsService.options.screenReaderMode,$=this._bufferService.cols,Z=this._coreService.decPrivateModes.wraparound,A=this._coreService.modes.insertMode,D=this._curAttrData,P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-T>0&&P.getWidth(this._activeBuffer.x-1)===2&&P.setCellFromCodePoint(this._activeBuffer.x-1,0,1,D.fg,D.bg,D.extended);for(var N=T;N<I;++N){if(j=x[N],z=this._unicodeService.wcwidth(j),j<127&&K){var H=K[String.fromCharCode(j)];H&&(j=H.charCodeAt(0))}if(X&&this._onA11yChar.fire((0,p.stringFromCodePoint)(j)),z||!this._activeBuffer.x){if(this._activeBuffer.x+z-1>=$){if(Z){for(;this._activeBuffer.x<$;)P.setCellFromCodePoint(this._activeBuffer.x++,0,1,D.fg,D.bg,D.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=$-1,z===2)continue}if(A&&(P.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(D),D),P.getWidth($-1)===2&&P.setCellFromCodePoint($-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,D.fg,D.bg,D.extended)),P.setCellFromCodePoint(this._activeBuffer.x++,j,z,D.fg,D.bg,D.extended),z>0)for(;--z;)P.setCellFromCodePoint(this._activeBuffer.x++,0,0,D.fg,D.bg,D.extended)}else P.getWidth(this._activeBuffer.x-1)?P.addCodepointToCell(this._activeBuffer.x-1,j):P.addCodepointToCell(this._activeBuffer.x-2,j)}I-T>0&&(P.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<$&&I-T>0&&P.getWidth(this._activeBuffer.x)===0&&!P.hasContent(this._activeBuffer.x)&&P.setCellFromCodePoint(this._activeBuffer.x,0,1,D.fg,D.bg,D.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},O.prototype.registerCsiHandler=function(x,T){var I=this;return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,T):this._parser.registerCsiHandler(x,function(j){return!w(j.params[0],I._optionsService.options.windowOptions)||T(j)})},O.prototype.registerDcsHandler=function(x,T){return this._parser.registerDcsHandler(x,new C.DcsHandler(T))},O.prototype.registerEscHandler=function(x,T){return this._parser.registerEscHandler(x,T)},O.prototype.registerOscHandler=function(x,T){return this._parser.registerOscHandler(x,new m.OscHandler(T))},O.prototype.bell=function(){return this._onRequestBell.fire(),!0},O.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},O.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},O.prototype.backspace=function(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0?void 0:x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},O.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0},O.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},O.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},O.prototype._restrictCursor=function(x){x===void 0&&(x=this._bufferService.cols-1),this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},O.prototype._setCursor=function(x,T){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=x,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},O.prototype._moveCursor=function(x,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+T)},O.prototype.cursorUp=function(x){var T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0},O.prototype.cursorDown=function(x){var T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0},O.prototype.cursorForward=function(x){return this._moveCursor(x.params[0]||1,0),!0},O.prototype.cursorBackward=function(x){return this._moveCursor(-(x.params[0]||1),0),!0},O.prototype.cursorNextLine=function(x){return this.cursorDown(x),this._activeBuffer.x=0,!0},O.prototype.cursorPrecedingLine=function(x){return this.cursorUp(x),this._activeBuffer.x=0,!0},O.prototype.cursorCharAbsolute=function(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0},O.prototype.cursorPosition=function(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0},O.prototype.charPosAbsolute=function(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0},O.prototype.hPositionRelative=function(x){return this._moveCursor(x.params[0]||1,0),!0},O.prototype.linePosAbsolute=function(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0},O.prototype.vPositionRelative=function(x){return this._moveCursor(0,x.params[0]||1),!0},O.prototype.hVPosition=function(x){return this.cursorPosition(x),!0},O.prototype.tabClear=function(x){var T=x.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0},O.prototype.cursorForwardTab=function(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var T=x.params[0]||1;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},O.prototype.cursorBackwardTab=function(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var T=x.params[0]||1;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},O.prototype._eraseInBufferLine=function(x,T,I,j){j===void 0&&(j=!1);var z=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);z.replaceCells(T,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j&&(z.isWrapped=!1)},O.prototype._resetBufferLine=function(x){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);T.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1},O.prototype.eraseInDisplay=function(x){var T;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowService.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);T<this._bufferService.rows;T++)this._resetBufferLine(T);this._dirtyRowService.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowService.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T);this._dirtyRowService.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowService.markDirty(T-1);T--;)this._resetBufferLine(T);this._dirtyRowService.markDirty(0);break;case 3:var I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0},O.prototype.eraseInLine=function(x){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},O.prototype.insertLines=function(x){this._restrictCursor();var T=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var I=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;T--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},O.prototype.deleteLines=function(x){this._restrictCursor();var T=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var I,j=this._activeBuffer.ybase+this._activeBuffer.y;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;T--;)this._activeBuffer.lines.splice(j,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},O.prototype.insertChars=function(x){this._restrictCursor();var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},O.prototype.deleteChars=function(x){this._restrictCursor();var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},O.prototype.scrollUp=function(x){for(var T=x.params[0]||1;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.scrollDown=function(x){for(var T=x.params[0]||1;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.scrollLeft=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var T=x.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.scrollRight=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var T=x.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.insertColumns=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var T=x.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.deleteColumns=function(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var T=x.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.eraseChars=function(x){this._restrictCursor();var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},O.prototype.repeatPrecedingCharacter=function(x){if(!this._parser.precedingCodepoint)return!0;for(var T=x.params[0]||1,I=new Uint32Array(T),j=0;j<T;++j)I[j]=this._parser.precedingCodepoint;return this.print(I,0,I.length),!0},O.prototype.sendDeviceAttributesPrimary=function(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c")),!0},O.prototype.sendDeviceAttributesSecondary=function(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c")),!0},O.prototype._is=function(x){return(this._optionsService.options.termName+"").indexOf(x)===0},O.prototype.setMode=function(x){for(var T=0;T<x.length;T++)x.params[T]===4&&(this._coreService.modes.insertMode=!0);return!0},O.prototype.setModePrivate=function(x){for(var T=0;T<x.length;T++)switch(x.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},O.prototype.resetMode=function(x){for(var T=0;T<x.length;T++)x.params[T]===4&&(this._coreService.modes.insertMode=!1);return!0},O.prototype.resetModePrivate=function(x){for(var T=0;T<x.length;T++)switch(x.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},O.prototype._updateAttrColor=function(x,T,I,j,z){return T===2?(x|=50331648,x&=-16777216,x|=c.AttributeData.fromColorRGB([I,j,z])):T===5&&(x&=-50331904,x|=33554432|255&I),x},O.prototype._extractColor=function(x,T,I){var j=[0,0,-1,0,0,0],z=0,K=0;do{if(j[K+z]=x.params[T+K],x.hasSubParams(T+K)){var X=x.getSubParams(T+K),$=0;do j[1]===5&&(z=1),j[K+$+1+z]=X[$];while(++$<X.length&&$+K+1+z<j.length);break}if(j[1]===5&&K+z>=2||j[1]===2&&K+z>=5)break;j[1]&&(z=1)}while(++K+T<x.length&&K+z<j.length);for($=2;$<j.length;++$)j[$]===-1&&(j[$]=0);switch(j[0]){case 38:I.fg=this._updateAttrColor(I.fg,j[1],j[3],j[4],j[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,j[1],j[3],j[4],j[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,j[1],j[3],j[4],j[5])}return K},O.prototype._processUnderline=function(x,T){T.extended=T.extended.clone(),(!~x||x>5)&&(x=1),T.extended.underlineStyle=x,T.fg|=268435456,x===0&&(T.fg&=-268435457),T.updateExtended()},O.prototype.charAttributes=function(x){if(x.length===1&&x.params[0]===0)return this._curAttrData.fg=a.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=a.DEFAULT_ATTR_DATA.bg,!0;for(var T,I=x.length,j=this._curAttrData,z=0;z<I;z++)(T=x.params[z])>=30&&T<=37?(j.fg&=-50331904,j.fg|=16777216|T-30):T>=40&&T<=47?(j.bg&=-50331904,j.bg|=16777216|T-40):T>=90&&T<=97?(j.fg&=-50331904,j.fg|=16777224|T-90):T>=100&&T<=107?(j.bg&=-50331904,j.bg|=16777224|T-100):T===0?(j.fg=a.DEFAULT_ATTR_DATA.fg,j.bg=a.DEFAULT_ATTR_DATA.bg):T===1?j.fg|=134217728:T===3?j.bg|=67108864:T===4?(j.fg|=268435456,this._processUnderline(x.hasSubParams(z)?x.getSubParams(z)[0]:1,j)):T===5?j.fg|=536870912:T===7?j.fg|=67108864:T===8?j.fg|=1073741824:T===9?j.fg|=2147483648:T===2?j.bg|=134217728:T===21?this._processUnderline(2,j):T===22?(j.fg&=-134217729,j.bg&=-134217729):T===23?j.bg&=-67108865:T===24?j.fg&=-268435457:T===25?j.fg&=-536870913:T===27?j.fg&=-67108865:T===28?j.fg&=-1073741825:T===29?j.fg&=2147483647:T===39?(j.fg&=-67108864,j.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):T===49?(j.bg&=-67108864,j.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?z+=this._extractColor(x,z,j):T===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):T===100?(j.fg&=-67108864,j.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0},O.prototype.deviceStatus=function(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+"[0n");break;case 6:var T=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"["+T+";"+I+"R")}return!0},O.prototype.deviceStatusPrivate=function(x){if(x.params[0]===6){var T=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"[?"+T+";"+I+"R")}return!0},O.prototype.softReset=function(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},O.prototype.setCursorStyle=function(x){var T=x.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var I=T%2==1;return this._optionsService.options.cursorBlink=I,!0},O.prototype.setScrollRegion=function(x){var T,I=x.params[0]||1;return(x.length<2||(T=x.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0},O.prototype.windowOptions=function(x){if(!w(x.params[0],this._optionsService.options.windowOptions))return!0;var T=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(s.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},O.prototype.saveCursor=function(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},O.prototype.restoreCursor=function(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},O.prototype.setTitle=function(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0},O.prototype.setIconName=function(x){return this._iconName=x,!0},O.prototype.setOrReportIndexedColor=function(x){for(var T=[],I=x.split(";");I.length>1;){var j=I.shift(),z=I.shift();if(/^\d+$/.exec(j)){var K=parseInt(j);if(0<=K&&K<256)if(z==="?")T.push({type:0,index:K});else{var X=(0,E.parseColor)(z);X&&T.push({type:1,index:K,color:X})}}}return T.length&&this._onColor.fire(T),!0},O.prototype._setOrReportSpecialColor=function(x,T){for(var I=x.split(";"),j=0;j<I.length&&!(T>=this._specialColors.length);++j,++T)if(I[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{var z=(0,E.parseColor)(I[j]);z&&this._onColor.fire([{type:1,index:this._specialColors[T],color:z}])}return!0},O.prototype.setOrReportFgColor=function(x){return this._setOrReportSpecialColor(x,0)},O.prototype.setOrReportBgColor=function(x){return this._setOrReportSpecialColor(x,1)},O.prototype.setOrReportCursorColor=function(x){return this._setOrReportSpecialColor(x,2)},O.prototype.restoreIndexedColor=function(x){if(!x)return this._onColor.fire([{type:2}]),!0;for(var T=[],I=x.split(";"),j=0;j<I.length;++j)if(/^\d+$/.exec(I[j])){var z=parseInt(I[j]);0<=z&&z<256&&T.push({type:2,index:z})}return T.length&&this._onColor.fire(T),!0},O.prototype.restoreFgColor=function(x){return this._onColor.fire([{type:2,index:256}]),!0},O.prototype.restoreBgColor=function(x){return this._onColor.fire([{type:2,index:257}]),!0},O.prototype.restoreCursorColor=function(x){return this._onColor.fire([{type:2,index:258}]),!0},O.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},O.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},O.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},O.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0},O.prototype.selectCharset=function(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(L[x[0]],y.CHARSETS[x[1]]||y.DEFAULT_CHARSET),!0)},O.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},O.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},O.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},O.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},O.prototype.reset=function(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()},O.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},O.prototype.setgLevel=function(x){return this._charsetService.setgLevel(x),!0},O.prototype.screenAlignmentPattern=function(){var x=new i.CellData;x.content=1<<22|"E".charCodeAt(0),x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(var T=0;T<this._bufferService.rows;++T){var I=this._activeBuffer.ybase+this._activeBuffer.y+T,j=this._activeBuffer.lines.get(I);j&&(j.fill(x),j.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},O}(n.Disposable);t.InputHandler=k},844:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var u=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,s=this._disposables;f<s.length;f++)s[f].dispose();this._disposables.length=0},_.prototype.register=function(f){return this._disposables.push(f),f},_.prototype.unregister=function(f){var s=this._disposables.indexOf(f);s!==-1&&this._disposables.splice(s,1)},_}();function h(_){for(var f=0,s=_;f<s.length;f++)s[f].dispose();_.length=0}t.Disposable=u,t.disposeArray=h,t.getDisposeArrayDisposable=function(_){return{dispose:function(){return h(_)}}}},6114:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isFirefox=void 0;var u=typeof navigator=="undefined",h=u?"node":navigator.userAgent,_=u?"node":navigator.platform;t.isFirefox=h.includes("Firefox"),t.isSafari=/^((?!chrome|android).)*safari/i.test(h),t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),t.isIpad=_==="iPad",t.isIphone=_==="iPhone",t.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),t.isLinux=_.indexOf("Linux")>=0},8273:(M,t)=>{function u(h,_,f,s){if(f===void 0&&(f=0),s===void 0&&(s=h.length),f>=h.length)return h;f=(h.length+f)%h.length,s=s>=h.length?h.length:(h.length+s)%h.length;for(var y=f;y<s;++y)h[y]=_;return h}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(h,_,f,s){return h.fill?h.fill(_,f,s):u(h,_,f,s)},t.fillFallback=u,t.concat=function(h,_){var f=new h.constructor(h.length+_.length);return f.set(h),f.set(_,h.length),f}},9282:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var h=u(643);t.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),s=f==null?void 0:f.get(_.cols-1),y=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);y&&s&&(y.isWrapped=s[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&s[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var u=function(){function _(){this.fg=0,this.bg=0,this.extended=new h}return _.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},_.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},_.prototype.clone=function(){var f=new _;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();t.AttributeData=u;var h=function(){function _(f,s){f===void 0&&(f=0),s===void 0&&(s=-1),this.underlineStyle=f,this.underlineColor=s}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();t.ExtendedAttrs=h},9092:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var h=u(6349),_=u(8437),f=u(511),s=u(643),y=u(4634),g=u(4863),n=u(7116),o=u(3734);t.MAX_BUFFER_SIZE=4294967295;var p=function(){function r(e,i,c){this._hasScrollback=e,this._optionsService=i,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=n.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,s.NULL_CELL_CHAR,s.NULL_CELL_WIDTH,s.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,s.WHITESPACE_CELL_CHAR,s.WHITESPACE_CELL_WIDTH,s.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(e,i){return new _.BufferLine(this._bufferService.cols,this.getNullCell(e),i)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var i=e+this._optionsService.options.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i},r.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=_.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(e))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(e,i){var c=this.getNullCell(_.DEFAULT_ATTR_DATA),d=this._getCorrectBufferLength(i);if(d>this.lines.maxLength&&(this.lines.maxLength=d),this.lines.length>0){if(this._cols<e)for(var m=0;m<this.lines.length;m++)this.lines.get(m).resize(e,c);var C=0;if(this._rows<i)for(var E=this._rows;E<i;E++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new _.BufferLine(e,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(e,c)));else for(E=this._rows;E>i;E--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(d<this.lines.maxLength){var L=this.lines.length-d;L>0&&(this.lines.trimStart(L),this.ybase=Math.max(this.ybase-L,0),this.ydisp=Math.max(this.ydisp-L,0),this.savedY=Math.max(this.savedY-L,0)),this.lines.maxLength=d}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(m=0;m<this.lines.length;m++)this.lines.get(m).resize(e,c);this._cols=e,this._rows=i},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))},r.prototype._reflowLarger=function(e,i){var c=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(c.length>0){var d=(0,y.reflowLargerCreateNewLayout)(this.lines,c);(0,y.reflowLargerApplyNewLayout)(this.lines,d.layout),this._reflowLargerAdjustViewport(e,i,d.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(e,i,c){for(var d=this.getNullCell(_.DEFAULT_ATTR_DATA),m=c;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new _.BufferLine(e,d))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)},r.prototype._reflowSmaller=function(e,i){for(var c=this.getNullCell(_.DEFAULT_ATTR_DATA),d=[],m=0,C=this.lines.length-1;C>=0;C--){var E=this.lines.get(C);if(!(!E||!E.isWrapped&&E.getTrimmedLength()<=e)){for(var L=[E];E.isWrapped&&C>0;)E=this.lines.get(--C),L.unshift(E);var b=this.ybase+this.y;if(!(b>=C&&b<C+L.length)){var w,B=L[L.length-1].getTrimmedLength(),k=(0,y.reflowSmallerGetNewLineLengths)(L,this._cols,e),F=k.length-L.length;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+F):Math.max(0,this.lines.length-this.lines.maxLength+F);for(var O=[],x=0;x<F;x++){var T=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);O.push(T)}O.length>0&&(d.push({start:C+L.length+m,newLines:O}),m+=O.length),L.push.apply(L,O);var I=k.length-1,j=k[I];j===0&&(j=k[--I]);for(var z=L.length-F-1,K=B;z>=0;){var X=Math.min(K,j);if(L[I].copyCellsFrom(L[z],K-X,j-X,X,!0),(j-=X)==0&&(j=k[--I]),(K-=X)==0){z--;var $=Math.max(z,0);K=(0,y.getWrappedLineTrimmedLength)(L,$,this._cols)}}for(x=0;x<L.length;x++)k[x]<e&&L[x].setCell(k[x],c);for(var Z=F-w;Z-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+F,this.ybase+i-1)}}}if(d.length>0){var A=[],D=[];for(x=0;x<this.lines.length;x++)D.push(this.lines.get(x));var P=this.lines.length,N=P-1,H=0,V=d[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);var Y=0;for(x=Math.min(this.lines.maxLength-1,P+m-1);x>=0;x--)if(V&&V.start>N+Y){for(var J=V.newLines.length-1;J>=0;J--)this.lines.set(x--,V.newLines[J]);x++,A.push({index:N+1,amount:V.newLines.length}),Y+=V.newLines.length,V=d[++H]}else this.lines.set(x,D[N--]);var ee=0;for(x=A.length-1;x>=0;x--)A[x].index+=ee,this.lines.onInsertEmitter.fire(A[x]),ee+=A[x].amount;var oe=Math.max(0,P+m-this.lines.maxLength);oe>0&&this.lines.onTrimEmitter.fire(oe)}},r.prototype.stringIndexToBufferIndex=function(e,i,c){for(c===void 0&&(c=!1);i;){var d=this.lines.get(e);if(!d)return[-1,-1];for(var m=c?d.getTrimmedLength():d.length,C=0;C<m;++C)if(d.get(C)[s.CHAR_DATA_WIDTH_INDEX]&&(i-=d.get(C)[s.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[e,C];e++}return[e,0]},r.prototype.translateBufferLineToString=function(e,i,c,d){c===void 0&&(c=0);var m=this.lines.get(e);return m?m.translateToString(i,c,d):""},r.prototype.getWrappedRangeForLine=function(e){for(var i=e,c=e;i>0&&this.lines.get(i).isWrapped;)i--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:i,last:c}},r.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},r.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},r.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},r.prototype.addMarker=function(e){var i=this,c=new g.Marker(e);return this.markers.push(c),c.register(this.lines.onTrim(function(d){c.line-=d,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(function(d){c.line>=d.index&&(c.line+=d.amount)})),c.register(this.lines.onDelete(function(d){c.line>=d.index&&c.line<d.index+d.amount&&c.dispose(),c.line>d.index&&(c.line-=d.amount)})),c.register(c.onDispose(function(){return i._removeMarker(c)})),c},r.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},r.prototype.iterator=function(e,i,c,d,m){return new a(this,e,i,c,d,m)},r}();t.Buffer=p;var a=function(){function r(e,i,c,d,m,C){c===void 0&&(c=0),d===void 0&&(d=e.lines.length),m===void 0&&(m=0),C===void 0&&(C=0),this._buffer=e,this._trimRight=i,this._startIndex=c,this._endIndex=d,this._startOverscan=m,this._endOverscan=C,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var i="",c=e.first;c<=e.last;++c)i+=this._buffer.translateBufferLineToString(c,this._trimRight);return this._current=e.last+1,{range:e,content:i}},r}();t.BufferStringIterator=a},8437:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var h=u(482),_=u(643),f=u(511),s=u(3734);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var y=function(){function g(n,o,p){p===void 0&&(p=!1),this.isWrapped=p,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);for(var a=o||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),r=0;r<n;++r)this.setCell(r,a);this.length=n}return g.prototype.get=function(n){var o=this._data[3*n+0],p=2097151&o;return[this._data[3*n+1],2097152&o?this._combined[n]:p?(0,h.stringFromCodePoint)(p):"",o>>22,2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):p]},g.prototype.set=function(n,o){this._data[3*n+1]=o[_.CHAR_DATA_ATTR_INDEX],o[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=o[1],this._data[3*n+0]=2097152|n|o[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=o[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[_.CHAR_DATA_WIDTH_INDEX]<<22},g.prototype.getWidth=function(n){return this._data[3*n+0]>>22},g.prototype.hasWidth=function(n){return 12582912&this._data[3*n+0]},g.prototype.getFg=function(n){return this._data[3*n+1]},g.prototype.getBg=function(n){return this._data[3*n+2]},g.prototype.hasContent=function(n){return 4194303&this._data[3*n+0]},g.prototype.getCodePoint=function(n){var o=this._data[3*n+0];return 2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&o},g.prototype.isCombined=function(n){return 2097152&this._data[3*n+0]},g.prototype.getString=function(n){var o=this._data[3*n+0];return 2097152&o?this._combined[n]:2097151&o?(0,h.stringFromCodePoint)(2097151&o):""},g.prototype.loadCell=function(n,o){var p=3*n;return o.content=this._data[p+0],o.fg=this._data[p+1],o.bg=this._data[p+2],2097152&o.content&&(o.combinedData=this._combined[n]),268435456&o.bg&&(o.extended=this._extendedAttrs[n]),o},g.prototype.setCell=function(n,o){2097152&o.content&&(this._combined[n]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=o.content,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg},g.prototype.setCellFromCodePoint=function(n,o,p,a,r,e){268435456&r&&(this._extendedAttrs[n]=e),this._data[3*n+0]=o|p<<22,this._data[3*n+1]=a,this._data[3*n+2]=r},g.prototype.addCodepointToCell=function(n,o){var p=this._data[3*n+0];2097152&p?this._combined[n]+=(0,h.stringFromCodePoint)(o):(2097151&p?(this._combined[n]=(0,h.stringFromCodePoint)(2097151&p)+(0,h.stringFromCodePoint)(o),p&=-2097152,p|=2097152):p=o|1<<22,this._data[3*n+0]=p)},g.prototype.insertCells=function(n,o,p,a){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new s.ExtendedAttrs),o<this.length-n){for(var r=new f.CellData,e=this.length-n-o-1;e>=0;--e)this.setCell(n+o+e,this.loadCell(n+e,r));for(e=0;e<o;++e)this.setCell(n+e,p)}else for(e=n;e<this.length;++e)this.setCell(e,p);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new s.ExtendedAttrs)},g.prototype.deleteCells=function(n,o,p,a){if(n%=this.length,o<this.length-n){for(var r=new f.CellData,e=0;e<this.length-n-o;++e)this.setCell(n+e,this.loadCell(n+o+e,r));for(e=this.length-o;e<this.length;++e)this.setCell(e,p)}else for(e=n;e<this.length;++e)this.setCell(e,p);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new s.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new s.ExtendedAttrs)},g.prototype.replaceCells=function(n,o,p,a){for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new s.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new s.ExtendedAttrs);n<o&&n<this.length;)this.setCell(n++,p)},g.prototype.resize=function(n,o){if(n!==this.length){if(n>this.length){var p=new Uint32Array(3*n);this.length&&(3*n<this._data.length?p.set(this._data.subarray(0,3*n)):p.set(this._data)),this._data=p;for(var a=this.length;a<n;++a)this.setCell(a,o)}else if(n){(p=new Uint32Array(3*n)).set(this._data.subarray(0,3*n)),this._data=p;var r=Object.keys(this._combined);for(a=0;a<r.length;a++){var e=parseInt(r[a],10);e>=n&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=n}},g.prototype.fill=function(n){this._combined={},this._extendedAttrs={};for(var o=0;o<this.length;++o)this.setCell(o,n)},g.prototype.copyFrom=function(n){for(var o in this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={},n._combined)this._combined[o]=n._combined[o];for(var o in this._extendedAttrs={},n._extendedAttrs)this._extendedAttrs[o]=n._extendedAttrs[o];this.isWrapped=n.isWrapped},g.prototype.clone=function(){var n=new g(0);for(var o in n._data=new Uint32Array(this._data),n.length=this.length,this._combined)n._combined[o]=this._combined[o];for(var o in this._extendedAttrs)n._extendedAttrs[o]=this._extendedAttrs[o];return n.isWrapped=this.isWrapped,n},g.prototype.getTrimmedLength=function(){for(var n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0},g.prototype.copyCellsFrom=function(n,o,p,a,r){var e=n._data;if(r)for(var i=a-1;i>=0;i--)for(var c=0;c<3;c++)this._data[3*(p+i)+c]=e[3*(o+i)+c];else for(i=0;i<a;i++)for(c=0;c<3;c++)this._data[3*(p+i)+c]=e[3*(o+i)+c];var d=Object.keys(n._combined);for(c=0;c<d.length;c++){var m=parseInt(d[c],10);m>=o&&(this._combined[m-o+p]=n._combined[m])}},g.prototype.translateToString=function(n,o,p){n===void 0&&(n=!1),o===void 0&&(o=0),p===void 0&&(p=this.length),n&&(p=Math.min(p,this.getTrimmedLength()));for(var a="";o<p;){var r=this._data[3*o+0],e=2097151&r;a+=2097152&r?this._combined[o]:e?(0,h.stringFromCodePoint)(e):_.WHITESPACE_CELL_CHAR,o+=r>>22||1}return a},g}();t.BufferLine=y},4841:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(u,h){if(u.start.y>u.end.y)throw new Error("Buffer range end ("+u.end.x+", "+u.end.y+") cannot be before start ("+u.start.x+", "+u.start.y+")");return h*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(M,t)=>{function u(h,_,f){if(_===h.length-1)return h[_].getTrimmedLength();var s=!h[_].hasContent(f-1)&&h[_].getWidth(f-1)===1,y=h[_+1].getWidth(0)===2;return s&&y?f-1:f}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(h,_,f,s,y){for(var g=[],n=0;n<h.length-1;n++){var o=n,p=h.get(++o);if(p.isWrapped){for(var a=[h.get(n)];o<h.length&&p.isWrapped;)a.push(p),p=h.get(++o);if(s>=n&&s<o)n+=a.length-1;else{for(var r=0,e=u(a,r,_),i=1,c=0;i<a.length;){var d=u(a,i,_),m=d-c,C=f-e,E=Math.min(m,C);a[r].copyCellsFrom(a[i],c,e,E,!1),(e+=E)===f&&(r++,e=0),(c+=E)===d&&(i++,c=0),e===0&&r!==0&&a[r-1].getWidth(f-1)===2&&(a[r].copyCellsFrom(a[r-1],f-1,e++,1,!1),a[r-1].setCell(f-1,y))}a[r].replaceCells(e,f,y);for(var L=0,b=a.length-1;b>0&&(b>r||a[b].getTrimmedLength()===0);b--)L++;L>0&&(g.push(n+a.length-L),g.push(L)),n+=a.length-1}}}return g},t.reflowLargerCreateNewLayout=function(h,_){for(var f=[],s=0,y=_[s],g=0,n=0;n<h.length;n++)if(y===n){var o=_[++s];h.onDeleteEmitter.fire({index:n-g,amount:o}),n+=o-1,g+=o,y=_[++s]}else f.push(n);return{layout:f,countRemoved:g}},t.reflowLargerApplyNewLayout=function(h,_){for(var f=[],s=0;s<_.length;s++)f.push(h.get(_[s]));for(s=0;s<f.length;s++)h.set(s,f[s]);h.length=_.length},t.reflowSmallerGetNewLineLengths=function(h,_,f){for(var s=[],y=h.map(function(e,i){return u(h,i,_)}).reduce(function(e,i){return e+i}),g=0,n=0,o=0;o<y;){if(y-o<f){s.push(y-o);break}g+=f;var p=u(h,n,_);g>p&&(g-=p,n++);var a=h[n].getWidth(g-1)===2;a&&g--;var r=a?f-1:f;s.push(r),o+=r}return s},t.getWrappedLineTrimmedLength=u},5295:function(M,t,u){var h,_=this&&this.__extends||(h=function(g,n){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,p){o.__proto__=p}||function(o,p){for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&(o[a]=p[a])},h(g,n)},function(g,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=g}h(g,n),g.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var f=u(9092),s=u(8460),y=function(g){function n(o,p){var a=g.call(this)||this;return a._optionsService=o,a._bufferService=p,a._onBufferActivate=a.register(new s.EventEmitter),a.reset(),a}return _(n,g),Object.defineProperty(n.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(n.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),n.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},n.prototype.activateAltBuffer=function(o){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(o),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},n.prototype.resize=function(o,p){this._normal.resize(o,p),this._alt.resize(o,p)},n.prototype.setupTabStops=function(o){this._normal.setupTabStops(o),this._alt.setupTabStops(o)},n}(u(844).Disposable);t.BufferSet=y},511:function(M,t,u){var h,_=this&&this.__extends||(h=function(n,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,a){p.__proto__=a}||function(p,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(p[r]=a[r])},h(n,o)},function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function p(){this.constructor=n}h(n,o),n.prototype=o===null?Object.create(o):(p.prototype=o.prototype,new p)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var f=u(482),s=u(643),y=u(3734),g=function(n){function o(){var p=n!==null&&n.apply(this,arguments)||this;return p.content=0,p.fg=0,p.bg=0,p.extended=new y.ExtendedAttrs,p.combinedData="",p}return _(o,n),o.fromCharData=function(p){var a=new o;return a.setFromCharData(p),a},o.prototype.isCombined=function(){return 2097152&this.content},o.prototype.getWidth=function(){return this.content>>22},o.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},o.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},o.prototype.setFromCharData=function(p){this.fg=p[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var a=!1;if(p[s.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(p[s.CHAR_DATA_CHAR_INDEX].length===2){var r=p[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var e=p[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(r-55296)+e-56320+65536|p[s.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=p[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[s.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=p[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[s.CHAR_DATA_WIDTH_INDEX]<<22)},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(y.AttributeData);t.CellData=g},643:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:function(M,t,u){var h,_=this&&this.__extends||(h=function(y,g){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var p in o)Object.prototype.hasOwnProperty.call(o,p)&&(n[p]=o[p])},h(y,g)},function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function n(){this.constructor=y}h(y,g),y.prototype=g===null?Object.create(g):(n.prototype=g.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var f=u(8460),s=function(y){function g(n){var o=y.call(this)||this;return o.line=n,o._id=g._nextId++,o.isDisposed=!1,o._onDispose=new f.EventEmitter,o}return _(g,y),Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),y.prototype.dispose.call(this))},g._nextId=1,g}(u(844).Disposable);t.Marker=s},7116:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},t.CHARSETS.A={"#":"\xA3"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},t.CHARSETS.C=t.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},t.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},t.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},t.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},t.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},t.CHARSETS.E=t.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},t.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},t.CHARSETS.H=t.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},t.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(M,t)=>{var u,h;Object.defineProperty(t,"__esModule",{value:!0}),t.C1=t.C0=void 0,(h=t.C0||(t.C0={})).NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL="\x7F",(u=t.C1||(t.C1={})).PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"},7399:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;var h=u(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(f,s,y,g){var n={type:0,cancel:!1,key:void 0},o=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?n.key=s?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?n.key=s?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?n.key=s?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(n.key=s?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(f.shiftKey){n.key=h.C0.BS;break}if(f.altKey){n.key=h.C0.ESC+h.C0.DEL;break}n.key=h.C0.DEL;break;case 9:if(f.shiftKey){n.key=h.C0.ESC+"[Z";break}n.key=h.C0.HT,n.cancel=!0;break;case 13:n.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,n.cancel=!0;break;case 27:n.key=h.C0.ESC,f.altKey&&(n.key=h.C0.ESC+h.C0.ESC),n.cancel=!0;break;case 37:if(f.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"D",n.key===h.C0.ESC+"[1;3D"&&(n.key=h.C0.ESC+(y?"b":"[1;5D"))):n.key=s?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"C",n.key===h.C0.ESC+"[1;3C"&&(n.key=h.C0.ESC+(y?"f":"[1;5C"))):n.key=s?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"A",y||n.key!==h.C0.ESC+"[1;3A"||(n.key=h.C0.ESC+"[1;5A")):n.key=s?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;o?(n.key=h.C0.ESC+"[1;"+(o+1)+"B",y||n.key!==h.C0.ESC+"[1;3B"||(n.key=h.C0.ESC+"[1;5B")):n.key=s?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(n.key=h.C0.ESC+"[2~");break;case 46:n.key=o?h.C0.ESC+"[3;"+(o+1)+"~":h.C0.ESC+"[3~";break;case 36:n.key=o?h.C0.ESC+"[1;"+(o+1)+"H":s?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:n.key=o?h.C0.ESC+"[1;"+(o+1)+"F":s?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?n.type=2:n.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?n.type=3:n.key=h.C0.ESC+"[6~";break;case 112:n.key=o?h.C0.ESC+"[1;"+(o+1)+"P":h.C0.ESC+"OP";break;case 113:n.key=o?h.C0.ESC+"[1;"+(o+1)+"Q":h.C0.ESC+"OQ";break;case 114:n.key=o?h.C0.ESC+"[1;"+(o+1)+"R":h.C0.ESC+"OR";break;case 115:n.key=o?h.C0.ESC+"[1;"+(o+1)+"S":h.C0.ESC+"OS";break;case 116:n.key=o?h.C0.ESC+"[15;"+(o+1)+"~":h.C0.ESC+"[15~";break;case 117:n.key=o?h.C0.ESC+"[17;"+(o+1)+"~":h.C0.ESC+"[17~";break;case 118:n.key=o?h.C0.ESC+"[18;"+(o+1)+"~":h.C0.ESC+"[18~";break;case 119:n.key=o?h.C0.ESC+"[19;"+(o+1)+"~":h.C0.ESC+"[19~";break;case 120:n.key=o?h.C0.ESC+"[20;"+(o+1)+"~":h.C0.ESC+"[20~";break;case 121:n.key=o?h.C0.ESC+"[21;"+(o+1)+"~":h.C0.ESC+"[21~";break;case 122:n.key=o?h.C0.ESC+"[23;"+(o+1)+"~":h.C0.ESC+"[23~";break;case 123:n.key=o?h.C0.ESC+"[24;"+(o+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(y&&!g||!f.altKey||f.metaKey)!y||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?n.key=f.key:f.key&&f.ctrlKey&&f.key==="_"&&(n.key=h.C0.US):f.keyCode===65&&(n.type=1);else{var p=_[f.keyCode],a=p==null?void 0:p[f.shiftKey?1:0];if(a)n.key=h.C0.ESC+a;else if(f.keyCode>=65&&f.keyCode<=90){var r=f.ctrlKey?f.keyCode-64:f.keyCode+32;n.key=h.C0.ESC+String.fromCharCode(r)}}else f.keyCode>=65&&f.keyCode<=90?n.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?n.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?n.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?n.key=h.C0.DEL:f.keyCode===219?n.key=h.C0.ESC:f.keyCode===220?n.key=h.C0.FS:f.keyCode===221&&(n.key=h.C0.GS)}return n}},482:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},t.utf32ToString=function(_,f,s){f===void 0&&(f=0),s===void 0&&(s=_.length);for(var y="",g=f;g<s;++g){var n=_[g];n>65535?(n-=65536,y+=String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):y+=String.fromCharCode(n)}return y};var u=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(f,s){var y=f.length;if(!y)return 0;var g=0,n=0;this._interim&&(56320<=(a=f.charCodeAt(n++))&&a<=57343?s[g++]=1024*(this._interim-55296)+a-56320+65536:(s[g++]=this._interim,s[g++]=a),this._interim=0);for(var o=n;o<y;++o){var p=f.charCodeAt(o);if(55296<=p&&p<=56319){if(++o>=y)return this._interim=p,g;var a;56320<=(a=f.charCodeAt(o))&&a<=57343?s[g++]=1024*(p-55296)+a-56320+65536:(s[g++]=p,s[g++]=a)}else p!==65279&&(s[g++]=p)}return g},_}();t.StringToUtf32=u;var h=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(f,s){var y=f.length;if(!y)return 0;var g,n,o,p,a=0,r=0,e=0;if(this.interim[0]){var i=!1,c=this.interim[0];c&=(224&c)==192?31:(240&c)==224?15:7;for(var d=0,m=void 0;(m=63&this.interim[++d])&&d<4;)c<<=6,c|=m;for(var C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=C-d;e<E;){if(e>=y)return 0;if((192&(m=f[e++]))!=128){e--,i=!0;break}this.interim[d++]=m,c<<=6,c|=63&m}i||(C===2?c<128?e--:s[a++]=c:C===3?c<2048||c>=55296&&c<=57343||c===65279||(s[a++]=c):c<65536||c>1114111||(s[a++]=c)),this.interim.fill(0)}for(var L=y-4,b=e;b<y;){for(;!(!(b<L)||128&(g=f[b])||128&(n=f[b+1])||128&(o=f[b+2])||128&(p=f[b+3]));)s[a++]=g,s[a++]=n,s[a++]=o,s[a++]=p,b+=4;if((g=f[b++])<128)s[a++]=g;else if((224&g)==192){if(b>=y)return this.interim[0]=g,a;if((192&(n=f[b++]))!=128){b--;continue}if((r=(31&g)<<6|63&n)<128){b--;continue}s[a++]=r}else if((240&g)==224){if(b>=y)return this.interim[0]=g,a;if((192&(n=f[b++]))!=128){b--;continue}if(b>=y)return this.interim[0]=g,this.interim[1]=n,a;if((192&(o=f[b++]))!=128){b--;continue}if((r=(15&g)<<12|(63&n)<<6|63&o)<2048||r>=55296&&r<=57343||r===65279)continue;s[a++]=r}else if((248&g)==240){if(b>=y)return this.interim[0]=g,a;if((192&(n=f[b++]))!=128){b--;continue}if(b>=y)return this.interim[0]=g,this.interim[1]=n,a;if((192&(o=f[b++]))!=128){b--;continue}if(b>=y)return this.interim[0]=g,this.interim[1]=n,this.interim[2]=o,a;if((192&(p=f[b++]))!=128){b--;continue}if((r=(7&g)<<18|(63&n)<<12|(63&o)<<6|63&p)<65536||r>1114111)continue;s[a++]=r}}return a},_}();t.Utf8ToUtf32=h},225:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var h,_=u(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],y=function(){function g(){if(this.version="6",!h){h=new Uint8Array(65536),(0,_.fill)(h,1),h[0]=0,(0,_.fill)(h,0,1,32),(0,_.fill)(h,0,127,160),(0,_.fill)(h,2,4352,4448),h[9001]=2,h[9002]=2,(0,_.fill)(h,2,11904,42192),h[12351]=1,(0,_.fill)(h,2,44032,55204),(0,_.fill)(h,2,63744,64256),(0,_.fill)(h,2,65040,65050),(0,_.fill)(h,2,65072,65136),(0,_.fill)(h,2,65280,65377),(0,_.fill)(h,2,65504,65511);for(var n=0;n<f.length;++n)(0,_.fill)(h,0,f[n][0],f[n][1]+1)}}return g.prototype.wcwidth=function(n){return n<32?0:n<127?1:n<65536?h[n]:function(o,p){var a,r=0,e=p.length-1;if(o<p[0][0]||o>p[e][1])return!1;for(;e>=r;)if(o>p[a=r+e>>1][1])r=a+1;else{if(!(o<p[a][0]))return!0;e=a-1}return!1}(n,s)?0:n>=131072&&n<=196605||n>=196608&&n<=262141?2:1},g}();t.UnicodeV6=y},5981:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var u=typeof queueMicrotask=="undefined"?function(_){Promise.resolve().then(_)}:queueMicrotask,h=function(){function _(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(f,s){if(s!==void 0&&this._syncCalls>s)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);var g=this._callbacks.shift();g&&g()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(f,s){var y=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return y._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(s)},_.prototype._innerWrite=function(f,s){var y=this;f===void 0&&(f=0),s===void 0&&(s=!0);for(var g=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var n=this._writeBuffer[this._bufferOffset],o=this._action(n,s);if(o)return void o.catch(function(a){return u(function(){throw a}),Promise.resolve(!1)}).then(function(a){return Date.now()-g>=12?setTimeout(function(){return y._innerWrite(0,a)}):y._innerWrite(g,a)});var p=this._callbacks[this._bufferOffset];if(p&&p(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return y._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();t.WriteBuffer=h},5941:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;var u=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function _(f,s){var y=f.toString(16),g=y.length<2?"0"+y:y;switch(s){case 4:return y[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}t.parseColor=function(f){if(f){var s=f.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);var y=u.exec(s);if(y){var g=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/g*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/g*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/g*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),h.exec(s)&&[3,6,9,12].includes(s.length))){for(var n=s.length/3,o=[0,0,0],p=0;p<3;++p){var a=parseInt(s.slice(n*p,n*p+n),16);o[p]=n===1?a<<4:n===2?a:n===3?a>>4:a>>8}return o}}},t.toRgbString=function(f,s){s===void 0&&(s=16);var y=f[0],g=f[1],n=f[2];return"rgb:"+_(y,s)+"/"+_(g,s)+"/"+_(n,s)}},5770:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var h=u(482),_=u(8742),f=u(5770),s=[],y=function(){function o(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return o.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=s},o.prototype.registerHandler=function(p,a){this._handlers[p]===void 0&&(this._handlers[p]=[]);var r=this._handlers[p];return r.push(a),{dispose:function(){var e=r.indexOf(a);e!==-1&&r.splice(e,1)}}},o.prototype.clearHandler=function(p){this._handlers[p]&&delete this._handlers[p]},o.prototype.setHandlerFallback=function(p){this._handlerFb=p},o.prototype.reset=function(){if(this._active.length)for(var p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0},o.prototype.hook=function(p,a){if(this.reset(),this._ident=p,this._active=this._handlers[p]||s,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(a);else this._handlerFb(this._ident,"HOOK",a)},o.prototype.put=function(p,a,r){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(p,a,r);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(p,a,r))},o.prototype.unhook=function(p,a){if(a===void 0&&(a=!0),this._active.length){var r=!1,e=this._active.length-1,i=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,r=a,i=this._stack.fallThrough,this._stack.paused=!1),!i&&r===!1){for(;e>=0&&(r=this._active[e].unhook(p))!==!0;e--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,r;e--}for(;e>=0;e--)if((r=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",p);this._active=s,this._ident=0},o}();t.DcsParser=y;var g=new _.Params;g.addParam(0);var n=function(){function o(p){this._handler=p,this._data="",this._params=g,this._hitLimit=!1}return o.prototype.hook=function(p){this._params=p.length>1||p.params[0]?p.clone():g,this._data="",this._hitLimit=!1},o.prototype.put=function(p,a,r){this._hitLimit||(this._data+=(0,h.utf32ToString)(p,a,r),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},o.prototype.unhook=function(p){var a=this,r=!1;if(this._hitLimit)r=!1;else if(p&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(e){return a._params=g,a._data="",a._hitLimit=!1,e});return this._params=g,this._data="",this._hitLimit=!1,r},o}();t.DcsHandler=n},2015:function(M,t,u){var h,_=this&&this.__extends||(h=function(r,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])},h(r,e)},function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=r}h(r,e),r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;var f=u(844),s=u(8273),y=u(8742),g=u(6242),n=u(6351),o=function(){function r(e){this.table=new Uint8Array(e)}return r.prototype.setDefault=function(e,i){(0,s.fill)(this.table,e<<4|i)},r.prototype.add=function(e,i,c,d){this.table[i<<8|e]=c<<4|d},r.prototype.addMany=function(e,i,c,d){for(var m=0;m<e.length;m++)this.table[i<<8|e[m]]=c<<4|d},r}();t.TransitionTable=o;var p=160;t.VT500_TRANSITION_TABLE=function(){var r=new o(4095),e=Array.apply(null,Array(256)).map(function(E,L){return L}),i=function(E,L){return e.slice(E,L)},c=i(32,127),d=i(0,24);d.push(25),d.push.apply(d,i(28,32));var m,C=i(0,14);for(m in r.setDefault(1,0),r.addMany(c,0,2,0),C)r.addMany([24,26,153,154],m,3,0),r.addMany(i(128,144),m,3,0),r.addMany(i(144,152),m,3,0),r.add(156,m,0,0),r.add(27,m,11,1),r.add(157,m,4,8),r.addMany([152,158,159],m,0,7),r.add(155,m,11,3),r.add(144,m,11,9);return r.addMany(d,0,3,0),r.addMany(d,1,3,1),r.add(127,1,0,1),r.addMany(d,8,0,8),r.addMany(d,3,3,3),r.add(127,3,0,3),r.addMany(d,4,3,4),r.add(127,4,0,4),r.addMany(d,6,3,6),r.addMany(d,5,3,5),r.add(127,5,0,5),r.addMany(d,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(c,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(c,7,0,7),r.addMany(d,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(d,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(d,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(d,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(d,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(d,13,13,13),r.addMany(c,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(p,0,2,0),r.add(p,8,5,8),r.add(p,6,0,6),r.add(p,11,0,11),r.add(p,13,13,13),r}();var a=function(r){function e(i){i===void 0&&(i=t.VT500_TRANSITION_TABLE);var c=r.call(this)||this;return c._transitions=i,c._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},c.initialState=0,c.currentState=c.initialState,c._params=new y.Params,c._params.addParam(0),c._collect=0,c.precedingCodepoint=0,c._printHandlerFb=function(d,m,C){},c._executeHandlerFb=function(d){},c._csiHandlerFb=function(d,m){},c._escHandlerFb=function(d){},c._errorHandlerFb=function(d){return d},c._printHandler=c._printHandlerFb,c._executeHandlers=Object.create(null),c._csiHandlers=Object.create(null),c._escHandlers=Object.create(null),c._oscParser=new g.OscParser,c._dcsParser=new n.DcsParser,c._errorHandler=c._errorHandlerFb,c.registerEscHandler({final:"\\"},function(){return!0}),c}return _(e,r),e.prototype._identifier=function(i,c){c===void 0&&(c=[64,126]);var d=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((d=i.prefix.charCodeAt(0))&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var m=0;m<i.intermediates.length;++m){var C=i.intermediates.charCodeAt(m);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=C}}if(i.final.length!==1)throw new Error("final must be a single byte");var E=i.final.charCodeAt(0);if(c[0]>E||E>c[1])throw new Error("final must be in range "+c[0]+" .. "+c[1]);return(d<<=8)|E},e.prototype.identToString=function(i){for(var c=[];i;)c.push(String.fromCharCode(255&i)),i>>=8;return c.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(i){this._printHandler=i},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(i,c){var d=this._identifier(i,[48,126]);this._escHandlers[d]===void 0&&(this._escHandlers[d]=[]);var m=this._escHandlers[d];return m.push(c),{dispose:function(){var C=m.indexOf(c);C!==-1&&m.splice(C,1)}}},e.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},e.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},e.prototype.setExecuteHandler=function(i,c){this._executeHandlers[i.charCodeAt(0)]=c},e.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},e.prototype.registerCsiHandler=function(i,c){var d=this._identifier(i);this._csiHandlers[d]===void 0&&(this._csiHandlers[d]=[]);var m=this._csiHandlers[d];return m.push(c),{dispose:function(){var C=m.indexOf(c);C!==-1&&m.splice(C,1)}}},e.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},e.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},e.prototype.registerDcsHandler=function(i,c){return this._dcsParser.registerHandler(this._identifier(i),c)},e.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},e.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},e.prototype.registerOscHandler=function(i,c){return this._oscParser.registerHandler(i,c)},e.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},e.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},e.prototype.setErrorHandler=function(i){this._errorHandler=i},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(i,c,d,m,C){this._parseStack.state=i,this._parseStack.handlers=c,this._parseStack.handlerPos=d,this._parseStack.transition=m,this._parseStack.chunkPos=C},e.prototype.parse=function(i,c,d){var m,C=0,E=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(d===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var b=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(d===!1&&w>-1){for(;w>=0&&(m=b[w](this._params))!==!0;w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 4:if(d===!1&&w>-1){for(;w>=0&&(m=b[w]())!==!0;w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 6:if(C=i[this._parseStack.chunkPos],m=this._dcsParser.unhook(C!==24&&C!==26,d))return m;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=i[this._parseStack.chunkPos],m=this._oscParser.end(C!==24&&C!==26,d))return m;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var B=L;B<c;++B){switch(C=i[B],(E=this._transitions.table[this.currentState<<8|(C<160?C:p)])>>4){case 2:for(var k=B+1;;++k){if(k>=c||(C=i[k])<32||C>126&&C<p){this._printHandler(i,B,k),B=k-1;break}if(++k>=c||(C=i[k])<32||C>126&&C<p){this._printHandler(i,B,k),B=k-1;break}if(++k>=c||(C=i[k])<32||C>126&&C<p){this._printHandler(i,B,k),B=k-1;break}if(++k>=c||(C=i[k])<32||C>126&&C<p){this._printHandler(i,B,k),B=k-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:B,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var F=(b=this._csiHandlers[this._collect<<8|C])?b.length-1:-1;F>=0&&(m=b[F](this._params))!==!0;F--)if(m instanceof Promise)return this._preserveStack(3,b,F,E,B),m;F<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++B<c&&(C=i[B])>47&&C<60);B--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:for(var O=this._escHandlers[this._collect<<8|C],x=O?O.length-1:-1;x>=0&&(m=O[x]())!==!0;x--)if(m instanceof Promise)return this._preserveStack(4,O,x,E,B),m;x<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(var T=B+1;;++T)if(T>=c||(C=i[T])===24||C===26||C===27||C>127&&C<p){this._dcsParser.put(i,B,T),B=T-1;break}break;case 14:if(m=this._dcsParser.unhook(C!==24&&C!==26))return this._preserveStack(6,[],0,E,B),m;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var I=B+1;;I++)if(I>=c||(C=i[I])<32||C>127&&C<p){this._oscParser.put(i,B,I),B=I-1;break}break;case 6:if(m=this._oscParser.end(C!==24&&C!==26))return this._preserveStack(5,[],0,E,B),m;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}},e}(f.Disposable);t.EscapeSequenceParser=a},6242:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var h=u(5770),_=u(482),f=[],s=function(){function g(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return g.prototype.registerHandler=function(n,o){this._handlers[n]===void 0&&(this._handlers[n]=[]);var p=this._handlers[n];return p.push(o),{dispose:function(){var a=p.indexOf(o);a!==-1&&p.splice(a,1)}}},g.prototype.clearHandler=function(n){this._handlers[n]&&delete this._handlers[n]},g.prototype.setHandlerFallback=function(n){this._handlerFb=n},g.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},g.prototype.reset=function(){if(this._state===2)for(var n=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;n>=0;--n)this._active[n].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},g.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].start();else this._handlerFb(this._id,"START")},g.prototype._put=function(n,o,p){if(this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].put(n,o,p);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(n,o,p))},g.prototype.start=function(){this.reset(),this._state=1},g.prototype.put=function(n,o,p){if(this._state!==3){if(this._state===1)for(;o<p;){var a=n[o++];if(a===59){this._state=2,this._start();break}if(a<48||57<a)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+a-48}this._state===2&&p-o>0&&this._put(n,o,p)}},g.prototype.end=function(n,o){if(o===void 0&&(o=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var p=!1,a=this._active.length-1,r=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,p=o,r=this._stack.fallThrough,this._stack.paused=!1),!r&&p===!1){for(;a>=0&&(p=this._active[a].end(n))!==!0;a--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,p;a--}for(;a>=0;a--)if((p=this._active[a].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",n);this._active=f,this._id=-1,this._state=0}},g}();t.OscParser=s;var y=function(){function g(n){this._handler=n,this._data="",this._hitLimit=!1}return g.prototype.start=function(){this._data="",this._hitLimit=!1},g.prototype.put=function(n,o,p){this._hitLimit||(this._data+=(0,_.utf32ToString)(n,o,p),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},g.prototype.end=function(n){var o=this,p=!1;if(this._hitLimit)p=!1;else if(n&&(p=this._handler(this._data))instanceof Promise)return p.then(function(a){return o._data="",o._hitLimit=!1,a});return this._data="",this._hitLimit=!1,p},g}();t.OscHandler=y},8742:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var u=2147483647,h=function(){function _(f,s){if(f===void 0&&(f=32),s===void 0&&(s=32),this.maxLength=f,this.maxSubParamsLength=s,s>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(f){var s=new _;if(!f.length)return s;for(var y=Array.isArray(f[0])?1:0;y<f.length;++y){var g=f[y];if(Array.isArray(g))for(var n=0;n<g.length;++n)s.addSubParam(g[n]);else s.addParam(g)}return s},_.prototype.clone=function(){var f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},_.prototype.toArray=function(){for(var f=[],s=0;s<this.length;++s){f.push(this.params[s]);var y=this._subParamsIdx[s]>>8,g=255&this._subParamsIdx[s];g-y>0&&f.push(Array.prototype.slice.call(this._subParams,y,g))}return f},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>u?u:f}},_.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>u?u:f,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},_.prototype.getSubParams=function(f){var s=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];return y-s>0?this._subParams.subarray(s,y):null},_.prototype.getSubParamsAll=function(){for(var f={},s=0;s<this.length;++s){var y=this._subParamsIdx[s]>>8,g=255&this._subParamsIdx[s];g-y>0&&(f[s]=this._subParams.slice(y,g))}return f},_.prototype.addDigit=function(f){var s;if(!(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var y=this._digitIsSub?this._subParams:this.params,g=y[s-1];y[s-1]=~g?Math.min(10*g+f,u):f}},_}();t.Params=h},5741:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var u=function(){function h(){this._addons=[]}return h.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},h.prototype.loadAddon=function(_,f){var s=this,y={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(y),f.dispose=function(){return s._wrappedAddonDispose(y)},f.activate(_)},h.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var f=-1,s=0;s<this._addons.length;s++)if(this._addons[s]===_){f=s;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(f,1)}},h}();t.AddonManager=u},8771:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;var h=u(3785),_=u(511),f=function(){function s(y,g){this._buffer=y,this.type=g}return s.prototype.init=function(y){return this._buffer=y,this},Object.defineProperty(s.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),s.prototype.getLine=function(y){var g=this._buffer.lines.get(y);if(g)return new h.BufferLineApiView(g)},s.prototype.getNullCell=function(){return new _.CellData},s}();t.BufferApiView=f},3785:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;var h=u(511),_=function(){function f(s){this._line=s}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(s,y){if(!(s<0||s>=this._line.length))return y?(this._line.loadCell(s,y),y):this._line.loadCell(s,new h.CellData)},f.prototype.translateToString=function(s,y,g){return this._line.translateToString(s,y,g)},f}();t.BufferLineApiView=_},8285:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;var h=u(8771),_=u(8460),f=function(){function s(y){var g=this;this._core=y,this._onBufferChange=new _.EventEmitter,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return g._onBufferChange.fire(g.active)})}return Object.defineProperty(s.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),s}();t.BufferNamespaceApi=f},7975:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0;var u=function(){function h(_){this._core=_}return h.prototype.registerCsiHandler=function(_,f){return this._core.registerCsiHandler(_,function(s){return f(s.toArray())})},h.prototype.addCsiHandler=function(_,f){return this.registerCsiHandler(_,f)},h.prototype.registerDcsHandler=function(_,f){return this._core.registerDcsHandler(_,function(s,y){return f(s,y.toArray())})},h.prototype.addDcsHandler=function(_,f){return this.registerDcsHandler(_,f)},h.prototype.registerEscHandler=function(_,f){return this._core.registerEscHandler(_,f)},h.prototype.addEscHandler=function(_,f){return this.registerEscHandler(_,f)},h.prototype.registerOscHandler=function(_,f){return this._core.registerOscHandler(_,f)},h.prototype.addOscHandler=function(_,f){return this.registerOscHandler(_,f)},h}();t.ParserApi=u},7090:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0;var u=function(){function h(_){this._core=_}return h.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(h.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),h}();t.UnicodeApi=u},744:function(M,t,u){var h,_=this&&this.__extends||(h=function(a,r){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])},h(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=a}h(a,r),a.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}),f=this&&this.__decorate||function(a,r,e,i){var c,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(a,r,e,i);else for(var C=a.length-1;C>=0;C--)(c=a[C])&&(m=(d<3?c(m):d>3?c(r,e,m):c(r,e))||m);return d>3&&m&&Object.defineProperty(r,e,m),m},s=this&&this.__param||function(a,r){return function(e,i){r(e,i,a)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var y=u(2585),g=u(5295),n=u(8460),o=u(844);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var p=function(a){function r(e){var i=a.call(this)||this;return i._optionsService=e,i.isUserScrolling=!1,i._onResize=new n.EventEmitter,i._onScroll=new n.EventEmitter,i.cols=Math.max(e.options.cols||0,t.MINIMUM_COLS),i.rows=Math.max(e.options.rows||0,t.MINIMUM_ROWS),i.buffers=new g.BufferSet(e,i),i}return _(r,a),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){a.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(e,i){this.cols=e,this.rows=i,this.buffers.resize(e,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:i})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(e,i){i===void 0&&(i=!1);var c,d=this.buffer;(c=this._cachedBlankLine)&&c.length===this.cols&&c.getFg(0)===e.fg&&c.getBg(0)===e.bg||(c=d.getBlankLine(e,i),this._cachedBlankLine=c),c.isWrapped=i;var m=d.ybase+d.scrollTop,C=d.ybase+d.scrollBottom;if(d.scrollTop===0){var E=d.lines.isFull;C===d.lines.length-1?E?d.lines.recycle().copyFrom(c):d.lines.push(c.clone()):d.lines.splice(C+1,0,c.clone()),E?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{var L=C-m+1;d.lines.shiftElements(m+1,L-1,-1),d.lines.set(C,c.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)},r.prototype.scrollLines=function(e,i,c){var d=this.buffer;if(e<0){if(d.ydisp===0)return;this.isUserScrolling=!0}else e+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);var m=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+e,d.ybase),0),m!==d.ydisp&&(i||this._onScroll.fire(d.ydisp))},r.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(e){var i=e-this.buffer.ydisp;i!==0&&this.scrollLines(i)},f([s(0,y.IOptionsService)],r)}(o.Disposable);t.BufferService=p},7994:(M,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var u=function(){function h(){this.glevel=0,this._charsets=[]}return h.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},h.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},h.prototype.setgCharset=function(_,f){this._charsets[_]=f,this.glevel===_&&(this.charset=f)},h}();t.CharsetService=u},1753:function(M,t,u){var h=this&&this.__decorate||function(a,r,e,i){var c,d=arguments.length,m=d<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(a,r,e,i);else for(var C=a.length-1;C>=0;C--)(c=a[C])&&(m=(d<3?c(m):d>3?c(r,e,m):c(r,e))||m);return d>3&&m&&Object.defineProperty(r,e,m),m},_=this&&this.__param||function(a,r){return function(e,i){r(e,i,a)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;var f=u(2585),s=u(8460),y={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(a){return a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)}},VT200:{events:19,restrict:function(a){return a.action!==32}},DRAG:{events:23,restrict:function(a){return a.action!==32||a.button!==3}},ANY:{events:31,restrict:function(a){return!0}}};function g(a,r){var e=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(e|=64,e|=a.action):(e|=3&a.button,4&a.button&&(e|=64),8&a.button&&(e|=128),a.action===32?e|=32:a.action!==0||r||(e|=3)),e}var n=String.fromCharCode,o={DEFAULT:function(a){var r=[g(a,!1)+32,a.col+32,a.row+32];return r[0]>255||r[1]>255||r[2]>255?"":"[M"+n(r[0])+n(r[1])+n(r[2])},SGR:function(a){var r=a.action===0&&a.button!==4?"m":"M";return"[<"+g(a,!0)+";"+a.col+";"+a.row+r}},p=function(){function a(r,e){this._bufferService=r,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new s.EventEmitter,this._lastEvent=null;for(var i=0,c=Object.keys(y);i<c.length;i++){var d=c[i];this.addProtocol(d,y[d])}for(var m=0,C=Object.keys(o);m<C.length;m++){var E=C[m];this.addEncoding(E,o[E])}this.reset()}return a.prototype.addProtocol=function(r,e){this._protocols[r]=e},a.prototype.addEncoding=function(r,e){this._encodings[r]=e},Object.defineProperty(a.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(r){if(!this._protocols[r])throw new Error('unknown protocol "'+r+'"');this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(r){if(!this._encodings[r])throw new Error('unknown encoding "'+r+'"');this._activeEncoding=r},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(a.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),a.prototype.triggerMouseEvent=function(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,r))||!this._protocols[this._activeProtocol].restrict(r))return!1;var e=this._encodings[this._activeEncoding](r);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=r,!0},a.prototype.explainEvents=function(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}},a.prototype._compareEvents=function(r,e){return r.col===e.col&&r.row===e.row&&r.button===e.button&&r.action===e.action&&r.ctrl===e.ctrl&&r.alt===e.alt&&r.shift===e.shift},h([_(0,f.IBufferService),_(1,f.ICoreService)],a)}();t.CoreMouseService=p},6975:function(M,t,u){var h,_=this&&this.__extends||(h=function(e,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(c[m]=d[m])},h(e,i)},function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=e}h(e,i),e.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}),f=this&&this.__decorate||function(e,i,c,d){var m,C=arguments.length,E=C<3?i:d===null?d=Object.getOwnPropertyDescriptor(i,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,i,c,d);else for(var L=e.length-1;L>=0;L--)(m=e[L])&&(E=(C<3?m(E):C>3?m(i,c,E):m(i,c))||E);return C>3&&E&&Object.defineProperty(i,c,E),E},s=this&&this.__param||function(e,i){return function(c,d){i(c,d,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var y=u(2585),g=u(8460),n=u(1439),o=u(844),p=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),r=function(e){function i(c,d,m,C){var E=e.call(this)||this;return E._bufferService=d,E._logService=m,E._optionsService=C,E.isCursorInitialized=!1,E.isCursorHidden=!1,E._onData=E.register(new g.EventEmitter),E._onUserInput=E.register(new g.EventEmitter),E._onBinary=E.register(new g.EventEmitter),E._scrollToBottom=c,E.register({dispose:function(){return E._scrollToBottom=void 0}}),E.modes=(0,n.clone)(p),E.decPrivateModes=(0,n.clone)(a),E}return _(i,e),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=(0,n.clone)(p),this.decPrivateModes=(0,n.clone)(a)},i.prototype.triggerDataEvent=function(c,d){if(d===void 0&&(d=!1),!this._optionsService.options.disableStdin){var m=this._bufferService.buffer;m.ybase!==m.ydisp&&this._scrollToBottom(),d&&this._onUserInput.fire(),this._logService.debug('sending data "'+c+'"',function(){return c.split("").map(function(C){return C.charCodeAt(0)})}),this._onData.fire(c)}},i.prototype.triggerBinaryEvent=function(c){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+c+'"',function(){return c.split("").map(function(d){return d.charCodeAt(0)})}),this._onBinary.fire(c))},f([s(1,y.IBufferService),s(2,y.ILogService),s(3,y.IOptionsService)],i)}(o.Disposable);t.CoreService=r},3730:function(M,t,u){var h=this&&this.__decorate||function(y,g,n,o){var p,a=arguments.length,r=a<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(y,g,n,o);else for(var e=y.length-1;e>=0;e--)(p=y[e])&&(r=(a<3?p(r):a>3?p(g,n,r):p(g,n))||r);return a>3&&r&&Object.defineProperty(g,n,r),r},_=this&&this.__param||function(y,g){return function(n,o){g(n,o,y)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var f=u(2585),s=function(){function y(g){this._bufferService=g,this.clearRange()}return Object.defineProperty(y.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),y.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},y.prototype.markDirty=function(g){g<this._start?this._start=g:g>this._end&&(this._end=g)},y.prototype.markRangeDirty=function(g,n){if(g>n){var o=g;g=n,n=o}g<this._start&&(this._start=g),n>this._end&&(this._end=n)},y.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},h([_(0,f.IBufferService)],y)}();t.DirtyRowService=s},4348:function(M,t,u){var h=this&&this.__spreadArray||function(g,n,o){if(o||arguments.length===2)for(var p,a=0,r=n.length;a<r;a++)!p&&a in n||(p||(p=Array.prototype.slice.call(n,0,a)),p[a]=n[a]);return g.concat(p||Array.prototype.slice.call(n))};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var _=u(2585),f=u(8343),s=function(){function g(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this._entries=new Map;for(var p=0,a=n;p<a.length;p++){var r=a[p],e=r[0],i=r[1];this.set(e,i)}}return g.prototype.set=function(n,o){var p=this._entries.get(n);return this._entries.set(n,o),p},g.prototype.forEach=function(n){this._entries.forEach(function(o,p){return n(p,o)})},g.prototype.has=function(n){return this._entries.has(n)},g.prototype.get=function(n){return this._entries.get(n)},g}();t.ServiceCollection=s;var y=function(){function g(){this._services=new s,this._services.set(_.IInstantiationService,this)}return g.prototype.setService=function(n,o){this._services.set(n,o)},g.prototype.getService=function(n){return this._services.get(n)},g.prototype.createInstance=function(n){for(var o=[],p=1;p<arguments.length;p++)o[p-1]=arguments[p];for(var a=(0,f.getServiceDependencies)(n).sort(function(C,E){return C.index-E.index}),r=[],e=0,i=a;e<i.length;e++){var c=i[e],d=this._services.get(c.id);if(!d)throw new Error("[createInstance] "+n.name+" depends on UNKNOWN service "+c.id+".");r.push(d)}var m=a.length>0?a[0].index:o.length;if(o.length!==m)throw new Error("[createInstance] First service dependency of "+n.name+" at position "+(m+1)+" conflicts with "+o.length+" static arguments");return new(n.bind.apply(n,h([void 0],h(h([],o,!0),r,!0),!1)))},g}();t.InstantiationService=y},7866:function(M,t,u){var h=this&&this.__decorate||function(n,o,p,a){var r,e=arguments.length,i=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,p):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,o,p,a);else for(var c=n.length-1;c>=0;c--)(r=n[c])&&(i=(e<3?r(i):e>3?r(o,p,i):r(o,p))||i);return e>3&&i&&Object.defineProperty(o,p,i),i},_=this&&this.__param||function(n,o){return function(p,a){o(p,a,n)}},f=this&&this.__spreadArray||function(n,o,p){if(p||arguments.length===2)for(var a,r=0,e=o.length;r<e;r++)!a&&r in o||(a||(a=Array.prototype.slice.call(o,0,r)),a[r]=o[r]);return n.concat(a||Array.prototype.slice.call(o))};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var s=u(2585),y={debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},g=function(){function n(o){var p=this;this._optionsService=o,this.logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(a){a==="logLevel"&&p._updateLogLevel()})}return n.prototype._updateLogLevel=function(){this.logLevel=y[this._optionsService.options.logLevel]},n.prototype._evalLazyOptionalParams=function(o){for(var p=0;p<o.length;p++)typeof o[p]=="function"&&(o[p]=o[p]())},n.prototype._log=function(o,p,a){this._evalLazyOptionalParams(a),o.call.apply(o,f([console,"xterm.js: "+p],a,!1))},n.prototype.debug=function(o){for(var p=[],a=1;a<arguments.length;a++)p[a-1]=arguments[a];this.logLevel<=s.LogLevelEnum.DEBUG&&this._log(console.log,o,p)},n.prototype.info=function(o){for(var p=[],a=1;a<arguments.length;a++)p[a-1]=arguments[a];this.logLevel<=s.LogLevelEnum.INFO&&this._log(console.info,o,p)},n.prototype.warn=function(o){for(var p=[],a=1;a<arguments.length;a++)p[a-1]=arguments[a];this.logLevel<=s.LogLevelEnum.WARN&&this._log(console.warn,o,p)},n.prototype.error=function(o){for(var p=[],a=1;a<arguments.length;a++)p[a-1]=arguments[a];this.logLevel<=s.LogLevelEnum.ERROR&&this._log(console.error,o,p)},h([_(0,s.IOptionsService)],n)}();t.LogService=g},7302:function(M,t,u){var h=this&&this.__assign||function(){return h=Object.assign||function(g){for(var n,o=1,p=arguments.length;o<p;o++)for(var a in n=arguments[o])Object.prototype.hasOwnProperty.call(n,a)&&(g[a]=n[a]);return g},h.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var _=u(8460),f=u(6114);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var s=["normal","bold","100","200","300","400","500","600","700","800","900"],y=function(){function g(n){for(var o in this._onOptionChange=new _.EventEmitter,this._options=h({},t.DEFAULT_OPTIONS),n)if(o in this._options)try{var p=n[o];this._options[o]=this._sanitizeAndValidateOption(o,p)}catch(a){console.error(a)}this.options=this._setupOptions(this._options)}return Object.defineProperty(g.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),g.prototype._setupOptions=function(n){var o=this,p=h({},n),a=function(e){Object.defineProperty(p,e,{get:function(){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return o._options[e]},set:function(i){if(!(e in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');i=o._sanitizeAndValidateOption(e,i),o._options[e]!==i&&(o._options[e]=i,o._onOptionChange.fire(e))}})};for(var r in p)a(r);return p},g.prototype.setOption=function(n,o){this.options[n]=o},g.prototype._sanitizeAndValidateOption=function(n,o){switch(n){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":o||(o=t.DEFAULT_OPTIONS[n]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=s.includes(o)?o:t.DEFAULT_OPTIONS[n];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(n+" cannot be less than 1, value: "+o);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(n+" cannot be less than 0, value: "+o);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(n+" cannot be less than or equal to 0, value: "+o);case"rows":case"cols":if(!o&&o!==0)throw new Error(n+" must be numeric, value: "+o)}return o},g.prototype.getOption=function(n){return this.options[n]},g}();t.OptionsService=y},8343:(M,t)=>{function u(h,_,f){_.di$target===_?_.di$dependencies.push({id:h,index:f}):(_.di$dependencies=[{id:h,index:f}],_.di$target=_)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(h){return h.di$dependencies||[]},t.createDecorator=function(h){if(t.serviceRegistry.has(h))return t.serviceRegistry.get(h);var _=function(f,s,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");u(_,f,y)};return _.toString=function(){return h},t.serviceRegistry.set(h,_),_}},2585:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IUnicodeService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var h,_=u(8343);t.IBufferService=(0,_.createDecorator)("BufferService"),t.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),t.ICoreService=(0,_.createDecorator)("CoreService"),t.ICharsetService=(0,_.createDecorator)("CharsetService"),t.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),t.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(h=t.LogLevelEnum||(t.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",t.ILogService=(0,_.createDecorator)("LogService"),t.IOptionsService=(0,_.createDecorator)("OptionsService"),t.IUnicodeService=(0,_.createDecorator)("UnicodeService")},1480:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var h=u(8460),_=u(225),f=function(){function s(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter;var y=new _.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}return Object.defineProperty(s.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"activeVersion",{get:function(){return this._active},set:function(y){if(!this._providers[y])throw new Error('unknown Unicode version "'+y+'"');this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)},enumerable:!1,configurable:!0}),s.prototype.register=function(y){this._providers[y.version]=y},s.prototype.wcwidth=function(y){return this._activeProvider.wcwidth(y)},s.prototype.getStringCellWidth=function(y){for(var g=0,n=y.length,o=0;o<n;++o){var p=y.charCodeAt(o);if(55296<=p&&p<=56319){if(++o>=n)return g+this.wcwidth(p);var a=y.charCodeAt(o);56320<=a&&a<=57343?p=1024*(p-55296)+a-56320+65536:g+=this.wcwidth(a)}g+=this.wcwidth(p)}return g},s}();t.UnicodeService=f}},l={};function v(M){var t=l[M];if(t!==void 0)return t.exports;var u=l[M]={exports:{}};return S[M].call(u.exports,u,u.exports,v),u.exports}var R={};return(()=>{var M=R;Object.defineProperty(M,"__esModule",{value:!0}),M.Terminal=void 0;var t=v(3236),u=v(9042),h=v(7975),_=v(7090),f=v(5741),s=v(8285),y=["cols","rows"],g=function(){function n(o){var p=this;this._core=new t.Terminal(o),this._addonManager=new f.AddonManager,this._publicOptions={};var a=function(i){Object.defineProperty(r._publicOptions,i,{get:function(){return p._core.options[i]},set:function(c){p._checkReadonlyOptions(i),p._core.options[i]=c}})},r=this;for(var e in this._core.options)a(e)}return n.prototype._checkReadonlyOptions=function(o){if(y.includes(o))throw new Error('Option "'+o+'" can only be set in the constructor')},n.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(n.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"unicode",{get:function(){return this._checkProposedApi(),new _.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new s.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modes",{get:function(){var o=this._core.coreService.decPrivateModes,p="none";switch(this._core.coreMouseService.activeProtocol){case"X10":p="x10";break;case"VT200":p="vt200";break;case"DRAG":p="drag";break;case"ANY":p="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:p,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this._publicOptions},set:function(o){for(var p in o)this._publicOptions[p]=o[p]},enumerable:!1,configurable:!0}),n.prototype.blur=function(){this._core.blur()},n.prototype.focus=function(){this._core.focus()},n.prototype.resize=function(o,p){this._verifyIntegers(o,p),this._core.resize(o,p)},n.prototype.open=function(o){this._core.open(o)},n.prototype.attachCustomKeyEventHandler=function(o){this._core.attachCustomKeyEventHandler(o)},n.prototype.registerLinkMatcher=function(o,p,a){return this._checkProposedApi(),this._core.registerLinkMatcher(o,p,a)},n.prototype.deregisterLinkMatcher=function(o){this._checkProposedApi(),this._core.deregisterLinkMatcher(o)},n.prototype.registerLinkProvider=function(o){return this._checkProposedApi(),this._core.registerLinkProvider(o)},n.prototype.registerCharacterJoiner=function(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)},n.prototype.deregisterCharacterJoiner=function(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)},n.prototype.registerMarker=function(o){return this._checkProposedApi(),this._verifyIntegers(o),this._core.addMarker(o)},n.prototype.addMarker=function(o){return this.registerMarker(o)},n.prototype.hasSelection=function(){return this._core.hasSelection()},n.prototype.select=function(o,p,a){this._verifyIntegers(o,p,a),this._core.select(o,p,a)},n.prototype.getSelection=function(){return this._core.getSelection()},n.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},n.prototype.clearSelection=function(){this._core.clearSelection()},n.prototype.selectAll=function(){this._core.selectAll()},n.prototype.selectLines=function(o,p){this._verifyIntegers(o,p),this._core.selectLines(o,p)},n.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},n.prototype.scrollLines=function(o){this._verifyIntegers(o),this._core.scrollLines(o)},n.prototype.scrollPages=function(o){this._verifyIntegers(o),this._core.scrollPages(o)},n.prototype.scrollToTop=function(){this._core.scrollToTop()},n.prototype.scrollToBottom=function(){this._core.scrollToBottom()},n.prototype.scrollToLine=function(o){this._verifyIntegers(o),this._core.scrollToLine(o)},n.prototype.clear=function(){this._core.clear()},n.prototype.write=function(o,p){this._core.write(o,p)},n.prototype.writeUtf8=function(o,p){this._core.write(o,p)},n.prototype.writeln=function(o,p){this._core.write(o),this._core.write(`\r
`,p)},n.prototype.paste=function(o){this._core.paste(o)},n.prototype.getOption=function(o){return this._core.optionsService.getOption(o)},n.prototype.setOption=function(o,p){this._checkReadonlyOptions(o),this._core.optionsService.setOption(o,p)},n.prototype.refresh=function(o,p){this._verifyIntegers(o,p),this._core.refresh(o,p)},n.prototype.reset=function(){this._core.reset()},n.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},n.prototype.loadAddon=function(o){return this._addonManager.loadAddon(this,o)},Object.defineProperty(n,"strings",{get:function(){return u},enumerable:!1,configurable:!0}),n.prototype._verifyIntegers=function(){for(var o=[],p=0;p<arguments.length;p++)o[p]=arguments[p];for(var a=0,r=o;a<r.length;a++){var e=r[a];if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}},n}();M.Terminal=g})(),R})()})});var Qr=we(($t,Dr)=>{(function(S,l){typeof $t=="object"&&typeof Dr=="object"?Dr.exports=l():typeof define=="function"&&define.amd?define([],l):typeof $t=="object"?$t.FitAddon=l():S.FitAddon=l()})(self,function(){return(()=>{"use strict";var S={775:(v,R)=>{Object.defineProperty(R,"__esModule",{value:!0}),R.FitAddon=void 0;var M=function(){function t(){}return t.prototype.activate=function(u){this._terminal=u},t.prototype.dispose=function(){},t.prototype.fit=function(){var u=this.proposeDimensions();if(u&&this._terminal){var h=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(h._renderService.clear(),this._terminal.resize(u.cols,u.rows))}},t.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var u=this._terminal._core;if(u._renderService.dimensions.actualCellWidth!==0&&u._renderService.dimensions.actualCellHeight!==0){var h=window.getComputedStyle(this._terminal.element.parentElement),_=parseInt(h.getPropertyValue("height")),f=Math.max(0,parseInt(h.getPropertyValue("width"))),s=window.getComputedStyle(this._terminal.element),y=_-(parseInt(s.getPropertyValue("padding-top"))+parseInt(s.getPropertyValue("padding-bottom"))),g=f-(parseInt(s.getPropertyValue("padding-right"))+parseInt(s.getPropertyValue("padding-left")))-u.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(g/u._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(y/u._renderService.dimensions.actualCellHeight))}}}},t}();R.FitAddon=M}},l={};return function v(R){if(l[R])return l[R].exports;var M=l[R]={exports:{}};return S[R](M,M.exports,v),M.exports}(775)})()})});var ei=we((Zt,Pr)=>{(function(S,l){typeof Zt=="object"&&typeof Pr=="object"?Pr.exports=l():typeof define=="function"&&define.amd?define([],l):typeof Zt=="object"?Zt.SearchAddon=l():S.SearchAddon=l()})(self,function(){return(()=>{"use strict";var S={};return(()=>{var l=S;Object.defineProperty(l,"__esModule",{value:!0}),l.SearchAddon=void 0;var v=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?",R=function(){function M(){this._linesCacheTimeoutId=0}return M.prototype.activate=function(t){this._terminal=t},M.prototype.dispose=function(){},M.prototype.findNext=function(t,u){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return this._terminal.clearSelection(),!1;var h,_=0,f=0;if(this._terminal.hasSelection()){var s=!!u&&u.incremental;h=this._terminal.getSelectionPosition(),f=s?h.startRow:h.endRow,_=s?h.startColumn:h.endColumn}this._initLinesCache();var y={startRow:f,startCol:_},g=this._findInLine(t,y,u);if(!g)for(var n=f+1;n<this._terminal.buffer.active.baseY+this._terminal.rows&&(y.startRow=n,y.startCol=0,!(g=this._findInLine(t,y,u)));n++);if(!g&&f!==0)for(n=0;n<f&&(y.startRow=n,y.startCol=0,!(g=this._findInLine(t,y,u)));n++);return!g&&h&&(y.startRow=h.startRow,y.startCol=0,g=this._findInLine(t,y,u)),this._selectResult(g)},M.prototype.findPrevious=function(t,u){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return this._terminal.clearSelection(),!1;var h,_,f=!0,s=this._terminal.buffer.active.baseY+this._terminal.rows,y=this._terminal.cols,g=!!u&&u.incremental;this._terminal.hasSelection()&&(s=(_=this._terminal.getSelectionPosition()).startRow,y=_.startColumn),this._initLinesCache();var n={startRow:s,startCol:y};if(g?(h=this._findInLine(t,n,u,!1))&&h.row===s&&h.col===y||(_&&(n.startRow=_.endRow,n.startCol=_.endColumn),h=this._findInLine(t,n,u,!0)):h=this._findInLine(t,n,u,f),!h){n.startCol=Math.max(n.startCol,this._terminal.cols);for(var o=s-1;o>=0&&(n.startRow=o,!(h=this._findInLine(t,n,u,f)));o--);}if(!h&&s!==this._terminal.buffer.active.baseY+this._terminal.rows)for(o=this._terminal.buffer.active.baseY+this._terminal.rows;o>=s&&(n.startRow=o,!(h=this._findInLine(t,n,u,f)));o--);return!(h||!_)||this._selectResult(h)},M.prototype._initLinesCache=function(){var t=this,u=this._terminal;this._linesCache||(this._linesCache=new Array(u.buffer.active.length),this._cursorMoveListener=u.onCursorMove(function(){return t._destroyLinesCache()}),this._resizeListener=u.onResize(function(){return t._destroyLinesCache()})),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(function(){return t._destroyLinesCache()},15e3)},M.prototype._destroyLinesCache=function(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)},M.prototype._isWholeWord=function(t,u,h){return(t===0||v.includes(u[t-1]))&&(t+h.length===u.length||v.includes(u[t+h.length]))},M.prototype._findInLine=function(t,u,h,_){var f;h===void 0&&(h={}),_===void 0&&(_=!1);var s=this._terminal,y=u.startRow,g=u.startCol,n=s.buffer.active.getLine(y);if(n==null?void 0:n.isWrapped)return _?void(u.startCol+=s.cols):(u.startRow--,u.startCol+=s.cols,this._findInLine(t,u,h));var o=(f=this._linesCache)===null||f===void 0?void 0:f[y];o||(o=this._translateBufferLineToStringWithWrap(y,!0),this._linesCache&&(this._linesCache[y]=o));var p=o[0],a=o[1],r=this._bufferColsToStringOffset(y,g),e=h.caseSensitive?t:t.toLowerCase(),i=h.caseSensitive?p:p.toLowerCase(),c=-1;if(h.regex){var d=RegExp(e,"g"),m=void 0;if(_)for(;m=d.exec(i.slice(0,r));)c=d.lastIndex-m[0].length,t=m[0],d.lastIndex-=t.length-1;else(m=d.exec(i.slice(r)))&&m[0].length>0&&(c=r+(d.lastIndex-m[0].length),t=m[0])}else _?r-e.length>=0&&(c=i.lastIndexOf(e,r-e.length)):c=i.indexOf(e,r);if(c>=0){if(h.wholeWord&&!this._isWholeWord(c,i,t))return;for(var C=0;C<a.length-1&&c>=a[C+1];)C++;for(var E=C;E<a.length-1&&c+t.length>=a[E+1];)E++;var L=c-a[C],b=c+t.length-a[E],w=this._stringLengthToBufferSize(y+C,L);return{term:t,col:w,row:y+C,size:this._stringLengthToBufferSize(y+E,b)-w+s.cols*(E-C)}}},M.prototype._stringLengthToBufferSize=function(t,u){var h=this._terminal.buffer.active.getLine(t);if(!h)return 0;for(var _=0;_<u;_++){var f=h.getCell(_);if(!f)break;var s=f.getChars();s.length>1&&(u-=s.length-1);var y=h.getCell(_+1);y&&y.getWidth()===0&&u++}return u},M.prototype._bufferColsToStringOffset=function(t,u){for(var h=this._terminal,_=t,f=0,s=h.buffer.active.getLine(_);u>0&&s;){for(var y=0;y<u&&y<h.cols;y++){var g=s.getCell(y);if(!g)break;g.getWidth()&&(f+=g.getChars().length)}if(_++,(s=h.buffer.active.getLine(_))&&!s.isWrapped)break;u-=h.cols}return f},M.prototype._translateBufferLineToStringWithWrap=function(t,u){for(var h,_=this._terminal,f=[],s=[0],y=_.buffer.active.getLine(t);y;){var g=_.buffer.active.getLine(t+1),n=!!g&&g.isWrapped,o=y.translateToString(!n&&u);if(n&&g){var p=y.getCell(y.length-1);p&&p.getCode()===0&&p.getWidth()===1&&((h=g.getCell(0))===null||h===void 0?void 0:h.getWidth())===2&&(o=o.slice(0,-1))}if(f.push(o),!n)break;s.push(s[s.length-1]+o.length),t++,y=g}return[f.join(""),s]},M.prototype._selectResult=function(t){var u=this._terminal;if(!t)return u.clearSelection(),!1;if(u.select(t.col,t.row,t.size),t.row>=u.buffer.active.viewportY+u.rows||t.row<u.buffer.active.viewportY){var h=t.row-u.buffer.active.viewportY;h-=Math.floor(u.rows/2),u.scrollLines(h)}return!0},M}();l.SearchAddon=R})(),S})()})});var ti=we((Ge,Ir)=>{(function(S,l){typeof Ge=="object"&&typeof Ir=="object"?Ir.exports=l():typeof define=="function"&&define.amd?define([],l):typeof Ge=="object"?Ge.SerializeAddon=l():S.SerializeAddon=l()})(Ge,function(){return(()=>{"use strict";var S={};return{44:function(l,v){var R,M=this&&this.__extends||(R=function(_,f){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,y){s.__proto__=y}||function(s,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(s[g]=y[g])},R(_,f)},function(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function s(){this.constructor=_}R(_,f),_.prototype=f===null?Object.create(f):(s.prototype=f.prototype,new s)});function t(_,f){return _.getBgColorMode()===f.getBgColorMode()&&_.getBgColor()===f.getBgColor()}Object.defineProperty(v,"__esModule",{value:!0}),v.SerializeAddon=void 0;var u=function(_){function f(s,y){var g=_.call(this,s)||this;return g._terminal=y,g._rowIndex=0,g._allRows=new Array,g._allRowSeparators=new Array,g._currentRow="",g._nullCellCount=0,g._cursorStyle=g._buffer.getNullCell(),g._cursorStyleRow=0,g._cursorStyleCol=0,g._backgroundCell=g._buffer.getNullCell(),g._firstRow=0,g._lastCursorRow=0,g._lastCursorCol=0,g._lastContentCursorRow=0,g._lastContentCursorCol=0,g._thisRowLastChar=g._buffer.getNullCell(),g._thisRowLastSecondChar=g._buffer.getNullCell(),g._nextRowFirstChar=g._buffer.getNullCell(),g}return M(f,_),f.prototype._beforeSerialize=function(s,y,g){this._allRows=new Array(s),this._lastContentCursorRow=y,this._lastCursorRow=y,this._firstRow=y},f.prototype._rowEnd=function(s,y){var g;this._nullCellCount>0&&!t(this._cursorStyle,this._backgroundCell)&&(this._currentRow+="["+this._nullCellCount+"X");var n="";if(!y){s-this._firstRow>=this._terminal.rows&&((g=this._buffer.getLine(this._cursorStyleRow))===null||g===void 0||g.getCell(this._cursorStyleCol,this._backgroundCell));var o=this._buffer.getLine(s),p=this._buffer.getLine(s+1);if(p.isWrapped){n="";var a=o.getCell(o.length-1,this._thisRowLastChar),r=o.getCell(o.length-2,this._thisRowLastSecondChar),e=p.getCell(0,this._nextRowFirstChar),i=e.getWidth()>1,c=!1;(e.getChars()&&i?this._nullCellCount<=1:this._nullCellCount<=0)&&((a.getChars()||a.getWidth()===0)&&t(a,e)&&(c=!0),i&&(r.getChars()||r.getWidth()===0)&&t(a,e)&&t(r,e)&&(c=!0)),c||(n="-".repeat(this._nullCellCount+1),n+="[1D[1X",this._nullCellCount>0&&(n+="[A",n+="["+(o.length-this._nullCellCount)+"C",n+="["+this._nullCellCount+"X",n+="["+(o.length-this._nullCellCount)+"D",n+="[B"),this._lastContentCursorRow=s+1,this._lastContentCursorCol=0,this._lastCursorRow=s+1,this._lastCursorCol=0)}else n=`\r
`,this._lastCursorRow=s+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=n,this._currentRow="",this._nullCellCount=0},f.prototype._diffStyle=function(s,y){var g,n,o=[],p=(n=y,!((g=s).getFgColorMode()===n.getFgColorMode()&&g.getFgColor()===n.getFgColor())),a=!t(s,y),r=!function(i,c){return i.isInverse()===c.isInverse()&&i.isBold()===c.isBold()&&i.isUnderline()===c.isUnderline()&&i.isBlink()===c.isBlink()&&i.isInvisible()===c.isInvisible()&&i.isItalic()===c.isItalic()&&i.isDim()===c.isDim()&&i.isStrikethrough()===c.isStrikethrough()}(s,y);if(p||a||r)if(s.isAttributeDefault())y.isAttributeDefault()||o.push(0);else{if(p){var e=s.getFgColor();s.isFgRGB()?o.push(38,2,e>>>16&255,e>>>8&255,255&e):s.isFgPalette()?e>=16?o.push(38,5,e):o.push(8&e?90+(7&e):30+(7&e)):o.push(39)}a&&(e=s.getBgColor(),s.isBgRGB()?o.push(48,2,e>>>16&255,e>>>8&255,255&e):s.isBgPalette()?e>=16?o.push(48,5,e):o.push(8&e?100+(7&e):40+(7&e)):o.push(49)),r&&(s.isInverse()!==y.isInverse()&&o.push(s.isInverse()?7:27),s.isBold()!==y.isBold()&&o.push(s.isBold()?1:22),s.isUnderline()!==y.isUnderline()&&o.push(s.isUnderline()?4:24),s.isBlink()!==y.isBlink()&&o.push(s.isBlink()?5:25),s.isInvisible()!==y.isInvisible()&&o.push(s.isInvisible()?8:28),s.isItalic()!==y.isItalic()&&o.push(s.isItalic()?3:23),s.isDim()!==y.isDim()&&o.push(s.isDim()?2:22),s.isStrikethrough()!==y.isStrikethrough()&&o.push(s.isStrikethrough()?9:29))}return o},f.prototype._nextCell=function(s,y,g,n){if(s.getWidth()!==0){var o=s.getChars()==="",p=this._diffStyle(s,this._cursorStyle);if(o?!t(this._cursorStyle,s):p.length>0){this._nullCellCount>0&&(t(this._cursorStyle,this._backgroundCell)||(this._currentRow+="["+this._nullCellCount+"X"),this._currentRow+="["+this._nullCellCount+"C",this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=g,this._lastContentCursorCol=this._lastCursorCol=n,this._currentRow+="["+p.join(";")+"m";var a=this._buffer.getLine(g);a!==void 0&&(a.getCell(n,this._cursorStyle),this._cursorStyleRow=g,this._cursorStyleCol=n)}o?this._nullCellCount+=s.getWidth():(this._nullCellCount>0&&(t(this._cursorStyle,this._backgroundCell)||(this._currentRow+="["+this._nullCellCount+"X"),this._currentRow+="["+this._nullCellCount+"C",this._nullCellCount=0),this._currentRow+=s.getChars(),this._lastContentCursorRow=this._lastCursorRow=g,this._lastContentCursorCol=this._lastCursorCol=n+s.getWidth())}},f.prototype._serializeString=function(){var s=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(s=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);for(var y="",g=0;g<s;g++)y+=this._allRows[g],g+1<s&&(y+=this._allRowSeparators[g]);var n,o=this._buffer.baseY+this._buffer.cursorY,p=this._buffer.cursorX;return(o!==this._lastCursorRow||p!==this._lastCursorCol)&&((n=o-this._lastCursorRow)>0?y+="["+n+"B":n<0&&(y+="["+-n+"A"),function(a){a>0?y+="["+a+"C":a<0&&(y+="["+-a+"D")}(p-this._lastCursorCol)),y},f}(function(){function _(f){this._buffer=f}return _.prototype.serialize=function(f,s){var y=this._buffer.getNullCell(),g=this._buffer.getNullCell(),n=y;this._beforeSerialize(s-f,f,s);for(var o=f;o<s;o++){var p=this._buffer.getLine(o);if(p)for(var a=0;a<p.length;a++){var r=p.getCell(a,n===y?g:y);r?(this._nextCell(r,n,o,a),n=r):console.warn("Can't get cell at row="+o+", col="+a)}this._rowEnd(o,o===s-1)}return this._afterSerialize(),this._serializeString()},_.prototype._nextCell=function(f,s,y,g){},_.prototype._rowEnd=function(f,s){},_.prototype._beforeSerialize=function(f,s,y){},_.prototype._afterSerialize=function(){},_.prototype._serializeString=function(){return""},_}()),h=function(){function _(){}return _.prototype.activate=function(f){this._terminal=f},_.prototype._serializeBuffer=function(f,s,y){var g,n,o=s.length,p=new u(s,f),a=y===void 0?o:(g=y+f.rows,n=o,Math.max(0,Math.min(g,n)));return p.serialize(o-a,o)},_.prototype._serializeModes=function(f){var s="",y=f.modes;if(y.applicationCursorKeysMode&&(s+="[?1h"),y.applicationKeypadMode&&(s+="[?66h"),y.bracketedPasteMode&&(s+="[?2004h"),y.insertMode&&(s+="[4h"),y.originMode&&(s+="[?6h"),y.reverseWraparoundMode&&(s+="[?45h"),y.sendFocusMode&&(s+="[?1004h"),y.wraparoundMode===!1&&(s+="[?7l"),y.mouseTrackingMode!=="none")switch(y.mouseTrackingMode){case"x10":s+="[?9h";break;case"vt200":s+="[?1000h";break;case"drag":s+="[?1002h";break;case"any":s+="[?1003h"}return s},_.prototype.serialize=function(f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");var s=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,f==null?void 0:f.scrollback);return(f==null?void 0:f.excludeAltBuffer)||this._terminal.buffer.active.type==="alternate"&&(s+="[?1049h[H"+this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)),(f==null?void 0:f.excludeModes)||(s+=this._serializeModes(this._terminal)),s},_.prototype.dispose=function(){},_}();v.SerializeAddon=h}}[44](0,S),S})()})});var ri=we((Ye,Hr)=>{(function(S,l){typeof Ye=="object"&&typeof Hr=="object"?Hr.exports=l():typeof define=="function"&&define.amd?define([],l):typeof Ye=="object"?Ye.Unicode11Addon=l():S.Unicode11Addon=l()})(Ye,function(){return(()=>{"use strict";var S={433:(M,t,u)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV11=void 0;let h=u(455),_=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],f=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],s=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],y=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],g;function n(o,p){let a,r=0,e=p.length-1;if(o<p[0][0]||o>p[e][1])return!1;for(;e>=r;)if(a=r+e>>1,o>p[a][1])r=a+1;else{if(!(o<p[a][0]))return!0;e=a-1}return!1}t.UnicodeV11=class{constructor(){if(this.version="11",!g){g=new Uint8Array(65536),h.fill(g,1),g[0]=0,h.fill(g,0,1,32),h.fill(g,0,127,160);for(let o=0;o<_.length;++o)h.fill(g,0,_[o][0],_[o][1]+1);for(let o=0;o<s.length;++o)h.fill(g,2,s[o][0],s[o][1]+1)}}wcwidth(o){return o<32?0:o<127?1:o<65536?g[o]:n(o,f)?0:n(o,y)?2:1}}},455:(M,t)=>{function u(h,_,f,s){if(f===void 0&&(f=0),s===void 0&&(s=h.length),f>=h.length)return h;f=(h.length+f)%h.length,s=s>=h.length?h.length:(h.length+s)%h.length;for(var y=f;y<s;++y)h[y]=_;return h}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(h,_,f,s){return h.fill?h.fill(_,f,s):u(h,_,f,s)},t.fillFallback=u,t.concat=function(h,_){var f=new h.constructor(h.length+_.length);return f.set(h),f.set(_,h.length),f}}},l={};function v(M){var t=l[M];if(t!==void 0)return t.exports;var u=l[M]={exports:{}};return S[M](u,u.exports,v),u.exports}var R={};return(()=>{var M=R;Object.defineProperty(M,"__esModule",{value:!0}),M.Unicode11Addon=void 0;let t=v(433);M.Unicode11Addon=class{activate(u){u.unicode.register(new t.UnicodeV11)}dispose(){}}})(),R})()})});var oi=we(Jt=>{"use strict";Jt.byteLength=Gi;Jt.toByteArray=Xi;Jt.fromByteArray=Ji;var ye=[],ue=[],Vi=typeof Uint8Array!="undefined"?Uint8Array:Array,Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ke=0,ii=Fr.length;ke<ii;++ke)ye[ke]=Fr[ke],ue[Fr.charCodeAt(ke)]=ke;var ke,ii;ue["-".charCodeAt(0)]=62;ue["_".charCodeAt(0)]=63;function ni(S){var l=S.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=S.indexOf("=");v===-1&&(v=l);var R=v===l?0:4-v%4;return[v,R]}function Gi(S){var l=ni(S),v=l[0],R=l[1];return(v+R)*3/4-R}function Yi(S,l,v){return(l+v)*3/4-v}function Xi(S){var l,v=ni(S),R=v[0],M=v[1],t=new Vi(Yi(S,R,M)),u=0,h=M>0?R-4:R,_;for(_=0;_<h;_+=4)l=ue[S.charCodeAt(_)]<<18|ue[S.charCodeAt(_+1)]<<12|ue[S.charCodeAt(_+2)]<<6|ue[S.charCodeAt(_+3)],t[u++]=l>>16&255,t[u++]=l>>8&255,t[u++]=l&255;return M===2&&(l=ue[S.charCodeAt(_)]<<2|ue[S.charCodeAt(_+1)]>>4,t[u++]=l&255),M===1&&(l=ue[S.charCodeAt(_)]<<10|ue[S.charCodeAt(_+1)]<<4|ue[S.charCodeAt(_+2)]>>2,t[u++]=l>>8&255,t[u++]=l&255),t}function $i(S){return ye[S>>18&63]+ye[S>>12&63]+ye[S>>6&63]+ye[S&63]}function Zi(S,l,v){for(var R,M=[],t=l;t<v;t+=3)R=(S[t]<<16&16711680)+(S[t+1]<<8&65280)+(S[t+2]&255),M.push($i(R));return M.join("")}function Ji(S){for(var l,v=S.length,R=v%3,M=[],t=16383,u=0,h=v-R;u<h;u+=t)M.push(Zi(S,u,u+t>h?h:u+t));return R===1?(l=S[v-1],M.push(ye[l>>2]+ye[l<<4&63]+"==")):R===2&&(l=(S[v-2]<<8)+S[v-1],M.push(ye[l>>10]+ye[l>>4&63]+ye[l<<2&63]+"=")),M.join("")}});var si=we(jr=>{jr.read=function(S,l,v,R,M){var t,u,h=M*8-R-1,_=(1<<h)-1,f=_>>1,s=-7,y=v?M-1:0,g=v?-1:1,n=S[l+y];for(y+=g,t=n&(1<<-s)-1,n>>=-s,s+=h;s>0;t=t*256+S[l+y],y+=g,s-=8);for(u=t&(1<<-s)-1,t>>=-s,s+=R;s>0;u=u*256+S[l+y],y+=g,s-=8);if(t===0)t=1-f;else{if(t===_)return u?NaN:(n?-1:1)*(1/0);u=u+Math.pow(2,R),t=t-f}return(n?-1:1)*u*Math.pow(2,t-R)};jr.write=function(S,l,v,R,M,t){var u,h,_,f=t*8-M-1,s=(1<<f)-1,y=s>>1,g=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,n=R?0:t-1,o=R?1:-1,p=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(h=isNaN(l)?1:0,u=s):(u=Math.floor(Math.log(l)/Math.LN2),l*(_=Math.pow(2,-u))<1&&(u--,_*=2),u+y>=1?l+=g/_:l+=g*Math.pow(2,1-y),l*_>=2&&(u++,_/=2),u+y>=s?(h=0,u=s):u+y>=1?(h=(l*_-1)*Math.pow(2,M),u=u+y):(h=l*Math.pow(2,y-1)*Math.pow(2,M),u=0));M>=8;S[v+n]=h&255,n+=o,h/=256,M-=8);for(u=u<<M|h,f+=M;f>0;S[v+n]=u&255,n+=o,u/=256,f-=8);S[v+n-o]|=p*128}});var wi=we(We=>{"use strict";var Ur=oi(),Fe=si(),ai=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;We.Buffer=q;We.SlowBuffer=on;We.INSPECT_MAX_BYTES=50;var Qt=2147483647;We.kMaxLength=Qt;q.TYPED_ARRAY_SUPPORT=Qi();!q.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Qi(){try{let S=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(S,l),S.foo()===42}catch{return!1}}Object.defineProperty(q.prototype,"parent",{enumerable:!0,get:function(){if(!!q.isBuffer(this))return this.buffer}});Object.defineProperty(q.prototype,"offset",{enumerable:!0,get:function(){if(!!q.isBuffer(this))return this.byteOffset}});function Se(S){if(S>Qt)throw new RangeError('The value "'+S+'" is invalid for option "size"');let l=new Uint8Array(S);return Object.setPrototypeOf(l,q.prototype),l}function q(S,l,v){if(typeof S=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Wr(S)}return ci(S,l,v)}q.poolSize=8192;function ci(S,l,v){if(typeof S=="string")return tn(S,l);if(ArrayBuffer.isView(S))return rn(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(me(S,ArrayBuffer)||S&&me(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(me(S,SharedArrayBuffer)||S&&me(S.buffer,SharedArrayBuffer)))return Nr(S,l,v);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let R=S.valueOf&&S.valueOf();if(R!=null&&R!==S)return q.from(R,l,v);let M=nn(S);if(M)return M;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return q.from(S[Symbol.toPrimitive]("string"),l,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}q.from=function(S,l,v){return ci(S,l,v)};Object.setPrototypeOf(q.prototype,Uint8Array.prototype);Object.setPrototypeOf(q,Uint8Array);function li(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function en(S,l,v){return li(S),S<=0?Se(S):l!==void 0?typeof v=="string"?Se(S).fill(l,v):Se(S).fill(l):Se(S)}q.alloc=function(S,l,v){return en(S,l,v)};function Wr(S){return li(S),Se(S<0?0:zr(S)|0)}q.allocUnsafe=function(S){return Wr(S)};q.allocUnsafeSlow=function(S){return Wr(S)};function tn(S,l){if((typeof l!="string"||l==="")&&(l="utf8"),!q.isEncoding(l))throw new TypeError("Unknown encoding: "+l);let v=hi(S,l)|0,R=Se(v),M=R.write(S,l);return M!==v&&(R=R.slice(0,M)),R}function qr(S){let l=S.length<0?0:zr(S.length)|0,v=Se(l);for(let R=0;R<l;R+=1)v[R]=S[R]&255;return v}function rn(S){if(me(S,Uint8Array)){let l=new Uint8Array(S);return Nr(l.buffer,l.byteOffset,l.byteLength)}return qr(S)}function Nr(S,l,v){if(l<0||S.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<l+(v||0))throw new RangeError('"length" is outside of buffer bounds');let R;return l===void 0&&v===void 0?R=new Uint8Array(S):v===void 0?R=new Uint8Array(S,l):R=new Uint8Array(S,l,v),Object.setPrototypeOf(R,q.prototype),R}function nn(S){if(q.isBuffer(S)){let l=zr(S.length)|0,v=Se(l);return v.length===0||S.copy(v,0,0,l),v}if(S.length!==void 0)return typeof S.length!="number"||Gr(S.length)?Se(0):qr(S);if(S.type==="Buffer"&&Array.isArray(S.data))return qr(S.data)}function zr(S){if(S>=Qt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qt.toString(16)+" bytes");return S|0}function on(S){return+S!=S&&(S=0),q.alloc(+S)}q.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==q.prototype};q.compare=function(l,v){if(me(l,Uint8Array)&&(l=q.from(l,l.offset,l.byteLength)),me(v,Uint8Array)&&(v=q.from(v,v.offset,v.byteLength)),!q.isBuffer(l)||!q.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===v)return 0;let R=l.length,M=v.length;for(let t=0,u=Math.min(R,M);t<u;++t)if(l[t]!==v[t]){R=l[t],M=v[t];break}return R<M?-1:M<R?1:0};q.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};q.concat=function(l,v){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return q.alloc(0);let R;if(v===void 0)for(v=0,R=0;R<l.length;++R)v+=l[R].length;let M=q.allocUnsafe(v),t=0;for(R=0;R<l.length;++R){let u=l[R];if(me(u,Uint8Array))t+u.length>M.length?(q.isBuffer(u)||(u=q.from(u)),u.copy(M,t)):Uint8Array.prototype.set.call(M,u,t);else if(q.isBuffer(u))u.copy(M,t);else throw new TypeError('"list" argument must be an Array of Buffers');t+=u.length}return M};function hi(S,l){if(q.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||me(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);let v=S.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&v===0)return 0;let M=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return Vr(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return bi(S).length;default:if(M)return R?-1:Vr(S).length;l=(""+l).toLowerCase(),M=!0}}q.byteLength=hi;function sn(S,l,v){let R=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,l>>>=0,v<=l))return"";for(S||(S="utf8");;)switch(S){case"hex":return vn(this,l,v);case"utf8":case"utf-8":return di(this,l,v);case"ascii":return _n(this,l,v);case"latin1":case"binary":return pn(this,l,v);case"base64":return fn(this,l,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gn(this,l,v);default:if(R)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),R=!0}}q.prototype._isBuffer=!0;function Be(S,l,v){let R=S[l];S[l]=S[v],S[v]=R}q.prototype.swap16=function(){let l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<l;v+=2)Be(this,v,v+1);return this};q.prototype.swap32=function(){let l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<l;v+=4)Be(this,v,v+3),Be(this,v+1,v+2);return this};q.prototype.swap64=function(){let l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<l;v+=8)Be(this,v,v+7),Be(this,v+1,v+6),Be(this,v+2,v+5),Be(this,v+3,v+4);return this};q.prototype.toString=function(){let l=this.length;return l===0?"":arguments.length===0?di(this,0,l):sn.apply(this,arguments)};q.prototype.toLocaleString=q.prototype.toString;q.prototype.equals=function(l){if(!q.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:q.compare(this,l)===0};q.prototype.inspect=function(){let l="",v=We.INSPECT_MAX_BYTES;return l=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(l+=" ... "),"<Buffer "+l+">"};ai&&(q.prototype[ai]=q.prototype.inspect);q.prototype.compare=function(l,v,R,M,t){if(me(l,Uint8Array)&&(l=q.from(l,l.offset,l.byteLength)),!q.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(v===void 0&&(v=0),R===void 0&&(R=l?l.length:0),M===void 0&&(M=0),t===void 0&&(t=this.length),v<0||R>l.length||M<0||t>this.length)throw new RangeError("out of range index");if(M>=t&&v>=R)return 0;if(M>=t)return-1;if(v>=R)return 1;if(v>>>=0,R>>>=0,M>>>=0,t>>>=0,this===l)return 0;let u=t-M,h=R-v,_=Math.min(u,h),f=this.slice(M,t),s=l.slice(v,R);for(let y=0;y<_;++y)if(f[y]!==s[y]){u=f[y],h=s[y];break}return u<h?-1:h<u?1:0};function ui(S,l,v,R,M){if(S.length===0)return-1;if(typeof v=="string"?(R=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,Gr(v)&&(v=M?0:S.length-1),v<0&&(v=S.length+v),v>=S.length){if(M)return-1;v=S.length-1}else if(v<0)if(M)v=0;else return-1;if(typeof l=="string"&&(l=q.from(l,R)),q.isBuffer(l))return l.length===0?-1:fi(S,l,v,R,M);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(S,l,v):Uint8Array.prototype.lastIndexOf.call(S,l,v):fi(S,[l],v,R,M);throw new TypeError("val must be string, number or Buffer")}function fi(S,l,v,R,M){let t=1,u=S.length,h=l.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(S.length<2||l.length<2)return-1;t=2,u/=2,h/=2,v/=2}function _(s,y){return t===1?s[y]:s.readUInt16BE(y*t)}let f;if(M){let s=-1;for(f=v;f<u;f++)if(_(S,f)===_(l,s===-1?0:f-s)){if(s===-1&&(s=f),f-s+1===h)return s*t}else s!==-1&&(f-=f-s),s=-1}else for(v+h>u&&(v=u-h),f=v;f>=0;f--){let s=!0;for(let y=0;y<h;y++)if(_(S,f+y)!==_(l,y)){s=!1;break}if(s)return f}return-1}q.prototype.includes=function(l,v,R){return this.indexOf(l,v,R)!==-1};q.prototype.indexOf=function(l,v,R){return ui(this,l,v,R,!0)};q.prototype.lastIndexOf=function(l,v,R){return ui(this,l,v,R,!1)};function an(S,l,v,R){v=Number(v)||0;let M=S.length-v;R?(R=Number(R),R>M&&(R=M)):R=M;let t=l.length;R>t/2&&(R=t/2);let u;for(u=0;u<R;++u){let h=parseInt(l.substr(u*2,2),16);if(Gr(h))return u;S[v+u]=h}return u}function cn(S,l,v,R){return er(Vr(l,S.length-v),S,v,R)}function ln(S,l,v,R){return er(Sn(l),S,v,R)}function hn(S,l,v,R){return er(bi(l),S,v,R)}function un(S,l,v,R){return er(bn(l,S.length-v),S,v,R)}q.prototype.write=function(l,v,R,M){if(v===void 0)M="utf8",R=this.length,v=0;else if(R===void 0&&typeof v=="string")M=v,R=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(R)?(R=R>>>0,M===void 0&&(M="utf8")):(M=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let t=this.length-v;if((R===void 0||R>t)&&(R=t),l.length>0&&(R<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let u=!1;for(;;)switch(M){case"hex":return an(this,l,v,R);case"utf8":case"utf-8":return cn(this,l,v,R);case"ascii":case"latin1":case"binary":return ln(this,l,v,R);case"base64":return hn(this,l,v,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return un(this,l,v,R);default:if(u)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),u=!0}};q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fn(S,l,v){return l===0&&v===S.length?Ur.fromByteArray(S):Ur.fromByteArray(S.slice(l,v))}function di(S,l,v){v=Math.min(S.length,v);let R=[],M=l;for(;M<v;){let t=S[M],u=null,h=t>239?4:t>223?3:t>191?2:1;if(M+h<=v){let _,f,s,y;switch(h){case 1:t<128&&(u=t);break;case 2:_=S[M+1],(_&192)==128&&(y=(t&31)<<6|_&63,y>127&&(u=y));break;case 3:_=S[M+1],f=S[M+2],(_&192)==128&&(f&192)==128&&(y=(t&15)<<12|(_&63)<<6|f&63,y>2047&&(y<55296||y>57343)&&(u=y));break;case 4:_=S[M+1],f=S[M+2],s=S[M+3],(_&192)==128&&(f&192)==128&&(s&192)==128&&(y=(t&15)<<18|(_&63)<<12|(f&63)<<6|s&63,y>65535&&y<1114112&&(u=y))}}u===null?(u=65533,h=1):u>65535&&(u-=65536,R.push(u>>>10&1023|55296),u=56320|u&1023),R.push(u),M+=h}return dn(R)}var _i=4096;function dn(S){let l=S.length;if(l<=_i)return String.fromCharCode.apply(String,S);let v="",R=0;for(;R<l;)v+=String.fromCharCode.apply(String,S.slice(R,R+=_i));return v}function _n(S,l,v){let R="";v=Math.min(S.length,v);for(let M=l;M<v;++M)R+=String.fromCharCode(S[M]&127);return R}function pn(S,l,v){let R="";v=Math.min(S.length,v);for(let M=l;M<v;++M)R+=String.fromCharCode(S[M]);return R}function vn(S,l,v){let R=S.length;(!l||l<0)&&(l=0),(!v||v<0||v>R)&&(v=R);let M="";for(let t=l;t<v;++t)M+=wn[S[t]];return M}function gn(S,l,v){let R=S.slice(l,v),M="";for(let t=0;t<R.length-1;t+=2)M+=String.fromCharCode(R[t]+R[t+1]*256);return M}q.prototype.slice=function(l,v){let R=this.length;l=~~l,v=v===void 0?R:~~v,l<0?(l+=R,l<0&&(l=0)):l>R&&(l=R),v<0?(v+=R,v<0&&(v=0)):v>R&&(v=R),v<l&&(v=l);let M=this.subarray(l,v);return Object.setPrototypeOf(M,q.prototype),M};function re(S,l,v){if(S%1!=0||S<0)throw new RangeError("offset is not uint");if(S+l>v)throw new RangeError("Trying to access beyond buffer length")}q.prototype.readUintLE=q.prototype.readUIntLE=function(l,v,R){l=l>>>0,v=v>>>0,R||re(l,v,this.length);let M=this[l],t=1,u=0;for(;++u<v&&(t*=256);)M+=this[l+u]*t;return M};q.prototype.readUintBE=q.prototype.readUIntBE=function(l,v,R){l=l>>>0,v=v>>>0,R||re(l,v,this.length);let M=this[l+--v],t=1;for(;v>0&&(t*=256);)M+=this[l+--v]*t;return M};q.prototype.readUint8=q.prototype.readUInt8=function(l,v){return l=l>>>0,v||re(l,1,this.length),this[l]};q.prototype.readUint16LE=q.prototype.readUInt16LE=function(l,v){return l=l>>>0,v||re(l,2,this.length),this[l]|this[l+1]<<8};q.prototype.readUint16BE=q.prototype.readUInt16BE=function(l,v){return l=l>>>0,v||re(l,2,this.length),this[l]<<8|this[l+1]};q.prototype.readUint32LE=q.prototype.readUInt32LE=function(l,v){return l=l>>>0,v||re(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216};q.prototype.readUint32BE=q.prototype.readUInt32BE=function(l,v){return l=l>>>0,v||re(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])};q.prototype.readBigUInt64LE=Le(function(l){l=l>>>0,Ue(l,"offset");let v=this[l],R=this[l+7];(v===void 0||R===void 0)&&Xe(l,this.length-8);let M=v+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,t=this[++l]+this[++l]*2**8+this[++l]*2**16+R*2**24;return BigInt(M)+(BigInt(t)<<BigInt(32))});q.prototype.readBigUInt64BE=Le(function(l){l=l>>>0,Ue(l,"offset");let v=this[l],R=this[l+7];(v===void 0||R===void 0)&&Xe(l,this.length-8);let M=v*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],t=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+R;return(BigInt(M)<<BigInt(32))+BigInt(t)});q.prototype.readIntLE=function(l,v,R){l=l>>>0,v=v>>>0,R||re(l,v,this.length);let M=this[l],t=1,u=0;for(;++u<v&&(t*=256);)M+=this[l+u]*t;return t*=128,M>=t&&(M-=Math.pow(2,8*v)),M};q.prototype.readIntBE=function(l,v,R){l=l>>>0,v=v>>>0,R||re(l,v,this.length);let M=v,t=1,u=this[l+--M];for(;M>0&&(t*=256);)u+=this[l+--M]*t;return t*=128,u>=t&&(u-=Math.pow(2,8*v)),u};q.prototype.readInt8=function(l,v){return l=l>>>0,v||re(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]};q.prototype.readInt16LE=function(l,v){l=l>>>0,v||re(l,2,this.length);let R=this[l]|this[l+1]<<8;return R&32768?R|4294901760:R};q.prototype.readInt16BE=function(l,v){l=l>>>0,v||re(l,2,this.length);let R=this[l+1]|this[l]<<8;return R&32768?R|4294901760:R};q.prototype.readInt32LE=function(l,v){return l=l>>>0,v||re(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24};q.prototype.readInt32BE=function(l,v){return l=l>>>0,v||re(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]};q.prototype.readBigInt64LE=Le(function(l){l=l>>>0,Ue(l,"offset");let v=this[l],R=this[l+7];(v===void 0||R===void 0)&&Xe(l,this.length-8);let M=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(R<<24);return(BigInt(M)<<BigInt(32))+BigInt(v+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)});q.prototype.readBigInt64BE=Le(function(l){l=l>>>0,Ue(l,"offset");let v=this[l],R=this[l+7];(v===void 0||R===void 0)&&Xe(l,this.length-8);let M=(v<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(M)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+R)});q.prototype.readFloatLE=function(l,v){return l=l>>>0,v||re(l,4,this.length),Fe.read(this,l,!0,23,4)};q.prototype.readFloatBE=function(l,v){return l=l>>>0,v||re(l,4,this.length),Fe.read(this,l,!1,23,4)};q.prototype.readDoubleLE=function(l,v){return l=l>>>0,v||re(l,8,this.length),Fe.read(this,l,!0,52,8)};q.prototype.readDoubleBE=function(l,v){return l=l>>>0,v||re(l,8,this.length),Fe.read(this,l,!1,52,8)};function ae(S,l,v,R,M,t){if(!q.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>M||l<t)throw new RangeError('"value" argument is out of bounds');if(v+R>S.length)throw new RangeError("Index out of range")}q.prototype.writeUintLE=q.prototype.writeUIntLE=function(l,v,R,M){if(l=+l,v=v>>>0,R=R>>>0,!M){let h=Math.pow(2,8*R)-1;ae(this,l,v,R,h,0)}let t=1,u=0;for(this[v]=l&255;++u<R&&(t*=256);)this[v+u]=l/t&255;return v+R};q.prototype.writeUintBE=q.prototype.writeUIntBE=function(l,v,R,M){if(l=+l,v=v>>>0,R=R>>>0,!M){let h=Math.pow(2,8*R)-1;ae(this,l,v,R,h,0)}let t=R-1,u=1;for(this[v+t]=l&255;--t>=0&&(u*=256);)this[v+t]=l/u&255;return v+R};q.prototype.writeUint8=q.prototype.writeUInt8=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,1,255,0),this[v]=l&255,v+1};q.prototype.writeUint16LE=q.prototype.writeUInt16LE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,2,65535,0),this[v]=l&255,this[v+1]=l>>>8,v+2};q.prototype.writeUint16BE=q.prototype.writeUInt16BE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,2,65535,0),this[v]=l>>>8,this[v+1]=l&255,v+2};q.prototype.writeUint32LE=q.prototype.writeUInt32LE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,4,4294967295,0),this[v+3]=l>>>24,this[v+2]=l>>>16,this[v+1]=l>>>8,this[v]=l&255,v+4};q.prototype.writeUint32BE=q.prototype.writeUInt32BE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,4,4294967295,0),this[v]=l>>>24,this[v+1]=l>>>16,this[v+2]=l>>>8,this[v+3]=l&255,v+4};function pi(S,l,v,R,M){Si(l,R,M,S,v,7);let t=Number(l&BigInt(4294967295));S[v++]=t,t=t>>8,S[v++]=t,t=t>>8,S[v++]=t,t=t>>8,S[v++]=t;let u=Number(l>>BigInt(32)&BigInt(4294967295));return S[v++]=u,u=u>>8,S[v++]=u,u=u>>8,S[v++]=u,u=u>>8,S[v++]=u,v}function vi(S,l,v,R,M){Si(l,R,M,S,v,7);let t=Number(l&BigInt(4294967295));S[v+7]=t,t=t>>8,S[v+6]=t,t=t>>8,S[v+5]=t,t=t>>8,S[v+4]=t;let u=Number(l>>BigInt(32)&BigInt(4294967295));return S[v+3]=u,u=u>>8,S[v+2]=u,u=u>>8,S[v+1]=u,u=u>>8,S[v]=u,v+8}q.prototype.writeBigUInt64LE=Le(function(l,v=0){return pi(this,l,v,BigInt(0),BigInt("0xffffffffffffffff"))});q.prototype.writeBigUInt64BE=Le(function(l,v=0){return vi(this,l,v,BigInt(0),BigInt("0xffffffffffffffff"))});q.prototype.writeIntLE=function(l,v,R,M){if(l=+l,v=v>>>0,!M){let _=Math.pow(2,8*R-1);ae(this,l,v,R,_-1,-_)}let t=0,u=1,h=0;for(this[v]=l&255;++t<R&&(u*=256);)l<0&&h===0&&this[v+t-1]!==0&&(h=1),this[v+t]=(l/u>>0)-h&255;return v+R};q.prototype.writeIntBE=function(l,v,R,M){if(l=+l,v=v>>>0,!M){let _=Math.pow(2,8*R-1);ae(this,l,v,R,_-1,-_)}let t=R-1,u=1,h=0;for(this[v+t]=l&255;--t>=0&&(u*=256);)l<0&&h===0&&this[v+t+1]!==0&&(h=1),this[v+t]=(l/u>>0)-h&255;return v+R};q.prototype.writeInt8=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,1,127,-128),l<0&&(l=255+l+1),this[v]=l&255,v+1};q.prototype.writeInt16LE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,2,32767,-32768),this[v]=l&255,this[v+1]=l>>>8,v+2};q.prototype.writeInt16BE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,2,32767,-32768),this[v]=l>>>8,this[v+1]=l&255,v+2};q.prototype.writeInt32LE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,4,2147483647,-2147483648),this[v]=l&255,this[v+1]=l>>>8,this[v+2]=l>>>16,this[v+3]=l>>>24,v+4};q.prototype.writeInt32BE=function(l,v,R){return l=+l,v=v>>>0,R||ae(this,l,v,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[v]=l>>>24,this[v+1]=l>>>16,this[v+2]=l>>>8,this[v+3]=l&255,v+4};q.prototype.writeBigInt64LE=Le(function(l,v=0){return pi(this,l,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});q.prototype.writeBigInt64BE=Le(function(l,v=0){return vi(this,l,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gi(S,l,v,R,M,t){if(v+R>S.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function yi(S,l,v,R,M){return l=+l,v=v>>>0,M||gi(S,l,v,4,34028234663852886e22,-34028234663852886e22),Fe.write(S,l,v,R,23,4),v+4}q.prototype.writeFloatLE=function(l,v,R){return yi(this,l,v,!0,R)};q.prototype.writeFloatBE=function(l,v,R){return yi(this,l,v,!1,R)};function mi(S,l,v,R,M){return l=+l,v=v>>>0,M||gi(S,l,v,8,17976931348623157e292,-17976931348623157e292),Fe.write(S,l,v,R,52,8),v+8}q.prototype.writeDoubleLE=function(l,v,R){return mi(this,l,v,!0,R)};q.prototype.writeDoubleBE=function(l,v,R){return mi(this,l,v,!1,R)};q.prototype.copy=function(l,v,R,M){if(!q.isBuffer(l))throw new TypeError("argument should be a Buffer");if(R||(R=0),!M&&M!==0&&(M=this.length),v>=l.length&&(v=l.length),v||(v=0),M>0&&M<R&&(M=R),M===R||l.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),l.length-v<M-R&&(M=l.length-v+R);let t=M-R;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,R,M):Uint8Array.prototype.set.call(l,this.subarray(R,M),v),t};q.prototype.fill=function(l,v,R,M){if(typeof l=="string"){if(typeof v=="string"?(M=v,v=0,R=this.length):typeof R=="string"&&(M=R,R=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!q.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(l.length===1){let u=l.charCodeAt(0);(M==="utf8"&&u<128||M==="latin1")&&(l=u)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(v<0||this.length<v||this.length<R)throw new RangeError("Out of range index");if(R<=v)return this;v=v>>>0,R=R===void 0?this.length:R>>>0,l||(l=0);let t;if(typeof l=="number")for(t=v;t<R;++t)this[t]=l;else{let u=q.isBuffer(l)?l:q.from(l,M),h=u.length;if(h===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(t=0;t<R-v;++t)this[t+v]=u[t%h]}return this};var je={};function Kr(S,l,v){je[S]=class extends v{constructor(){super();Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}Kr("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Kr("ERR_INVALID_ARG_TYPE",function(S,l){return`The "${S}" argument must be of type number. Received type ${typeof l}`},TypeError);Kr("ERR_OUT_OF_RANGE",function(S,l,v){let R=`The value of "${S}" is out of range.`,M=v;return Number.isInteger(v)&&Math.abs(v)>2**32?M=Ci(String(v)):typeof v=="bigint"&&(M=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(M=Ci(M)),M+="n"),R+=` It must be ${l}. Received ${M}`,R},RangeError);function Ci(S){let l="",v=S.length,R=S[0]==="-"?1:0;for(;v>=R+4;v-=3)l=`_${S.slice(v-3,v)}${l}`;return`${S.slice(0,v)}${l}`}function yn(S,l,v){Ue(l,"offset"),(S[l]===void 0||S[l+v]===void 0)&&Xe(l,S.length-(v+1))}function Si(S,l,v,R,M,t){if(S>v||S<l){let u=typeof l=="bigint"?"n":"",h;throw t>3?l===0||l===BigInt(0)?h=`>= 0${u} and < 2${u} ** ${(t+1)*8}${u}`:h=`>= -(2${u} ** ${(t+1)*8-1}${u}) and < 2 ** ${(t+1)*8-1}${u}`:h=`>= ${l}${u} and <= ${v}${u}`,new je.ERR_OUT_OF_RANGE("value",h,S)}yn(R,M,t)}function Ue(S,l){if(typeof S!="number")throw new je.ERR_INVALID_ARG_TYPE(l,"number",S)}function Xe(S,l,v){throw Math.floor(S)!==S?(Ue(S,v),new je.ERR_OUT_OF_RANGE(v||"offset","an integer",S)):l<0?new je.ERR_BUFFER_OUT_OF_BOUNDS:new je.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${l}`,S)}var mn=/[^+/0-9A-Za-z-_]/g;function Cn(S){if(S=S.split("=")[0],S=S.trim().replace(mn,""),S.length<2)return"";for(;S.length%4!=0;)S=S+"=";return S}function Vr(S,l){l=l||1/0;let v,R=S.length,M=null,t=[];for(let u=0;u<R;++u){if(v=S.charCodeAt(u),v>55295&&v<57344){if(!M){if(v>56319){(l-=3)>-1&&t.push(239,191,189);continue}else if(u+1===R){(l-=3)>-1&&t.push(239,191,189);continue}M=v;continue}if(v<56320){(l-=3)>-1&&t.push(239,191,189),M=v;continue}v=(M-55296<<10|v-56320)+65536}else M&&(l-=3)>-1&&t.push(239,191,189);if(M=null,v<128){if((l-=1)<0)break;t.push(v)}else if(v<2048){if((l-=2)<0)break;t.push(v>>6|192,v&63|128)}else if(v<65536){if((l-=3)<0)break;t.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((l-=4)<0)break;t.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return t}function Sn(S){let l=[];for(let v=0;v<S.length;++v)l.push(S.charCodeAt(v)&255);return l}function bn(S,l){let v,R,M,t=[];for(let u=0;u<S.length&&!((l-=2)<0);++u)v=S.charCodeAt(u),R=v>>8,M=v%256,t.push(M),t.push(R);return t}function bi(S){return Ur.toByteArray(Cn(S))}function er(S,l,v,R){let M;for(M=0;M<R&&!(M+v>=l.length||M>=S.length);++M)l[M+v]=S[M];return M}function me(S,l){return S instanceof l||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===l.name}function Gr(S){return S!==S}var wn=function(){let S="0123456789abcdef",l=new Array(256);for(let v=0;v<16;++v){let R=v*16;for(let M=0;M<16;++M)l[R+M]=S[v]+S[M]}return l}();function Le(S){return typeof BigInt=="undefined"?Ln:S}function Ln(){throw new Error("BigInt not supported")}});var Li=He(Jr()),Ei=He(Qr()),xi=He(ei()),Ai=He(ti()),Mi=He(ri()),Ri=He(wi()),ki;(function(R){R.block="block",R.underline="underline",R.bar="bar"})(ki||(ki={}));var Bi;(function(v){v.none="none",v.sound="sound"})(Bi||(Bi={}));var $e;(function(R){R.hidden="hidden",R.autoHiding="autoHiding",R.visible="visible"})($e||($e={}));window.chrome.webview.addEventListener("message",S=>{switch(console.log("got message",S),S.data.$type){case"create-terminal":xn(S.data.options,S.data.colors,S.data.keyBindings);break;case"write-output":let l=Ri.Buffer.from(S.data.data,"base64").toString();console.log("output",l),ie.write(l);break}});var ie,Ze,Ti,Oi;var Di;var Te=document.getElementById("terminal-container");function Yr(S,l,v){return v.split(S).join(l)}function En(S){return S=Yr("&quot;",'"',S),S=Yr("&squo;","'",S),Yr("&bsol;","\\",S)}function xn(S,l,v){for(console.log("createTerminal entered",S);Te.children.length;)Te.removeChild(Te.children[0]);console.log("removed children"),An(S.scrollBarStyle),console.log("set scrollbar");let R={fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:Rn(S.fontWeight),cursorStyle:S.cursorStyle,cursorBlink:S.cursorBlink,bellStyle:S.bellStyle,scrollback:S.scrollBackLimit,allowTransparency:!0,theme:l,windowsMode:!0,wordSeparator:En(S.wordSeparator)};ie=new Li.Terminal(R),ie.onData(t=>{console.log("input",t),window.chrome.webview.postMessage({$type:"input-received",data:t})}),ie.onBinary(t=>{console.log("binary",t)}),ie.onResize(t=>{window.chrome.webview.postMessage({$type:"terminal-resized",size:{columns:ie.cols,rows:ie.rows}})}),ie.onTitleChange(t=>{window.chrome.webview.postMessage({$type:"title-changed",title:t})}),console.log("created term"),Ti=new xi.SearchAddon,ie.loadAddon(Ti),Ze=new Ei.FitAddon,ie.loadAddon(Ze),Oi=new Ai.SerializeAddon,ie.loadAddon(Oi),Di=new Mi.Unicode11Addon,ie.loadAddon(Di),ie.unicode.activeVersion="11",console.log("done with addons"),ie.open(Te),Ze.fit(),ie.focus(),console.log("open, fit, focus one"),Mn(S.padding),console.log("set padding");let M;window.onresize=function(){clearTimeout(M),M=setTimeout(()=>Ze.fit(),500)},window.chrome.webview.postMessage({$type:"terminal-resized",size:{columns:ie.cols,rows:ie.rows}}),console.log("sent size")}function An(S){switch(S){case $e.hidden:return Te.style.setProperty("-ms-overflow-style","none");case $e.autoHiding:return Te.style.setProperty("-ms-overflow-style","-ms-autohiding-scrollbar");case $e.visible:return Te.style.setProperty("-ms-overflow-style","scrollbar")}}function Mn(S){let l=document.querySelector(".terminal");l.style.padding=S+"px",Ze.fit()}document.oncontextmenu=function(){return!1};function Rn(S){return parseInt(S.toString())>600?"900":"bold"}})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=bundle.js.map

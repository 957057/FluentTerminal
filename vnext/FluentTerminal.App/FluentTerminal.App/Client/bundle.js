(()=>{var ji=Object.create;var Tr=Object.defineProperty;var Ui=Object.getOwnPropertyDescriptor;var Wi=Object.getOwnPropertyNames;var qi=Object.getPrototypeOf,Ni=Object.prototype.hasOwnProperty;var zi=S=>Tr(S,"__esModule",{value:!0});var be=(S,c)=>()=>(c||S((c={exports:{}}).exports,c),c.exports);var Ki=(S,c,v)=>{if(c&&typeof c=="object"||typeof c=="function")for(let A of Wi(c))!Ni.call(S,A)&&A!=="default"&&Tr(S,A,{get:()=>c[A],enumerable:!(v=Ui(c,A))||v.enumerable});return S},Ie=S=>Ki(zi(Tr(S!=null?ji(qi(S)):{},"default",S&&S.__esModule&&"default"in S?{get:()=>S.default,enumerable:!0}:{value:S,enumerable:!0})),S);var $r=be((Yt,Dr)=>{(function(S,c){if(typeof Yt=="object"&&typeof Dr=="object")Dr.exports=c();else if(typeof define=="function"&&define.amd)define([],c);else{var v=c();for(var A in v)(typeof Yt=="object"?Yt:S)[A]=v[A]}})(self,function(){return(()=>{"use strict";var S={4567:function(x,t,f){var l,p=this&&this.__extends||(l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,h){r.__proto__=h}||function(r,h){for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(r[u]=h[u])})(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var _=f(9042),a=f(6114),m=f(9924),g=f(3656),n=f(844),o=f(5596),d=f(9631),s=function(i){function e(r,h){var u=i.call(this)||this;u._terminal=r,u._renderService=h,u._liveRegionLineCount=0,u._charsToConsume=[],u._charsToAnnounce="",u._accessibilityTreeRoot=document.createElement("div"),u._accessibilityTreeRoot.classList.add("xterm-accessibility"),u._rowContainer=document.createElement("div"),u._rowContainer.setAttribute("role","list"),u._rowContainer.classList.add("xterm-accessibility-tree"),u._rowElements=[];for(var y=0;y<u._terminal.rows;y++)u._rowElements[y]=u._createAccessibilityTreeNode(),u._rowContainer.appendChild(u._rowElements[y]);if(u._topBoundaryFocusListener=function(C){return u._onBoundaryFocus(C,0)},u._bottomBoundaryFocusListener=function(C){return u._onBoundaryFocus(C,1)},u._rowElements[0].addEventListener("focus",u._topBoundaryFocusListener),u._rowElements[u._rowElements.length-1].addEventListener("focus",u._bottomBoundaryFocusListener),u._refreshRowsDimensions(),u._accessibilityTreeRoot.appendChild(u._rowContainer),u._renderRowsDebouncer=new m.TimeBasedDebouncer(u._renderRows.bind(u)),u._refreshRows(),u._liveRegion=document.createElement("div"),u._liveRegion.classList.add("live-region"),u._liveRegion.setAttribute("aria-live","assertive"),u._accessibilityTreeRoot.appendChild(u._liveRegion),!u._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return u._terminal.element.insertAdjacentElement("afterbegin",u._accessibilityTreeRoot),u.register(u._renderRowsDebouncer),u.register(u._terminal.onResize(function(C){return u._onResize(C.rows)})),u.register(u._terminal.onRender(function(C){return u._refreshRows(C.start,C.end)})),u.register(u._terminal.onScroll(function(){return u._refreshRows()})),u.register(u._terminal.onA11yChar(function(C){return u._onChar(C)})),u.register(u._terminal.onLineFeed(function(){return u._onChar(`
`)})),u.register(u._terminal.onA11yTab(function(C){return u._onTab(C)})),u.register(u._terminal.onKey(function(C){return u._onKey(C.key)})),u.register(u._terminal.onBlur(function(){return u._clearLiveRegion()})),u.register(u._renderService.onDimensionsChange(function(){return u._refreshRowsDimensions()})),u._screenDprMonitor=new o.ScreenDprMonitor,u.register(u._screenDprMonitor),u._screenDprMonitor.setListener(function(){return u._refreshRowsDimensions()}),u.register(g.addDisposableDomListener(window,"resize",function(){return u._refreshRowsDimensions()})),u}return p(e,i),e.prototype.dispose=function(){i.prototype.dispose.call(this),d.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,h){var u=r.target,y=this._rowElements[h===0?1:this._rowElements.length-2];if(u.getAttribute("aria-posinset")!==(h===0?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===y){var C,E;if(h===0?(C=u,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(C=this._rowElements.shift(),E=u,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){var b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else b=this._createAccessibilityTreeNode(),this._rowElements.push(b),this._rowContainer.appendChild(b);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var h=0;h<r;h++)this._onChar(" ")},e.prototype._onChar=function(r){var h=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=_.tooMuchOutput)),a.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){h._accessibilityTreeRoot.appendChild(h._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,a.isMac&&d.removeElementFromParent(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,h){this._renderRowsDebouncer.refresh(r,h,this._terminal.rows)},e.prototype._renderRows=function(r,h){for(var u=this._terminal.buffer,y=u.lines.length.toString(),C=r;C<=h;C++){var E=u.translateBufferLineToString(u.ydisp+C,!0),b=(u.ydisp+C+1).toString(),L=this._rowElements[C];L&&(E.length===0?L.innerText="\xA0":L.textContent=E,L.setAttribute("aria-posinset",b),L.setAttribute("aria-setsize",y))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(n.Disposable);t.AccessibilityManager=s},3614:(x,t)=>{function f(a){return a.replace(/\r?\n/g,"\r")}function l(a,m){return m?"[200~"+a+"[201~":a}function p(a,m,g){a=l(a=f(a),g.decPrivateModes.bracketedPasteMode),g.triggerDataEvent(a,!0),m.value=""}function _(a,m,g){var n=g.getBoundingClientRect(),o=a.clientX-n.left-10,d=a.clientY-n.top-10;m.style.width="20px",m.style.height="20px",m.style.left=o+"px",m.style.top=d+"px",m.style.zIndex="1000",m.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=f,t.bracketTextForPaste=l,t.copyHandler=function(a,m){a.clipboardData&&a.clipboardData.setData("text/plain",m.selectionText),a.preventDefault()},t.handlePasteEvent=function(a,m,g){a.stopPropagation(),a.clipboardData&&p(a.clipboardData.getData("text/plain"),m,g)},t.paste=p,t.moveTextAreaUnderMouseCursor=_,t.rightClickHandler=function(a,m,g,n,o){_(a,m,g),o&&n.rightClickSelect(a),m.value=n.selectionText,m.select()}},4774:(x,t)=>{var f,l,p,_;function a(g){var n=g.toString(16);return n.length<2?"0"+n:n}function m(g,n){return g<n?(n+.05)/(g+.05):(g+.05)/(n+.05)}Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(g){g.toCss=function(n,o,d,s){return s!==void 0?"#"+a(n)+a(o)+a(d)+a(s):"#"+a(n)+a(o)+a(d)},g.toRgba=function(n,o,d,s){return s===void 0&&(s=255),(n<<24|o<<16|d<<8|s)>>>0}}(f=t.channels||(t.channels={})),(l=t.color||(t.color={})).blend=function(g,n){var o=(255&n.rgba)/255;if(o===1)return{css:n.css,rgba:n.rgba};var d=n.rgba>>24&255,s=n.rgba>>16&255,i=n.rgba>>8&255,e=g.rgba>>24&255,r=g.rgba>>16&255,h=g.rgba>>8&255,u=e+Math.round((d-e)*o),y=r+Math.round((s-r)*o),C=h+Math.round((i-h)*o);return{css:f.toCss(u,y,C),rgba:f.toRgba(u,y,C)}},l.isOpaque=function(g){return(255&g.rgba)==255},l.ensureContrastRatio=function(g,n,o){var d=_.ensureContrastRatio(g.rgba,n.rgba,o);if(d)return _.toColor(d>>24&255,d>>16&255,d>>8&255)},l.opaque=function(g){var n=(255|g.rgba)>>>0,o=_.toChannels(n),d=o[0],s=o[1],i=o[2];return{css:f.toCss(d,s,i),rgba:n}},l.opacity=function(g,n){var o=Math.round(255*n),d=_.toChannels(g.rgba),s=d[0],i=d[1],e=d[2];return{css:f.toCss(s,i,e,o),rgba:f.toRgba(s,i,e,o)}},(t.css||(t.css={})).toColor=function(g){switch(g.length){case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(g){function n(o,d,s){var i=o/255,e=d/255,r=s/255;return .2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}g.relativeLuminance=function(o){return n(o>>16&255,o>>8&255,255&o)},g.relativeLuminance2=n}(p=t.rgb||(t.rgb={})),function(g){function n(d,s,i){for(var e=d>>24&255,r=d>>16&255,h=d>>8&255,u=s>>24&255,y=s>>16&255,C=s>>8&255,E=m(p.relativeLuminance2(u,C,y),p.relativeLuminance2(e,r,h));E<i&&(u>0||y>0||C>0);)u-=Math.max(0,Math.ceil(.1*u)),y-=Math.max(0,Math.ceil(.1*y)),C-=Math.max(0,Math.ceil(.1*C)),E=m(p.relativeLuminance2(u,C,y),p.relativeLuminance2(e,r,h));return(u<<24|y<<16|C<<8|255)>>>0}function o(d,s,i){for(var e=d>>24&255,r=d>>16&255,h=d>>8&255,u=s>>24&255,y=s>>16&255,C=s>>8&255,E=m(p.relativeLuminance2(u,C,y),p.relativeLuminance2(e,r,h));E<i&&(u<255||y<255||C<255);)u=Math.min(255,u+Math.ceil(.1*(255-u))),y=Math.min(255,y+Math.ceil(.1*(255-y))),C=Math.min(255,C+Math.ceil(.1*(255-C))),E=m(p.relativeLuminance2(u,C,y),p.relativeLuminance2(e,r,h));return(u<<24|y<<16|C<<8|255)>>>0}g.ensureContrastRatio=function(d,s,i){var e=p.relativeLuminance(d>>8),r=p.relativeLuminance(s>>8);if(m(e,r)<i)return r<e?n(d,s,i):o(d,s,i)},g.reduceLuminance=n,g.increaseLuminance=o,g.toChannels=function(d){return[d>>24&255,d>>16&255,d>>8&255,255&d]},g.toColor=function(d,s,i){return{css:f.toCss(d,s,i),rgba:f.toRgba(d,s,i)}}}(_=t.rgba||(t.rgba={})),t.toPaddedHex=a,t.contrastRatio=m},7239:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var f=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(p,_,a){this._rgba[p]||(this._rgba[p]={}),this._rgba[p][_]=a},l.prototype.getCss=function(p,_){return this._rgba[p]?this._rgba[p][_]:void 0},l.prototype.setColor=function(p,_,a){this._color[p]||(this._color[p]={}),this._color[p][_]=a},l.prototype.getColor=function(p,_){return this._color[p]?this._color[p][_]:void 0},l}();t.ColorContrastCache=f},5680:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var l=f(4774),p=f(7239),_=l.css.toColor("#ffffff"),a=l.css.toColor("#000000"),m=l.css.toColor("#ffffff"),g=l.css.toColor("#000000"),n={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var d=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],s=[0,95,135,175,215,255],i=0;i<216;i++){var e=s[i/36%6|0],r=s[i/6%6|0],h=s[i%6];d.push({css:l.channels.toCss(e,r,h),rgba:l.channels.toRgba(e,r,h)})}for(i=0;i<24;i++){var u=8+10*i;d.push({css:l.channels.toCss(u,u,u),rgba:l.channels.toRgba(u,u,u)})}return d}());var o=function(){function d(s,i){this.allowTransparency=i;var e=s.createElement("canvas");e.width=1,e.height=1;var r=e.getContext("2d");if(!r)throw new Error("Could not get rendering context");this._ctx=r,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:_,background:a,cursor:m,cursorAccent:g,selectionTransparent:n,selectionOpaque:l.color.blend(a,n),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return d.prototype.onOptionsChange=function(s){s==="minimumContrastRatio"&&this._contrastCache.clear()},d.prototype.setTheme=function(s){s===void 0&&(s={}),this.colors.foreground=this._parseColor(s.foreground,_),this.colors.background=this._parseColor(s.background,a),this.colors.cursor=this._parseColor(s.cursor,m,!0),this.colors.cursorAccent=this._parseColor(s.cursorAccent,g,!0),this.colors.selectionTransparent=this._parseColor(s.selection,n,!0),this.colors.selectionOpaque=l.color.blend(this.colors.background,this.colors.selectionTransparent),l.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=l.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(s.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(s.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(s.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(s.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(s.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(s.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(s.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(s.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(s.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(s.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(s.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(s.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(s.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(s.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(s.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(s.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},d.prototype._parseColor=function(s,i,e){if(e===void 0&&(e=this.allowTransparency),s===void 0)return i;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=s,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+s+" is invalid using fallback "+i.css),i;this._ctx.fillRect(0,0,1,1);var r=this._ctx.getImageData(0,0,1,1).data;if(r[3]!==255){if(!e)return console.warn("Color: "+s+" is using transparency, but allowTransparency is false. Using fallback "+i.css+"."),i;var h=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(L){return Number(L)}),u=h[0],y=h[1],C=h[2],E=h[3],b=Math.round(255*E);return{rgba:l.channels.toRgba(u,y,C,b),css:s}}return{css:this._ctx.fillStyle,rgba:l.channels.toRgba(r[0],r[1],r[2],r[3])}},d}();t.ColorManager=o},9631:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var f,l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];for(var _=0,a=l;_<a.length;_++){var m=a[_];(f=m==null?void 0:m.parentElement)===null||f===void 0||f.removeChild(m)}}},3656:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(f,l,p,_){f.addEventListener(l,p,_);var a=!1;return{dispose:function(){a||(a=!0,f.removeEventListener(l,p,_))}}}},3551:function(x,t,f){var l=this&&this.__decorate||function(n,o,d,s){var i,e=arguments.length,r=e<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,d):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,o,d,s);else for(var h=n.length-1;h>=0;h--)(i=n[h])&&(r=(e<3?i(r):e>3?i(o,d,r):i(o,d))||r);return e>3&&r&&Object.defineProperty(o,d,r),r},p=this&&this.__param||function(n,o){return function(d,s){o(d,s,n)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var _=f(8460),a=f(2585),m=function(){function n(o,d,s){this._bufferService=o,this._logService=d,this._unicodeService=s,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new _.EventEmitter,this._onHideLinkUnderline=new _.EventEmitter,this._onLinkTooltip=new _.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(n.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),n.prototype.attachToDom=function(o,d){this._element=o,this._mouseZoneManager=d},n.prototype.linkifyRows=function(o,d){var s=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=o,this._rowsToLinkify.end=d):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,o),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,d)),this._mouseZoneManager.clearAll(o,d),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return s._linkifyRows()},n._timeBeforeLatency))},n.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var o=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var d=o.ydisp+this._rowsToLinkify.start;if(!(d>=o.lines.length)){for(var s=o.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,d,s,i,i);e.hasNext();)for(var r=e.next(),h=0;h<this._linkMatchers.length;h++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[h]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},n.prototype.registerLinkMatcher=function(o,d,s){if(s===void 0&&(s={}),!d)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:o,handler:d,matchIndex:s.matchIndex,validationCallback:s.validationCallback,hoverTooltipCallback:s.tooltipCallback,hoverLeaveCallback:s.leaveCallback,willLinkActivate:s.willLinkActivate,priority:s.priority||0};return this._addLinkMatcherToList(i),i.id},n.prototype._addLinkMatcherToList=function(o){if(this._linkMatchers.length!==0){for(var d=this._linkMatchers.length-1;d>=0;d--)if(o.priority<=this._linkMatchers[d].priority)return void this._linkMatchers.splice(d+1,0,o);this._linkMatchers.splice(0,0,o)}else this._linkMatchers.push(o)},n.prototype.deregisterLinkMatcher=function(o){for(var d=0;d<this._linkMatchers.length;d++)if(this._linkMatchers[d].id===o)return this._linkMatchers.splice(d,1),!0;return!1},n.prototype._doLinkifyRow=function(o,d,s){for(var i,e=this,r=new RegExp(s.regex.source,(s.regex.flags||"")+"g"),h=-1,u=function(){var C=i[typeof s.matchIndex!="number"?0:s.matchIndex];if(!C)return y._logService.debug("match found without corresponding matchIndex",i,s),"break";if(h=d.indexOf(C,h+1),r.lastIndex=h+C.length,h<0)return"break";var E=y._bufferService.buffer.stringIndexToBufferIndex(o,h);if(E[0]<0)return"break";var b=y._bufferService.buffer.lines.get(E[0]);if(!b)return"break";var L=b.getFg(E[1]),w=L?L>>9&511:void 0;s.validationCallback?s.validationCallback(C,function(D){e._rowsTimeoutId||D&&e._addLink(E[1],E[0]-e._bufferService.buffer.ydisp,C,s,w)}):y._addLink(E[1],E[0]-y._bufferService.buffer.ydisp,C,s,w)},y=this;(i=r.exec(d))!==null&&u()!=="break";);},n.prototype._addLink=function(o,d,s,i,e){var r=this;if(this._mouseZoneManager&&this._element){var h=this._unicodeService.getStringCellWidth(s),u=o%this._bufferService.cols,y=d+Math.floor(o/this._bufferService.cols),C=(u+h)%this._bufferService.cols,E=y+Math.floor((u+h)/this._bufferService.cols);C===0&&(C=this._bufferService.cols,E--),this._mouseZoneManager.add(new g(u+1,y+1,C+1,E+1,function(b){if(i.handler)return i.handler(b,s);var L=window.open();L?(L.opener=null,L.location.href=s):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(u,y,C,E,e)),r._element.classList.add("xterm-cursor-pointer")},function(b){r._onLinkTooltip.fire(r._createLinkHoverEvent(u,y,C,E,e)),i.hoverTooltipCallback&&i.hoverTooltipCallback(b,s,{start:{x:u,y},end:{x:C,y:E}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(u,y,C,E,e)),r._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()},function(b){return!i.willLinkActivate||i.willLinkActivate(b,s)}))}},n.prototype._createLinkHoverEvent=function(o,d,s,i,e){return{x1:o,y1:d,x2:s,y2:i,cols:this._bufferService.cols,fg:e}},n._timeBeforeLatency=200,n=l([p(0,a.IBufferService),p(1,a.ILogService),p(2,a.IUnicodeService)],n)}();t.Linkifier=m;var g=function(n,o,d,s,i,e,r,h,u){this.x1=n,this.y1=o,this.x2=d,this.y2=s,this.clickCallback=i,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=h,this.willLinkActivate=u};t.MouseZone=g},6465:function(x,t,f){var l,p=this&&this.__extends||(l=function(s,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(e[h]=r[h])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}l(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),_=this&&this.__decorate||function(s,i,e,r){var h,u=arguments.length,y=u<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,i,e,r);else for(var C=s.length-1;C>=0;C--)(h=s[C])&&(y=(u<3?h(y):u>3?h(i,e,y):h(i,e))||y);return u>3&&y&&Object.defineProperty(i,e,y),y},a=this&&this.__param||function(s,i){return function(e,r){i(e,r,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var m=f(2585),g=f(8460),n=f(844),o=f(3656),d=function(s){function i(e){var r=s.call(this)||this;return r._bufferService=e,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new g.EventEmitter),r._onHideLinkUnderline=r.register(new g.EventEmitter),r.register(n.getDisposeArrayDisposable(r._linkCacheDisposables)),r}return p(i,s),Object.defineProperty(i.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),i.prototype.registerLinkProvider=function(e){var r=this;return this._linkProviders.push(e),{dispose:function(){var h=r._linkProviders.indexOf(e);h!==-1&&r._linkProviders.splice(h,1)}}},i.prototype.attachToDom=function(e,r,h){var u=this;this._element=e,this._mouseService=r,this._renderService=h,this.register(o.addDisposableDomListener(this._element,"mouseleave",function(){u._isMouseOut=!0,u._clearCurrentLink()})),this.register(o.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(o.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},i.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(r){this._isMouseOut=!1;for(var h=e.composedPath(),u=0;u<h.length;u++){var y=h[u];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._onHover(r),this._lastBufferCell=r)}}},i.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},i.prototype._askForLink=function(e,r){var h,u=this;this._activeProviderReplies&&r||((h=this._activeProviderReplies)===null||h===void 0||h.forEach(function(C){C==null||C.forEach(function(E){E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var y=!1;this._linkProviders.forEach(function(C,E){var b;r?((b=u._activeProviderReplies)===null||b===void 0?void 0:b.get(E))&&(y=u._checkLinkProviderResult(E,e,y)):C.provideLinks(e.y,function(L){var w,D;if(!u._isMouseOut){var M=L==null?void 0:L.map(function(T){return{link:T}});(w=u._activeProviderReplies)===null||w===void 0||w.set(E,M),y=u._checkLinkProviderResult(E,e,y),((D=u._activeProviderReplies)===null||D===void 0?void 0:D.size)===u._linkProviders.length&&u._removeIntersectingLinks(e.y,u._activeProviderReplies)}})})},i.prototype._removeIntersectingLinks=function(e,r){for(var h=new Set,u=0;u<r.size;u++){var y=r.get(u);if(y)for(var C=0;C<y.length;C++)for(var E=y[C],b=E.link.range.start.y<e?0:E.link.range.start.x,L=E.link.range.end.y>e?this._bufferService.cols:E.link.range.end.x,w=b;w<=L;w++){if(h.has(w)){y.splice(C--,1);break}h.add(w)}}},i.prototype._checkLinkProviderResult=function(e,r,h){var u,y=this;if(!this._activeProviderReplies)return h;for(var C=this._activeProviderReplies.get(e),E=!1,b=0;b<e;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(E=!0);if(!E&&C){var L=C.find(function(D){return y._linkAtPosition(D.link,r)});L&&(h=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviders.length&&!h)for(b=0;b<this._activeProviderReplies.size;b++){var w=(u=this._activeProviderReplies.get(b))===null||u===void 0?void 0:u.find(function(D){return y._linkAtPosition(D.link,r)});if(w){h=!0,this._handleNewLink(w);break}}return h},i.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},i.prototype._clearCurrentLink=function(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,n.disposeArray(this._linkCacheDisposables))},i.prototype._handleNewLink=function(e){var r=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(e.link,h)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var u,y;return(y=(u=r._currentLink)===null||u===void 0?void 0:u.state)===null||y===void 0?void 0:y.decorations.pointerCursor},set:function(u){var y,C;((y=r._currentLink)===null||y===void 0?void 0:y.state)&&r._currentLink.state.decorations.pointerCursor!==u&&(r._currentLink.state.decorations.pointerCursor=u,r._currentLink.state.isHovered&&((C=r._element)===null||C===void 0||C.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:function(){var u,y;return(y=(u=r._currentLink)===null||u===void 0?void 0:u.state)===null||y===void 0?void 0:y.decorations.underline},set:function(u){var y,C,E;((y=r._currentLink)===null||y===void 0?void 0:y.state)&&((E=(C=r._currentLink)===null||C===void 0?void 0:C.state)===null||E===void 0?void 0:E.decorations.underline)!==u&&(r._currentLink.state.decorations.underline=u,r._currentLink.state.isHovered&&r._fireUnderlineEvent(e.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(u){var y=u.start===0?0:u.start+1+r._bufferService.buffer.ydisp;r._clearCurrentLink(y,u.end+1+r._bufferService.buffer.ydisp)})))}},i.prototype._linkHover=function(e,r,h){var u;((u=this._currentLink)===null||u===void 0?void 0:u.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(h,r.text)},i.prototype._fireUnderlineEvent=function(e,r){var h=e.range,u=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-u-1,h.end.x,h.end.y-u-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)},i.prototype._linkLeave=function(e,r,h){var u;((u=this._currentLink)===null||u===void 0?void 0:u.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(h,r.text)},i.prototype._linkAtPosition=function(e,r){var h=e.range.start.y===e.range.end.y,u=e.range.start.y<r.y,y=e.range.end.y>r.y;return(h&&e.range.start.x<=r.x&&e.range.end.x>=r.x||u&&e.range.end.x>=r.x||y&&e.range.start.x<=r.x||u&&y)&&e.range.start.y<=r.y&&e.range.end.y>=r.y},i.prototype._positionFromMouseEvent=function(e,r,h){var u=h.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}},i.prototype._createLinkUnderlineEvent=function(e,r,h,u,y){return{x1:e,y1:r,x2:h,y2:u,cols:this._bufferService.cols,fg:y}},_([a(0,m.IBufferService)],i)}(n.Disposable);t.Linkifier2=d},9042:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(x,t,f){var l,p=this&&this.__extends||(l=function(s,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(e[h]=r[h])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}l(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),_=this&&this.__decorate||function(s,i,e,r){var h,u=arguments.length,y=u<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,i,e,r);else for(var C=s.length-1;C>=0;C--)(h=s[C])&&(y=(u<3?h(y):u>3?h(i,e,y):h(i,e))||y);return u>3&&y&&Object.defineProperty(i,e,y),y},a=this&&this.__param||function(s,i){return function(e,r){i(e,r,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var m=f(844),g=f(3656),n=f(4725),o=f(2585),d=function(s){function i(e,r,h,u,y,C){var E=s.call(this)||this;return E._element=e,E._screenElement=r,E._bufferService=h,E._mouseService=u,E._selectionService=y,E._optionsService=C,E._zones=[],E._areZonesActive=!1,E._lastHoverCoords=[void 0,void 0],E._initialSelectionLength=0,E.register(g.addDisposableDomListener(E._element,"mousedown",function(b){return E._onMouseDown(b)})),E._mouseMoveListener=function(b){return E._onMouseMove(b)},E._mouseLeaveListener=function(b){return E._onMouseLeave(b)},E._clickListener=function(b){return E._onClick(b)},E}return p(i,s),i.prototype.dispose=function(){s.prototype.dispose.call(this),this._deactivate()},i.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},i.prototype.clearAll=function(e,r){if(this._zones.length!==0){e&&r||(e=0,r=this._bufferService.rows-1);for(var h=0;h<this._zones.length;h++){var u=this._zones[h];(u.y1>e&&u.y1<=r+1||u.y2>e&&u.y2<=r+1||u.y1<e&&u.y2>r+1)&&(this._currentZone&&this._currentZone===u&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(h--,1))}this._zones.length===0&&this._deactivate()}},i.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},i.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},i.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},i.prototype._onHover=function(e){var r=this,h=this._findZoneEventAt(e);h!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),h&&(this._currentZone=h,h.hoverCallback&&h.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.options.linkTooltipHoverDuration)))},i.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);r==null||r.tooltipCallback(e)},i.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);(r==null?void 0:r.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},i.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},i.prototype._onClick=function(e){var r=this._findZoneEventAt(e),h=this._getSelectionLength();r&&h===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},i.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},i.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var h=r[0],u=r[1],y=0;y<this._zones.length;y++){var C=this._zones[y];if(C.y1===C.y2){if(u===C.y1&&h>=C.x1&&h<C.x2)return C}else if(u===C.y1&&h>=C.x1||u===C.y2&&h<C.x2||u>C.y1&&u<C.y2)return C}},_([a(2,o.IBufferService),a(3,n.IMouseService),a(4,n.ISelectionService),a(5,o.IOptionsService)],i)}(m.Disposable);t.MouseZoneManager=d},6193:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var f=function(){function l(p){this._renderCallback=p}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.refresh=function(p,_,a){var m=this;this._rowCount=a,p=p!==void 0?p:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,p):p,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return m._innerRefresh()}))},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var p=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(p,_)}},l}();t.RenderDebouncer=f},5596:function(x,t,f){var l,p=this&&this.__extends||(l=function(a,m){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,n){g.__proto__=n}||function(g,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(g[o]=n[o])})(a,m)},function(a,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function g(){this.constructor=a}l(a,m),a.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var _=function(a){function m(){var g=a!==null&&a.apply(this,arguments)||this;return g._currentDevicePixelRatio=window.devicePixelRatio,g}return p(m,a),m.prototype.setListener=function(g){var n=this;this._listener&&this.clearListener(),this._listener=g,this._outerListener=function(){n._listener&&(n._listener(window.devicePixelRatio,n._currentDevicePixelRatio),n._updateDpr())},this._updateDpr()},m.prototype.dispose=function(){a.prototype.dispose.call(this),this.clearListener()},m.prototype._updateDpr=function(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},m.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},m}(f(844).Disposable);t.ScreenDprMonitor=_},3236:function(x,t,f){var l,p=this&&this.__extends||(l=function(Z,B){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&(O[q]=P[q])})(Z,B)},function(Z,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function O(){this.constructor=Z}l(Z,B),Z.prototype=B===null?Object.create(B):(O.prototype=B.prototype,new O)});Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var _=f(2950),a=f(1680),m=f(3614),g=f(2584),n=f(5435),o=f(3525),d=f(3551),s=f(9312),i=f(6114),e=f(3656),r=f(9042),h=f(357),u=f(6954),y=f(4567),C=f(1296),E=f(7399),b=f(8460),L=f(8437),w=f(5680),D=f(3230),M=f(4725),T=f(428),R=f(8934),k=f(6465),F=f(5114),I=f(8969),z=f(4774),K=f(4269),N=typeof window!="undefined"?window.document:null,Y=function(Z){function B(O){O===void 0&&(O={});var P=Z.call(this,O)||this;return P.browser=i,P._keyDownHandled=!1,P._keyPressHandled=!1,P._unprocessedDeadKey=!1,P._onCursorMove=new b.EventEmitter,P._onKey=new b.EventEmitter,P._onRender=new b.EventEmitter,P._onSelectionChange=new b.EventEmitter,P._onTitleChange=new b.EventEmitter,P._onBell=new b.EventEmitter,P._onFocus=new b.EventEmitter,P._onBlur=new b.EventEmitter,P._onA11yCharEmitter=new b.EventEmitter,P._onA11yTabEmitter=new b.EventEmitter,P._setup(),P.linkifier=P._instantiationService.createInstance(d.Linkifier),P.linkifier2=P.register(P._instantiationService.createInstance(k.Linkifier2)),P.register(P._inputHandler.onRequestBell(function(){return P.bell()})),P.register(P._inputHandler.onRequestRefreshRows(function(q,H){return P.refresh(q,H)})),P.register(P._inputHandler.onRequestReset(function(){return P.reset()})),P.register(P._inputHandler.onRequestWindowsOptionsReport(function(q){return P._reportWindowsOptions(q)})),P.register(P._inputHandler.onAnsiColorChange(function(q){return P._changeAnsiColor(q)})),P.register(b.forwardEvent(P._inputHandler.onCursorMove,P._onCursorMove)),P.register(b.forwardEvent(P._inputHandler.onTitleChange,P._onTitleChange)),P.register(b.forwardEvent(P._inputHandler.onA11yChar,P._onA11yCharEmitter)),P.register(b.forwardEvent(P._inputHandler.onA11yTab,P._onA11yTabEmitter)),P.register(P._bufferService.onResize(function(q){return P._afterResize(q.cols,q.rows)})),P}return p(B,Z),Object.defineProperty(B.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),B.prototype._changeAnsiColor=function(O){var P,q;if(this._colorManager){for(var H=0,G=O.colors;H<G.length;H++){var X=G[H],te=z.rgba.toColor(X.red,X.green,X.blue);this._colorManager.colors.ansi[X.colorIndex]=te}(P=this._renderService)===null||P===void 0||P.setColors(this._colorManager.colors),(q=this.viewport)===null||q===void 0||q.onThemeChange(this._colorManager.colors)}},B.prototype.dispose=function(){var O,P,q;this._isDisposed||(Z.prototype.dispose.call(this),(O=this._renderService)===null||O===void 0||O.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(q=(P=this.element)===null||P===void 0?void 0:P.parentNode)===null||q===void 0||q.removeChild(this.element))},B.prototype._setup=function(){Z.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(B.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),B.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},B.prototype._updateOptions=function(O){var P,q,H,G;switch(Z.prototype._updateOptions.call(this,O),O){case"fontFamily":case"fontSize":(P=this._renderService)===null||P===void 0||P.clear(),(q=this._charSizeService)===null||q===void 0||q.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(H=this.viewport)===null||H===void 0||H.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new y.AccessibilityManager(this,this._renderService)):((G=this._accessibilityManager)===null||G===void 0||G.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},B.prototype._onTextAreaFocus=function(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(g.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},B.prototype.blur=function(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()},B.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(g.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},B.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var O=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get(O);if(P){var q=Math.min(this.buffer.x,this.cols-1),H=this._renderService.dimensions.actualCellHeight,G=P.getWidth(q),X=this._renderService.dimensions.actualCellWidth*G,te=this.buffer.y*this._renderService.dimensions.actualCellHeight,re=q*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=re+"px",this.textarea.style.top=te+"px",this.textarea.style.width=X+"px",this.textarea.style.height=H+"px",this.textarea.style.lineHeight=H+"px",this.textarea.style.zIndex="-5"}}},B.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(q){O.hasSelection()&&m.copyHandler(q,O._selectionService)}));var P=function(q){return m.handlePasteEvent(q,O.textarea,O.coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",P)),this.register(e.addDisposableDomListener(this.element,"paste",P)),i.isFirefox?this.register(e.addDisposableDomListener(this.element,"mousedown",function(q){q.button===2&&m.rightClickHandler(q,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register(e.addDisposableDomListener(this.element,"contextmenu",function(q){m.rightClickHandler(q,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),i.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(q){q.button===1&&m.moveTextAreaUnderMouseCursor(q,O.textarea,O.screenElement)}))},B.prototype._bindKeys=function(){var O=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(P){return O._keyUp(P)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(P){return O._keyDown(P)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(P){return O._keyPress(P)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(P){return O._compositionHelper.compositionupdate(P)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register(e.addDisposableDomListener(this.textarea,"input",function(P){return O._inputEvent(P)},!0)),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(P){return O._queueLinkification(P.start,P.end)}))},B.prototype.open=function(O){var P=this;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),O.appendChild(this.element);var q=N.createDocumentFragment();this._viewportElement=N.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=N.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=N.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=N.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=N.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",r.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(X){return P._onTextAreaFocus(X)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return P._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var H=this._instantiationService.createInstance(F.CoreBrowserService,this.textarea);this._instantiationService.setService(M.ICoreBrowserService,H),this._charSizeService=this._instantiationService.createInstance(T.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new w.ColorManager(N,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(X){return P._colorManager.onOptionsChange(X)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(K.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService);var G=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,G,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(X){return P._onRender.fire(X)})),this.onResize(function(X){return P._renderService.resize(X.cols,X.rows)}),this._compositionView=N.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q),this._soundService=this._instantiationService.createInstance(h.SoundService),this._instantiationService.setService(M.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(R.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(a.Viewport,function(X){return P.scrollLines(X,!0,1)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return P.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){P._renderService.onCursorMove(),P._syncTextArea()})),this.register(this.onResize(function(){return P._renderService.onResize(P.cols,P.rows)})),this.register(this.onBlur(function(){return P._renderService.onBlur()})),this.register(this.onFocus(function(){return P._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return P.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(s.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(X){return P.scrollLines(X.amount,X.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return P._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(X){return P._renderService.onSelectionChanged(X.start,X.end,X.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(X){P.textarea.value=X,P.textarea.focus(),P.textarea.select()})),this.register(this._onScroll.event(function(X){P.viewport.syncScrollArea(),P._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return P._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(u.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return P._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(X){return P._selectionService.onMouseDown(X)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new y.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},B.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(o.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(C.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},B.prototype._setTheme=function(O){var P,q,H;this._theme=O,(P=this._colorManager)===null||P===void 0||P.setTheme(O),(q=this._renderService)===null||q===void 0||q.setColors(this._colorManager.colors),(H=this.viewport)===null||H===void 0||H.onThemeChange(this._colorManager.colors)},B.prototype.bindMouse=function(){var O=this,P=this,q=this.element;function H(V){var $,ae,fe=P._mouseService.getRawByteCoords(V,P.screenElement,P.cols,P.rows);if(!fe)return!1;switch(V.overrideType||V.type){case"mousemove":ae=32,V.buttons===void 0?($=3,V.button!==void 0&&($=V.button<3?V.button:3)):$=1&V.buttons?0:4&V.buttons?1:2&V.buttons?2:3;break;case"mouseup":ae=0,$=V.button<3?V.button:3;break;case"mousedown":ae=1,$=V.button<3?V.button:3;break;case"wheel":V.deltaY!==0&&(ae=V.deltaY<0?0:1),$=4;break;default:return!1}return!(ae===void 0||$===void 0||$>4)&&P.coreMouseService.triggerMouseEvent({col:fe.x-33,row:fe.y-33,button:$,action:ae,ctrl:V.ctrlKey,alt:V.altKey,shift:V.shiftKey})}var G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X=function(V){return H(V),V.buttons||(O._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&O._document.removeEventListener("mousemove",G.mousedrag)),O.cancel(V)},te=function(V){return H(V),V.preventDefault(),O.cancel(V)},re=function(V){V.buttons&&H(V)},se=function(V){V.buttons||H(V)};this.register(this.coreMouseService.onProtocolChange(function(V){V?(O.optionsService.options.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O.coreMouseService.explainEvents(V)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&V?G.mousemove||(q.addEventListener("mousemove",se),G.mousemove=se):(q.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&V?G.wheel||(q.addEventListener("wheel",te,{passive:!1}),G.wheel=te):(q.removeEventListener("wheel",G.wheel),G.wheel=null),2&V?G.mouseup||(G.mouseup=X):(O._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&V?G.mousedrag||(G.mousedrag=re):(O._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(q,"mousedown",function(V){if(V.preventDefault(),O.focus(),O.coreMouseService.areMouseEventsActive&&!O._selectionService.shouldForceSelection(V))return H(V),G.mouseup&&O._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&O._document.addEventListener("mousemove",G.mousedrag),O.cancel(V)})),this.register(e.addDisposableDomListener(q,"wheel",function(V){if(!G.wheel){if(!O.buffer.hasScrollback){var $=O.viewport.getLinesScrolled(V);if($===0)return;for(var ae=g.C0.ESC+(O.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(V.deltaY<0?"A":"B"),fe="",Te=0;Te<Math.abs($);Te++)fe+=ae;O.coreService.triggerDataEvent(fe,!0)}}},{passive:!0})),this.register(e.addDisposableDomListener(q,"wheel",function(V){if(!G.wheel)return O.viewport.onWheel(V)?void 0:O.cancel(V)},{passive:!1})),this.register(e.addDisposableDomListener(q,"touchstart",function(V){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchStart(V),O.cancel(V)},{passive:!0})),this.register(e.addDisposableDomListener(q,"touchmove",function(V){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchMove(V)?void 0:O.cancel(V)},{passive:!1}))},B.prototype.refresh=function(O,P){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(O,P)},B.prototype._queueLinkification=function(O,P){var q;(q=this.linkifier)===null||q===void 0||q.linkifyRows(O,P)},B.prototype.updateCursorStyle=function(O){var P;((P=this._selectionService)===null||P===void 0?void 0:P.shouldColumnSelect(O))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},B.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},B.prototype.scrollLines=function(O,P,q){q===void 0&&(q=0),Z.prototype.scrollLines.call(this,O,P,q),this.refresh(0,this.rows-1)},B.prototype.paste=function(O){m.paste(O,this.textarea,this.coreService)},B.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},B.prototype.registerLinkMatcher=function(O,P,q){var H=this.linkifier.registerLinkMatcher(O,P,q);return this.refresh(0,this.rows-1),H},B.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},B.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},B.prototype.registerCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var P=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),P},B.prototype.deregisterCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(B.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),B.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},B.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},B.prototype.select=function(O,P,q){this._selectionService.setSelection(O,P,q)},B.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},B.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},B.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},B.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},B.prototype.selectLines=function(O,P){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(O,P)},B.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var P=E.evaluateKeyboardEvent(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),P.type===3||P.type===2){var q=this.rows-1;return this.scrollLines(P.type===2?-q:q),this.cancel(O,!0)}return P.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(P.cancel&&this.cancel(O,!0),!P.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(P.key!==g.C0.ETX&&P.key!==g.C0.CR||(this.textarea.value=""),this._onKey.fire({key:P.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(P.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0))))},B.prototype._isThirdLevelShift=function(O,P){var q=O.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||O.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||O.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?q:q&&(!P.keyCode||P.keyCode>47)},B.prototype._keyUp=function(O){this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)},B.prototype._keyPress=function(O){var P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)P=O.charCode;else if(O.which===null||O.which===void 0)P=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;P=O.which}return!(!P||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,0))},B.prototype._inputEvent=function(O){if(O.data&&O.inputType==="insertText"&&!this.optionsService.options.screenReaderMode){if(this._keyPressHandled)return!1;var P=O.data;return this.coreService.triggerDataEvent(P,!0),this.cancel(O),!0}return!1},B.prototype.bell=function(){var O;this._soundBell()&&((O=this._soundService)===null||O===void 0||O.playBellSound()),this._onBell.fire()},B.prototype.resize=function(O,P){O!==this.cols||P!==this.rows?Z.prototype.resize.call(this,O,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},B.prototype._afterResize=function(O,P){var q,H;(q=this._charSizeService)===null||q===void 0||q.measure(),(H=this.viewport)===null||H===void 0||H.syncScrollArea(!0)},B.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},B.prototype.reset=function(){var O,P;this.options.rows=this.rows,this.options.cols=this.cols;var q=this._customKeyEventHandler;this._setup(),Z.prototype.reset.call(this),(O=this._selectionService)===null||O===void 0||O.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1),(P=this.viewport)===null||P===void 0||P.syncScrollArea()},B.prototype._reportWindowsOptions=function(O){if(this._renderService)switch(O){case n.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var P=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),q=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(g.C0.ESC+"[4;"+q+";"+P+"t");break;case n.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var H=this._renderService.dimensions.scaledCellWidth.toFixed(0),G=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(g.C0.ESC+"[6;"+G+";"+H+"t")}},B.prototype.cancel=function(O,P){if(this.options.cancelEvents||P)return O.preventDefault(),O.stopPropagation(),!1},B.prototype._visualBell=function(){return!1},B.prototype._soundBell=function(){return this.options.bellStyle==="sound"},B}(I.CoreTerminal);t.Terminal=Y},9924:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0;var f=function(){function l(p,_){_===void 0&&(_=1e3),this._renderCallback=p,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(p,_,a){var m=this;this._rowCount=a,p=p!==void 0?p:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,p):p,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_;var g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){var n=g-this._lastRefreshMs,o=this._debounceThresholdMS-n;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){m._lastRefreshMs=Date.now(),m._innerRefresh(),m._additionalRefreshRequested=!1,m._refreshTimeoutID=void 0},o)}},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var p=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(p,_)}},l}();t.TimeBasedDebouncer=f},1680:function(x,t,f){var l,p=this&&this.__extends||(l=function(s,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(e[h]=r[h])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}l(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),_=this&&this.__decorate||function(s,i,e,r){var h,u=arguments.length,y=u<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,i,e,r);else for(var C=s.length-1;C>=0;C--)(h=s[C])&&(y=(u<3?h(y):u>3?h(i,e,y):h(i,e))||y);return u>3&&y&&Object.defineProperty(i,e,y),y},a=this&&this.__param||function(s,i){return function(e,r){i(e,r,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var m=f(844),g=f(3656),n=f(4725),o=f(2585),d=function(s){function i(e,r,h,u,y,C,E){var b=s.call(this)||this;return b._scrollLines=e,b._viewportElement=r,b._scrollArea=h,b._bufferService=u,b._optionsService=y,b._charSizeService=C,b._renderService=E,b.scrollBarWidth=0,b._currentRowHeight=0,b._currentScaledCellHeight=0,b._lastRecordedBufferLength=0,b._lastRecordedViewportHeight=0,b._lastRecordedBufferHeight=0,b._lastTouchY=0,b._lastScrollTop=0,b._lastHadScrollBar=!1,b._wheelPartialScroll=0,b._refreshAnimationFrame=null,b._ignoreNextScrollEvent=!1,b.scrollBarWidth=b._viewportElement.offsetWidth-b._scrollArea.offsetWidth||15,b._lastHadScrollBar=!0,b.register(g.addDisposableDomListener(b._viewportElement,"scroll",b._onScroll.bind(b))),b._activeBuffer=b._bufferService.buffer,b.register(b._bufferService.buffers.onBufferActivate(function(L){return b._activeBuffer=L.activeBuffer})),b._renderDimensions=b._renderService.dimensions,b.register(b._renderService.onDimensionsChange(function(L){return b._renderDimensions=L})),setTimeout(function(){return b.syncScrollArea()},0),b}return p(i,s),i.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},i.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},i.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._optionsService.options.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0,this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth).toString()+"px",this._refreshAnimationFrame=null},i.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(e):this._refresh(e)},i.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},i.prototype._bubbleScroll=function(e,r){var h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&h<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},i.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},i.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},i.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},i.prototype._applyScrollModifier=function(e,r){var h=this._optionsService.options.fastScrollModifier;return h==="alt"&&r.altKey||h==="ctrl"&&r.ctrlKey||h==="shift"&&r.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},i.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},i.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},_([a(3,o.IBufferService),a(4,o.IOptionsService),a(5,n.ICharSizeService),a(6,n.IRenderService)],i)}(m.Disposable);t.Viewport=d},2950:function(x,t,f){var l=this&&this.__decorate||function(g,n,o,d){var s,i=arguments.length,e=i<3?n:d===null?d=Object.getOwnPropertyDescriptor(n,o):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(g,n,o,d);else for(var r=g.length-1;r>=0;r--)(s=g[r])&&(e=(i<3?s(e):i>3?s(n,o,e):s(n,o))||e);return i>3&&e&&Object.defineProperty(n,o,e),e},p=this&&this.__param||function(g,n){return function(o,d){n(o,d,g)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var _=f(4725),a=f(2585),m=function(){function g(n,o,d,s,i,e){this._textarea=n,this._compositionView=o,this._bufferService=d,this._optionsService=s,this._coreService=i,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(g.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),g.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},g.prototype.compositionupdate=function(n){var o=this;this._compositionView.textContent=n.data,this.updateCompositionElements(),setTimeout(function(){o._compositionPosition.end=o._textarea.value.length},0)},g.prototype.compositionend=function(){this._finalizeComposition(!0)},g.prototype.keydown=function(n){if(this._isComposing||this._isSendingComposition){if(n.keyCode===229||n.keyCode===16||n.keyCode===17||n.keyCode===18)return!1;this._finalizeComposition(!1)}return n.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},g.prototype._finalizeComposition=function(n){var o=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,n){var d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(o._isSendingComposition){o._isSendingComposition=!1;var i;d.start+=o._dataAlreadySent.length,(i=o._isComposing?o._textarea.value.substring(d.start,d.end):o._textarea.value.substring(d.start)).length>0&&o._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;var s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}},g.prototype._handleAnyTextareaChanges=function(){var n=this,o=this._textarea.value;setTimeout(function(){if(!n._isComposing){var d=n._textarea.value.replace(o,"");d.length>0&&(n._dataAlreadySent=d,n._coreService.triggerDataEvent(d,!0))}},0)},g.prototype.updateCompositionElements=function(n){var o=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.actualCellHeight,i=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=d*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}n||setTimeout(function(){return o.updateCompositionElements(!0)},0)}},l([p(2,a.IBufferService),p(3,a.IOptionsService),p(4,a.ICoreService),p(5,_.IRenderService)],g)}();t.CompositionHelper=m},9806:(x,t)=>{function f(l,p){var _=p.getBoundingClientRect();return[l.clientX-_.left,l.clientY-_.top]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=f,t.getCoords=function(l,p,_,a,m,g,n,o){if(m){var d=f(l,p);if(d)return d[0]=Math.ceil((d[0]+(o?g/2:0))/g),d[1]=Math.ceil(d[1]/n),d[0]=Math.min(Math.max(d[0],1),_+(o?1:0)),d[1]=Math.min(Math.max(d[1],1),a),d}},t.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var l=f(2584);function p(o,d,s,i){var e=o-_(s,o),r=d-_(s,d);return n(Math.abs(e-r)-function(h,u,y){for(var C=0,E=h-_(y,h),b=u-_(y,u),L=0;L<Math.abs(E-b);L++){var w=a(h,u)==="A"?-1:1,D=y.buffer.lines.get(E+w*L);D&&D.isWrapped&&C++}return C}(o,d,s),g(a(o,d),i))}function _(o,d){for(var s=0,i=o.buffer.lines.get(d),e=i&&i.isWrapped;e&&d>=0&&d<o.rows;)s++,e=(i=o.buffer.lines.get(--d))&&i.isWrapped;return s}function a(o,d){return o>d?"A":"B"}function m(o,d,s,i,e,r){for(var h=o,u=d,y="";h!==s||u!==i;)h+=e?1:-1,e&&h>r.cols-1?(y+=r.buffer.translateBufferLineToString(u,!1,o,h),h=0,o=0,u++):!e&&h<0&&(y+=r.buffer.translateBufferLineToString(u,!1,0,o+1),o=h=r.cols-1,u--);return y+r.buffer.translateBufferLineToString(u,!1,o,h)}function g(o,d){var s=d?"O":"[";return l.C0.ESC+s+o}function n(o,d){o=Math.floor(o);for(var s="",i=0;i<o;i++)s+=d;return s}t.moveToCellSequence=function(o,d,s,i){var e,r=s.buffer.x,h=s.buffer.y;if(!s.buffer.hasScrollback)return function(y,C,E,b,L,w){return p(C,b,L,w).length===0?"":n(m(y,C,y,C-_(L,C),!1,L).length,g("D",w))}(r,h,0,d,s,i)+p(h,d,s,i)+function(y,C,E,b,L,w){var D;D=p(C,b,L,w).length>0?b-_(L,b):C;var M=b,T=function(R,k,F,I,z,K){var N;return N=p(F,I,z,K).length>0?I-_(z,I):k,R<F&&N<=I||R>=F&&N<I?"C":"D"}(y,C,E,b,L,w);return n(m(y,D,E,M,T==="C",L).length,g(T,w))}(r,h,o,d,s,i);if(h===d)return e=r>o?"D":"C",n(Math.abs(r-o),g(e,i));e=h>d?"D":"C";var u=Math.abs(h-d);return n(function(y,C){return C.cols-y}(h>d?o:r,s)+(u-1)*s.cols+1+((h>d?r:o)-1),g(e,i))}},1546:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var l=f(643),p=f(8803),_=f(1420),a=f(3734),m=f(1752),g=f(4774),n=f(9631),o=f(8978),d=function(){function s(i,e,r,h,u,y,C,E){this._container=i,this._alpha=h,this._colors=u,this._rendererId=y,this._bufferService=C,this._optionsService=E,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return s.prototype.dispose=function(){var i;n.removeElementFromParent(this._canvas),(i=this._charAtlas)===null||i===void 0||i.dispose()},s.prototype._initCanvas=function(){this._ctx=m.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},s.prototype.onOptionsChanged=function(){},s.prototype.onBlur=function(){},s.prototype.onFocus=function(){},s.prototype.onCursorMove=function(){},s.prototype.onGridChanged=function(i,e){},s.prototype.onSelectionChanged=function(i,e,r){r===void 0&&(r=!1)},s.prototype.setColors=function(i){this._refreshCharAtlas(i)},s.prototype._setTransparency=function(i){if(i!==this._alpha){var e=this._canvas;this._alpha=i,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},s.prototype._refreshCharAtlas=function(i){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=_.acquireCharAtlas(this._optionsService.options,this._rendererId,i,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},s.prototype.resize=function(i){this._scaledCellWidth=i.scaledCellWidth,this._scaledCellHeight=i.scaledCellHeight,this._scaledCharWidth=i.scaledCharWidth,this._scaledCharHeight=i.scaledCharHeight,this._scaledCharLeft=i.scaledCharLeft,this._scaledCharTop=i.scaledCharTop,this._canvas.width=i.scaledCanvasWidth,this._canvas.height=i.scaledCanvasHeight,this._canvas.style.width=i.canvasWidth+"px",this._canvas.style.height=i.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},s.prototype._fillCells=function(i,e,r,h){this._ctx.fillRect(i*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,h*this._scaledCellHeight)},s.prototype._fillMiddleLineAtCells=function(i,e,r){r===void 0&&(r=1);var h=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(i*this._scaledCellWidth,(e+1)*this._scaledCellHeight-h-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},s.prototype._fillBottomLineAtCells=function(i,e,r){r===void 0&&(r=1),this._ctx.fillRect(i*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},s.prototype._fillLeftLineAtCell=function(i,e,r){this._ctx.fillRect(i*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},s.prototype._strokeRectAtCell=function(i,e,r,h){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(i*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,h*this._scaledCellHeight-window.devicePixelRatio)},s.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},s.prototype._clearCells=function(i,e,r,h){this._alpha?this._ctx.clearRect(i*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,h*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(i*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,h*this._scaledCellHeight))},s.prototype._fillCharTrueColor=function(i,e,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(r);var h=!1;this._optionsService.options.customGlyphs!==!1&&(h=o.tryDrawCustomChar(this._ctx,i.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),h||this._ctx.fillText(i.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},s.prototype._drawChars=function(i,e,r){var h,u,y=this._getContrastColor(i);y||i.isFgRGB()||i.isBgRGB()?this._drawUncachedChars(i,e,r,y):(i.isInverse()?(h=i.isBgDefault()?p.INVERTED_DEFAULT_COLOR:i.getBgColor(),u=i.isFgDefault()?p.INVERTED_DEFAULT_COLOR:i.getFgColor()):(u=i.isBgDefault()?l.DEFAULT_COLOR:i.getBgColor(),h=i.isFgDefault()?l.DEFAULT_COLOR:i.getFgColor()),h+=this._optionsService.options.drawBoldTextInBrightColors&&i.isBold()&&h<8?8:0,this._currentGlyphIdentifier.chars=i.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=i.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=u,this._currentGlyphIdentifier.fg=h,this._currentGlyphIdentifier.bold=!!i.isBold(),this._currentGlyphIdentifier.dim=!!i.isDim(),this._currentGlyphIdentifier.italic=!!i.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(i,e,r))},s.prototype._drawUncachedChars=function(i,e,r,h){if(this._ctx.save(),this._ctx.font=this._getFont(!!i.isBold(),!!i.isItalic()),this._ctx.textBaseline="ideographic",i.isInverse())if(h)this._ctx.fillStyle=h.css;else if(i.isBgDefault())this._ctx.fillStyle=g.color.opaque(this._colors.background).css;else if(i.isBgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(i.getBgColor()).join(",")+")";else{var u=i.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&i.isBold()&&u<8&&(u+=8),this._ctx.fillStyle=this._colors.ansi[u].css}else if(h)this._ctx.fillStyle=h.css;else if(i.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(i.isFgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(i.getFgColor()).join(",")+")";else{var y=i.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&i.isBold()&&y<8&&(y+=8),this._ctx.fillStyle=this._colors.ansi[y].css}this._clipRow(r),i.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY);var C=!1;this._optionsService.options.customGlyphs!==!1&&(C=o.tryDrawCustomChar(this._ctx,i.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),C||this._ctx.fillText(i.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},s.prototype._clipRow=function(i){this._ctx.beginPath(),this._ctx.rect(0,i*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},s.prototype._getFont=function(i,e){return(e?"italic":"")+" "+(i?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},s.prototype._getContrastColor=function(i){if(this._optionsService.options.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(i.bg,i.fg);if(e!==void 0)return e||void 0;var r=i.getFgColor(),h=i.getFgColorMode(),u=i.getBgColor(),y=i.getBgColorMode(),C=!!i.isInverse(),E=!!i.isInverse();if(C){var b=r;r=u,u=b;var L=h;h=y,y=L}var w=this._resolveBackgroundRgba(y,u,C),D=this._resolveForegroundRgba(h,r,C,E),M=g.rgba.ensureContrastRatio(w,D,this._optionsService.options.minimumContrastRatio);if(M){var T={css:g.channels.toCss(M>>24&255,M>>16&255,M>>8&255),rgba:M};return this._colors.contrastCache.setColor(i.bg,i.fg,T),T}this._colors.contrastCache.setColor(i.bg,i.fg,null)}},s.prototype._resolveBackgroundRgba=function(i,e,r){switch(i){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;case 0:default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},s.prototype._resolveForegroundRgba=function(i,e,r,h){switch(i){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&h&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;case 0:default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},s}();t.BaseRenderLayer=d},2512:function(x,t,f){var l,p=this&&this.__extends||(l=function(e,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(h[y]=u[y])})(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function h(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(h.prototype=r.prototype,new h)}),_=this&&this.__decorate||function(e,r,h,u){var y,C=arguments.length,E=C<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,h):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,r,h,u);else for(var b=e.length-1;b>=0;b--)(y=e[b])&&(E=(C<3?y(E):C>3?y(r,h,E):y(r,h))||E);return C>3&&E&&Object.defineProperty(r,h,E),E},a=this&&this.__param||function(e,r){return function(h,u){r(h,u,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var m=f(1546),g=f(511),n=f(2585),o=f(4725),d=600,s=function(e){function r(h,u,y,C,E,b,L,w,D){var M=e.call(this,h,"cursor",u,!0,y,C,b,L)||this;return M._onRequestRedraw=E,M._coreService=w,M._coreBrowserService=D,M._cell=new g.CellData,M._state={x:0,y:0,isFocused:!1,style:"",width:0},M._cursorRenderers={bar:M._renderBarCursor.bind(M),block:M._renderBlockCursor.bind(M),underline:M._renderUnderlineCursor.bind(M)},M}return p(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(h){e.prototype.resize.call(this,h),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},r.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var h,u=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new i(this._coreBrowserService.isFocused,function(){u._render(!0)})):((h=this._cursorBlinkStateManager)===null||h===void 0||h.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype.onGridChanged=function(h,u){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(h){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var u=this._bufferService.buffer.ybase+this._bufferService.buffer.y,y=u-this._bufferService.buffer.ydisp;if(y<0||y>=this._bufferService.rows)this._clearCursor();else{var C=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(u).loadCell(C,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var E=this._optionsService.options.cursorStyle;return E&&E!=="block"?this._cursorRenderers[E](C,y,this._cell):this._renderBlurCursor(C,y,this._cell),this._ctx.restore(),this._state.x=C,this._state.y=y,this._state.isFocused=!1,this._state.style=E,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===C&&this._state.y===y&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](C,y,this._cell),this._ctx.restore(),this._state.x=C,this._state.y=y,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(h,u,y){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(h,u,this._optionsService.options.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(h,u,y){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(h,u,y.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(y,h,u),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(h,u,y){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(h,u),this._ctx.restore()},r.prototype._renderBlurCursor=function(h,u,y){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(h,u,y.getWidth(),1),this._ctx.restore()},_([a(5,n.IBufferService),a(6,n.IOptionsService),a(7,n.ICoreService),a(8,o.ICoreBrowserService)],r)}(m.BaseRenderLayer);t.CursorRenderLayer=s;var i=function(){function e(r,h){this._renderCallback=h,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var h=this;r===void 0&&(r=d),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(h._animationTimeRestarted){var u=d-(Date.now()-h._animationTimeRestarted);if(h._animationTimeRestarted=void 0,u>0)return void h._restartInterval(u)}h.isCursorVisible=!1,h._animationFrame=window.requestAnimationFrame(function(){h._renderCallback(),h._animationFrame=void 0}),h._blinkInterval=window.setInterval(function(){if(h._animationTimeRestarted){var y=d-(Date.now()-h._animationTimeRestarted);return h._animationTimeRestarted=void 0,void h._restartInterval(y)}h.isCursorVisible=!h.isCursorVisible,h._animationFrame=window.requestAnimationFrame(function(){h._renderCallback(),h._animationFrame=void 0})},d)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(x,t,f)=>{var l,p,_,a,m,g,n,o,d,s,i,e,r,h,u,y,C,E,b,L,w,D,M,T,R,k,F,I,z,K,N,Y,Z,B,O,P,q,H,G,X,te,re,se,V,$,ae,fe,Te,er,tr,rr,ir,nr,or,sr,ar,cr,lr,hr,ur,fr,_r,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,_t,dt,pt,vt,gt,yt,mt,Ct,St,bt,wt,Lt,Et,xt,At,Mt,Bt,kt,Rt,Tt,Dt,Ot,Pt,It,Ht,Ft,jt,Ut,Wt,qt,Nt,zt,Kt,Vt,dr,pr,vr,gr,yr,mr,Cr,Sr,br,wr,Lr,Er,xr,Ar,Mr,Br;Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var Xr=f(1752);t.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Pi={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"\u2500":(l={},l[1]="M0,.5 L1,.5",l),"\u2501":(p={},p[3]="M0,.5 L1,.5",p),"\u2502":(_={},_[1]="M.5,0 L.5,1",_),"\u2503":(a={},a[3]="M.5,0 L.5,1",a),"\u250C":(m={},m[1]="M0.5,1 L.5,.5 L1,.5",m),"\u250F":(g={},g[3]="M0.5,1 L.5,.5 L1,.5",g),"\u2510":(n={},n[1]="M0,.5 L.5,.5 L.5,1",n),"\u2513":(o={},o[3]="M0,.5 L.5,.5 L.5,1",o),"\u2514":(d={},d[1]="M.5,0 L.5,.5 L1,.5",d),"\u2517":(s={},s[3]="M.5,0 L.5,.5 L1,.5",s),"\u2518":(i={},i[1]="M.5,0 L.5,.5 L0,.5",i),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(h={},h[3]="M.5,0 L.5,1 M.5,.5 L1,.5",h),"\u2524":(u={},u[1]="M.5,0 L.5,1 M.5,.5 L0,.5",u),"\u252B":(y={},y[3]="M.5,0 L.5,1 M.5,.5 L0,.5",y),"\u252C":(C={},C[1]="M0,.5 L1,.5 M.5,.5 L.5,1",C),"\u2533":(E={},E[3]="M0,.5 L1,.5 M.5,.5 L.5,1",E),"\u2534":(b={},b[1]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"\u253B":(L={},L[3]="M0,.5 L1,.5 M.5,.5 L.5,0",L),"\u253C":(w={},w[1]="M0,.5 L1,.5 M.5,0 L.5,1",w),"\u254B":(D={},D[3]="M0,.5 L1,.5 M.5,0 L.5,1",D),"\u2574":(M={},M[1]="M.5,.5 L0,.5",M),"\u2578":(T={},T[3]="M.5,.5 L0,.5",T),"\u2575":(R={},R[1]="M.5,.5 L.5,0",R),"\u2579":(k={},k[3]="M.5,.5 L.5,0",k),"\u2576":(F={},F[1]="M.5,.5 L1,.5",F),"\u257A":(I={},I[3]="M.5,.5 L1,.5",I),"\u2577":(z={},z[1]="M.5,.5 L.5,1",z),"\u257B":(K={},K[3]="M.5,.5 L.5,1",K),"\u2550":(N={},N[1]=function(U,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},N),"\u2551":(Y={},Y[1]=function(U,j){return"M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1"},Y),"\u2552":(Z={},Z[1]=function(U,j){return"M.5,1 L.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},Z),"\u2553":(B={},B[1]=function(U,j){return"M"+(.5-U)+",1 L"+(.5-U)+",.5 L1,.5 M"+(.5+U)+",.5 L"+(.5+U)+",1"},B),"\u2554":(O={},O[1]=function(U,j){return"M1,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1"},O),"\u2555":(P={},P[1]=function(U,j){return"M0,"+(.5-j)+" L.5,"+(.5-j)+" L.5,1 M0,"+(.5+j)+" L.5,"+(.5+j)},P),"\u2556":(q={},q[1]=function(U,j){return"M"+(.5+U)+",1 L"+(.5+U)+",.5 L0,.5 M"+(.5-U)+",.5 L"+(.5-U)+",1"},q),"\u2557":(H={},H[1]=function(U,j){return"M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M0,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",1"},H),"\u2558":(G={},G[1]=function(U,j){return"M.5,0 L.5,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5-j)+" L1,"+(.5-j)},G),"\u2559":(X={},X[1]=function(U,j){return"M1,.5 L"+(.5-U)+",.5 L"+(.5-U)+",0 M"+(.5+U)+",.5 L"+(.5+U)+",0"},X),"\u255A":(te={},te[1]=function(U,j){return"M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0 M1,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",0"},te),"\u255B":(re={},re[1]=function(U,j){return"M0,"+(.5+j)+" L.5,"+(.5+j)+" L.5,0 M0,"+(.5-j)+" L.5,"+(.5-j)},re),"\u255C":(se={},se[1]=function(U,j){return"M0,.5 L"+(.5+U)+",.5 L"+(.5+U)+",0 M"+(.5-U)+",.5 L"+(.5-U)+",0"},se),"\u255D":(V={},V[1]=function(U,j){return"M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0 M0,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",0"},V),"\u255E":($={},$[1]=function(U,j){return"M.5,0 L.5,1 M.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},$),"\u255F":(ae={},ae[1]=function(U,j){return"M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1 M"+(.5+U)+",.5 L1,.5"},ae),"\u2560":(fe={},fe[1]=function(U,j){return"M"+(.5-U)+",0 L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1 M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0"},fe),"\u2561":(Te={},Te[1]=function(U,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L.5,"+(.5-j)+" M0,"+(.5+j)+" L.5,"+(.5+j)},Te),"\u2562":(er={},er[1]=function(U,j){return"M0,.5 L"+(.5-U)+",.5 M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1"},er),"\u2563":(tr={},tr[1]=function(U,j){return"M"+(.5+U)+",0 L"+(.5+U)+",1 M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0"},tr),"\u2564":(rr={},rr[1]=function(U,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5+j)+" L.5,1"},rr),"\u2565":(ir={},ir[1]=function(U,j){return"M0,.5 L1,.5 M"+(.5-U)+",.5 L"+(.5-U)+",1 M"+(.5+U)+",.5 L"+(.5+U)+",1"},ir),"\u2566":(nr={},nr[1]=function(U,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1"},nr),"\u2567":(or={},or[1]=function(U,j){return"M.5,0 L.5,"+(.5-j)+" M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},or),"\u2568":(sr={},sr[1]=function(U,j){return"M0,.5 L1,.5 M"+(.5-U)+",.5 L"+(.5-U)+",0 M"+(.5+U)+",.5 L"+(.5+U)+",0"},sr),"\u2569":(ar={},ar[1]=function(U,j){return"M0,"+(.5+j)+" L1,"+(.5+j)+" M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0 M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0"},ar),"\u256A":(cr={},cr[1]=function(U,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},cr),"\u256B":(lr={},lr[1]=function(U,j){return"M0,.5 L1,.5 M"+(.5-U)+",0 L"+(.5-U)+",1 M"+(.5+U)+",0 L"+(.5+U)+",1"},lr),"\u256C":(hr={},hr[1]=function(U,j){return"M0,"+(.5+j)+" L"+(.5-U)+","+(.5+j)+" L"+(.5-U)+",1 M1,"+(.5+j)+" L"+(.5+U)+","+(.5+j)+" L"+(.5+U)+",1 M0,"+(.5-j)+" L"+(.5-U)+","+(.5-j)+" L"+(.5-U)+",0 M1,"+(.5-j)+" L"+(.5+U)+","+(.5-j)+" L"+(.5+U)+",0"},hr),"\u2571":(ur={},ur[1]="M1,0 L0,1",ur),"\u2572":(fr={},fr[1]="M0,0 L1,1",fr),"\u2573":(_r={},_r[1]="M1,0 L0,1 M0,0 L1,1",_r),"\u257C":(Je={},Je[1]="M.5,.5 L0,.5",Je[3]="M.5,.5 L1,.5",Je),"\u257D":($e={},$e[1]="M.5,.5 L.5,0",$e[3]="M.5,.5 L.5,1",$e),"\u257E":(Qe={},Qe[1]="M.5,.5 L1,.5",Qe[3]="M.5,.5 L0,.5",Qe),"\u257F":(et={},et[1]="M.5,.5 L.5,1",et[3]="M.5,.5 L.5,0",et),"\u250D":(tt={},tt[1]="M.5,.5 L.5,1",tt[3]="M.5,.5 L1,.5",tt),"\u250E":(rt={},rt[1]="M.5,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2511":(it={},it[1]="M.5,.5 L.5,1",it[3]="M.5,.5 L0,.5",it),"\u2512":(nt={},nt[1]="M.5,.5 L0,.5",nt[3]="M.5,.5 L.5,1",nt),"\u2515":(ot={},ot[1]="M.5,.5 L.5,0",ot[3]="M.5,.5 L1,.5",ot),"\u2516":(st={},st[1]="M.5,.5 L1,.5",st[3]="M.5,.5 L.5,0",st),"\u2519":(at={},at[1]="M.5,.5 L.5,0",at[3]="M.5,.5 L0,.5",at),"\u251A":(ct={},ct[1]="M.5,.5 L0,.5",ct[3]="M.5,.5 L.5,0",ct),"\u251D":(lt={},lt[1]="M.5,0 L.5,1",lt[3]="M.5,.5 L1,.5",lt),"\u251E":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L.5,0",ht),"\u251F":(ut={},ut[1]="M.5,0 L.5,.5 L1,.5",ut[3]="M.5,.5 L.5,1",ut),"\u2520":(ft={},ft[1]="M.5,.5 L1,.5",ft[3]="M.5,0 L.5,1",ft),"\u2521":(_t={},_t[1]="M.5,.5 L.5,1",_t[3]="M.5,0 L.5,.5 L1,.5",_t),"\u2522":(dt={},dt[1]="M.5,.5 L.5,0",dt[3]="M0.5,1 L.5,.5 L1,.5",dt),"\u2525":(pt={},pt[1]="M.5,0 L.5,1",pt[3]="M.5,.5 L0,.5",pt),"\u2526":(vt={},vt[1]="M0,.5 L.5,.5 L.5,1",vt[3]="M.5,.5 L.5,0",vt),"\u2527":(gt={},gt[1]="M.5,0 L.5,.5 L0,.5",gt[3]="M.5,.5 L.5,1",gt),"\u2528":(yt={},yt[1]="M.5,.5 L0,.5",yt[3]="M.5,0 L.5,1",yt),"\u2529":(mt={},mt[1]="M.5,.5 L.5,1",mt[3]="M.5,0 L.5,.5 L0,.5",mt),"\u252A":(Ct={},Ct[1]="M.5,.5 L.5,0",Ct[3]="M0,.5 L.5,.5 L.5,1",Ct),"\u252D":(St={},St[1]="M0.5,1 L.5,.5 L1,.5",St[3]="M.5,.5 L0,.5",St),"\u252E":(bt={},bt[1]="M0,.5 L.5,.5 L.5,1",bt[3]="M.5,.5 L1,.5",bt),"\u252F":(wt={},wt[1]="M.5,.5 L.5,1",wt[3]="M0,.5 L1,.5",wt),"\u2530":(Lt={},Lt[1]="M0,.5 L1,.5",Lt[3]="M.5,.5 L.5,1",Lt),"\u2531":(Et={},Et[1]="M.5,.5 L1,.5",Et[3]="M0,.5 L.5,.5 L.5,1",Et),"\u2532":(xt={},xt[1]="M.5,.5 L0,.5",xt[3]="M0.5,1 L.5,.5 L1,.5",xt),"\u2535":(At={},At[1]="M.5,0 L.5,.5 L1,.5",At[3]="M.5,.5 L0,.5",At),"\u2536":(Mt={},Mt[1]="M.5,0 L.5,.5 L0,.5",Mt[3]="M.5,.5 L1,.5",Mt),"\u2537":(Bt={},Bt[1]="M.5,.5 L.5,0",Bt[3]="M0,.5 L1,.5",Bt),"\u2538":(kt={},kt[1]="M0,.5 L1,.5",kt[3]="M.5,.5 L.5,0",kt),"\u2539":(Rt={},Rt[1]="M.5,.5 L1,.5",Rt[3]="M.5,0 L.5,.5 L0,.5",Rt),"\u253A":(Tt={},Tt[1]="M.5,.5 L0,.5",Tt[3]="M.5,0 L.5,.5 L1,.5",Tt),"\u253D":(Dt={},Dt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Dt[3]="M.5,.5 L0,.5",Dt),"\u253E":(Ot={},Ot[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ot[3]="M.5,.5 L1,.5",Ot),"\u253F":(Pt={},Pt[1]="M.5,0 L.5,1",Pt[3]="M0,.5 L1,.5",Pt),"\u2540":(It={},It[1]="M0,.5 L1,.5 M.5,.5 L.5,1",It[3]="M.5,.5 L.5,0",It),"\u2541":(Ht={},Ht[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ht[3]="M.5,.5 L.5,1",Ht),"\u2542":(Ft={},Ft[1]="M0,.5 L1,.5",Ft[3]="M.5,0 L.5,1",Ft),"\u2543":(jt={},jt[1]="M0.5,1 L.5,.5 L1,.5",jt[3]="M.5,0 L.5,.5 L0,.5",jt),"\u2544":(Ut={},Ut[1]="M0,.5 L.5,.5 L.5,1",Ut[3]="M.5,0 L.5,.5 L1,.5",Ut),"\u2545":(Wt={},Wt[1]="M.5,0 L.5,.5 L1,.5",Wt[3]="M0,.5 L.5,.5 L.5,1",Wt),"\u2546":(qt={},qt[1]="M.5,0 L.5,.5 L0,.5",qt[3]="M0.5,1 L.5,.5 L1,.5",qt),"\u2547":(Nt={},Nt[1]="M.5,.5 L.5,1",Nt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Nt),"\u2548":(zt={},zt[1]="M.5,.5 L.5,0",zt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",zt),"\u2549":(Kt={},Kt[1]="M.5,.5 L1,.5",Kt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Kt),"\u254A":(Vt={},Vt[1]="M.5,.5 L0,.5",Vt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Vt),"\u254C":(dr={},dr[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",dr),"\u254D":(pr={},pr[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",pr),"\u2504":(vr={},vr[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",vr),"\u2505":(gr={},gr[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",gr),"\u2508":(yr={},yr[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",yr),"\u2509":(mr={},mr[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",mr),"\u254E":(Cr={},Cr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Cr),"\u254F":(Sr={},Sr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Sr),"\u2506":(br={},br[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",br),"\u2507":(wr={},wr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",wr),"\u250A":(Lr={},Lr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Lr),"\u250B":(Er={},Er[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Er),"\u256D":(xr={},xr[1]="C.5,1,.5,.5,1,.5",xr),"\u256E":(Ar={},Ar[1]="C.5,1,.5,.5,0,.5",Ar),"\u256F":(Mr={},Mr[1]="C.5,0,.5,.5,0,.5",Mr),"\u2570":(Br={},Br[1]="C.5,0,.5,.5,1,.5",Br)},t.tryDrawCustomChar=function(U,j,_e,We,qe,Q){var de=t.blockElementDefinitions[j];if(de)return function(ie,ve,ze,Ke,De,Oe){for(var ce=0;ce<ve.length;ce++){var oe=ve[ce],J=De/8,me=Oe/8;ie.fillRect(ze+oe.x*J,Ke+oe.y*me,oe.w*J,oe.h*me)}}(U,de,_e,We,qe,Q),!0;var pe=Pi[j];if(pe)return function(ie,ve,ze,Ke,De,Oe){var ce,oe=Zr.get(ve);oe||(oe=new Map,Zr.set(ve,oe));var J=ie.fillStyle;if(typeof J!="string")throw new Error('Unexpected fillStyle type "'+J+'"');var me=oe.get(J);if(!me){var ue=ve[0].length,Le=ve.length,Ee=document.createElement("canvas");Ee.width=ue,Ee.height=Le;var Gt=Xr.throwIfFalsy(Ee.getContext("2d")),Se=new ImageData(ue,Le),Pe=void 0,xe=void 0,kr=void 0,Rr=void 0;if(J.startsWith("#"))Pe=parseInt(J.substr(1,2),16),xe=parseInt(J.substr(3,2),16),kr=parseInt(J.substr(5,2),16),Rr=J.length>7&&parseInt(J.substr(7,2),16)||1;else{if(!J.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+J+'" when drawing pattern glyph');Pe=(ce=J.substring(5,J.length-1).split(",").map(function(Fi){return parseFloat(Fi)}))[0],xe=ce[1],kr=ce[2],Rr=ce[3]}for(var Ae=0;Ae<Le;Ae++)for(var Me=0;Me<ue;Me++)Se.data[4*(Ae*ue+Me)]=Pe,Se.data[4*(Ae*ue+Me)+1]=xe,Se.data[4*(Ae*ue+Me)+2]=kr,Se.data[4*(Ae*ue+Me)+3]=ve[Ae][Me]*(255*Rr);Gt.putImageData(Se,0,0),me=Xr.throwIfFalsy(ie.createPattern(Ee,null)),oe.set(J,me)}ie.fillStyle=me,ie.fillRect(ze,Ke,De,Oe)}(U,pe,_e,We,qe,Q),!0;var Ne=t.boxDrawingDefinitions[j];return!!Ne&&(function(ie,ve,ze,Ke,De,Oe){ie.strokeStyle=ie.fillStyle;for(var ce=0,oe=Object.entries(ve);ce<oe.length;ce++){var J=oe[ce],me=J[0],ue=J[1];ie.beginPath(),ie.lineWidth=window.devicePixelRatio*Number.parseInt(me);for(var Le=0,Ee=(typeof ue=="function"?ue(.15,.15/Oe*De):ue).split(" ");Le<Ee.length;Le++){var Gt=Ee[Le],Se=Gt[0],Pe=Ii[Se];if(Pe){var xe=Gt.substring(1).split(",");xe[0]&&xe[1]&&Pe(ie,Hi(xe,De,Oe,ze,Ke))}else console.error('Could not find drawing instructions for "'+Se+'"')}ie.stroke(),ie.closePath()}}(U,Ne,_e,We,qe,Q),!0)};var Zr=new Map;function Jr(U,j,_e){return _e===void 0&&(_e=0),Math.max(Math.min(U,j),_e)}var Ii={C:function(U,j){return U.bezierCurveTo(j[0],j[1],j[2],j[3],j[4],j[5])},L:function(U,j){return U.lineTo(j[0],j[1])},M:function(U,j){return U.moveTo(j[0],j[1])}};function Hi(U,j,_e,We,qe){var Q=U.map(function(Ne){return parseFloat(Ne)||parseInt(Ne)});if(Q.length<2)throw new Error("Too few arguments for instruction");for(var de=0;de<Q.length;de+=2)Q[de]*=j,Q[de]!==0&&(Q[de]=Jr(Math.round(Q[de]+.5)-.5,j,0)),Q[de]+=We;for(var pe=1;pe<Q.length;pe+=2)Q[pe]*=_e,Q[pe]!==0&&(Q[pe]=Jr(Math.round(Q[pe]+.5)-.5,_e,0)),Q[pe]+=qe;return Q}},3700:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var f=function(){function l(){this.cache=[]}return l.prototype.resize=function(p,_){for(var a=0;a<p;a++){this.cache.length<=a&&this.cache.push([]);for(var m=this.cache[a].length;m<_;m++)this.cache[a].push(void 0);this.cache[a].length=_}this.cache.length=p},l.prototype.clear=function(){for(var p=0;p<this.cache.length;p++)for(var _=0;_<this.cache[p].length;_++)this.cache[p][_]=void 0},l}();t.GridCache=f},5098:function(x,t,f){var l,p=this&&this.__extends||(l=function(s,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(e[h]=r[h])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}l(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),_=this&&this.__decorate||function(s,i,e,r){var h,u=arguments.length,y=u<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,i,e,r);else for(var C=s.length-1;C>=0;C--)(h=s[C])&&(y=(u<3?h(y):u>3?h(i,e,y):h(i,e))||y);return u>3&&y&&Object.defineProperty(i,e,y),y},a=this&&this.__param||function(s,i){return function(e,r){i(e,r,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var m=f(1546),g=f(8803),n=f(2040),o=f(2585),d=function(s){function i(e,r,h,u,y,C,E,b){var L=s.call(this,e,"link",r,!0,h,u,E,b)||this;return y.onShowLinkUnderline(function(w){return L._onShowLinkUnderline(w)}),y.onHideLinkUnderline(function(w){return L._onHideLinkUnderline(w)}),C.onShowLinkUnderline(function(w){return L._onShowLinkUnderline(w)}),C.onHideLinkUnderline(function(w){return L._onHideLinkUnderline(w)}),L}return p(i,s),i.prototype.resize=function(e){s.prototype.resize.call(this,e),this._state=void 0},i.prototype.reset=function(){this._clearCurrentLink()},i.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},i.prototype._onShowLinkUnderline=function(e){if(e.fg===g.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&n.is256Color(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},i.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},_([a(6,o.IBufferService),a(7,o.IOptionsService)],i)}(m.BaseRenderLayer);t.LinkRenderLayer=d},3525:function(x,t,f){var l,p=this&&this.__extends||(l=function(y,C){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,b){E.__proto__=b}||function(E,b){for(var L in b)Object.prototype.hasOwnProperty.call(b,L)&&(E[L]=b[L])})(y,C)},function(y,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function E(){this.constructor=y}l(y,C),y.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}),_=this&&this.__decorate||function(y,C,E,b){var L,w=arguments.length,D=w<3?C:b===null?b=Object.getOwnPropertyDescriptor(C,E):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(y,C,E,b);else for(var M=y.length-1;M>=0;M--)(L=y[M])&&(D=(w<3?L(D):w>3?L(C,E,D):L(C,E))||D);return w>3&&D&&Object.defineProperty(C,E,D),D},a=this&&this.__param||function(y,C){return function(E,b){C(E,b,y)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var m=f(9596),g=f(4149),n=f(2512),o=f(5098),d=f(844),s=f(4725),i=f(2585),e=f(1420),r=f(8460),h=1,u=function(y){function C(E,b,L,w,D,M,T,R){var k=y.call(this)||this;k._colors=E,k._screenElement=b,k._bufferService=M,k._charSizeService=T,k._optionsService=R,k._id=h++,k._onRequestRedraw=new r.EventEmitter;var F=k._optionsService.options.allowTransparency;return k._renderLayers=[D.createInstance(m.TextRenderLayer,k._screenElement,0,k._colors,F,k._id),D.createInstance(g.SelectionRenderLayer,k._screenElement,1,k._colors,k._id),D.createInstance(o.LinkRenderLayer,k._screenElement,2,k._colors,k._id,L,w),D.createInstance(n.CursorRenderLayer,k._screenElement,3,k._colors,k._id,k._onRequestRedraw)],k.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},k._devicePixelRatio=window.devicePixelRatio,k._updateDimensions(),k.onOptionsChanged(),k}return p(C,y),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){for(var E=0,b=this._renderLayers;E<b.length;E++)b[E].dispose();y.prototype.dispose.call(this),e.removeTerminalFromCache(this._id)},C.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},C.prototype.setColors=function(E){this._colors=E;for(var b=0,L=this._renderLayers;b<L.length;b++){var w=L[b];w.setColors(this._colors),w.reset()}},C.prototype.onResize=function(E,b){this._updateDimensions();for(var L=0,w=this._renderLayers;L<w.length;L++)w[L].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},C.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},C.prototype.onBlur=function(){this._runOperation(function(E){return E.onBlur()})},C.prototype.onFocus=function(){this._runOperation(function(E){return E.onFocus()})},C.prototype.onSelectionChanged=function(E,b,L){L===void 0&&(L=!1),this._runOperation(function(w){return w.onSelectionChanged(E,b,L)})},C.prototype.onCursorMove=function(){this._runOperation(function(E){return E.onCursorMove()})},C.prototype.onOptionsChanged=function(){this._runOperation(function(E){return E.onOptionsChanged()})},C.prototype.clear=function(){this._runOperation(function(E){return E.reset()})},C.prototype._runOperation=function(E){for(var b=0,L=this._renderLayers;b<L.length;b++)E(L[b])},C.prototype.renderRows=function(E,b){for(var L=0,w=this._renderLayers;L<w.length;L++)w[L].onGridChanged(E,b)},C.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},_([a(4,i.IInstantiationService),a(5,i.IBufferService),a(6,s.ICharSizeService),a(7,i.IOptionsService)],C)}(d.Disposable);t.Renderer=u},1752:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfFalsy=void 0,t.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f}},4149:function(x,t,f){var l,p=this&&this.__extends||(l=function(o,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(s[e]=i[e])})(o,d)},function(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function s(){this.constructor=o}l(o,d),o.prototype=d===null?Object.create(d):(s.prototype=d.prototype,new s)}),_=this&&this.__decorate||function(o,d,s,i){var e,r=arguments.length,h=r<3?d:i===null?i=Object.getOwnPropertyDescriptor(d,s):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(o,d,s,i);else for(var u=o.length-1;u>=0;u--)(e=o[u])&&(h=(r<3?e(h):r>3?e(d,s,h):e(d,s))||h);return r>3&&h&&Object.defineProperty(d,s,h),h},a=this&&this.__param||function(o,d){return function(s,i){d(s,i,o)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var m=f(1546),g=f(2585),n=function(o){function d(s,i,e,r,h,u){var y=o.call(this,s,"selection",i,!0,e,r,h,u)||this;return y._clearState(),y}return p(d,o),d.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},d.prototype.resize=function(s){o.prototype.resize.call(this,s),this._clearState()},d.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},d.prototype.onSelectionChanged=function(s,i,e){if(this._didStateChange(s,i,e,this._bufferService.buffer.ydisp))if(this._clearAll(),s&&i){var r=s[1]-this._bufferService.buffer.ydisp,h=i[1]-this._bufferService.buffer.ydisp,u=Math.max(r,0),y=Math.min(h,this._bufferService.rows-1);if(u>=this._bufferService.rows||y<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var C=s[0],E=i[0]-C,b=y-u+1;this._fillCells(C,u,E,b)}else{C=r===u?s[0]:0;var L=u===h?i[0]:this._bufferService.cols;this._fillCells(C,u,L-C,1);var w=Math.max(y-u-1,0);if(this._fillCells(0,u+1,this._bufferService.cols,w),u!==y){var D=h===y?i[0]:this._bufferService.cols;this._fillCells(0,y,D,1)}}this._state.start=[s[0],s[1]],this._state.end=[i[0],i[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},d.prototype._didStateChange=function(s,i,e,r){return!this._areCoordinatesEqual(s,this._state.start)||!this._areCoordinatesEqual(i,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},d.prototype._areCoordinatesEqual=function(s,i){return!(!s||!i)&&s[0]===i[0]&&s[1]===i[1]},_([a(4,g.IBufferService),a(5,g.IOptionsService)],d)}(m.BaseRenderLayer);t.SelectionRenderLayer=n},9596:function(x,t,f){var l,p=this&&this.__extends||(l=function(h,u){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,C){y.__proto__=C}||function(y,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(y[E]=C[E])})(h,u)},function(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function y(){this.constructor=h}l(h,u),h.prototype=u===null?Object.create(u):(y.prototype=u.prototype,new y)}),_=this&&this.__decorate||function(h,u,y,C){var E,b=arguments.length,L=b<3?u:C===null?C=Object.getOwnPropertyDescriptor(u,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,u,y,C);else for(var w=h.length-1;w>=0;w--)(E=h[w])&&(L=(b<3?E(L):b>3?E(u,y,L):E(u,y))||L);return b>3&&L&&Object.defineProperty(u,y,L),L},a=this&&this.__param||function(h,u){return function(y,C){u(y,C,h)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var m=f(3700),g=f(1546),n=f(3734),o=f(643),d=f(511),s=f(2585),i=f(4725),e=f(4269),r=function(h){function u(y,C,E,b,L,w,D,M){var T=h.call(this,y,"text",C,b,E,L,w,D)||this;return T._characterJoinerService=M,T._characterWidth=0,T._characterFont="",T._characterOverlapCache={},T._workCell=new d.CellData,T._state=new m.GridCache,T}return p(u,h),u.prototype.resize=function(y){h.prototype.resize.call(this,y);var C=this._getFont(!1,!1);this._characterWidth===y.scaledCharWidth&&this._characterFont===C||(this._characterWidth=y.scaledCharWidth,this._characterFont=C,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},u.prototype.reset=function(){this._state.clear(),this._clearAll()},u.prototype._forEachCell=function(y,C,E){for(var b=y;b<=C;b++)for(var L=b+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.lines.get(L),D=this._characterJoinerService.getJoinedCharacters(L),M=0;M<this._bufferService.cols;M++){w.loadCell(M,this._workCell);var T=this._workCell,R=!1,k=M;if(T.getWidth()!==0){if(D.length>0&&M===D[0][0]){R=!0;var F=D.shift();T=new e.JoinedCellData(this._workCell,w.translateToString(!0,F[0],F[1]),F[1]-F[0]),k=F[1]-1}!R&&this._isOverlapping(T)&&k<w.length-1&&w.getCodePoint(k+1)===o.NULL_CELL_CODE&&(T.content&=-12582913,T.content|=2<<22),E(T,M,b),M=k}}},u.prototype._drawBackground=function(y,C){var E=this,b=this._ctx,L=this._bufferService.cols,w=0,D=0,M=null;b.save(),this._forEachCell(y,C,function(T,R,k){var F=null;T.isInverse()?F=T.isFgDefault()?E._colors.foreground.css:T.isFgRGB()?"rgb("+n.AttributeData.toColorRGB(T.getFgColor()).join(",")+")":E._colors.ansi[T.getFgColor()].css:T.isBgRGB()?F="rgb("+n.AttributeData.toColorRGB(T.getBgColor()).join(",")+")":T.isBgPalette()&&(F=E._colors.ansi[T.getBgColor()].css),M===null&&(w=R,D=k),k!==D?(b.fillStyle=M||"",E._fillCells(w,D,L-w,1),w=R,D=k):M!==F&&(b.fillStyle=M||"",E._fillCells(w,D,R-w,1),w=R,D=k),M=F}),M!==null&&(b.fillStyle=M,this._fillCells(w,D,L-w,1)),b.restore()},u.prototype._drawForeground=function(y,C){var E=this;this._forEachCell(y,C,function(b,L,w){if(!b.isInvisible()&&(E._drawChars(b,L,w),b.isUnderline()||b.isStrikethrough())){if(E._ctx.save(),b.isInverse())if(b.isBgDefault())E._ctx.fillStyle=E._colors.background.css;else if(b.isBgRGB())E._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(b.getBgColor()).join(",")+")";else{var D=b.getBgColor();E._optionsService.options.drawBoldTextInBrightColors&&b.isBold()&&D<8&&(D+=8),E._ctx.fillStyle=E._colors.ansi[D].css}else if(b.isFgDefault())E._ctx.fillStyle=E._colors.foreground.css;else if(b.isFgRGB())E._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(b.getFgColor()).join(",")+")";else{var M=b.getFgColor();E._optionsService.options.drawBoldTextInBrightColors&&b.isBold()&&M<8&&(M+=8),E._ctx.fillStyle=E._colors.ansi[M].css}b.isStrikethrough()&&E._fillMiddleLineAtCells(L,w,b.getWidth()),b.isUnderline()&&E._fillBottomLineAtCells(L,w,b.getWidth()),E._ctx.restore()}})},u.prototype.onGridChanged=function(y,C){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,y,this._bufferService.cols,C-y+1),this._drawBackground(y,C),this._drawForeground(y,C))},u.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},u.prototype._isOverlapping=function(y){if(y.getWidth()!==1||y.getCode()<256)return!1;var C=y.getChars();if(this._characterOverlapCache.hasOwnProperty(C))return this._characterOverlapCache[C];this._ctx.save(),this._ctx.font=this._characterFont;var E=Math.floor(this._ctx.measureText(C).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[C]=E,E},_([a(5,s.IBufferService),a(6,s.IOptionsService),a(7,i.ICharacterJoinerService)],u)}(g.BaseRenderLayer);t.TextRenderLayer=r},9616:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var f=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.beginFrame=function(){},l}();t.BaseCharAtlas=f},1420:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var l=f(2040),p=f(1906),_=[];t.acquireCharAtlas=function(a,m,g,n,o){for(var d=l.generateConfig(n,o,a,g),s=0;s<_.length;s++){var i=(e=_[s]).ownedBy.indexOf(m);if(i>=0){if(l.configEquals(e.config,d))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),_.splice(s,1)):e.ownedBy.splice(i,1);break}}for(s=0;s<_.length;s++){var e=_[s];if(l.configEquals(e.config,d))return e.ownedBy.push(m),e.atlas}var r={atlas:new p.DynamicCharAtlas(document,d),config:d,ownedBy:[m]};return _.push(r),r.atlas},t.removeTerminalFromCache=function(a){for(var m=0;m<_.length;m++){var g=_[m].ownedBy.indexOf(a);if(g!==-1){_[m].ownedBy.length===1?(_[m].atlas.dispose(),_.splice(m,1)):_[m].ownedBy.splice(g,1);break}}}},2040:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var l=f(643);t.generateConfig=function(p,_,a,m){var g={foreground:m.foreground,background:m.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:m.ansi};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:_,fontFamily:a.fontFamily,fontSize:a.fontSize,fontWeight:a.fontWeight,fontWeightBold:a.fontWeightBold,allowTransparency:a.allowTransparency,colors:g}},t.configEquals=function(p,_){for(var a=0;a<p.colors.ansi.length;a++)if(p.colors.ansi[a].rgba!==_.colors.ansi[a].rgba)return!1;return p.devicePixelRatio===_.devicePixelRatio&&p.fontFamily===_.fontFamily&&p.fontSize===_.fontSize&&p.fontWeight===_.fontWeight&&p.fontWeightBold===_.fontWeightBold&&p.allowTransparency===_.allowTransparency&&p.scaledCharWidth===_.scaledCharWidth&&p.scaledCharHeight===_.scaledCharHeight&&p.colors.foreground===_.colors.foreground&&p.colors.background===_.colors.background},t.is256Color=function(p){return p<l.DEFAULT_COLOR}},8803:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0,t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.CHAR_ATLAS_CELL_SPACING=1},1906:function(x,t,f){var l,p=this&&this.__extends||(l=function(u,y){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,E){C.__proto__=E}||function(C,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(C[b]=E[b])})(u,y)},function(u,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function C(){this.constructor=u}l(u,y),u.prototype=y===null?Object.create(y):(C.prototype=y.prototype,new C)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var _=f(8803),a=f(9616),m=f(5680),g=f(7001),n=f(6114),o=f(1752),d=f(4774),s={css:"rgba(0, 0, 0, 0)",rgba:0};function i(u){return u.code<<21|u.bg<<12|u.fg<<3|(u.bold?0:4)+(u.dim?0:2)+(u.italic?0:1)}t.getGlyphCacheKey=i;var e=function(u){function y(C,E){var b=u.call(this)||this;b._config=E,b._drawToCacheCount=0,b._glyphsWaitingOnBitmap=[],b._bitmapCommitTimeout=null,b._bitmap=null,b._cacheCanvas=C.createElement("canvas"),b._cacheCanvas.width=1024,b._cacheCanvas.height=1024,b._cacheCtx=o.throwIfFalsy(b._cacheCanvas.getContext("2d",{alpha:!0}));var L=C.createElement("canvas");L.width=b._config.scaledCharWidth,L.height=b._config.scaledCharHeight,b._tmpCtx=o.throwIfFalsy(L.getContext("2d",{alpha:b._config.allowTransparency})),b._width=Math.floor(1024/b._config.scaledCharWidth),b._height=Math.floor(1024/b._config.scaledCharHeight);var w=b._width*b._height;return b._cacheMap=new g.LRUMap(w),b._cacheMap.prealloc(w),b}return p(y,u),y.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},y.prototype.beginFrame=function(){this._drawToCacheCount=0},y.prototype.draw=function(C,E,b,L){if(E.code===32)return!0;if(!this._canCache(E))return!1;var w=i(E),D=this._cacheMap.get(w);if(D!=null)return this._drawFromCache(C,D,b,L),!0;if(this._drawToCacheCount<100){var M;M=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var T=this._drawToCache(E,M);return this._cacheMap.set(w,T),this._drawFromCache(C,T,b,L),!0}return!1},y.prototype._canCache=function(C){return C.code<256},y.prototype._toCoordinateX=function(C){return C%this._width*this._config.scaledCharWidth},y.prototype._toCoordinateY=function(C){return Math.floor(C/this._width)*this._config.scaledCharHeight},y.prototype._drawFromCache=function(C,E,b,L){if(!E.isEmpty){var w=this._toCoordinateX(E.index),D=this._toCoordinateY(E.index);C.drawImage(E.inBitmap?this._bitmap:this._cacheCanvas,w,D,this._config.scaledCharWidth,this._config.scaledCharHeight,b,L,this._config.scaledCharWidth,this._config.scaledCharHeight)}},y.prototype._getColorFromAnsiIndex=function(C){return C<this._config.colors.ansi.length?this._config.colors.ansi[C]:m.DEFAULT_ANSI_COLORS[C]},y.prototype._getBackgroundColor=function(C){return this._config.allowTransparency?s:C.bg===_.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:C.bg<256?this._getColorFromAnsiIndex(C.bg):this._config.colors.background},y.prototype._getForegroundColor=function(C){return C.fg===_.INVERTED_DEFAULT_COLOR?d.color.opaque(this._config.colors.background):C.fg<256?this._getColorFromAnsiIndex(C.fg):this._config.colors.foreground},y.prototype._drawToCache=function(C,E){this._drawToCacheCount++,this._tmpCtx.save();var b=this._getBackgroundColor(C);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=b.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var L=C.bold?this._config.fontWeightBold:this._config.fontWeight,w=C.italic?"italic":"";this._tmpCtx.font=w+" "+L+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(C).css,C.dim&&(this._tmpCtx.globalAlpha=_.DIM_OPACITY),this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight);var D=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),M=!1;if(this._config.allowTransparency||(M=h(D,b)),M&&C.chars==="_"&&!this._config.allowTransparency)for(var T=1;T<=5&&(this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight-T),M=h(D=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),b));T++);this._tmpCtx.restore();var R=this._toCoordinateX(E),k=this._toCoordinateY(E);this._cacheCtx.putImageData(D,R,k);var F={index:E,isEmpty:M,inBitmap:!1};return this._addGlyphToBitmap(F),F},y.prototype._addGlyphToBitmap=function(C){var E=this;!("createImageBitmap"in window)||n.isFirefox||n.isSafari||(this._glyphsWaitingOnBitmap.push(C),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return E._generateBitmap()},100)))},y.prototype._generateBitmap=function(){var C=this,E=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(b){C._bitmap=b;for(var L=0;L<E.length;L++)E[L].inBitmap=!0}),this._bitmapCommitTimeout=null},y}(a.BaseCharAtlas);t.DynamicCharAtlas=e;var r=function(u){function y(C,E){return u.call(this)||this}return p(y,u),y.prototype.draw=function(C,E,b,L){return!1},y}(a.BaseCharAtlas);function h(u,y){for(var C=!0,E=y.rgba>>>24,b=y.rgba>>>16&255,L=y.rgba>>>8&255,w=0;w<u.data.length;w+=4)u.data[w]===E&&u.data[w+1]===b&&u.data[w+2]===L?u.data[w+3]=0:C=!1;return C}t.NoneCharAtlas=r},7001:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var f=function(){function l(p){this.capacity=p,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(p){var _=p.prev,a=p.next;p===this._head&&(this._head=a),p===this._tail&&(this._tail=_),_!==null&&(_.next=a),a!==null&&(a.prev=_)},l.prototype._appendNode=function(p){var _=this._tail;_!==null&&(_.next=p),p.prev=_,p.next=null,this._tail=p,this._head===null&&(this._head=p)},l.prototype.prealloc=function(p){for(var _=this._nodePool,a=0;a<p;a++)_.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(p){var _=this._map[p];return _!==void 0?(this._unlinkNode(_),this._appendNode(_),_.value):null},l.prototype.peekValue=function(p){var _=this._map[p];return _!==void 0?_.value:null},l.prototype.peek=function(){var p=this._head;return p===null?null:p.value},l.prototype.set=function(p,_){var a=this._map[p];if(a!==void 0)a=this._map[p],this._unlinkNode(a),a.value=_;else if(this.size>=this.capacity)a=this._head,this._unlinkNode(a),delete this._map[a.key],a.key=p,a.value=_,this._map[p]=a;else{var m=this._nodePool;m.length>0?((a=m.pop()).key=p,a.value=_):a={prev:null,next:null,key:p,value:_},this._map[p]=a,this.size++}this._appendNode(a)},l}();t.LRUMap=f},1296:function(x,t,f){var l,p=this&&this.__extends||(l=function(b,L){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,D){w.__proto__=D}||function(w,D){for(var M in D)Object.prototype.hasOwnProperty.call(D,M)&&(w[M]=D[M])})(b,L)},function(b,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function w(){this.constructor=b}l(b,L),b.prototype=L===null?Object.create(L):(w.prototype=L.prototype,new w)}),_=this&&this.__decorate||function(b,L,w,D){var M,T=arguments.length,R=T<3?L:D===null?D=Object.getOwnPropertyDescriptor(L,w):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(b,L,w,D);else for(var k=b.length-1;k>=0;k--)(M=b[k])&&(R=(T<3?M(R):T>3?M(L,w,R):M(L,w))||R);return T>3&&R&&Object.defineProperty(L,w,R),R},a=this&&this.__param||function(b,L){return function(w,D){L(w,D,b)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var m=f(3787),g=f(8803),n=f(844),o=f(4725),d=f(2585),s=f(8460),i=f(4774),e=f(9631),r="xterm-dom-renderer-owner-",h="xterm-fg-",u="xterm-bg-",y="xterm-focus",C=1,E=function(b){function L(w,D,M,T,R,k,F,I,z,K){var N=b.call(this)||this;return N._colors=w,N._element=D,N._screenElement=M,N._viewportElement=T,N._linkifier=R,N._linkifier2=k,N._charSizeService=I,N._optionsService=z,N._bufferService=K,N._terminalClass=C++,N._rowElements=[],N._rowContainer=document.createElement("div"),N._rowContainer.classList.add("xterm-rows"),N._rowContainer.style.lineHeight="normal",N._rowContainer.setAttribute("aria-hidden","true"),N._refreshRowElements(N._bufferService.cols,N._bufferService.rows),N._selectionContainer=document.createElement("div"),N._selectionContainer.classList.add("xterm-selection"),N._selectionContainer.setAttribute("aria-hidden","true"),N.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},N._updateDimensions(),N._injectCss(),N._rowFactory=F.createInstance(m.DomRendererRowFactory,document,N._colors),N._element.classList.add(r+N._terminalClass),N._screenElement.appendChild(N._rowContainer),N._screenElement.appendChild(N._selectionContainer),N._linkifier.onShowLinkUnderline(function(Y){return N._onLinkHover(Y)}),N._linkifier.onHideLinkUnderline(function(Y){return N._onLinkLeave(Y)}),N._linkifier2.onShowLinkUnderline(function(Y){return N._onLinkHover(Y)}),N._linkifier2.onHideLinkUnderline(function(Y){return N._onLinkLeave(Y)}),N}return p(L,b),Object.defineProperty(L.prototype,"onRequestRedraw",{get:function(){return new s.EventEmitter().event},enumerable:!1,configurable:!0}),L.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),e.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),b.prototype.dispose.call(this)},L.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var w=0,D=this._rowElements;w<D.length;w++){var M=D[w];M.style.width=this.dimensions.canvasWidth+"px",M.style.height=this.dimensions.actualCellHeight+"px",M.style.lineHeight=this.dimensions.actualCellHeight+"px",M.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var T=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},L.prototype.setColors=function(w){this._colors=w,this._injectCss()},L.prototype._injectCss=function(){var w=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var D=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";D+=this._terminalSelector+" span:not(."+m.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+m.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+m.ITALIC_CLASS+" { font-style: italic;}",D+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",D+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",D+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_BLINK_CLASS+":not(."+m.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_BLINK_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+m.CURSOR_CLASS+"."+m.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",D+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(M,T){D+=w._terminalSelector+" ."+h+T+" { color: "+M.css+"; }"+w._terminalSelector+" ."+u+T+" { background-color: "+M.css+"; }"}),D+=this._terminalSelector+" ."+h+g.INVERTED_DEFAULT_COLOR+" { color: "+i.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+u+g.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=D},L.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},L.prototype._refreshRowElements=function(w,D){for(var M=this._rowElements.length;M<=D;M++){var T=document.createElement("div");this._rowContainer.appendChild(T),this._rowElements.push(T)}for(;this._rowElements.length>D;)this._rowContainer.removeChild(this._rowElements.pop())},L.prototype.onResize=function(w,D){this._refreshRowElements(w,D),this._updateDimensions()},L.prototype.onCharSizeChanged=function(){this._updateDimensions()},L.prototype.onBlur=function(){this._rowContainer.classList.remove(y)},L.prototype.onFocus=function(){this._rowContainer.classList.add(y)},L.prototype.onSelectionChanged=function(w,D,M){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(w&&D){var T=w[1]-this._bufferService.buffer.ydisp,R=D[1]-this._bufferService.buffer.ydisp,k=Math.max(T,0),F=Math.min(R,this._bufferService.rows-1);if(!(k>=this._bufferService.rows||F<0)){var I=document.createDocumentFragment();if(M)I.appendChild(this._createSelectionElement(k,w[0],D[0],F-k+1));else{var z=T===k?w[0]:0,K=k===R?D[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(k,z,K));var N=F-k-1;if(I.appendChild(this._createSelectionElement(k+1,0,this._bufferService.cols,N)),k!==F){var Y=R===F?D[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(F,0,Y))}}this._selectionContainer.appendChild(I)}}},L.prototype._createSelectionElement=function(w,D,M,T){T===void 0&&(T=1);var R=document.createElement("div");return R.style.height=T*this.dimensions.actualCellHeight+"px",R.style.top=w*this.dimensions.actualCellHeight+"px",R.style.left=D*this.dimensions.actualCellWidth+"px",R.style.width=this.dimensions.actualCellWidth*(M-D)+"px",R},L.prototype.onCursorMove=function(){},L.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},L.prototype.clear=function(){for(var w=0,D=this._rowElements;w<D.length;w++)D[w].innerText=""},L.prototype.renderRows=function(w,D){for(var M=this._bufferService.buffer.ybase+this._bufferService.buffer.y,T=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),R=this._optionsService.options.cursorBlink,k=w;k<=D;k++){var F=this._rowElements[k];F.innerText="";var I=k+this._bufferService.buffer.ydisp,z=this._bufferService.buffer.lines.get(I),K=this._optionsService.options.cursorStyle;F.appendChild(this._rowFactory.createRow(z,I,I===M,K,T,R,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(L.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),L.prototype._onLinkHover=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)},L.prototype._onLinkLeave=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)},L.prototype._setCellUnderline=function(w,D,M,T,R,k){for(;w!==D||M!==T;){var F=this._rowElements[M];if(!F)return;var I=F.children[w];I&&(I.style.textDecoration=k?"underline":"none"),++w>=R&&(w=0,M++)}},_([a(6,d.IInstantiationService),a(7,o.ICharSizeService),a(8,d.IOptionsService),a(9,d.IBufferService)],L)}(n.Disposable);t.DomRenderer=E},3787:function(x,t,f){var l=this&&this.__decorate||function(e,r,h,u){var y,C=arguments.length,E=C<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,h):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,r,h,u);else for(var b=e.length-1;b>=0;b--)(y=e[b])&&(E=(C<3?y(E):C>3?y(r,h,E):y(r,h))||E);return C>3&&E&&Object.defineProperty(r,h,E),E},p=this&&this.__param||function(e,r){return function(h,u){r(h,u,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.STRIKETHROUGH_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var _=f(8803),a=f(643),m=f(511),g=f(2585),n=f(4774),o=f(4725),d=f(4269);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.STRIKETHROUGH_CLASS="xterm-strikethrough",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var s=function(){function e(r,h,u,y){this._document=r,this._colors=h,this._characterJoinerService=u,this._optionsService=y,this._workCell=new m.CellData}return e.prototype.setColors=function(r){this._colors=r},e.prototype.createRow=function(r,h,u,y,C,E,b,L){for(var w=this._document.createDocumentFragment(),D=this._characterJoinerService.getJoinedCharacters(h),M=0,T=Math.min(r.length,L)-1;T>=0;T--)if(r.loadCell(T,this._workCell).getCode()!==a.NULL_CELL_CODE||u&&T===C){M=T+1;break}for(T=0;T<M;T++){r.loadCell(T,this._workCell);var R=this._workCell.getWidth();if(R!==0){var k=!1,F=T,I=this._workCell;if(D.length>0&&T===D[0][0]){k=!0;var z=D.shift();I=new d.JoinedCellData(this._workCell,r.translateToString(!0,z[0],z[1]),z[1]-z[0]),F=z[1]-1,R=I.getWidth()}var K=this._document.createElement("span");if(R>1&&(K.style.width=b*R+"px"),k&&(K.style.display="inline",C>=T&&C<=F&&(C=T)),u&&T===C)switch(K.classList.add(t.CURSOR_CLASS),E&&K.classList.add(t.CURSOR_BLINK_CLASS),y){case"bar":K.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":K.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:K.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}I.isBold()&&K.classList.add(t.BOLD_CLASS),I.isItalic()&&K.classList.add(t.ITALIC_CLASS),I.isDim()&&K.classList.add(t.DIM_CLASS),I.isUnderline()&&K.classList.add(t.UNDERLINE_CLASS),I.isInvisible()?K.textContent=a.WHITESPACE_CELL_CHAR:K.textContent=I.getChars()||a.WHITESPACE_CELL_CHAR,I.isStrikethrough()&&K.classList.add(t.STRIKETHROUGH_CLASS);var N=I.getFgColor(),Y=I.getFgColorMode(),Z=I.getBgColor(),B=I.getBgColorMode(),O=!!I.isInverse();if(O){var P=N;N=Z,Z=P;var q=Y;Y=B,B=q}switch(Y){case 16777216:case 33554432:I.isBold()&&N<8&&this._optionsService.options.drawBoldTextInBrightColors&&(N+=8),this._applyMinimumContrast(K,this._colors.background,this._colors.ansi[N])||K.classList.add("xterm-fg-"+N);break;case 50331648:var H=n.rgba.toColor(N>>16&255,N>>8&255,255&N);this._applyMinimumContrast(K,this._colors.background,H)||this._addStyle(K,"color:#"+i(N.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(K,this._colors.background,this._colors.foreground)||O&&K.classList.add("xterm-fg-"+_.INVERTED_DEFAULT_COLOR)}switch(B){case 16777216:case 33554432:K.classList.add("xterm-bg-"+Z);break;case 50331648:this._addStyle(K,"background-color:#"+i(Z.toString(16),"0",6));break;case 0:default:O&&K.classList.add("xterm-bg-"+_.INVERTED_DEFAULT_COLOR)}w.appendChild(K),T=F}}return w},e.prototype._applyMinimumContrast=function(r,h,u){if(this._optionsService.options.minimumContrastRatio===1)return!1;var y=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return y===void 0&&(y=n.color.ensureContrastRatio(h,u,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,y??null)),!!y&&(this._addStyle(r,"color:"+y.css),!0)},e.prototype._addStyle=function(r,h){r.setAttribute("style",""+(r.getAttribute("style")||"")+h+";")},l([p(2,o.ICharacterJoinerService),p(3,g.IOptionsService)],e)}();function i(e,r,h){for(;e.length<h;)e=r+e;return e}t.DomRendererRowFactory=s},456:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var f=function(){function l(p){this._bufferService=p,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var p=this.selectionStart[0]+this.selectionStartLength;return p>this._bufferService.cols?[p%this._bufferService.cols,this.selectionStart[1]+Math.floor(p/this._bufferService.cols)]:[p,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var p=this.selectionStart,_=this.selectionEnd;return!(!p||!_)&&(p[1]>_[1]||p[1]===_[1]&&p[0]>_[0])},l.prototype.onTrim=function(p){return this.selectionStart&&(this.selectionStart[1]-=p),this.selectionEnd&&(this.selectionEnd[1]-=p),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();t.SelectionModel=f},428:function(x,t,f){var l=this&&this.__decorate||function(n,o,d,s){var i,e=arguments.length,r=e<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,d):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,o,d,s);else for(var h=n.length-1;h>=0;h--)(i=n[h])&&(r=(e<3?i(r):e>3?i(o,d,r):i(o,d))||r);return e>3&&r&&Object.defineProperty(o,d,r),r},p=this&&this.__param||function(n,o){return function(d,s){o(d,s,n)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var _=f(2585),a=f(8460),m=function(){function n(o,d,s){this._optionsService=s,this.width=0,this.height=0,this._onCharSizeChange=new a.EventEmitter,this._measureStrategy=new g(o,d,this._optionsService)}return Object.defineProperty(n.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),n.prototype.measure=function(){var o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())},l([p(2,_.IOptionsService)],n)}();t.CharSizeService=m;var g=function(){function n(o,d,s){this._document=o,this._parentElement=d,this._optionsService=s,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return n.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var o=this._measureElement.getBoundingClientRect();return o.width!==0&&o.height!==0&&(this._result.width=o.width,this._result.height=Math.ceil(o.height)),this._result},n}()},4269:function(x,t,f){var l,p=this&&this.__extends||(l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,h){r.__proto__=h}||function(r,h){for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(r[u]=h[u])})(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),_=this&&this.__decorate||function(i,e,r,h){var u,y=arguments.length,C=y<3?e:h===null?h=Object.getOwnPropertyDescriptor(e,r):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(i,e,r,h);else for(var E=i.length-1;E>=0;E--)(u=i[E])&&(C=(y<3?u(C):y>3?u(e,r,C):u(e,r))||C);return y>3&&C&&Object.defineProperty(e,r,C),C},a=this&&this.__param||function(i,e){return function(r,h){e(r,h,i)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var m=f(3734),g=f(643),n=f(511),o=f(2585),d=function(i){function e(r,h,u){var y=i.call(this)||this;return y.content=0,y.combinedData="",y.fg=r.fg,y.bg=r.bg,y.combinedData=h,y._width=u,y}return p(e,i),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(m.AttributeData);t.JoinedCellData=d;var s=function(){function i(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new n.CellData}return i.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},i.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},i.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];for(var h=[],u=r.translateToString(!0),y=0,C=0,E=0,b=r.getFg(0),L=r.getBg(0),w=0;w<r.getTrimmedLength();w++)if(r.loadCell(w,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==L){if(w-y>1)for(var D=this._getJoinedRanges(u,E,C,r,y),M=0;M<D.length;M++)h.push(D[M]);y=w,E=C,b=this._workCell.fg,L=this._workCell.bg}C+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-y>1)for(D=this._getJoinedRanges(u,E,C,r,y),M=0;M<D.length;M++)h.push(D[M]);return h},i.prototype._getJoinedRanges=function(e,r,h,u,y){for(var C=e.substring(r,h),E=this._characterJoiners[0].handler(C),b=1;b<this._characterJoiners.length;b++)for(var L=this._characterJoiners[b].handler(C),w=0;w<L.length;w++)i._mergeRanges(E,L[w]);return this._stringRangesToCellRanges(E,u,y),E},i.prototype._stringRangesToCellRanges=function(e,r,h){var u=0,y=!1,C=0,E=e[u];if(E){for(var b=h;b<this._bufferService.cols;b++){var L=r.getWidth(b),w=r.getString(b).length||g.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!y&&E[0]<=C&&(E[0]=b,y=!0),E[1]<=C){if(E[1]=b,!(E=e[++u]))break;E[0]<=C?(E[0]=b,y=!0):y=!1}C+=w}}E&&(E[1]=this._bufferService.cols)}},i._mergeRanges=function(e,r){for(var h=!1,u=0;u<e.length;u++){var y=e[u];if(h){if(r[1]<=y[0])return e[u-1][1]=r[1],e;if(r[1]<=y[1])return e[u-1][1]=Math.max(r[1],y[1]),e.splice(u,1),e;e.splice(u,1),u--}else{if(r[1]<=y[0])return e.splice(u,0,r),e;if(r[1]<=y[1])return y[0]=Math.min(r[0],y[0]),e;r[0]<y[1]&&(y[0]=Math.min(r[0],y[0]),h=!0)}}return h?e[e.length-1][1]=r[1]:e.push(r),e},i=_([a(0,o.IBufferService)],i)}();t.CharacterJoinerService=s},5114:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var f=function(){function l(p){this._textarea=p}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();t.CoreBrowserService=f},8934:function(x,t,f){var l=this&&this.__decorate||function(g,n,o,d){var s,i=arguments.length,e=i<3?n:d===null?d=Object.getOwnPropertyDescriptor(n,o):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(g,n,o,d);else for(var r=g.length-1;r>=0;r--)(s=g[r])&&(e=(i<3?s(e):i>3?s(n,o,e):s(n,o))||e);return i>3&&e&&Object.defineProperty(n,o,e),e},p=this&&this.__param||function(g,n){return function(o,d){n(o,d,g)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var _=f(4725),a=f(9806),m=function(){function g(n,o){this._renderService=n,this._charSizeService=o}return g.prototype.getCoords=function(n,o,d,s,i){return a.getCoords(n,o,d,s,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,i)},g.prototype.getRawByteCoords=function(n,o,d,s){var i=this.getCoords(n,o,d,s);return a.getRawByteCoords(i)},l([p(0,_.IRenderService),p(1,_.ICharSizeService)],g)}();t.MouseService=m},3230:function(x,t,f){var l,p=this&&this.__extends||(l=function(r,h){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,y){u.__proto__=y}||function(u,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(u[C]=y[C])})(r,h)},function(r,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function u(){this.constructor=r}l(r,h),r.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}),_=this&&this.__decorate||function(r,h,u,y){var C,E=arguments.length,b=E<3?h:y===null?y=Object.getOwnPropertyDescriptor(h,u):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,h,u,y);else for(var L=r.length-1;L>=0;L--)(C=r[L])&&(b=(E<3?C(b):E>3?C(h,u,b):C(h,u))||b);return E>3&&b&&Object.defineProperty(h,u,b),b},a=this&&this.__param||function(r,h){return function(u,y){h(u,y,r)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var m=f(6193),g=f(8460),n=f(844),o=f(5596),d=f(3656),s=f(2585),i=f(4725),e=function(r){function h(u,y,C,E,b,L){var w=r.call(this)||this;if(w._renderer=u,w._rowCount=y,w._charSizeService=b,w._isPaused=!1,w._needsFullRefresh=!1,w._isNextRenderRedrawOnly=!0,w._needsSelectionRefresh=!1,w._canvasWidth=0,w._canvasHeight=0,w._selectionState={start:void 0,end:void 0,columnSelectMode:!1},w._onDimensionsChange=new g.EventEmitter,w._onRender=new g.EventEmitter,w._onRefreshRequest=new g.EventEmitter,w.register({dispose:function(){return w._renderer.dispose()}}),w._renderDebouncer=new m.RenderDebouncer(function(M,T){return w._renderRows(M,T)}),w.register(w._renderDebouncer),w._screenDprMonitor=new o.ScreenDprMonitor,w._screenDprMonitor.setListener(function(){return w.onDevicePixelRatioChange()}),w.register(w._screenDprMonitor),w.register(L.onResize(function(M){return w._fullRefresh()})),w.register(E.onOptionChange(function(){return w._renderer.onOptionsChanged()})),w.register(w._charSizeService.onCharSizeChange(function(){return w.onCharSizeChanged()})),w._renderer.onRequestRedraw(function(M){return w.refreshRows(M.start,M.end,!0)}),w.register(d.addDisposableDomListener(window,"resize",function(){return w.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var D=new IntersectionObserver(function(M){return w._onIntersectionChange(M[M.length-1])},{threshold:0});D.observe(C),w.register({dispose:function(){return D.disconnect()}})}return w}return p(h,r),Object.defineProperty(h.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),h.prototype._onIntersectionChange=function(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},h.prototype.refreshRows=function(u,y,C){C===void 0&&(C=!1),this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,y,this._rowCount))},h.prototype._renderRows=function(u,y){this._renderer.renderRows(u,y),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:u,end:y}),this._isNextRenderRedrawOnly=!0},h.prototype.resize=function(u,y){this._rowCount=y,this._fireOnCanvasResize()},h.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},h.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},h.prototype.dispose=function(){r.prototype.dispose.call(this)},h.prototype.setRenderer=function(u){var y=this;this._renderer.dispose(),this._renderer=u,this._renderer.onRequestRedraw(function(C){return y.refreshRows(C.start,C.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},h.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},h.prototype.setColors=function(u){this._renderer.setColors(u),this._fullRefresh()},h.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},h.prototype.onResize=function(u,y){this._renderer.onResize(u,y),this._fullRefresh()},h.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},h.prototype.onBlur=function(){this._renderer.onBlur()},h.prototype.onFocus=function(){this._renderer.onFocus()},h.prototype.onSelectionChanged=function(u,y,C){this._selectionState.start=u,this._selectionState.end=y,this._selectionState.columnSelectMode=C,this._renderer.onSelectionChanged(u,y,C)},h.prototype.onCursorMove=function(){this._renderer.onCursorMove()},h.prototype.clear=function(){this._renderer.clear()},_([a(3,s.IOptionsService),a(4,i.ICharSizeService),a(5,s.IBufferService)],h)}(n.Disposable);t.RenderService=e},9312:function(x,t,f){var l,p=this&&this.__extends||(l=function(E,b){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,w){L.__proto__=w}||function(L,w){for(var D in w)Object.prototype.hasOwnProperty.call(w,D)&&(L[D]=w[D])})(E,b)},function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function L(){this.constructor=E}l(E,b),E.prototype=b===null?Object.create(b):(L.prototype=b.prototype,new L)}),_=this&&this.__decorate||function(E,b,L,w){var D,M=arguments.length,T=M<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,L):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,b,L,w);else for(var R=E.length-1;R>=0;R--)(D=E[R])&&(T=(M<3?D(T):M>3?D(b,L,T):D(b,L))||T);return M>3&&T&&Object.defineProperty(b,L,T),T},a=this&&this.__param||function(E,b){return function(L,w){b(L,w,E)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var m=f(6114),g=f(456),n=f(511),o=f(8460),d=f(4725),s=f(2585),i=f(9806),e=f(9504),r=f(844),h=f(4841),u=String.fromCharCode(160),y=new RegExp(u,"g"),C=function(E){function b(L,w,D,M,T,R,k,F){var I=E.call(this)||this;return I._element=L,I._screenElement=w,I._linkifier=D,I._bufferService=M,I._coreService=T,I._mouseService=R,I._optionsService=k,I._renderService=F,I._dragScrollAmount=0,I._enabled=!0,I._workCell=new n.CellData,I._mouseDownTimeStamp=0,I._oldHasSelection=!1,I._oldSelectionStart=void 0,I._oldSelectionEnd=void 0,I._onLinuxMouseSelection=I.register(new o.EventEmitter),I._onRedrawRequest=I.register(new o.EventEmitter),I._onSelectionChange=I.register(new o.EventEmitter),I._onRequestScrollLines=I.register(new o.EventEmitter),I._mouseMoveListener=function(z){return I._onMouseMove(z)},I._mouseUpListener=function(z){return I._onMouseUp(z)},I._coreService.onUserInput(function(){I.hasSelection&&I.clearSelection()}),I._trimListener=I._bufferService.buffer.lines.onTrim(function(z){return I._onTrim(z)}),I.register(I._bufferService.buffers.onBufferActivate(function(z){return I._onBufferActivate(z)})),I.enable(),I._model=new g.SelectionModel(I._bufferService),I._activeSelectionMode=0,I}return p(b,E),Object.defineProperty(b.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._removeMouseDownListeners()},b.prototype.reset=function(){this.clearSelection()},b.prototype.disable=function(){this.clearSelection(),this._enabled=!1},b.prototype.enable=function(){this._enabled=!0},Object.defineProperty(b.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasSelection",{get:function(){var L=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!L||!w||L[0]===w[0]&&L[1]===w[1])},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionText",{get:function(){var L=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!L||!w)return"";var D=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(L[0]===w[0])return"";for(var T=L[1];T<=w[1];T++){var R=D.translateBufferLineToString(T,!0,L[0],w[0]);M.push(R)}}else{var k=L[1]===w[1]?w[0]:void 0;for(M.push(D.translateBufferLineToString(L[1],!0,L[0],k)),T=L[1]+1;T<=w[1]-1;T++){var F=D.lines.get(T);R=D.translateBufferLineToString(T,!0),F&&F.isWrapped?M[M.length-1]+=R:M.push(R)}L[1]!==w[1]&&(F=D.lines.get(w[1]),R=D.translateBufferLineToString(w[1],!0,0,w[0]),F&&F.isWrapped?M[M.length-1]+=R:M.push(R))}return M.map(function(I){return I.replace(y," ")}).join(m.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),b.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},b.prototype.refresh=function(L){var w=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return w._refresh()})),m.isLinux&&L&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},b.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},b.prototype._isClickInSelection=function(L){var w=this._getMouseBufferCoords(L),D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(D&&M&&w)&&this._areCoordsInSelection(w,D,M)},b.prototype._areCoordsInSelection=function(L,w,D){return L[1]>w[1]&&L[1]<D[1]||w[1]===D[1]&&L[1]===w[1]&&L[0]>=w[0]&&L[0]<D[0]||w[1]<D[1]&&L[1]===D[1]&&L[0]<D[0]||w[1]<D[1]&&L[1]===w[1]&&L[0]>=w[0]},b.prototype._selectWordAtCursor=function(L,w){var D,M,T=(M=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||M===void 0?void 0:M.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=h.getRangeLength(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var R=this._getMouseBufferCoords(L);return!!R&&(this._selectWordAt(R,w),this._model.selectionEnd=void 0,!0)},b.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},b.prototype.selectLines=function(L,w){this._model.clearSelection(),L=Math.max(L,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,L],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()},b.prototype._onTrim=function(L){this._model.onTrim(L)&&this.refresh()},b.prototype._getMouseBufferCoords=function(L){var w=this._mouseService.getCoords(L,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w},b.prototype._getMouseEventScrollAmount=function(L){var w=i.getCoordsRelativeToElement(L,this._screenElement)[1],D=this._renderService.dimensions.canvasHeight;return w>=0&&w<=D?0:(w>D&&(w-=D),w=Math.min(Math.max(w,-50),50),(w/=50)/Math.abs(w)+Math.round(14*w))},b.prototype.shouldForceSelection=function(L){return m.isMac?L.altKey&&this._optionsService.options.macOptionClickForcesSelection:L.shiftKey},b.prototype.onMouseDown=function(L){if(this._mouseDownTimeStamp=L.timeStamp,(L.button!==2||!this.hasSelection)&&L.button===0){if(!this._enabled){if(!this.shouldForceSelection(L))return;L.stopPropagation()}L.preventDefault(),this._dragScrollAmount=0,this._enabled&&L.shiftKey?this._onIncrementalClick(L):L.detail===1?this._onSingleClick(L):L.detail===2?this._onDoubleClick(L):L.detail===3&&this._onTripleClick(L),this._addMouseDownListeners(),this.refresh(!0)}},b.prototype._addMouseDownListeners=function(){var L=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return L._dragScroll()},50)},b.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},b.prototype._onIncrementalClick=function(L){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(L))},b.prototype._onSingleClick=function(L){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(L)?3:0,this._model.selectionStart=this._getMouseBufferCoords(L),this._model.selectionStart){this._model.selectionEnd=void 0;var w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},b.prototype._onDoubleClick=function(L){this._selectWordAtCursor(L,!0)&&(this._activeSelectionMode=1)},b.prototype._onTripleClick=function(L){var w=this._getMouseBufferCoords(L);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))},b.prototype.shouldColumnSelect=function(L){return L.altKey&&!(m.isMac&&this._optionsService.options.macOptionClickForcesSelection)},b.prototype._onMouseMove=function(L){if(L.stopImmediatePropagation(),this._model.selectionStart){var w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(L),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(L),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){var M=D.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},b.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var L=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(L.ydisp+this._bufferService.rows,L.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=L.ydisp),this.refresh()}},b.prototype._onMouseUp=function(L){var w=L.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&L.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var D=this._mouseService.getCoords(L,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){var M=e.moveToCellSequence(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()},b.prototype._fireEventIfSelectionChanged=function(){var L=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,D=!(!L||!w||L[0]===w[0]&&L[1]===w[1]);D?L&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&L[0]===this._oldSelectionStart[0]&&L[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(L,w,D)):this._oldHasSelection&&this._fireOnSelectionChange(L,w,D)},b.prototype._fireOnSelectionChange=function(L,w,D){this._oldSelectionStart=L,this._oldSelectionEnd=w,this._oldHasSelection=D,this._onSelectionChange.fire()},b.prototype._onBufferActivate=function(L){var w=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=L.activeBuffer.lines.onTrim(function(D){return w._onTrim(D)})},b.prototype._convertViewportColToCharacterIndex=function(L,w){for(var D=w[0],M=0;w[0]>=M;M++){var T=L.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&w[0]!==M&&(D+=T-1)}return D},b.prototype.setSelection=function(L,w,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[L,w],this._model.selectionStartLength=D,this.refresh()},b.prototype.rightClickSelect=function(L){this._isClickInSelection(L)||(this._selectWordAtCursor(L,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},b.prototype._getWordAt=function(L,w,D,M){if(D===void 0&&(D=!0),M===void 0&&(M=!0),!(L[0]>=this._bufferService.cols)){var T=this._bufferService.buffer,R=T.lines.get(L[1]);if(R){var k=T.translateBufferLineToString(L[1],!1),F=this._convertViewportColToCharacterIndex(R,L),I=F,z=L[0]-F,K=0,N=0,Y=0,Z=0;if(k.charAt(F)===" "){for(;F>0&&k.charAt(F-1)===" ";)F--;for(;I<k.length&&k.charAt(I+1)===" ";)I++}else{var B=L[0],O=L[0];R.getWidth(B)===0&&(K++,B--),R.getWidth(O)===2&&(N++,O++);var P=R.getString(O).length;for(P>1&&(Z+=P-1,I+=P-1);B>0&&F>0&&!this._isCharWordSeparator(R.loadCell(B-1,this._workCell));){R.loadCell(B-1,this._workCell);var q=this._workCell.getChars().length;this._workCell.getWidth()===0?(K++,B--):q>1&&(Y+=q-1,F-=q-1),F--,B--}for(;O<R.length&&I+1<k.length&&!this._isCharWordSeparator(R.loadCell(O+1,this._workCell));){R.loadCell(O+1,this._workCell);var H=this._workCell.getChars().length;this._workCell.getWidth()===2?(N++,O++):H>1&&(Z+=H-1,I+=H-1),I++,O++}}I++;var G=F+z-K+Y,X=Math.min(this._bufferService.cols,I-F+K+N-Y-Z);if(w||k.slice(F,I).trim()!==""){if(D&&G===0&&R.getCodePoint(0)!==32){var te=T.lines.get(L[1]-1);if(te&&R.isWrapped&&te.getCodePoint(this._bufferService.cols-1)!==32){var re=this._getWordAt([this._bufferService.cols-1,L[1]-1],!1,!0,!1);if(re){var se=this._bufferService.cols-re.start;G-=se,X+=se}}}if(M&&G+X===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){var V=T.lines.get(L[1]+1);if(V&&V.isWrapped&&V.getCodePoint(0)!==32){var $=this._getWordAt([0,L[1]+1],!1,!1,!0);$&&(X+=$.length)}}return{start:G,length:X}}}}},b.prototype._selectWordAt=function(L,w){var D=this._getWordAt(L,w);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,L[1]--;this._model.selectionStart=[D.start,L[1]],this._model.selectionStartLength=D.length}},b.prototype._selectToWordAt=function(L){var w=this._getWordAt(L,!0);if(w){for(var D=L[1];w.start<0;)w.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,D]}},b.prototype._isCharWordSeparator=function(L){return L.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(L.getChars())>=0},b.prototype._selectLineAt=function(L){var w=this._bufferService.buffer.getWrappedRangeForLine(L);this._model.selectionStart=[0,w.first],this._model.selectionEnd=[this._bufferService.cols,w.last],this._model.selectionStartLength=0},_([a(3,s.IBufferService),a(4,s.ICoreService),a(5,d.IMouseService),a(6,s.IOptionsService),a(7,d.IRenderService)],b)}(r.Disposable);t.SelectionService=C},4725:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICharacterJoinerService=t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var l=f(8343);t.ICharSizeService=l.createDecorator("CharSizeService"),t.ICoreBrowserService=l.createDecorator("CoreBrowserService"),t.IMouseService=l.createDecorator("MouseService"),t.IRenderService=l.createDecorator("RenderService"),t.ISelectionService=l.createDecorator("SelectionService"),t.ISoundService=l.createDecorator("SoundService"),t.ICharacterJoinerService=l.createDecorator("CharacterJoinerService")},357:function(x,t,f){var l=this&&this.__decorate||function(m,g,n,o){var d,s=arguments.length,i=s<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(m,g,n,o);else for(var e=m.length-1;e>=0;e--)(d=m[e])&&(i=(s<3?d(i):s>3?d(g,n,i):d(g,n))||i);return s>3&&i&&Object.defineProperty(g,n,i),i},p=this&&this.__param||function(m,g){return function(n,o){g(n,o,m)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var _=f(2585),a=function(){function m(g){this._optionsService=g}return Object.defineProperty(m,"audioContext",{get:function(){if(!m._audioContext){var g=window.AudioContext||window.webkitAudioContext;if(!g)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;m._audioContext=new g}return m._audioContext},enumerable:!1,configurable:!0}),m.prototype.playBellSound=function(){var g=m.audioContext;if(g){var n=g.createBufferSource();g.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(o){n.buffer=o,n.connect(g.destination),n.start(0)})}},m.prototype._base64ToArrayBuffer=function(g){for(var n=window.atob(g),o=n.length,d=new Uint8Array(o),s=0;s<o;s++)d[s]=n.charCodeAt(s);return d.buffer},m.prototype._removeMimeType=function(g){return g.split(",")[1]},m=l([p(0,_.IOptionsService)],m)}();t.SoundService=a},6349:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var l=f(8460),p=function(){function _(a){this._maxLength=a,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(_.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxLength",{get:function(){return this._maxLength},set:function(a){if(this._maxLength!==a){for(var m=new Array(a),g=0;g<Math.min(a,this.length);g++)m[g]=this._array[this._getCyclicIndex(g)];this._array=m,this._maxLength=a,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)for(var m=this._length;m<a;m++)this._array[m]=void 0;this._length=a},enumerable:!1,configurable:!0}),_.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]},_.prototype.set=function(a,m){this._array[this._getCyclicIndex(a)]=m},_.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},_.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(_.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),_.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},_.prototype.splice=function(a,m){for(var g=[],n=2;n<arguments.length;n++)g[n-2]=arguments[n];if(m){for(var o=a;o<this._length-m;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+m)];this._length-=m,this.onDeleteEmitter.fire({index:a,amount:m})}for(o=this._length-1;o>=a;o--)this._array[this._getCyclicIndex(o+g.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<g.length;o++)this._array[this._getCyclicIndex(a+o)]=g[o];if(g.length&&this.onInsertEmitter.fire({index:a,amount:g.length}),this._length+g.length>this._maxLength){var d=this._length+g.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=g.length},_.prototype.trimStart=function(a){a>this._length&&(a=this._length),this._startIndex+=a,this._length-=a,this.onTrimEmitter.fire(a)},_.prototype.shiftElements=function(a,m,g){if(!(m<=0)){if(a<0||a>=this._length)throw new Error("start argument out of range");if(a+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(var n=m-1;n>=0;n--)this.set(a+n+g,this.get(a+n));var o=a+m+g-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(n=0;n<m;n++)this.set(a+n+g,this.get(a+n))}},_.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this._maxLength},_}();t.CircularList=p},1439:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function f(l,p){if(p===void 0&&(p=5),typeof l!="object")return l;var _=Array.isArray(l)?[]:{};for(var a in l)_[a]=p<=1?l[a]:l[a]&&f(l[a],p-1);return _}},8969:function(x,t,f){var l,p=this&&this.__extends||(l=function(L,w){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,M){D.__proto__=M}||function(D,M){for(var T in M)Object.prototype.hasOwnProperty.call(M,T)&&(D[T]=M[T])})(L,w)},function(L,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function D(){this.constructor=L}l(L,w),L.prototype=w===null?Object.create(w):(D.prototype=w.prototype,new D)});Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var _=f(844),a=f(2585),m=f(4348),g=f(7866),n=f(744),o=f(7302),d=f(6975),s=f(8460),i=f(1753),e=f(3730),r=f(1480),h=f(7994),u=f(9282),y=f(5435),C=f(5981),E=!1,b=function(L){function w(D){var M=L.call(this)||this;return M._onBinary=new s.EventEmitter,M._onData=new s.EventEmitter,M._onLineFeed=new s.EventEmitter,M._onResize=new s.EventEmitter,M._onScroll=new s.EventEmitter,M._instantiationService=new m.InstantiationService,M.optionsService=new o.OptionsService(D),M._instantiationService.setService(a.IOptionsService,M.optionsService),M._bufferService=M.register(M._instantiationService.createInstance(n.BufferService)),M._instantiationService.setService(a.IBufferService,M._bufferService),M._logService=M._instantiationService.createInstance(g.LogService),M._instantiationService.setService(a.ILogService,M._logService),M.coreService=M.register(M._instantiationService.createInstance(d.CoreService,function(){return M.scrollToBottom()})),M._instantiationService.setService(a.ICoreService,M.coreService),M.coreMouseService=M._instantiationService.createInstance(i.CoreMouseService),M._instantiationService.setService(a.ICoreMouseService,M.coreMouseService),M._dirtyRowService=M._instantiationService.createInstance(e.DirtyRowService),M._instantiationService.setService(a.IDirtyRowService,M._dirtyRowService),M.unicodeService=M._instantiationService.createInstance(r.UnicodeService),M._instantiationService.setService(a.IUnicodeService,M.unicodeService),M._charsetService=M._instantiationService.createInstance(h.CharsetService),M._instantiationService.setService(a.ICharsetService,M._charsetService),M._inputHandler=new y.InputHandler(M._bufferService,M._charsetService,M.coreService,M._dirtyRowService,M._logService,M.optionsService,M.coreMouseService,M.unicodeService),M.register(s.forwardEvent(M._inputHandler.onLineFeed,M._onLineFeed)),M.register(M._inputHandler),M.register(s.forwardEvent(M._bufferService.onResize,M._onResize)),M.register(s.forwardEvent(M.coreService.onData,M._onData)),M.register(s.forwardEvent(M.coreService.onBinary,M._onBinary)),M.register(M.optionsService.onOptionChange(function(T){return M._updateOptions(T)})),M.register(M._bufferService.onScroll(function(T){M._onScroll.fire({position:M._bufferService.buffer.ydisp,source:0}),M._dirtyRowService.markRangeDirty(M._bufferService.buffer.scrollTop,M._bufferService.buffer.scrollBottom)})),M.register(M._inputHandler.onScroll(function(T){M._onScroll.fire({position:M._bufferService.buffer.ydisp,source:0}),M._dirtyRowService.markRangeDirty(M._bufferService.buffer.scrollTop,M._bufferService.buffer.scrollBottom)})),M._writeBuffer=new C.WriteBuffer(function(T,R){return M._inputHandler.parse(T,R)}),M}return p(w,L),Object.defineProperty(w.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onScroll",{get:function(){var D=this;return this._onScrollApi||(this._onScrollApi=new s.EventEmitter,this.register(this._onScroll.event(function(M){var T;(T=D._onScrollApi)===null||T===void 0||T.fire(M.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){var D;this._isDisposed||(L.prototype.dispose.call(this),(D=this._windowsMode)===null||D===void 0||D.dispose(),this._windowsMode=void 0)},w.prototype.write=function(D,M){this._writeBuffer.write(D,M)},w.prototype.writeSync=function(D,M){this._logService.logLevel<=a.LogLevelEnum.WARN&&!E&&(this._logService.warn("writeSync is unreliable and will be removed soon."),E=!0),this._writeBuffer.writeSync(D,M)},w.prototype.resize=function(D,M){isNaN(D)||isNaN(M)||(D=Math.max(D,n.MINIMUM_COLS),M=Math.max(M,n.MINIMUM_ROWS),this._bufferService.resize(D,M))},w.prototype.scroll=function(D,M){M===void 0&&(M=!1),this._bufferService.scroll(D,M)},w.prototype.scrollLines=function(D,M,T){this._bufferService.scrollLines(D,M,T)},w.prototype.scrollPages=function(D){this._bufferService.scrollPages(D)},w.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},w.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},w.prototype.scrollToLine=function(D){this._bufferService.scrollToLine(D)},w.prototype.registerEscHandler=function(D,M){return this._inputHandler.registerEscHandler(D,M)},w.prototype.registerDcsHandler=function(D,M){return this._inputHandler.registerDcsHandler(D,M)},w.prototype.registerCsiHandler=function(D,M){return this._inputHandler.registerCsiHandler(D,M)},w.prototype.registerOscHandler=function(D,M){return this._inputHandler.registerOscHandler(D,M)},w.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},w.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},w.prototype._updateOptions=function(D){var M;switch(D){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():((M=this._windowsMode)===null||M===void 0||M.dispose(),this._windowsMode=void 0)}},w.prototype._enableWindowsMode=function(){var D=this;if(!this._windowsMode){var M=[];M.push(this.onLineFeed(u.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},function(){return u.updateWindowsModeWrappedState(D._bufferService),!1})),this._windowsMode={dispose:function(){for(var T=0,R=M;T<R.length;T++)R[T].dispose()}}}},w}(_.Disposable);t.CoreTerminal=b},8460:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var f=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var p=this;return this._event||(this._event=function(_){return p._listeners.push(_),{dispose:function(){if(!p._disposed){for(var a=0;a<p._listeners.length;a++)if(p._listeners[a]===_)return void p._listeners.splice(a,1)}}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(p,_){for(var a=[],m=0;m<this._listeners.length;m++)a.push(this._listeners[m]);for(m=0;m<a.length;m++)a[m].call(void 0,p,_)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();t.EventEmitter=f,t.forwardEvent=function(l,p){return l(function(_){return p.fire(_)})}},5435:function(x,t,f){var l,p=this&&this.__extends||(l=function(M,T){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,k){R.__proto__=k}||function(R,k){for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&(R[F]=k[F])})(M,T)},function(M,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function R(){this.constructor=M}l(M,T),M.prototype=T===null?Object.create(T):(R.prototype=T.prototype,new R)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;var _,a=f(2584),m=f(7116),g=f(2015),n=f(844),o=f(8273),d=f(482),s=f(8437),i=f(8460),e=f(643),r=f(511),h=f(3734),u=f(2585),y=f(6242),C=f(6351),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function L(M,T){if(M>24)return T.setWinLines||!1;switch(M){case 1:return!!T.restoreWin;case 2:return!!T.minimizeWin;case 3:return!!T.setWinPosition;case 4:return!!T.setWinSizePixels;case 5:return!!T.raiseWin;case 6:return!!T.lowerWin;case 7:return!!T.refreshWin;case 8:return!!T.setWinSizeChars;case 9:return!!T.maximizeWin;case 10:return!!T.fullscreenWin;case 11:return!!T.getWinState;case 13:return!!T.getWinPosition;case 14:return!!T.getWinSizePixels;case 15:return!!T.getScreenSizePixels;case 16:return!!T.getCellSizePixels;case 18:return!!T.getWinSizeChars;case 19:return!!T.getScreenSizeChars;case 20:return!!T.getIconTitle;case 21:return!!T.getWinTitle;case 22:return!!T.pushTitle;case 23:return!!T.popTitle;case 24:return!!T.setWinLines}return!1}(function(M){M[M.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",M[M.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(_=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));var w=function(){function M(T,R,k,F){this._bufferService=T,this._coreService=R,this._logService=k,this._optionsService=F,this._data=new Uint32Array(0)}return M.prototype.hook=function(T){this._data=new Uint32Array(0)},M.prototype.put=function(T,R,k){this._data=o.concat(this._data,T.subarray(R,k))},M.prototype.unhook=function(T){if(!T)return this._data=new Uint32Array(0),!0;var R=d.utf32ToString(this._data);switch(this._data=new Uint32Array(0),R){case'"q':this._coreService.triggerDataEvent(a.C0.ESC+'P1$r0"q'+a.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(a.C0.ESC+'P1$r61;1"p'+a.C0.ESC+"\\");break;case"r":var k=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(a.C0.ESC+"P1$r"+k+a.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(a.C0.ESC+"P1$r0m"+a.C0.ESC+"\\");break;case" q":var F={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];F-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(a.C0.ESC+"P1$r"+F+" q"+a.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",R),this._coreService.triggerDataEvent(a.C0.ESC+"P0$r"+a.C0.ESC+"\\")}return!0},M}(),D=function(M){function T(R,k,F,I,z,K,N,Y,Z){Z===void 0&&(Z=new g.EscapeSequenceParser);var B=M.call(this)||this;B._bufferService=R,B._charsetService=k,B._coreService=F,B._dirtyRowService=I,B._logService=z,B._optionsService=K,B._coreMouseService=N,B._unicodeService=Y,B._parser=Z,B._parseBuffer=new Uint32Array(4096),B._stringDecoder=new d.StringToUtf32,B._utf8Decoder=new d.Utf8ToUtf32,B._workCell=new r.CellData,B._windowTitle="",B._iconName="",B._windowTitleStack=[],B._iconNameStack=[],B._curAttrData=s.DEFAULT_ATTR_DATA.clone(),B._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),B._onRequestBell=new i.EventEmitter,B._onRequestRefreshRows=new i.EventEmitter,B._onRequestReset=new i.EventEmitter,B._onRequestSyncScrollBar=new i.EventEmitter,B._onRequestWindowsOptionsReport=new i.EventEmitter,B._onA11yChar=new i.EventEmitter,B._onA11yTab=new i.EventEmitter,B._onCursorMove=new i.EventEmitter,B._onLineFeed=new i.EventEmitter,B._onScroll=new i.EventEmitter,B._onTitleChange=new i.EventEmitter,B._onAnsiColorChange=new i.EventEmitter,B._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},B.register(B._parser),B._activeBuffer=B._bufferService.buffer,B.register(B._bufferService.buffers.onBufferActivate(function(H){return B._activeBuffer=H.activeBuffer})),B._parser.setCsiHandlerFallback(function(H,G){B._logService.debug("Unknown CSI code: ",{identifier:B._parser.identToString(H),params:G.toArray()})}),B._parser.setEscHandlerFallback(function(H){B._logService.debug("Unknown ESC code: ",{identifier:B._parser.identToString(H)})}),B._parser.setExecuteHandlerFallback(function(H){B._logService.debug("Unknown EXECUTE code: ",{code:H})}),B._parser.setOscHandlerFallback(function(H,G,X){B._logService.debug("Unknown OSC code: ",{identifier:H,action:G,data:X})}),B._parser.setDcsHandlerFallback(function(H,G,X){G==="HOOK"&&(X=X.toArray()),B._logService.debug("Unknown DCS code: ",{identifier:B._parser.identToString(H),action:G,payload:X})}),B._parser.setPrintHandler(function(H,G,X){return B.print(H,G,X)}),B._parser.registerCsiHandler({final:"@"},function(H){return B.insertChars(H)}),B._parser.registerCsiHandler({intermediates:" ",final:"@"},function(H){return B.scrollLeft(H)}),B._parser.registerCsiHandler({final:"A"},function(H){return B.cursorUp(H)}),B._parser.registerCsiHandler({intermediates:" ",final:"A"},function(H){return B.scrollRight(H)}),B._parser.registerCsiHandler({final:"B"},function(H){return B.cursorDown(H)}),B._parser.registerCsiHandler({final:"C"},function(H){return B.cursorForward(H)}),B._parser.registerCsiHandler({final:"D"},function(H){return B.cursorBackward(H)}),B._parser.registerCsiHandler({final:"E"},function(H){return B.cursorNextLine(H)}),B._parser.registerCsiHandler({final:"F"},function(H){return B.cursorPrecedingLine(H)}),B._parser.registerCsiHandler({final:"G"},function(H){return B.cursorCharAbsolute(H)}),B._parser.registerCsiHandler({final:"H"},function(H){return B.cursorPosition(H)}),B._parser.registerCsiHandler({final:"I"},function(H){return B.cursorForwardTab(H)}),B._parser.registerCsiHandler({final:"J"},function(H){return B.eraseInDisplay(H)}),B._parser.registerCsiHandler({prefix:"?",final:"J"},function(H){return B.eraseInDisplay(H)}),B._parser.registerCsiHandler({final:"K"},function(H){return B.eraseInLine(H)}),B._parser.registerCsiHandler({prefix:"?",final:"K"},function(H){return B.eraseInLine(H)}),B._parser.registerCsiHandler({final:"L"},function(H){return B.insertLines(H)}),B._parser.registerCsiHandler({final:"M"},function(H){return B.deleteLines(H)}),B._parser.registerCsiHandler({final:"P"},function(H){return B.deleteChars(H)}),B._parser.registerCsiHandler({final:"S"},function(H){return B.scrollUp(H)}),B._parser.registerCsiHandler({final:"T"},function(H){return B.scrollDown(H)}),B._parser.registerCsiHandler({final:"X"},function(H){return B.eraseChars(H)}),B._parser.registerCsiHandler({final:"Z"},function(H){return B.cursorBackwardTab(H)}),B._parser.registerCsiHandler({final:"`"},function(H){return B.charPosAbsolute(H)}),B._parser.registerCsiHandler({final:"a"},function(H){return B.hPositionRelative(H)}),B._parser.registerCsiHandler({final:"b"},function(H){return B.repeatPrecedingCharacter(H)}),B._parser.registerCsiHandler({final:"c"},function(H){return B.sendDeviceAttributesPrimary(H)}),B._parser.registerCsiHandler({prefix:">",final:"c"},function(H){return B.sendDeviceAttributesSecondary(H)}),B._parser.registerCsiHandler({final:"d"},function(H){return B.linePosAbsolute(H)}),B._parser.registerCsiHandler({final:"e"},function(H){return B.vPositionRelative(H)}),B._parser.registerCsiHandler({final:"f"},function(H){return B.hVPosition(H)}),B._parser.registerCsiHandler({final:"g"},function(H){return B.tabClear(H)}),B._parser.registerCsiHandler({final:"h"},function(H){return B.setMode(H)}),B._parser.registerCsiHandler({prefix:"?",final:"h"},function(H){return B.setModePrivate(H)}),B._parser.registerCsiHandler({final:"l"},function(H){return B.resetMode(H)}),B._parser.registerCsiHandler({prefix:"?",final:"l"},function(H){return B.resetModePrivate(H)}),B._parser.registerCsiHandler({final:"m"},function(H){return B.charAttributes(H)}),B._parser.registerCsiHandler({final:"n"},function(H){return B.deviceStatus(H)}),B._parser.registerCsiHandler({prefix:"?",final:"n"},function(H){return B.deviceStatusPrivate(H)}),B._parser.registerCsiHandler({intermediates:"!",final:"p"},function(H){return B.softReset(H)}),B._parser.registerCsiHandler({intermediates:" ",final:"q"},function(H){return B.setCursorStyle(H)}),B._parser.registerCsiHandler({final:"r"},function(H){return B.setScrollRegion(H)}),B._parser.registerCsiHandler({final:"s"},function(H){return B.saveCursor(H)}),B._parser.registerCsiHandler({final:"t"},function(H){return B.windowOptions(H)}),B._parser.registerCsiHandler({final:"u"},function(H){return B.restoreCursor(H)}),B._parser.registerCsiHandler({intermediates:"'",final:"}"},function(H){return B.insertColumns(H)}),B._parser.registerCsiHandler({intermediates:"'",final:"~"},function(H){return B.deleteColumns(H)}),B._parser.setExecuteHandler(a.C0.BEL,function(){return B.bell()}),B._parser.setExecuteHandler(a.C0.LF,function(){return B.lineFeed()}),B._parser.setExecuteHandler(a.C0.VT,function(){return B.lineFeed()}),B._parser.setExecuteHandler(a.C0.FF,function(){return B.lineFeed()}),B._parser.setExecuteHandler(a.C0.CR,function(){return B.carriageReturn()}),B._parser.setExecuteHandler(a.C0.BS,function(){return B.backspace()}),B._parser.setExecuteHandler(a.C0.HT,function(){return B.tab()}),B._parser.setExecuteHandler(a.C0.SO,function(){return B.shiftOut()}),B._parser.setExecuteHandler(a.C0.SI,function(){return B.shiftIn()}),B._parser.setExecuteHandler(a.C1.IND,function(){return B.index()}),B._parser.setExecuteHandler(a.C1.NEL,function(){return B.nextLine()}),B._parser.setExecuteHandler(a.C1.HTS,function(){return B.tabSet()}),B._parser.registerOscHandler(0,new y.OscHandler(function(H){return B.setTitle(H),B.setIconName(H),!0})),B._parser.registerOscHandler(1,new y.OscHandler(function(H){return B.setIconName(H)})),B._parser.registerOscHandler(2,new y.OscHandler(function(H){return B.setTitle(H)})),B._parser.registerOscHandler(4,new y.OscHandler(function(H){return B.setAnsiColor(H)})),B._parser.registerEscHandler({final:"7"},function(){return B.saveCursor()}),B._parser.registerEscHandler({final:"8"},function(){return B.restoreCursor()}),B._parser.registerEscHandler({final:"D"},function(){return B.index()}),B._parser.registerEscHandler({final:"E"},function(){return B.nextLine()}),B._parser.registerEscHandler({final:"H"},function(){return B.tabSet()}),B._parser.registerEscHandler({final:"M"},function(){return B.reverseIndex()}),B._parser.registerEscHandler({final:"="},function(){return B.keypadApplicationMode()}),B._parser.registerEscHandler({final:">"},function(){return B.keypadNumericMode()}),B._parser.registerEscHandler({final:"c"},function(){return B.fullReset()}),B._parser.registerEscHandler({final:"n"},function(){return B.setgLevel(2)}),B._parser.registerEscHandler({final:"o"},function(){return B.setgLevel(3)}),B._parser.registerEscHandler({final:"|"},function(){return B.setgLevel(3)}),B._parser.registerEscHandler({final:"}"},function(){return B.setgLevel(2)}),B._parser.registerEscHandler({final:"~"},function(){return B.setgLevel(1)}),B._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return B.selectDefaultCharset()}),B._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return B.selectDefaultCharset()});var O=function(H){P._parser.registerEscHandler({intermediates:"(",final:H},function(){return B.selectCharset("("+H)}),P._parser.registerEscHandler({intermediates:")",final:H},function(){return B.selectCharset(")"+H)}),P._parser.registerEscHandler({intermediates:"*",final:H},function(){return B.selectCharset("*"+H)}),P._parser.registerEscHandler({intermediates:"+",final:H},function(){return B.selectCharset("+"+H)}),P._parser.registerEscHandler({intermediates:"-",final:H},function(){return B.selectCharset("-"+H)}),P._parser.registerEscHandler({intermediates:".",final:H},function(){return B.selectCharset("."+H)}),P._parser.registerEscHandler({intermediates:"/",final:H},function(){return B.selectCharset("/"+H)})},P=this;for(var q in m.CHARSETS)O(q);return B._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return B.screenAlignmentPattern()}),B._parser.setErrorHandler(function(H){return B._logService.error("Parsing error: ",H),H}),B._parser.registerDcsHandler({intermediates:"$",final:"q"},new w(B._bufferService,B._coreService,B._logService,B._optionsService)),B}return p(T,M),Object.defineProperty(T.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),T.prototype.dispose=function(){M.prototype.dispose.call(this)},T.prototype._preserveStack=function(R,k,F,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=R,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=F,this._parseStack.position=I},T.prototype._logSlowResolvingAsync=function(R){this._logService.logLevel<=u.LogLevelEnum.WARN&&Promise.race([R,new Promise(function(k,F){return setTimeout(function(){return F("#SLOW_TIMEOUT")},5e3)})]).catch(function(k){if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})},T.prototype.parse=function(R,k){var F,I=this._activeBuffer.x,z=this._activeBuffer.y,K=0,N=this._parseStack.paused;if(N){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(F),F;I=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,R.length>b&&(K=this._parseStack.position+b)}if(this._logService.debug("parsing data",R),this._parseBuffer.length<R.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(R.length,b))),N||this._dirtyRowService.clearRange(),R.length>b)for(var Y=K;Y<R.length;Y+=b){var Z=Y+b<R.length?Y+b:R.length,B=typeof R=="string"?this._stringDecoder.decode(R.substring(Y,Z),this._parseBuffer):this._utf8Decoder.decode(R.subarray(Y,Z),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,B))return this._preserveStack(I,z,B,Y),this._logSlowResolvingAsync(F),F}else if(!N&&(B=typeof R=="string"?this._stringDecoder.decode(R,this._parseBuffer):this._utf8Decoder.decode(R,this._parseBuffer),F=this._parser.parse(this._parseBuffer,B)))return this._preserveStack(I,z,B,0),this._logSlowResolvingAsync(F),F;this._activeBuffer.x===I&&this._activeBuffer.y===z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},T.prototype.print=function(R,k,F){var I,z,K=this._charsetService.charset,N=this._optionsService.options.screenReaderMode,Y=this._bufferService.cols,Z=this._coreService.decPrivateModes.wraparound,B=this._coreService.modes.insertMode,O=this._curAttrData,P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-k>0&&P.getWidth(this._activeBuffer.x-1)===2&&P.setCellFromCodePoint(this._activeBuffer.x-1,0,1,O.fg,O.bg,O.extended);for(var q=k;q<F;++q){if(I=R[q],z=this._unicodeService.wcwidth(I),I<127&&K){var H=K[String.fromCharCode(I)];H&&(I=H.charCodeAt(0))}if(N&&this._onA11yChar.fire(d.stringFromCodePoint(I)),z||!this._activeBuffer.x){if(this._activeBuffer.x+z-1>=Y){if(Z){for(;this._activeBuffer.x<Y;)P.setCellFromCodePoint(this._activeBuffer.x++,0,1,O.fg,O.bg,O.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,z===2)continue}if(B&&(P.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(O),O),P.getWidth(Y-1)===2&&P.setCellFromCodePoint(Y-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,O.fg,O.bg,O.extended)),P.setCellFromCodePoint(this._activeBuffer.x++,I,z,O.fg,O.bg,O.extended),z>0)for(;--z;)P.setCellFromCodePoint(this._activeBuffer.x++,0,0,O.fg,O.bg,O.extended)}else P.getWidth(this._activeBuffer.x-1)?P.addCodepointToCell(this._activeBuffer.x-1,I):P.addCodepointToCell(this._activeBuffer.x-2,I)}F-k>0&&(P.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&F-k>0&&P.getWidth(this._activeBuffer.x)===0&&!P.hasContent(this._activeBuffer.x)&&P.setCellFromCodePoint(this._activeBuffer.x,0,1,O.fg,O.bg,O.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},T.prototype.registerCsiHandler=function(R,k){var F=this;return R.final!=="t"||R.prefix||R.intermediates?this._parser.registerCsiHandler(R,k):this._parser.registerCsiHandler(R,function(I){return!L(I.params[0],F._optionsService.options.windowOptions)||k(I)})},T.prototype.registerDcsHandler=function(R,k){return this._parser.registerDcsHandler(R,new C.DcsHandler(k))},T.prototype.registerEscHandler=function(R,k){return this._parser.registerEscHandler(R,k)},T.prototype.registerOscHandler=function(R,k){return this._parser.registerOscHandler(R,new y.OscHandler(k))},T.prototype.bell=function(){return this._onRequestBell.fire(),!0},T.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},T.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},T.prototype.backspace=function(){var R;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||R===void 0?void 0:R.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},T.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var R=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-R),!0},T.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},T.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},T.prototype._restrictCursor=function(R){R===void 0&&(R=this._bufferService.cols-1),this._activeBuffer.x=Math.min(R,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},T.prototype._setCursor=function(R,k){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=R,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=R,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},T.prototype._moveCursor=function(R,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+R,this._activeBuffer.y+k)},T.prototype.cursorUp=function(R){var k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,R.params[0]||1)):this._moveCursor(0,-(R.params[0]||1)),!0},T.prototype.cursorDown=function(R){var k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,R.params[0]||1)):this._moveCursor(0,R.params[0]||1),!0},T.prototype.cursorForward=function(R){return this._moveCursor(R.params[0]||1,0),!0},T.prototype.cursorBackward=function(R){return this._moveCursor(-(R.params[0]||1),0),!0},T.prototype.cursorNextLine=function(R){return this.cursorDown(R),this._activeBuffer.x=0,!0},T.prototype.cursorPrecedingLine=function(R){return this.cursorUp(R),this._activeBuffer.x=0,!0},T.prototype.cursorCharAbsolute=function(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0},T.prototype.cursorPosition=function(R){return this._setCursor(R.length>=2?(R.params[1]||1)-1:0,(R.params[0]||1)-1),!0},T.prototype.charPosAbsolute=function(R){return this._setCursor((R.params[0]||1)-1,this._activeBuffer.y),!0},T.prototype.hPositionRelative=function(R){return this._moveCursor(R.params[0]||1,0),!0},T.prototype.linePosAbsolute=function(R){return this._setCursor(this._activeBuffer.x,(R.params[0]||1)-1),!0},T.prototype.vPositionRelative=function(R){return this._moveCursor(0,R.params[0]||1),!0},T.prototype.hVPosition=function(R){return this.cursorPosition(R),!0},T.prototype.tabClear=function(R){var k=R.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0},T.prototype.cursorForwardTab=function(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var k=R.params[0]||1;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},T.prototype.cursorBackwardTab=function(R){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var k=R.params[0]||1;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},T.prototype._eraseInBufferLine=function(R,k,F,I){I===void 0&&(I=!1);var z=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);z.replaceCells(k,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I&&(z.isWrapped=!1)},T.prototype._resetBufferLine=function(R){var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);k.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),k.isWrapped=!1},T.prototype.eraseInDisplay=function(R){var k;switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:for(k=this._activeBuffer.y,this._dirtyRowService.markDirty(k),this._eraseInBufferLine(k++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);k<this._bufferService.rows;k++)this._resetBufferLine(k);this._dirtyRowService.markDirty(k);break;case 1:for(k=this._activeBuffer.y,this._dirtyRowService.markDirty(k),this._eraseInBufferLine(k,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(k+1).isWrapped=!1);k--;)this._resetBufferLine(k);this._dirtyRowService.markDirty(0);break;case 2:for(k=this._bufferService.rows,this._dirtyRowService.markDirty(k-1);k--;)this._resetBufferLine(k);this._dirtyRowService.markDirty(0);break;case 3:var F=this._activeBuffer.lines.length-this._bufferService.rows;F>0&&(this._activeBuffer.lines.trimStart(F),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-F,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-F,0),this._onScroll.fire(0))}return!0},T.prototype.eraseInLine=function(R){switch(this._restrictCursor(this._bufferService.cols),R.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},T.prototype.insertLines=function(R){this._restrictCursor();var k=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var F=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;k--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},T.prototype.deleteLines=function(R){this._restrictCursor();var k=R.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var F,I=this._activeBuffer.ybase+this._activeBuffer.y;for(F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-F;k--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},T.prototype.insertChars=function(R){this._restrictCursor();var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},T.prototype.deleteChars=function(R){this._restrictCursor();var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,R.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},T.prototype.scrollUp=function(R){for(var k=R.params[0]||1;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},T.prototype.scrollDown=function(R){for(var k=R.params[0]||1;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},T.prototype.scrollLeft=function(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=R.params[0]||1,F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);I.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},T.prototype.scrollRight=function(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=R.params[0]||1,F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);I.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},T.prototype.insertColumns=function(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=R.params[0]||1,F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);I.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},T.prototype.deleteColumns=function(R){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var k=R.params[0]||1,F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);I.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},T.prototype.eraseChars=function(R){this._restrictCursor();var k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(R.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},T.prototype.repeatPrecedingCharacter=function(R){if(!this._parser.precedingCodepoint)return!0;for(var k=R.params[0]||1,F=new Uint32Array(k),I=0;I<k;++I)F[I]=this._parser.precedingCodepoint;return this.print(F,0,F.length),!0},T.prototype.sendDeviceAttributesPrimary=function(R){return R.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0},T.prototype.sendDeviceAttributesSecondary=function(R){return R.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(R.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0},T.prototype._is=function(R){return(this._optionsService.options.termName+"").indexOf(R)===0},T.prototype.setMode=function(R){for(var k=0;k<R.length;k++)switch(R.params[k]){case 4:this._coreService.modes.insertMode=!0}return!0},T.prototype.setModePrivate=function(R){for(var k=0;k<R.length;k++)switch(R.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},T.prototype.resetMode=function(R){for(var k=0;k<R.length;k++)switch(R.params[k]){case 4:this._coreService.modes.insertMode=!1}return!0},T.prototype.resetModePrivate=function(R){for(var k=0;k<R.length;k++)switch(R.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),R.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},T.prototype._updateAttrColor=function(R,k,F,I,z){return k===2?(R|=50331648,R&=-16777216,R|=h.AttributeData.fromColorRGB([F,I,z])):k===5&&(R&=-50331904,R|=33554432|255&F),R},T.prototype._extractColor=function(R,k,F){var I=[0,0,-1,0,0,0],z=0,K=0;do{if(I[K+z]=R.params[k+K],R.hasSubParams(k+K)){var N=R.getSubParams(k+K),Y=0;do I[1]===5&&(z=1),I[K+Y+1+z]=N[Y];while(++Y<N.length&&Y+K+1+z<I.length);break}if(I[1]===5&&K+z>=2||I[1]===2&&K+z>=5)break;I[1]&&(z=1)}while(++K+k<R.length&&K+z<I.length);for(Y=2;Y<I.length;++Y)I[Y]===-1&&(I[Y]=0);switch(I[0]){case 38:F.fg=this._updateAttrColor(F.fg,I[1],I[3],I[4],I[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,I[1],I[3],I[4],I[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,I[1],I[3],I[4],I[5])}return K},T.prototype._processUnderline=function(R,k){k.extended=k.extended.clone(),(!~R||R>5)&&(R=1),k.extended.underlineStyle=R,k.fg|=268435456,R===0&&(k.fg&=-268435457),k.updateExtended()},T.prototype.charAttributes=function(R){if(R.length===1&&R.params[0]===0)return this._curAttrData.fg=s.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=s.DEFAULT_ATTR_DATA.bg,!0;for(var k,F=R.length,I=this._curAttrData,z=0;z<F;z++)(k=R.params[z])>=30&&k<=37?(I.fg&=-50331904,I.fg|=16777216|k-30):k>=40&&k<=47?(I.bg&=-50331904,I.bg|=16777216|k-40):k>=90&&k<=97?(I.fg&=-50331904,I.fg|=16777224|k-90):k>=100&&k<=107?(I.bg&=-50331904,I.bg|=16777224|k-100):k===0?(I.fg=s.DEFAULT_ATTR_DATA.fg,I.bg=s.DEFAULT_ATTR_DATA.bg):k===1?I.fg|=134217728:k===3?I.bg|=67108864:k===4?(I.fg|=268435456,this._processUnderline(R.hasSubParams(z)?R.getSubParams(z)[0]:1,I)):k===5?I.fg|=536870912:k===7?I.fg|=67108864:k===8?I.fg|=1073741824:k===9?I.fg|=2147483648:k===2?I.bg|=134217728:k===21?this._processUnderline(2,I):k===22?(I.fg&=-134217729,I.bg&=-134217729):k===23?I.bg&=-67108865:k===24?I.fg&=-268435457:k===25?I.fg&=-536870913:k===27?I.fg&=-67108865:k===28?I.fg&=-1073741825:k===29?I.fg&=2147483647:k===39?(I.fg&=-67108864,I.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):k===49?(I.bg&=-67108864,I.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):k===38||k===48||k===58?z+=this._extractColor(R,z,I):k===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):k===100?(I.fg&=-67108864,I.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",k);return!0},T.prototype.deviceStatus=function(R){switch(R.params[0]){case 5:this._coreService.triggerDataEvent(a.C0.ESC+"[0n");break;case 6:var k=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(a.C0.ESC+"["+k+";"+F+"R")}return!0},T.prototype.deviceStatusPrivate=function(R){switch(R.params[0]){case 6:var k=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(a.C0.ESC+"[?"+k+";"+F+"R")}return!0},T.prototype.softReset=function(R){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},T.prototype.setCursorStyle=function(R){var k=R.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var F=k%2==1;return this._optionsService.options.cursorBlink=F,!0},T.prototype.setScrollRegion=function(R){var k,F=R.params[0]||1;return(R.length<2||(k=R.params[1])>this._bufferService.rows||k===0)&&(k=this._bufferService.rows),k>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=k-1,this._setCursor(0,0)),!0},T.prototype.windowOptions=function(R){if(!L(R.params[0],this._optionsService.options.windowOptions))return!0;var k=R.length>1?R.params[1]:0;switch(R.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(_.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(_.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(a.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},T.prototype.saveCursor=function(R){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},T.prototype.restoreCursor=function(R){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},T.prototype.setTitle=function(R){return this._windowTitle=R,this._onTitleChange.fire(R),!0},T.prototype.setIconName=function(R){return this._iconName=R,!0},T.prototype._parseAnsiColorChange=function(R){for(var k,F={colors:[]},I=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;(k=I.exec(R))!==null;)F.colors.push({colorIndex:parseInt(k[1]),red:parseInt(k[2],16),green:parseInt(k[3],16),blue:parseInt(k[4],16)});return F.colors.length===0?null:F},T.prototype.setAnsiColor=function(R){var k=this._parseAnsiColorChange(R);return k?this._onAnsiColorChange.fire(k):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+R),!0},T.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},T.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},T.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},T.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0},T.prototype.selectCharset=function(R){return R.length!==2?(this.selectDefaultCharset(),!0):(R[0]==="/"||this._charsetService.setgCharset(E[R[0]],m.CHARSETS[R[1]]||m.DEFAULT_CHARSET),!0)},T.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},T.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},T.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var R=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,R,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},T.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},T.prototype.reset=function(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()},T.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},T.prototype.setgLevel=function(R){return this._charsetService.setgLevel(R),!0},T.prototype.screenAlignmentPattern=function(){var R=new r.CellData;R.content=1<<22|"E".charCodeAt(0),R.fg=this._curAttrData.fg,R.bg=this._curAttrData.bg,this._setCursor(0,0);for(var k=0;k<this._bufferService.rows;++k){var F=this._activeBuffer.ybase+this._activeBuffer.y+k,I=this._activeBuffer.lines.get(F);I&&(I.fill(R),I.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},T}(n.Disposable);t.InputHandler=D},844:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var f=function(){function p(){this._disposables=[],this._isDisposed=!1}return p.prototype.dispose=function(){this._isDisposed=!0;for(var _=0,a=this._disposables;_<a.length;_++)a[_].dispose();this._disposables.length=0},p.prototype.register=function(_){return this._disposables.push(_),_},p.prototype.unregister=function(_){var a=this._disposables.indexOf(_);a!==-1&&this._disposables.splice(a,1)},p}();function l(p){for(var _=0,a=p;_<a.length;_++)a[_].dispose();p.length=0}t.Disposable=f,t.disposeArray=l,t.getDisposeArrayDisposable=function(p){return{dispose:function(){return l(p)}}}},6114:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isFirefox=void 0;var f=typeof navigator=="undefined",l=f?"node":navigator.userAgent,p=f?"node":navigator.platform;t.isFirefox=l.includes("Firefox"),t.isSafari=/^((?!chrome|android).)*safari/i.test(l),t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),t.isIpad=p==="iPad",t.isIphone=p==="iPhone",t.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),t.isLinux=p.indexOf("Linux")>=0},8273:(x,t)=>{function f(l,p,_,a){if(_===void 0&&(_=0),a===void 0&&(a=l.length),_>=l.length)return l;_=(l.length+_)%l.length,a=a>=l.length?l.length:(l.length+a)%l.length;for(var m=_;m<a;++m)l[m]=p;return l}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(l,p,_,a){return l.fill?l.fill(p,_,a):f(l,p,_,a)},t.fillFallback=f,t.concat=function(l,p){var _=new l.constructor(l.length+p.length);return _.set(l),_.set(p,l.length),_}},9282:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var l=f(643);t.updateWindowsModeWrappedState=function(p){var _=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),a=_==null?void 0:_.get(p.cols-1),m=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);m&&a&&(m.isWrapped=a[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&a[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var f=function(){function p(){this.fg=0,this.bg=0,this.extended=new l}return p.toColorRGB=function(_){return[_>>>16&255,_>>>8&255,255&_]},p.fromColorRGB=function(_){return(255&_[0])<<16|(255&_[1])<<8|255&_[2]},p.prototype.clone=function(){var _=new p;return _.fg=this.fg,_.bg=this.bg,_.extended=this.extended.clone(),_},p.prototype.isInverse=function(){return 67108864&this.fg},p.prototype.isBold=function(){return 134217728&this.fg},p.prototype.isUnderline=function(){return 268435456&this.fg},p.prototype.isBlink=function(){return 536870912&this.fg},p.prototype.isInvisible=function(){return 1073741824&this.fg},p.prototype.isItalic=function(){return 67108864&this.bg},p.prototype.isDim=function(){return 134217728&this.bg},p.prototype.isStrikethrough=function(){return 2147483648&this.fg},p.prototype.getFgColorMode=function(){return 50331648&this.fg},p.prototype.getBgColorMode=function(){return 50331648&this.bg},p.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},p.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},p.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},p.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},p.prototype.isFgDefault=function(){return(50331648&this.fg)==0},p.prototype.isBgDefault=function(){return(50331648&this.bg)==0},p.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},p.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},p.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},p.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},p.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},p.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},p.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},p.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},p.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},p.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},p.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},p}();t.AttributeData=f;var l=function(){function p(_,a){_===void 0&&(_=0),a===void 0&&(a=-1),this.underlineStyle=_,this.underlineColor=a}return p.prototype.clone=function(){return new p(this.underlineStyle,this.underlineColor)},p.prototype.isEmpty=function(){return this.underlineStyle===0},p}();t.ExtendedAttrs=l},9092:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var l=f(6349),p=f(8437),_=f(511),a=f(643),m=f(4634),g=f(4863),n=f(7116),o=f(3734);t.MAX_BUFFER_SIZE=4294967295;var d=function(){function i(e,r,h){this._hasScrollback=e,this._optionsService=r,this._bufferService=h,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=n.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,a.WHITESPACE_CELL_CHAR,a.WHITESPACE_CELL_WIDTH,a.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return i.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell},i.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell},i.prototype.getBlankLine=function(e,r){return new p.BufferLine(this._bufferService.cols,this.getNullCell(e),r)},Object.defineProperty(i.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),i.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.options.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r},i.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=p.DEFAULT_ATTR_DATA);for(var r=this._rows;r--;)this.lines.push(this.getBlankLine(e))}},i.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},i.prototype.resize=function(e,r){var h=this.getNullCell(p.DEFAULT_ATTR_DATA),u=this._getCorrectBufferLength(r);if(u>this.lines.maxLength&&(this.lines.maxLength=u),this.lines.length>0){if(this._cols<e)for(var y=0;y<this.lines.length;y++)this.lines.get(y).resize(e,h);var C=0;if(this._rows<r)for(var E=this._rows;E<r;E++)this.lines.length<r+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(e,h)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(e,h)));else for(E=this._rows;E>r;E--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(u<this.lines.maxLength){var b=this.lines.length-u;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=u}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(y=0;y<this.lines.length;y++)this.lines.get(y).resize(e,h);this._cols=e,this._rows=r},Object.defineProperty(i.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),i.prototype._reflow=function(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))},i.prototype._reflowLarger=function(e,r){var h=m.reflowLargerGetLinesToRemove(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(h.length>0){var u=m.reflowLargerCreateNewLayout(this.lines,h);m.reflowLargerApplyNewLayout(this.lines,u.layout),this._reflowLargerAdjustViewport(e,r,u.countRemoved)}},i.prototype._reflowLargerAdjustViewport=function(e,r,h){for(var u=this.getNullCell(p.DEFAULT_ATTR_DATA),y=h;y-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new p.BufferLine(e,u))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-h,0)},i.prototype._reflowSmaller=function(e,r){for(var h=this.getNullCell(p.DEFAULT_ATTR_DATA),u=[],y=0,C=this.lines.length-1;C>=0;C--){var E=this.lines.get(C);if(!(!E||!E.isWrapped&&E.getTrimmedLength()<=e)){for(var b=[E];E.isWrapped&&C>0;)E=this.lines.get(--C),b.unshift(E);var L=this.ybase+this.y;if(!(L>=C&&L<C+b.length)){var w,D=b[b.length-1].getTrimmedLength(),M=m.reflowSmallerGetNewLineLengths(b,this._cols,e),T=M.length-b.length;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);for(var R=[],k=0;k<T;k++){var F=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);R.push(F)}R.length>0&&(u.push({start:C+b.length+y,newLines:R}),y+=R.length),b.push.apply(b,R);var I=M.length-1,z=M[I];z===0&&(z=M[--I]);for(var K=b.length-T-1,N=D;K>=0;){var Y=Math.min(N,z);if(b[I].copyCellsFrom(b[K],N-Y,z-Y,Y,!0),(z-=Y)==0&&(z=M[--I]),(N-=Y)==0){K--;var Z=Math.max(K,0);N=m.getWrappedLineTrimmedLength(b,Z,this._cols)}}for(k=0;k<b.length;k++)M[k]<e&&b[k].setCell(M[k],h);for(var B=T-w;B-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+y)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+r-1)}}}if(u.length>0){var O=[],P=[];for(k=0;k<this.lines.length;k++)P.push(this.lines.get(k));var q=this.lines.length,H=q-1,G=0,X=u[G];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+y);var te=0;for(k=Math.min(this.lines.maxLength-1,q+y-1);k>=0;k--)if(X&&X.start>H+te){for(var re=X.newLines.length-1;re>=0;re--)this.lines.set(k--,X.newLines[re]);k++,O.push({index:H+1,amount:X.newLines.length}),te+=X.newLines.length,X=u[++G]}else this.lines.set(k,P[H--]);var se=0;for(k=O.length-1;k>=0;k--)O[k].index+=se,this.lines.onInsertEmitter.fire(O[k]),se+=O[k].amount;var V=Math.max(0,q+y-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}},i.prototype.stringIndexToBufferIndex=function(e,r,h){for(h===void 0&&(h=!1);r;){var u=this.lines.get(e);if(!u)return[-1,-1];for(var y=h?u.getTrimmedLength():u.length,C=0;C<y;++C)if(u.get(C)[a.CHAR_DATA_WIDTH_INDEX]&&(r-=u.get(C)[a.CHAR_DATA_CHAR_INDEX].length||1),r<0)return[e,C];e++}return[e,0]},i.prototype.translateBufferLineToString=function(e,r,h,u){h===void 0&&(h=0);var y=this.lines.get(e);return y?y.translateToString(r,h,u):""},i.prototype.getWrappedRangeForLine=function(e){for(var r=e,h=e;r>0&&this.lines.get(r).isWrapped;)r--;for(;h+1<this.lines.length&&this.lines.get(h+1).isWrapped;)h++;return{first:r,last:h}},i.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.options.tabStopWidth)this.tabs[e]=!0},i.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},i.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},i.prototype.addMarker=function(e){var r=this,h=new g.Marker(e);return this.markers.push(h),h.register(this.lines.onTrim(function(u){h.line-=u,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(function(u){h.line>=u.index&&(h.line+=u.amount)})),h.register(this.lines.onDelete(function(u){h.line>=u.index&&h.line<u.index+u.amount&&h.dispose(),h.line>u.index&&(h.line-=u.amount)})),h.register(h.onDispose(function(){return r._removeMarker(h)})),h},i.prototype._removeMarker=function(e){this.markers.splice(this.markers.indexOf(e),1)},i.prototype.iterator=function(e,r,h,u,y){return new s(this,e,r,h,u,y)},i}();t.Buffer=d;var s=function(){function i(e,r,h,u,y,C){h===void 0&&(h=0),u===void 0&&(u=e.lines.length),y===void 0&&(y=0),C===void 0&&(C=0),this._buffer=e,this._trimRight=r,this._startIndex=h,this._endIndex=u,this._startOverscan=y,this._endOverscan=C,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return i.prototype.hasNext=function(){return this._current<this._endIndex},i.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var r="",h=e.first;h<=e.last;++h)r+=this._buffer.translateBufferLineToString(h,this._trimRight);return this._current=e.last+1,{range:e,content:r}},i}();t.BufferStringIterator=s},8437:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var l=f(482),p=f(643),_=f(511),a=f(3734);t.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);var m=function(){function g(n,o,d){d===void 0&&(d=!1),this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);for(var s=o||_.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),i=0;i<n;++i)this.setCell(i,s);this.length=n}return g.prototype.get=function(n){var o=this._data[3*n+0],d=2097151&o;return[this._data[3*n+1],2097152&o?this._combined[n]:d?l.stringFromCodePoint(d):"",o>>22,2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):d]},g.prototype.set=function(n,o){this._data[3*n+1]=o[p.CHAR_DATA_ATTR_INDEX],o[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=o[1],this._data[3*n+0]=2097152|n|o[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=o[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[p.CHAR_DATA_WIDTH_INDEX]<<22},g.prototype.getWidth=function(n){return this._data[3*n+0]>>22},g.prototype.hasWidth=function(n){return 12582912&this._data[3*n+0]},g.prototype.getFg=function(n){return this._data[3*n+1]},g.prototype.getBg=function(n){return this._data[3*n+2]},g.prototype.hasContent=function(n){return 4194303&this._data[3*n+0]},g.prototype.getCodePoint=function(n){var o=this._data[3*n+0];return 2097152&o?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&o},g.prototype.isCombined=function(n){return 2097152&this._data[3*n+0]},g.prototype.getString=function(n){var o=this._data[3*n+0];return 2097152&o?this._combined[n]:2097151&o?l.stringFromCodePoint(2097151&o):""},g.prototype.loadCell=function(n,o){var d=3*n;return o.content=this._data[d+0],o.fg=this._data[d+1],o.bg=this._data[d+2],2097152&o.content&&(o.combinedData=this._combined[n]),268435456&o.bg&&(o.extended=this._extendedAttrs[n]),o},g.prototype.setCell=function(n,o){2097152&o.content&&(this._combined[n]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[n]=o.extended),this._data[3*n+0]=o.content,this._data[3*n+1]=o.fg,this._data[3*n+2]=o.bg},g.prototype.setCellFromCodePoint=function(n,o,d,s,i,e){268435456&i&&(this._extendedAttrs[n]=e),this._data[3*n+0]=o|d<<22,this._data[3*n+1]=s,this._data[3*n+2]=i},g.prototype.addCodepointToCell=function(n,o){var d=this._data[3*n+0];2097152&d?this._combined[n]+=l.stringFromCodePoint(o):(2097151&d?(this._combined[n]=l.stringFromCodePoint(2097151&d)+l.stringFromCodePoint(o),d&=-2097152,d|=2097152):d=o|1<<22,this._data[3*n+0]=d)},g.prototype.insertCells=function(n,o,d,s){if((n%=this.length)&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new a.ExtendedAttrs),o<this.length-n){for(var i=new _.CellData,e=this.length-n-o-1;e>=0;--e)this.setCell(n+o+e,this.loadCell(n+e,i));for(e=0;e<o;++e)this.setCell(n+e,d)}else for(e=n;e<this.length;++e)this.setCell(e,d);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new a.ExtendedAttrs)},g.prototype.deleteCells=function(n,o,d,s){if(n%=this.length,o<this.length-n){for(var i=new _.CellData,e=0;e<this.length-n-o;++e)this.setCell(n+e,this.loadCell(n+o+e,i));for(e=this.length-o;e<this.length;++e)this.setCell(e,d)}else for(e=n;e<this.length;++e)this.setCell(e,d);n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new a.ExtendedAttrs),this.getWidth(n)!==0||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new a.ExtendedAttrs)},g.prototype.replaceCells=function(n,o,d,s){for(n&&this.getWidth(n-1)===2&&this.setCellFromCodePoint(n-1,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new a.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(s==null?void 0:s.fg)||0,(s==null?void 0:s.bg)||0,(s==null?void 0:s.extended)||new a.ExtendedAttrs);n<o&&n<this.length;)this.setCell(n++,d)},g.prototype.resize=function(n,o){if(n!==this.length){if(n>this.length){var d=new Uint32Array(3*n);this.length&&(3*n<this._data.length?d.set(this._data.subarray(0,3*n)):d.set(this._data)),this._data=d;for(var s=this.length;s<n;++s)this.setCell(s,o)}else if(n){(d=new Uint32Array(3*n)).set(this._data.subarray(0,3*n)),this._data=d;var i=Object.keys(this._combined);for(s=0;s<i.length;s++){var e=parseInt(i[s],10);e>=n&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=n}},g.prototype.fill=function(n){this._combined={},this._extendedAttrs={};for(var o=0;o<this.length;++o)this.setCell(o,n)},g.prototype.copyFrom=function(n){for(var o in this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={},n._combined)this._combined[o]=n._combined[o];for(var o in this._extendedAttrs={},n._extendedAttrs)this._extendedAttrs[o]=n._extendedAttrs[o];this.isWrapped=n.isWrapped},g.prototype.clone=function(){var n=new g(0);for(var o in n._data=new Uint32Array(this._data),n.length=this.length,this._combined)n._combined[o]=this._combined[o];for(var o in this._extendedAttrs)n._extendedAttrs[o]=this._extendedAttrs[o];return n.isWrapped=this.isWrapped,n},g.prototype.getTrimmedLength=function(){for(var n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0},g.prototype.copyCellsFrom=function(n,o,d,s,i){var e=n._data;if(i)for(var r=s-1;r>=0;r--)for(var h=0;h<3;h++)this._data[3*(d+r)+h]=e[3*(o+r)+h];else for(r=0;r<s;r++)for(h=0;h<3;h++)this._data[3*(d+r)+h]=e[3*(o+r)+h];var u=Object.keys(n._combined);for(h=0;h<u.length;h++){var y=parseInt(u[h],10);y>=o&&(this._combined[y-o+d]=n._combined[y])}},g.prototype.translateToString=function(n,o,d){n===void 0&&(n=!1),o===void 0&&(o=0),d===void 0&&(d=this.length),n&&(d=Math.min(d,this.getTrimmedLength()));for(var s="";o<d;){var i=this._data[3*o+0],e=2097151&i;s+=2097152&i?this._combined[o]:e?l.stringFromCodePoint(e):p.WHITESPACE_CELL_CHAR,o+=i>>22||1}return s},g}();t.BufferLine=m},4841:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(f,l){if(f.start.y>f.end.y)throw new Error("Buffer range end ("+f.end.x+", "+f.end.y+") cannot be before start ("+f.start.x+", "+f.start.y+")");return l*(f.end.y-f.start.y)+(f.end.x-f.start.x+1)}},4634:(x,t)=>{function f(l,p,_){if(p===l.length-1)return l[p].getTrimmedLength();var a=!l[p].hasContent(_-1)&&l[p].getWidth(_-1)===1,m=l[p+1].getWidth(0)===2;return a&&m?_-1:_}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(l,p,_,a,m){for(var g=[],n=0;n<l.length-1;n++){var o=n,d=l.get(++o);if(d.isWrapped){for(var s=[l.get(n)];o<l.length&&d.isWrapped;)s.push(d),d=l.get(++o);if(a>=n&&a<o)n+=s.length-1;else{for(var i=0,e=f(s,i,p),r=1,h=0;r<s.length;){var u=f(s,r,p),y=u-h,C=_-e,E=Math.min(y,C);s[i].copyCellsFrom(s[r],h,e,E,!1),(e+=E)===_&&(i++,e=0),(h+=E)===u&&(r++,h=0),e===0&&i!==0&&s[i-1].getWidth(_-1)===2&&(s[i].copyCellsFrom(s[i-1],_-1,e++,1,!1),s[i-1].setCell(_-1,m))}s[i].replaceCells(e,_,m);for(var b=0,L=s.length-1;L>0&&(L>i||s[L].getTrimmedLength()===0);L--)b++;b>0&&(g.push(n+s.length-b),g.push(b)),n+=s.length-1}}}return g},t.reflowLargerCreateNewLayout=function(l,p){for(var _=[],a=0,m=p[a],g=0,n=0;n<l.length;n++)if(m===n){var o=p[++a];l.onDeleteEmitter.fire({index:n-g,amount:o}),n+=o-1,g+=o,m=p[++a]}else _.push(n);return{layout:_,countRemoved:g}},t.reflowLargerApplyNewLayout=function(l,p){for(var _=[],a=0;a<p.length;a++)_.push(l.get(p[a]));for(a=0;a<_.length;a++)l.set(a,_[a]);l.length=p.length},t.reflowSmallerGetNewLineLengths=function(l,p,_){for(var a=[],m=l.map(function(e,r){return f(l,r,p)}).reduce(function(e,r){return e+r}),g=0,n=0,o=0;o<m;){if(m-o<_){a.push(m-o);break}g+=_;var d=f(l,n,p);g>d&&(g-=d,n++);var s=l[n].getWidth(g-1)===2;s&&g--;var i=s?_-1:_;a.push(i),o+=i}return a},t.getWrappedLineTrimmedLength=f},5295:function(x,t,f){var l,p=this&&this.__extends||(l=function(g,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&(o[s]=d[s])})(g,n)},function(g,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=g}l(g,n),g.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var _=f(9092),a=f(8460),m=function(g){function n(o,d){var s=g.call(this)||this;return s._optionsService=o,s._bufferService=d,s._onBufferActivate=s.register(new a.EventEmitter),s.reset(),s}return p(n,g),Object.defineProperty(n.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this._normal=new _.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new _.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(n.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),n.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},n.prototype.activateAltBuffer=function(o){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(o),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},n.prototype.resize=function(o,d){this._normal.resize(o,d),this._alt.resize(o,d)},n.prototype.setupTabStops=function(o){this._normal.setupTabStops(o),this._alt.setupTabStops(o)},n}(f(844).Disposable);t.BufferSet=m},511:function(x,t,f){var l,p=this&&this.__extends||(l=function(n,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(d[i]=s[i])})(n,o)},function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function d(){this.constructor=n}l(n,o),n.prototype=o===null?Object.create(o):(d.prototype=o.prototype,new d)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var _=f(482),a=f(643),m=f(3734),g=function(n){function o(){var d=n!==null&&n.apply(this,arguments)||this;return d.content=0,d.fg=0,d.bg=0,d.extended=new m.ExtendedAttrs,d.combinedData="",d}return p(o,n),o.fromCharData=function(d){var s=new o;return s.setFromCharData(d),s},o.prototype.isCombined=function(){return 2097152&this.content},o.prototype.getWidth=function(){return this.content>>22},o.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?_.stringFromCodePoint(2097151&this.content):""},o.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},o.prototype.setFromCharData=function(d){this.fg=d[a.CHAR_DATA_ATTR_INDEX],this.bg=0;var s=!1;if(d[a.CHAR_DATA_CHAR_INDEX].length>2)s=!0;else if(d[a.CHAR_DATA_CHAR_INDEX].length===2){var i=d[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var e=d[a.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(i-55296)+e-56320+65536|d[a.CHAR_DATA_WIDTH_INDEX]<<22:s=!0}else s=!0}else this.content=d[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[a.CHAR_DATA_WIDTH_INDEX]<<22;s&&(this.combinedData=d[a.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[a.CHAR_DATA_WIDTH_INDEX]<<22)},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(m.AttributeData);t.CellData=g},643:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:function(x,t,f){var l,p=this&&this.__extends||(l=function(m,g){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(n[d]=o[d])})(m,g)},function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function n(){this.constructor=m}l(m,g),m.prototype=g===null?Object.create(g):(n.prototype=g.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var _=f(8460),a=function(m){function g(n){var o=m.call(this)||this;return o.line=n,o._id=g._nextId++,o.isDisposed=!1,o._onDispose=new _.EventEmitter,o}return p(g,m),Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),m.prototype.dispose.call(this))},g._nextId=1,g}(f(844).Disposable);t.Marker=a},7116:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},t.CHARSETS.A={"#":"\xA3"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},t.CHARSETS.C=t.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},t.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},t.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},t.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},t.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},t.CHARSETS.E=t.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},t.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},t.CHARSETS.H=t.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},t.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(x,t)=>{var f,l;Object.defineProperty(t,"__esModule",{value:!0}),t.C1=t.C0=void 0,(l=t.C0||(t.C0={})).NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F",(f=t.C1||(t.C1={})).PAD="\x80",f.HOP="\x81",f.BPH="\x82",f.NBH="\x83",f.IND="\x84",f.NEL="\x85",f.SSA="\x86",f.ESA="\x87",f.HTS="\x88",f.HTJ="\x89",f.VTS="\x8A",f.PLD="\x8B",f.PLU="\x8C",f.RI="\x8D",f.SS2="\x8E",f.SS3="\x8F",f.DCS="\x90",f.PU1="\x91",f.PU2="\x92",f.STS="\x93",f.CCH="\x94",f.MW="\x95",f.SPA="\x96",f.EPA="\x97",f.SOS="\x98",f.SGCI="\x99",f.SCI="\x9A",f.CSI="\x9B",f.ST="\x9C",f.OSC="\x9D",f.PM="\x9E",f.APC="\x9F"},7399:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;var l=f(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(_,a,m,g){var n={type:0,cancel:!1,key:void 0},o=(_.shiftKey?1:0)|(_.altKey?2:0)|(_.ctrlKey?4:0)|(_.metaKey?8:0);switch(_.keyCode){case 0:_.key==="UIKeyInputUpArrow"?n.key=a?l.C0.ESC+"OA":l.C0.ESC+"[A":_.key==="UIKeyInputLeftArrow"?n.key=a?l.C0.ESC+"OD":l.C0.ESC+"[D":_.key==="UIKeyInputRightArrow"?n.key=a?l.C0.ESC+"OC":l.C0.ESC+"[C":_.key==="UIKeyInputDownArrow"&&(n.key=a?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(_.shiftKey){n.key=l.C0.BS;break}if(_.altKey){n.key=l.C0.ESC+l.C0.DEL;break}n.key=l.C0.DEL;break;case 9:if(_.shiftKey){n.key=l.C0.ESC+"[Z";break}n.key=l.C0.HT,n.cancel=!0;break;case 13:n.key=_.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,n.cancel=!0;break;case 27:n.key=l.C0.ESC,_.altKey&&(n.key=l.C0.ESC+l.C0.ESC),n.cancel=!0;break;case 37:if(_.metaKey)break;o?(n.key=l.C0.ESC+"[1;"+(o+1)+"D",n.key===l.C0.ESC+"[1;3D"&&(n.key=l.C0.ESC+(m?"b":"[1;5D"))):n.key=a?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(_.metaKey)break;o?(n.key=l.C0.ESC+"[1;"+(o+1)+"C",n.key===l.C0.ESC+"[1;3C"&&(n.key=l.C0.ESC+(m?"f":"[1;5C"))):n.key=a?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(_.metaKey)break;o?(n.key=l.C0.ESC+"[1;"+(o+1)+"A",m||n.key!==l.C0.ESC+"[1;3A"||(n.key=l.C0.ESC+"[1;5A")):n.key=a?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(_.metaKey)break;o?(n.key=l.C0.ESC+"[1;"+(o+1)+"B",m||n.key!==l.C0.ESC+"[1;3B"||(n.key=l.C0.ESC+"[1;5B")):n.key=a?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:_.shiftKey||_.ctrlKey||(n.key=l.C0.ESC+"[2~");break;case 46:n.key=o?l.C0.ESC+"[3;"+(o+1)+"~":l.C0.ESC+"[3~";break;case 36:n.key=o?l.C0.ESC+"[1;"+(o+1)+"H":a?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:n.key=o?l.C0.ESC+"[1;"+(o+1)+"F":a?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:_.shiftKey?n.type=2:n.key=l.C0.ESC+"[5~";break;case 34:_.shiftKey?n.type=3:n.key=l.C0.ESC+"[6~";break;case 112:n.key=o?l.C0.ESC+"[1;"+(o+1)+"P":l.C0.ESC+"OP";break;case 113:n.key=o?l.C0.ESC+"[1;"+(o+1)+"Q":l.C0.ESC+"OQ";break;case 114:n.key=o?l.C0.ESC+"[1;"+(o+1)+"R":l.C0.ESC+"OR";break;case 115:n.key=o?l.C0.ESC+"[1;"+(o+1)+"S":l.C0.ESC+"OS";break;case 116:n.key=o?l.C0.ESC+"[15;"+(o+1)+"~":l.C0.ESC+"[15~";break;case 117:n.key=o?l.C0.ESC+"[17;"+(o+1)+"~":l.C0.ESC+"[17~";break;case 118:n.key=o?l.C0.ESC+"[18;"+(o+1)+"~":l.C0.ESC+"[18~";break;case 119:n.key=o?l.C0.ESC+"[19;"+(o+1)+"~":l.C0.ESC+"[19~";break;case 120:n.key=o?l.C0.ESC+"[20;"+(o+1)+"~":l.C0.ESC+"[20~";break;case 121:n.key=o?l.C0.ESC+"[21;"+(o+1)+"~":l.C0.ESC+"[21~";break;case 122:n.key=o?l.C0.ESC+"[23;"+(o+1)+"~":l.C0.ESC+"[23~";break;case 123:n.key=o?l.C0.ESC+"[24;"+(o+1)+"~":l.C0.ESC+"[24~";break;default:if(!_.ctrlKey||_.shiftKey||_.altKey||_.metaKey)if(m&&!g||!_.altKey||_.metaKey)!m||_.altKey||_.ctrlKey||_.shiftKey||!_.metaKey?_.key&&!_.ctrlKey&&!_.altKey&&!_.metaKey&&_.keyCode>=48&&_.key.length===1?n.key=_.key:_.key&&_.ctrlKey&&_.key==="_"&&(n.key=l.C0.US):_.keyCode===65&&(n.type=1);else{var d=p[_.keyCode],s=d&&d[_.shiftKey?1:0];if(s)n.key=l.C0.ESC+s;else if(_.keyCode>=65&&_.keyCode<=90){var i=_.ctrlKey?_.keyCode-64:_.keyCode+32;n.key=l.C0.ESC+String.fromCharCode(i)}}else _.keyCode>=65&&_.keyCode<=90?n.key=String.fromCharCode(_.keyCode-64):_.keyCode===32?n.key=l.C0.NUL:_.keyCode>=51&&_.keyCode<=55?n.key=String.fromCharCode(_.keyCode-51+27):_.keyCode===56?n.key=l.C0.DEL:_.keyCode===219?n.key=l.C0.ESC:_.keyCode===220?n.key=l.C0.FS:_.keyCode===221&&(n.key=l.C0.GS)}return n}},482:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(p){return p>65535?(p-=65536,String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):String.fromCharCode(p)},t.utf32ToString=function(p,_,a){_===void 0&&(_=0),a===void 0&&(a=p.length);for(var m="",g=_;g<a;++g){var n=p[g];n>65535?(n-=65536,m+=String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):m+=String.fromCharCode(n)}return m};var f=function(){function p(){this._interim=0}return p.prototype.clear=function(){this._interim=0},p.prototype.decode=function(_,a){var m=_.length;if(!m)return 0;var g=0,n=0;this._interim&&(56320<=(s=_.charCodeAt(n++))&&s<=57343?a[g++]=1024*(this._interim-55296)+s-56320+65536:(a[g++]=this._interim,a[g++]=s),this._interim=0);for(var o=n;o<m;++o){var d=_.charCodeAt(o);if(55296<=d&&d<=56319){if(++o>=m)return this._interim=d,g;var s;56320<=(s=_.charCodeAt(o))&&s<=57343?a[g++]=1024*(d-55296)+s-56320+65536:(a[g++]=d,a[g++]=s)}else d!==65279&&(a[g++]=d)}return g},p}();t.StringToUtf32=f;var l=function(){function p(){this.interim=new Uint8Array(3)}return p.prototype.clear=function(){this.interim.fill(0)},p.prototype.decode=function(_,a){var m=_.length;if(!m)return 0;var g,n,o,d,s=0,i=0,e=0;if(this.interim[0]){var r=!1,h=this.interim[0];h&=(224&h)==192?31:(240&h)==224?15:7;for(var u=0,y=void 0;(y=63&this.interim[++u])&&u<4;)h<<=6,h|=y;for(var C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=C-u;e<E;){if(e>=m)return 0;if((192&(y=_[e++]))!=128){e--,r=!0;break}this.interim[u++]=y,h<<=6,h|=63&y}r||(C===2?h<128?e--:a[s++]=h:C===3?h<2048||h>=55296&&h<=57343||h===65279||(a[s++]=h):h<65536||h>1114111||(a[s++]=h)),this.interim.fill(0)}for(var b=m-4,L=e;L<m;){for(;!(!(L<b)||128&(g=_[L])||128&(n=_[L+1])||128&(o=_[L+2])||128&(d=_[L+3]));)a[s++]=g,a[s++]=n,a[s++]=o,a[s++]=d,L+=4;if((g=_[L++])<128)a[s++]=g;else if((224&g)==192){if(L>=m)return this.interim[0]=g,s;if((192&(n=_[L++]))!=128){L--;continue}if((i=(31&g)<<6|63&n)<128){L--;continue}a[s++]=i}else if((240&g)==224){if(L>=m)return this.interim[0]=g,s;if((192&(n=_[L++]))!=128){L--;continue}if(L>=m)return this.interim[0]=g,this.interim[1]=n,s;if((192&(o=_[L++]))!=128){L--;continue}if((i=(15&g)<<12|(63&n)<<6|63&o)<2048||i>=55296&&i<=57343||i===65279)continue;a[s++]=i}else if((248&g)==240){if(L>=m)return this.interim[0]=g,s;if((192&(n=_[L++]))!=128){L--;continue}if(L>=m)return this.interim[0]=g,this.interim[1]=n,s;if((192&(o=_[L++]))!=128){L--;continue}if(L>=m)return this.interim[0]=g,this.interim[1]=n,this.interim[2]=o,s;if((192&(d=_[L++]))!=128){L--;continue}if((i=(7&g)<<18|(63&n)<<12|(63&o)<<6|63&d)<65536||i>1114111)continue;a[s++]=i}}return s},p}();t.Utf8ToUtf32=l},225:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var l,p=f(8273),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],m=function(){function g(){if(this.version="6",!l){l=new Uint8Array(65536),p.fill(l,1),l[0]=0,p.fill(l,0,1,32),p.fill(l,0,127,160),p.fill(l,2,4352,4448),l[9001]=2,l[9002]=2,p.fill(l,2,11904,42192),l[12351]=1,p.fill(l,2,44032,55204),p.fill(l,2,63744,64256),p.fill(l,2,65040,65050),p.fill(l,2,65072,65136),p.fill(l,2,65280,65377),p.fill(l,2,65504,65511);for(var n=0;n<_.length;++n)p.fill(l,0,_[n][0],_[n][1]+1)}}return g.prototype.wcwidth=function(n){return n<32?0:n<127?1:n<65536?l[n]:function(o,d){var s,i=0,e=d.length-1;if(o<d[0][0]||o>d[e][1])return!1;for(;e>=i;)if(o>d[s=i+e>>1][1])i=s+1;else{if(!(o<d[s][0]))return!0;e=s-1}return!1}(n,a)?0:n>=131072&&n<=196605||n>=196608&&n<=262141?2:1},g}();t.UnicodeV6=m},5981:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var f=typeof queueMicrotask=="undefined"?function(p){Promise.resolve().then(p)}:queueMicrotask,l=function(){function p(_){this._action=_,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return p.prototype.writeSync=function(_,a){if(a!==void 0&&this._syncCalls>a)this._syncCalls=0;else if(this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);var g=this._callbacks.shift();g&&g()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},p.prototype.write=function(_,a){var m=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return m._innerWrite()})),this._pendingData+=_.length,this._writeBuffer.push(_),this._callbacks.push(a)},p.prototype._innerWrite=function(_,a){var m=this;_===void 0&&(_=0),a===void 0&&(a=!0);for(var g=_||Date.now();this._writeBuffer.length>this._bufferOffset;){var n=this._writeBuffer[this._bufferOffset],o=this._action(n,a);if(o)return void o.catch(function(s){return f(function(){throw s}),Promise.resolve(!1)}).then(function(s){return Date.now()-g>=12?setTimeout(function(){return m._innerWrite(0,s)}):m._innerWrite(g,s)});var d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return m._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},p}();t.WriteBuffer=l},5770:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var l=f(482),p=f(8742),_=f(5770),a=[],m=function(){function o(){this._handlers=Object.create(null),this._active=a,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return o.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=a},o.prototype.registerHandler=function(d,s){this._handlers[d]===void 0&&(this._handlers[d]=[]);var i=this._handlers[d];return i.push(s),{dispose:function(){var e=i.indexOf(s);e!==-1&&i.splice(e,1)}}},o.prototype.clearHandler=function(d){this._handlers[d]&&delete this._handlers[d]},o.prototype.setHandlerFallback=function(d){this._handlerFb=d},o.prototype.reset=function(){if(this._active.length)for(var d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].unhook(!1);this._stack.paused=!1,this._active=a,this._ident=0},o.prototype.hook=function(d,s){if(this.reset(),this._ident=d,this._active=this._handlers[d]||a,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(s);else this._handlerFb(this._ident,"HOOK",s)},o.prototype.put=function(d,s,i){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(d,s,i);else this._handlerFb(this._ident,"PUT",l.utf32ToString(d,s,i))},o.prototype.unhook=function(d,s){if(s===void 0&&(s=!0),this._active.length){var i=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,i=s,r=this._stack.fallThrough,this._stack.paused=!1),!r&&i===!1){for(;e>=0&&(i=this._active[e].unhook(d))!==!0;e--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,i;e--}for(;e>=0;e--)if((i=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",d);this._active=a,this._ident=0},o}();t.DcsParser=m;var g=new p.Params;g.addParam(0);var n=function(){function o(d){this._handler=d,this._data="",this._params=g,this._hitLimit=!1}return o.prototype.hook=function(d){this._params=d.length>1||d.params[0]?d.clone():g,this._data="",this._hitLimit=!1},o.prototype.put=function(d,s,i){this._hitLimit||(this._data+=l.utf32ToString(d,s,i),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},o.prototype.unhook=function(d){var s=this,i=!1;if(this._hitLimit)i=!1;else if(d&&(i=this._handler(this._data,this._params))instanceof Promise)return i.then(function(e){return s._params=g,s._data="",s._hitLimit=!1,e});return this._params=g,this._data="",this._hitLimit=!1,i},o}();t.DcsHandler=n},2015:function(x,t,f){var l,p=this&&this.__extends||(l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,h){r.__proto__=h}||function(r,h){for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&(r[u]=h[u])})(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;var _=f(844),a=f(8273),m=f(8742),g=f(6242),n=f(6351),o=function(){function i(e){this.table=new Uint8Array(e)}return i.prototype.setDefault=function(e,r){a.fill(this.table,e<<4|r)},i.prototype.add=function(e,r,h,u){this.table[r<<8|e]=h<<4|u},i.prototype.addMany=function(e,r,h,u){for(var y=0;y<e.length;y++)this.table[r<<8|e[y]]=h<<4|u},i}();t.TransitionTable=o;var d=160;t.VT500_TRANSITION_TABLE=function(){var i=new o(4095),e=Array.apply(null,Array(256)).map(function(E,b){return b}),r=function(E,b){return e.slice(E,b)},h=r(32,127),u=r(0,24);u.push(25),u.push.apply(u,r(28,32));var y,C=r(0,14);for(y in i.setDefault(1,0),i.addMany(h,0,2,0),C)i.addMany([24,26,153,154],y,3,0),i.addMany(r(128,144),y,3,0),i.addMany(r(144,152),y,3,0),i.add(156,y,0,0),i.add(27,y,11,1),i.add(157,y,4,8),i.addMany([152,158,159],y,0,7),i.add(155,y,11,3),i.add(144,y,11,9);return i.addMany(u,0,3,0),i.addMany(u,1,3,1),i.add(127,1,0,1),i.addMany(u,8,0,8),i.addMany(u,3,3,3),i.add(127,3,0,3),i.addMany(u,4,3,4),i.add(127,4,0,4),i.addMany(u,6,3,6),i.addMany(u,5,3,5),i.add(127,5,0,5),i.addMany(u,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(h,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(r(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(h,7,0,7),i.addMany(u,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(r(64,127),3,7,0),i.addMany(r(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(r(48,60),4,8,4),i.addMany(r(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(r(32,64),6,0,6),i.add(127,6,0,6),i.addMany(r(64,127),6,0,0),i.addMany(r(32,48),3,9,5),i.addMany(r(32,48),5,9,5),i.addMany(r(48,64),5,0,6),i.addMany(r(64,127),5,7,0),i.addMany(r(32,48),4,9,5),i.addMany(r(32,48),1,9,2),i.addMany(r(32,48),2,9,2),i.addMany(r(48,127),2,10,0),i.addMany(r(48,80),1,10,0),i.addMany(r(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(r(96,127),1,10,0),i.add(80,1,11,9),i.addMany(u,9,0,9),i.add(127,9,0,9),i.addMany(r(28,32),9,0,9),i.addMany(r(32,48),9,9,12),i.addMany(r(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(u,11,0,11),i.addMany(r(32,128),11,0,11),i.addMany(r(28,32),11,0,11),i.addMany(u,10,0,10),i.add(127,10,0,10),i.addMany(r(28,32),10,0,10),i.addMany(r(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(r(32,48),10,9,12),i.addMany(u,12,0,12),i.add(127,12,0,12),i.addMany(r(28,32),12,0,12),i.addMany(r(32,48),12,9,12),i.addMany(r(48,64),12,0,11),i.addMany(r(64,127),12,12,13),i.addMany(r(64,127),10,12,13),i.addMany(r(64,127),9,12,13),i.addMany(u,13,13,13),i.addMany(h,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(d,0,2,0),i.add(d,8,5,8),i.add(d,6,0,6),i.add(d,11,0,11),i.add(d,13,13,13),i}();var s=function(i){function e(r){r===void 0&&(r=t.VT500_TRANSITION_TABLE);var h=i.call(this)||this;return h._transitions=r,h._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},h.initialState=0,h.currentState=h.initialState,h._params=new m.Params,h._params.addParam(0),h._collect=0,h.precedingCodepoint=0,h._printHandlerFb=function(u,y,C){},h._executeHandlerFb=function(u){},h._csiHandlerFb=function(u,y){},h._escHandlerFb=function(u){},h._errorHandlerFb=function(u){return u},h._printHandler=h._printHandlerFb,h._executeHandlers=Object.create(null),h._csiHandlers=Object.create(null),h._escHandlers=Object.create(null),h._oscParser=new g.OscParser,h._dcsParser=new n.DcsParser,h._errorHandler=h._errorHandlerFb,h.registerEscHandler({final:"\\"},function(){return!0}),h}return p(e,i),e.prototype._identifier=function(r,h){h===void 0&&(h=[64,126]);var u=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((u=r.prefix.charCodeAt(0))&&60>u||u>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var y=0;y<r.intermediates.length;++y){var C=r.intermediates.charCodeAt(y);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");u<<=8,u|=C}}if(r.final.length!==1)throw new Error("final must be a single byte");var E=r.final.charCodeAt(0);if(h[0]>E||E>h[1])throw new Error("final must be in range "+h[0]+" .. "+h[1]);return(u<<=8)|E},e.prototype.identToString=function(r){for(var h=[];r;)h.push(String.fromCharCode(255&r)),r>>=8;return h.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,h){var u=this._identifier(r,[48,126]);this._escHandlers[u]===void 0&&(this._escHandlers[u]=[]);var y=this._escHandlers[u];return y.push(h),{dispose:function(){var C=y.indexOf(h);C!==-1&&y.splice(C,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,h){this._executeHandlers[r.charCodeAt(0)]=h},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,h){var u=this._identifier(r);this._csiHandlers[u]===void 0&&(this._csiHandlers[u]=[]);var y=this._csiHandlers[u];return y.push(h),{dispose:function(){var C=y.indexOf(h);C!==-1&&y.splice(C,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,h){return this._dcsParser.registerHandler(this._identifier(r),h)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,h){return this._oscParser.registerHandler(r,h)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,h,u,y,C){this._parseStack.state=r,this._parseStack.handlers=h,this._parseStack.handlerPos=u,this._parseStack.transition=y,this._parseStack.chunkPos=C},e.prototype.parse=function(r,h,u){var y,C=0,E=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(u===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var L=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(u===!1&&w>-1){for(;w>=0&&(y=L[w](this._params))!==!0;w--)if(y instanceof Promise)return this._parseStack.handlerPos=w,y}this._parseStack.handlers=[];break;case 4:if(u===!1&&w>-1){for(;w>=0&&(y=L[w]())!==!0;w--)if(y instanceof Promise)return this._parseStack.handlerPos=w,y}this._parseStack.handlers=[];break;case 6:if(C=r[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,u))return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=r[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,u))return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var D=b;D<h;++D){switch(C=r[D],(E=this._transitions.table[this.currentState<<8|(C<160?C:d)])>>4){case 2:for(var M=D+1;;++M){if(M>=h||(C=r[M])<32||C>126&&C<d){this._printHandler(r,D,M),D=M-1;break}if(++M>=h||(C=r[M])<32||C>126&&C<d){this._printHandler(r,D,M),D=M-1;break}if(++M>=h||(C=r[M])<32||C>126&&C<d){this._printHandler(r,D,M),D=M-1;break}if(++M>=h||(C=r[M])<32||C>126&&C<d){this._printHandler(r,D,M),D=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:D,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var T=(L=this._csiHandlers[this._collect<<8|C])?L.length-1:-1;T>=0&&(y=L[T](this._params))!==!0;T--)if(y instanceof Promise)return this._preserveStack(3,L,T,E,D),y;T<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++D<h&&(C=r[D])>47&&C<60);D--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:for(var R=this._escHandlers[this._collect<<8|C],k=R?R.length-1:-1;k>=0&&(y=R[k]())!==!0;k--)if(y instanceof Promise)return this._preserveStack(4,R,k,E,D),y;k<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(var F=D+1;;++F)if(F>=h||(C=r[F])===24||C===26||C===27||C>127&&C<d){this._dcsParser.put(r,D,F),D=F-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26))return this._preserveStack(6,[],0,E,D),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var I=D+1;;I++)if(I>=h||(C=r[I])<32||C>127&&C<d){this._oscParser.put(r,D,I),D=I-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26))return this._preserveStack(5,[],0,E,D),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}},e}(_.Disposable);t.EscapeSequenceParser=s},6242:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var l=f(5770),p=f(482),_=[],a=function(){function g(){this._state=0,this._active=_,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return g.prototype.registerHandler=function(n,o){this._handlers[n]===void 0&&(this._handlers[n]=[]);var d=this._handlers[n];return d.push(o),{dispose:function(){var s=d.indexOf(o);s!==-1&&d.splice(s,1)}}},g.prototype.clearHandler=function(n){this._handlers[n]&&delete this._handlers[n]},g.prototype.setHandlerFallback=function(n){this._handlerFb=n},g.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=_},g.prototype.reset=function(){if(this._state===2)for(var n=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;n>=0;--n)this._active[n].end(!1);this._stack.paused=!1,this._active=_,this._id=-1,this._state=0},g.prototype._start=function(){if(this._active=this._handlers[this._id]||_,this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].start();else this._handlerFb(this._id,"START")},g.prototype._put=function(n,o,d){if(this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].put(n,o,d);else this._handlerFb(this._id,"PUT",p.utf32ToString(n,o,d))},g.prototype.start=function(){this.reset(),this._state=1},g.prototype.put=function(n,o,d){if(this._state!==3){if(this._state===1)for(;o<d;){var s=n[o++];if(s===59){this._state=2,this._start();break}if(s<48||57<s)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+s-48}this._state===2&&d-o>0&&this._put(n,o,d)}},g.prototype.end=function(n,o){if(o===void 0&&(o=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var d=!1,s=this._active.length-1,i=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,d=o,i=this._stack.fallThrough,this._stack.paused=!1),!i&&d===!1){for(;s>=0&&(d=this._active[s].end(n))!==!0;s--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,d;s--}for(;s>=0;s--)if((d=this._active[s].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,d}else this._handlerFb(this._id,"END",n);this._active=_,this._id=-1,this._state=0}},g}();t.OscParser=a;var m=function(){function g(n){this._handler=n,this._data="",this._hitLimit=!1}return g.prototype.start=function(){this._data="",this._hitLimit=!1},g.prototype.put=function(n,o,d){this._hitLimit||(this._data+=p.utf32ToString(n,o,d),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},g.prototype.end=function(n){var o=this,d=!1;if(this._hitLimit)d=!1;else if(n&&(d=this._handler(this._data))instanceof Promise)return d.then(function(s){return o._data="",o._hitLimit=!1,s});return this._data="",this._hitLimit=!1,d},g}();t.OscHandler=m},8742:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var f=2147483647,l=function(){function p(_,a){if(_===void 0&&(_=32),a===void 0&&(a=32),this.maxLength=_,this.maxSubParamsLength=a,a>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(_),this.length=0,this._subParams=new Int32Array(a),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(_),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return p.fromArray=function(_){var a=new p;if(!_.length)return a;for(var m=_[0]instanceof Array?1:0;m<_.length;++m){var g=_[m];if(g instanceof Array)for(var n=0;n<g.length;++n)a.addSubParam(g[n]);else a.addParam(g)}return a},p.prototype.clone=function(){var _=new p(this.maxLength,this.maxSubParamsLength);return _.params.set(this.params),_.length=this.length,_._subParams.set(this._subParams),_._subParamsLength=this._subParamsLength,_._subParamsIdx.set(this._subParamsIdx),_._rejectDigits=this._rejectDigits,_._rejectSubDigits=this._rejectSubDigits,_._digitIsSub=this._digitIsSub,_},p.prototype.toArray=function(){for(var _=[],a=0;a<this.length;++a){_.push(this.params[a]);var m=this._subParamsIdx[a]>>8,g=255&this._subParamsIdx[a];g-m>0&&_.push(Array.prototype.slice.call(this._subParams,m,g))}return _},p.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},p.prototype.addParam=function(_){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=_>f?f:_}},p.prototype.addSubParam=function(_){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(_<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=_>f?f:_,this._subParamsIdx[this.length-1]++}},p.prototype.hasSubParams=function(_){return(255&this._subParamsIdx[_])-(this._subParamsIdx[_]>>8)>0},p.prototype.getSubParams=function(_){var a=this._subParamsIdx[_]>>8,m=255&this._subParamsIdx[_];return m-a>0?this._subParams.subarray(a,m):null},p.prototype.getSubParamsAll=function(){for(var _={},a=0;a<this.length;++a){var m=this._subParamsIdx[a]>>8,g=255&this._subParamsIdx[a];g-m>0&&(_[a]=this._subParams.slice(m,g))}return _},p.prototype.addDigit=function(_){var a;if(!(this._rejectDigits||!(a=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var m=this._digitIsSub?this._subParams:this.params,g=m[a-1];m[a-1]=~g?Math.min(10*g+_,f):_}},p}();t.Params=l},5741:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var f=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var p=this._addons.length-1;p>=0;p--)this._addons[p].instance.dispose()},l.prototype.loadAddon=function(p,_){var a=this,m={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(m),_.dispose=function(){return a._wrappedAddonDispose(m)},_.activate(p)},l.prototype._wrappedAddonDispose=function(p){if(!p.isDisposed){for(var _=-1,a=0;a<this._addons.length;a++)if(this._addons[a]===p){_=a;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");p.isDisposed=!0,p.dispose.apply(p.instance),this._addons.splice(_,1)}},l}();t.AddonManager=f},8771:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;var l=f(3785),p=f(511),_=function(){function a(m,g){this._buffer=m,this.type=g}return a.prototype.init=function(m){return this._buffer=m,this},Object.defineProperty(a.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),a.prototype.getLine=function(m){var g=this._buffer.lines.get(m);if(g)return new l.BufferLineApiView(g)},a.prototype.getNullCell=function(){return new p.CellData},a}();t.BufferApiView=_},3785:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;var l=f(511),p=function(){function _(a){this._line=a}return Object.defineProperty(_.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),_.prototype.getCell=function(a,m){if(!(a<0||a>=this._line.length))return m?(this._line.loadCell(a,m),m):this._line.loadCell(a,new l.CellData)},_.prototype.translateToString=function(a,m,g){return this._line.translateToString(a,m,g)},_}();t.BufferLineApiView=p},8285:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;var l=f(8771),p=f(8460),_=function(){function a(m){var g=this;this._core=m,this._onBufferChange=new p.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return g._onBufferChange.fire(g.active)})}return Object.defineProperty(a.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),a}();t.BufferNamespaceApi=_},7975:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0;var f=function(){function l(p){this._core=p}return l.prototype.registerCsiHandler=function(p,_){return this._core.registerCsiHandler(p,function(a){return _(a.toArray())})},l.prototype.addCsiHandler=function(p,_){return this.registerCsiHandler(p,_)},l.prototype.registerDcsHandler=function(p,_){return this._core.registerDcsHandler(p,function(a,m){return _(a,m.toArray())})},l.prototype.addDcsHandler=function(p,_){return this.registerDcsHandler(p,_)},l.prototype.registerEscHandler=function(p,_){return this._core.registerEscHandler(p,_)},l.prototype.addEscHandler=function(p,_){return this.registerEscHandler(p,_)},l.prototype.registerOscHandler=function(p,_){return this._core.registerOscHandler(p,_)},l.prototype.addOscHandler=function(p,_){return this.registerOscHandler(p,_)},l}();t.ParserApi=f},7090:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0;var f=function(){function l(p){this._core=p}return l.prototype.register=function(p){this._core.unicodeService.register(p)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(p){this._core.unicodeService.activeVersion=p},enumerable:!1,configurable:!0}),l}();t.UnicodeApi=f},744:function(x,t,f){var l,p=this&&this.__extends||(l=function(s,i){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(e[h]=r[h])})(s,i)},function(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}l(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),_=this&&this.__decorate||function(s,i,e,r){var h,u=arguments.length,y=u<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,i,e,r);else for(var C=s.length-1;C>=0;C--)(h=s[C])&&(y=(u<3?h(y):u>3?h(i,e,y):h(i,e))||y);return u>3&&y&&Object.defineProperty(i,e,y),y},a=this&&this.__param||function(s,i){return function(e,r){i(e,r,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var m=f(2585),g=f(5295),n=f(8460),o=f(844);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var d=function(s){function i(e){var r=s.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new n.EventEmitter,r._onScroll=new n.EventEmitter,r.cols=Math.max(e.options.cols||0,t.MINIMUM_COLS),r.rows=Math.max(e.options.rows||0,t.MINIMUM_ROWS),r.buffers=new g.BufferSet(e,r),r}return p(i,s),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){s.prototype.dispose.call(this),this.buffers.dispose()},i.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},i.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},i.prototype.scroll=function(e,r){r===void 0&&(r=!1);var h,u=this.buffer;(h=this._cachedBlankLine)&&h.length===this.cols&&h.getFg(0)===e.fg&&h.getBg(0)===e.bg||(h=u.getBlankLine(e,r),this._cachedBlankLine=h),h.isWrapped=r;var y=u.ybase+u.scrollTop,C=u.ybase+u.scrollBottom;if(u.scrollTop===0){var E=u.lines.isFull;C===u.lines.length-1?E?u.lines.recycle().copyFrom(h):u.lines.push(h.clone()):u.lines.splice(C+1,0,h.clone()),E?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{var b=C-y+1;u.lines.shiftElements(y+1,b-1,-1),u.lines.set(C,h.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)},i.prototype.scrollLines=function(e,r,h){var u=this.buffer;if(e<0){if(u.ydisp===0)return;this.isUserScrolling=!0}else e+u.ydisp>=u.ybase&&(this.isUserScrolling=!1);var y=u.ydisp;u.ydisp=Math.max(Math.min(u.ydisp+e,u.ybase),0),y!==u.ydisp&&(r||this._onScroll.fire(u.ydisp))},i.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},i.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;r!==0&&this.scrollLines(r)},_([a(0,m.IOptionsService)],i)}(o.Disposable);t.BufferService=d},7994:(x,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var f=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(p){this.glevel=p,this.charset=this._charsets[p]},l.prototype.setgCharset=function(p,_){this._charsets[p]=_,this.glevel===p&&(this.charset=_)},l}();t.CharsetService=f},1753:function(x,t,f){var l=this&&this.__decorate||function(s,i,e,r){var h,u=arguments.length,y=u<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,i,e,r);else for(var C=s.length-1;C>=0;C--)(h=s[C])&&(y=(u<3?h(y):u>3?h(i,e,y):h(i,e))||y);return u>3&&y&&Object.defineProperty(i,e,y),y},p=this&&this.__param||function(s,i){return function(e,r){i(e,r,s)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;var _=f(2585),a=f(8460),m={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(s){return s.button!==4&&s.action===1&&(s.ctrl=!1,s.alt=!1,s.shift=!1,!0)}},VT200:{events:19,restrict:function(s){return s.action!==32}},DRAG:{events:23,restrict:function(s){return s.action!==32||s.button!==3}},ANY:{events:31,restrict:function(s){return!0}}};function g(s,i){var e=(s.ctrl?16:0)|(s.shift?4:0)|(s.alt?8:0);return s.button===4?(e|=64,e|=s.action):(e|=3&s.button,4&s.button&&(e|=64),8&s.button&&(e|=128),s.action===32?e|=32:s.action!==0||i||(e|=3)),e}var n=String.fromCharCode,o={DEFAULT:function(s){var i=[g(s,!1)+32,s.col+32,s.row+32];return i[0]>255||i[1]>255||i[2]>255?"":"[M"+n(i[0])+n(i[1])+n(i[2])},SGR:function(s){var i=s.action===0&&s.button!==4?"m":"M";return"[<"+g(s,!0)+";"+s.col+";"+s.row+i}},d=function(){function s(i,e){this._bufferService=i,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new a.EventEmitter,this._lastEvent=null;for(var r=0,h=Object.keys(m);r<h.length;r++){var u=h[r];this.addProtocol(u,m[u])}for(var y=0,C=Object.keys(o);y<C.length;y++){var E=C[y];this.addEncoding(E,o[E])}this.reset()}return s.prototype.addProtocol=function(i,e){this._protocols[i]=e},s.prototype.addEncoding=function(i,e){this._encodings[i]=e},Object.defineProperty(s.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(i){if(!this._protocols[i])throw new Error('unknown protocol "'+i+'"');this._activeProtocol=i,this._onProtocolChange.fire(this._protocols[i].events)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(i){if(!this._encodings[i])throw new Error('unknown encoding "'+i+'"');this._activeEncoding=i},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(s.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),s.prototype.triggerMouseEvent=function(i){if(i.col<0||i.col>=this._bufferService.cols||i.row<0||i.row>=this._bufferService.rows||i.button===4&&i.action===32||i.button===3&&i.action!==32||i.button!==4&&(i.action===2||i.action===3)||(i.col++,i.row++,i.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,i))||!this._protocols[this._activeProtocol].restrict(i))return!1;var e=this._encodings[this._activeEncoding](i);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=i,!0},s.prototype.explainEvents=function(i){return{down:!!(1&i),up:!!(2&i),drag:!!(4&i),move:!!(8&i),wheel:!!(16&i)}},s.prototype._compareEvents=function(i,e){return i.col===e.col&&i.row===e.row&&i.button===e.button&&i.action===e.action&&i.ctrl===e.ctrl&&i.alt===e.alt&&i.shift===e.shift},l([p(0,_.IBufferService),p(1,_.ICoreService)],s)}();t.CoreMouseService=d},6975:function(x,t,f){var l,p=this&&this.__extends||(l=function(e,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(h[y]=u[y])})(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function h(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(h.prototype=r.prototype,new h)}),_=this&&this.__decorate||function(e,r,h,u){var y,C=arguments.length,E=C<3?r:u===null?u=Object.getOwnPropertyDescriptor(r,h):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(e,r,h,u);else for(var b=e.length-1;b>=0;b--)(y=e[b])&&(E=(C<3?y(E):C>3?y(r,h,E):y(r,h))||E);return C>3&&E&&Object.defineProperty(r,h,E),E},a=this&&this.__param||function(e,r){return function(h,u){r(h,u,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var m=f(2585),g=f(8460),n=f(1439),o=f(844),d=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=function(e){function r(h,u,y,C){var E=e.call(this)||this;return E._bufferService=u,E._logService=y,E._optionsService=C,E.isCursorInitialized=!1,E.isCursorHidden=!1,E._onData=E.register(new g.EventEmitter),E._onUserInput=E.register(new g.EventEmitter),E._onBinary=E.register(new g.EventEmitter),E._scrollToBottom=h,E.register({dispose:function(){return E._scrollToBottom=void 0}}),E.modes=n.clone(d),E.decPrivateModes=n.clone(s),E}return p(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=n.clone(d),this.decPrivateModes=n.clone(s)},r.prototype.triggerDataEvent=function(h,u){if(u===void 0&&(u=!1),!this._optionsService.options.disableStdin){var y=this._bufferService.buffer;y.ybase!==y.ydisp&&this._scrollToBottom(),u&&this._onUserInput.fire(),this._logService.debug('sending data "'+h+'"',function(){return h.split("").map(function(C){return C.charCodeAt(0)})}),this._onData.fire(h)}},r.prototype.triggerBinaryEvent=function(h){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+h+'"',function(){return h.split("").map(function(u){return u.charCodeAt(0)})}),this._onBinary.fire(h))},_([a(1,m.IBufferService),a(2,m.ILogService),a(3,m.IOptionsService)],r)}(o.Disposable);t.CoreService=i},3730:function(x,t,f){var l=this&&this.__decorate||function(m,g,n,o){var d,s=arguments.length,i=s<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(m,g,n,o);else for(var e=m.length-1;e>=0;e--)(d=m[e])&&(i=(s<3?d(i):s>3?d(g,n,i):d(g,n))||i);return s>3&&i&&Object.defineProperty(g,n,i),i},p=this&&this.__param||function(m,g){return function(n,o){g(n,o,m)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var _=f(2585),a=function(){function m(g){this._bufferService=g,this.clearRange()}return Object.defineProperty(m.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),m.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},m.prototype.markDirty=function(g){g<this._start?this._start=g:g>this._end&&(this._end=g)},m.prototype.markRangeDirty=function(g,n){if(g>n){var o=g;g=n,n=o}g<this._start&&(this._start=g),n>this._end&&(this._end=n)},m.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([p(0,_.IBufferService)],m)}();t.DirtyRowService=a},4348:function(x,t,f){var l=this&&this.__spreadArray||function(g,n){for(var o=0,d=n.length,s=g.length;o<d;o++,s++)g[s]=n[o];return g};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var p=f(2585),_=f(8343),a=function(){function g(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this._entries=new Map;for(var d=0,s=n;d<s.length;d++){var i=s[d],e=i[0],r=i[1];this.set(e,r)}}return g.prototype.set=function(n,o){var d=this._entries.get(n);return this._entries.set(n,o),d},g.prototype.forEach=function(n){this._entries.forEach(function(o,d){return n(d,o)})},g.prototype.has=function(n){return this._entries.has(n)},g.prototype.get=function(n){return this._entries.get(n)},g}();t.ServiceCollection=a;var m=function(){function g(){this._services=new a,this._services.set(p.IInstantiationService,this)}return g.prototype.setService=function(n,o){this._services.set(n,o)},g.prototype.getService=function(n){return this._services.get(n)},g.prototype.createInstance=function(n){for(var o=[],d=1;d<arguments.length;d++)o[d-1]=arguments[d];for(var s=_.getServiceDependencies(n).sort(function(C,E){return C.index-E.index}),i=[],e=0,r=s;e<r.length;e++){var h=r[e],u=this._services.get(h.id);if(!u)throw new Error("[createInstance] "+n.name+" depends on UNKNOWN service "+h.id+".");i.push(u)}var y=s.length>0?s[0].index:o.length;if(o.length!==y)throw new Error("[createInstance] First service dependency of "+n.name+" at position "+(y+1)+" conflicts with "+o.length+" static arguments");return new(n.bind.apply(n,l([void 0],l(l([],o),i))))},g}();t.InstantiationService=m},7866:function(x,t,f){var l=this&&this.__decorate||function(n,o,d,s){var i,e=arguments.length,r=e<3?o:s===null?s=Object.getOwnPropertyDescriptor(o,d):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,o,d,s);else for(var h=n.length-1;h>=0;h--)(i=n[h])&&(r=(e<3?i(r):e>3?i(o,d,r):i(o,d))||r);return e>3&&r&&Object.defineProperty(o,d,r),r},p=this&&this.__param||function(n,o){return function(d,s){o(d,s,n)}},_=this&&this.__spreadArray||function(n,o){for(var d=0,s=o.length,i=n.length;d<s;d++,i++)n[i]=o[d];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var a=f(2585),m={debug:a.LogLevelEnum.DEBUG,info:a.LogLevelEnum.INFO,warn:a.LogLevelEnum.WARN,error:a.LogLevelEnum.ERROR,off:a.LogLevelEnum.OFF},g=function(){function n(o){var d=this;this._optionsService=o,this.logLevel=a.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(s){s==="logLevel"&&d._updateLogLevel()})}return n.prototype._updateLogLevel=function(){this.logLevel=m[this._optionsService.options.logLevel]},n.prototype._evalLazyOptionalParams=function(o){for(var d=0;d<o.length;d++)typeof o[d]=="function"&&(o[d]=o[d]())},n.prototype._log=function(o,d,s){this._evalLazyOptionalParams(s),o.call.apply(o,_([console,"xterm.js: "+d],s))},n.prototype.debug=function(o){for(var d=[],s=1;s<arguments.length;s++)d[s-1]=arguments[s];this.logLevel<=a.LogLevelEnum.DEBUG&&this._log(console.log,o,d)},n.prototype.info=function(o){for(var d=[],s=1;s<arguments.length;s++)d[s-1]=arguments[s];this.logLevel<=a.LogLevelEnum.INFO&&this._log(console.info,o,d)},n.prototype.warn=function(o){for(var d=[],s=1;s<arguments.length;s++)d[s-1]=arguments[s];this.logLevel<=a.LogLevelEnum.WARN&&this._log(console.warn,o,d)},n.prototype.error=function(o){for(var d=[],s=1;s<arguments.length;s++)d[s-1]=arguments[s];this.logLevel<=a.LogLevelEnum.ERROR&&this._log(console.error,o,d)},l([p(0,a.IOptionsService)],n)}();t.LogService=g},7302:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var l=f(8460),p=f(6114),_=f(1439);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var a=["normal","bold","100","200","300","400","500","600","700","800","900"],m=["cols","rows"],g=function(){function n(o){this._onOptionChange=new l.EventEmitter,this.options=_.clone(t.DEFAULT_OPTIONS);for(var d=0,s=Object.keys(o);d<s.length;d++){var i=s[d];if(i in this.options)try{var e=o[i];this.options[i]=this._sanitizeAndValidateOption(i,e)}catch(r){console.error(r)}}}return Object.defineProperty(n.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),n.prototype.setOption=function(o,d){if(!(o in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');if(m.includes(o))throw new Error('Option "'+o+'" can only be set in the constructor');this.options[o]!==d&&(d=this._sanitizeAndValidateOption(o,d),this.options[o]!==d&&(this.options[o]=d,this._onOptionChange.fire(o)))},n.prototype._sanitizeAndValidateOption=function(o,d){switch(o){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":d||(d=t.DEFAULT_OPTIONS[o]);break;case"fontWeight":case"fontWeightBold":if(typeof d=="number"&&1<=d&&d<=1e3)break;d=a.includes(d)?d:t.DEFAULT_OPTIONS[o];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw new Error(o+" cannot be less than 1, value: "+d);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw new Error(o+" cannot be less than 0, value: "+d);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw new Error(o+" cannot be less than or equal to 0, value: "+d);case"rows":case"cols":if(!d&&d!==0)throw new Error(o+" must be numeric, value: "+d)}return d},n.prototype.getOption=function(o){if(!(o in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+o+'"');return this.options[o]},n}();t.OptionsService=g},8343:(x,t)=>{function f(l,p,_){p.di$target===p?p.di$dependencies.push({id:l,index:_}):(p.di$dependencies=[{id:l,index:_}],p.di$target=p)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(l){return l.di$dependencies||[]},t.createDecorator=function(l){if(t.serviceRegistry.has(l))return t.serviceRegistry.get(l);var p=function(_,a,m){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");f(p,_,m)};return p.toString=function(){return l},t.serviceRegistry.set(l,p),p}},2585:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IUnicodeService=t.LogLevelEnum=t.IOptionsService=t.ILogService=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var l,p=f(8343);t.IBufferService=p.createDecorator("BufferService"),t.ICoreMouseService=p.createDecorator("CoreMouseService"),t.ICoreService=p.createDecorator("CoreService"),t.ICharsetService=p.createDecorator("CharsetService"),t.IDirtyRowService=p.createDecorator("DirtyRowService"),t.IInstantiationService=p.createDecorator("InstantiationService"),t.ILogService=p.createDecorator("LogService"),t.IOptionsService=p.createDecorator("OptionsService"),(l=t.LogLevelEnum||(t.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",t.IUnicodeService=p.createDecorator("UnicodeService")},1480:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var l=f(8460),p=f(225),_=function(){function a(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var m=new p.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}return Object.defineProperty(a.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeVersion",{get:function(){return this._active},set:function(m){if(!this._providers[m])throw new Error('unknown Unicode version "'+m+'"');this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)},enumerable:!1,configurable:!0}),a.prototype.register=function(m){this._providers[m.version]=m},a.prototype.wcwidth=function(m){return this._activeProvider.wcwidth(m)},a.prototype.getStringCellWidth=function(m){for(var g=0,n=m.length,o=0;o<n;++o){var d=m.charCodeAt(o);if(55296<=d&&d<=56319){if(++o>=n)return g+this.wcwidth(d);var s=m.charCodeAt(o);56320<=s&&s<=57343?d=1024*(d-55296)+s-56320+65536:g+=this.wcwidth(s)}g+=this.wcwidth(d)}return g},a}();t.UnicodeService=_}},c={};function v(x){var t=c[x];if(t!==void 0)return t.exports;var f=c[x]={exports:{}};return S[x].call(f.exports,f,f.exports,v),f.exports}var A={};return(()=>{var x=A;Object.defineProperty(x,"__esModule",{value:!0}),x.Terminal=void 0;var t=v(3236),f=v(9042),l=v(7975),p=v(7090),_=v(5741),a=v(8285),m=function(){function g(n){this._core=new t.Terminal(n),this._addonManager=new _.AddonManager}return g.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(g.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new l.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"unicode",{get:function(){return this._checkProposedApi(),new p.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new a.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"modes",{get:function(){var n=this._core.coreService.decPrivateModes,o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:n.applicationCursorKeys,applicationKeypadMode:n.applicationKeypad,bracketedPasteMode:n.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:n.origin,reverseWraparoundMode:n.reverseWraparound,sendFocusMode:n.sendFocus,wraparoundMode:n.wraparound}},enumerable:!1,configurable:!0}),g.prototype.blur=function(){this._core.blur()},g.prototype.focus=function(){this._core.focus()},g.prototype.resize=function(n,o){this._verifyIntegers(n,o),this._core.resize(n,o)},g.prototype.open=function(n){this._core.open(n)},g.prototype.attachCustomKeyEventHandler=function(n){this._core.attachCustomKeyEventHandler(n)},g.prototype.registerLinkMatcher=function(n,o,d){return this._checkProposedApi(),this._core.registerLinkMatcher(n,o,d)},g.prototype.deregisterLinkMatcher=function(n){this._checkProposedApi(),this._core.deregisterLinkMatcher(n)},g.prototype.registerLinkProvider=function(n){return this._checkProposedApi(),this._core.registerLinkProvider(n)},g.prototype.registerCharacterJoiner=function(n){return this._checkProposedApi(),this._core.registerCharacterJoiner(n)},g.prototype.deregisterCharacterJoiner=function(n){this._checkProposedApi(),this._core.deregisterCharacterJoiner(n)},g.prototype.registerMarker=function(n){return this._checkProposedApi(),this._verifyIntegers(n),this._core.addMarker(n)},g.prototype.addMarker=function(n){return this.registerMarker(n)},g.prototype.hasSelection=function(){return this._core.hasSelection()},g.prototype.select=function(n,o,d){this._verifyIntegers(n,o,d),this._core.select(n,o,d)},g.prototype.getSelection=function(){return this._core.getSelection()},g.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},g.prototype.clearSelection=function(){this._core.clearSelection()},g.prototype.selectAll=function(){this._core.selectAll()},g.prototype.selectLines=function(n,o){this._verifyIntegers(n,o),this._core.selectLines(n,o)},g.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},g.prototype.scrollLines=function(n){this._verifyIntegers(n),this._core.scrollLines(n)},g.prototype.scrollPages=function(n){this._verifyIntegers(n),this._core.scrollPages(n)},g.prototype.scrollToTop=function(){this._core.scrollToTop()},g.prototype.scrollToBottom=function(){this._core.scrollToBottom()},g.prototype.scrollToLine=function(n){this._verifyIntegers(n),this._core.scrollToLine(n)},g.prototype.clear=function(){this._core.clear()},g.prototype.write=function(n,o){this._core.write(n,o)},g.prototype.writeUtf8=function(n,o){this._core.write(n,o)},g.prototype.writeln=function(n,o){this._core.write(n),this._core.write(`\r
`,o)},g.prototype.paste=function(n){this._core.paste(n)},g.prototype.getOption=function(n){return this._core.optionsService.getOption(n)},g.prototype.setOption=function(n,o){this._core.optionsService.setOption(n,o)},g.prototype.refresh=function(n,o){this._verifyIntegers(n,o),this._core.refresh(n,o)},g.prototype.reset=function(){this._core.reset()},g.prototype.loadAddon=function(n){return this._addonManager.loadAddon(this,n)},Object.defineProperty(g,"strings",{get:function(){return f},enumerable:!1,configurable:!0}),g.prototype._verifyIntegers=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var d=0,s=n;d<s.length;d++){var i=s[d];if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}},g}();x.Terminal=m})(),A})()})});var Qr=be((Xt,Or)=>{(function(S,c){typeof Xt=="object"&&typeof Or=="object"?Or.exports=c():typeof define=="function"&&define.amd?define([],c):typeof Xt=="object"?Xt.FitAddon=c():S.FitAddon=c()})(self,function(){return(()=>{"use strict";var S={775:(v,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.FitAddon=void 0;var x=function(){function t(){}return t.prototype.activate=function(f){this._terminal=f},t.prototype.dispose=function(){},t.prototype.fit=function(){var f=this.proposeDimensions();if(f&&this._terminal){var l=this._terminal._core;this._terminal.rows===f.rows&&this._terminal.cols===f.cols||(l._renderService.clear(),this._terminal.resize(f.cols,f.rows))}},t.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var f=this._terminal._core;if(f._renderService.dimensions.actualCellWidth!==0&&f._renderService.dimensions.actualCellHeight!==0){var l=window.getComputedStyle(this._terminal.element.parentElement),p=parseInt(l.getPropertyValue("height")),_=Math.max(0,parseInt(l.getPropertyValue("width"))),a=window.getComputedStyle(this._terminal.element),m=p-(parseInt(a.getPropertyValue("padding-top"))+parseInt(a.getPropertyValue("padding-bottom"))),g=_-(parseInt(a.getPropertyValue("padding-right"))+parseInt(a.getPropertyValue("padding-left")))-f.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(g/f._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(m/f._renderService.dimensions.actualCellHeight))}}}},t}();A.FitAddon=x}},c={};return function v(A){if(c[A])return c[A].exports;var x=c[A]={exports:{}};return S[A](x,x.exports,v),x.exports}(775)})()})});var ei=be((Zt,Pr)=>{(function(S,c){typeof Zt=="object"&&typeof Pr=="object"?Pr.exports=c():typeof define=="function"&&define.amd?define([],c):typeof Zt=="object"?Zt.SearchAddon=c():S.SearchAddon=c()})(self,function(){return(()=>{"use strict";var S={};return(()=>{var c=S;Object.defineProperty(c,"__esModule",{value:!0}),c.SearchAddon=void 0;var v=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?",A=function(){function x(){this._linesCacheTimeoutId=0}return x.prototype.activate=function(t){this._terminal=t},x.prototype.dispose=function(){},x.prototype.findNext=function(t,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return this._terminal.clearSelection(),!1;var l,p=0,_=0;if(this._terminal.hasSelection()){var a=!!f&&f.incremental;l=this._terminal.getSelectionPosition(),_=a?l.startRow:l.endRow,p=a?l.startColumn:l.endColumn}this._initLinesCache();var m={startRow:_,startCol:p},g=this._findInLine(t,m,f);if(!g)for(var n=_+1;n<this._terminal.buffer.active.baseY+this._terminal.rows&&(m.startRow=n,m.startCol=0,!(g=this._findInLine(t,m,f)));n++);if(!g&&_!==0)for(n=0;n<_&&(m.startRow=n,m.startCol=0,!(g=this._findInLine(t,m,f)));n++);return!g&&l&&(m.startRow=l.startRow,m.startCol=0,g=this._findInLine(t,m,f)),this._selectResult(g)},x.prototype.findPrevious=function(t,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return this._terminal.clearSelection(),!1;var l,p,_=!0,a=this._terminal.buffer.active.baseY+this._terminal.rows,m=this._terminal.cols,g=!!f&&f.incremental;this._terminal.hasSelection()&&(a=(p=this._terminal.getSelectionPosition()).startRow,m=p.startColumn),this._initLinesCache();var n={startRow:a,startCol:m};if(g?(l=this._findInLine(t,n,f,!1))&&l.row===a&&l.col===m||(p&&(n.startRow=p.endRow,n.startCol=p.endColumn),l=this._findInLine(t,n,f,!0)):l=this._findInLine(t,n,f,_),!l){n.startCol=Math.max(n.startCol,this._terminal.cols);for(var o=a-1;o>=0&&(n.startRow=o,!(l=this._findInLine(t,n,f,_)));o--);}if(!l&&a!==this._terminal.buffer.active.baseY+this._terminal.rows)for(o=this._terminal.buffer.active.baseY+this._terminal.rows;o>=a&&(n.startRow=o,!(l=this._findInLine(t,n,f,_)));o--);return!(l||!p)||this._selectResult(l)},x.prototype._initLinesCache=function(){var t=this,f=this._terminal;this._linesCache||(this._linesCache=new Array(f.buffer.active.length),this._cursorMoveListener=f.onCursorMove(function(){return t._destroyLinesCache()}),this._resizeListener=f.onResize(function(){return t._destroyLinesCache()})),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(function(){return t._destroyLinesCache()},15e3)},x.prototype._destroyLinesCache=function(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)},x.prototype._isWholeWord=function(t,f,l){return(t===0||v.includes(f[t-1]))&&(t+l.length===f.length||v.includes(f[t+l.length]))},x.prototype._findInLine=function(t,f,l,p){l===void 0&&(l={}),p===void 0&&(p=!1);var _=this._terminal,a=f.startRow,m=f.startCol,g=_.buffer.active.getLine(a);if(g==null?void 0:g.isWrapped)return p?void(f.startCol+=_.cols):(f.startRow--,f.startCol+=_.cols,this._findInLine(t,f,l));var n=this._linesCache?this._linesCache[a]:void 0;n===void 0&&(n=this._translateBufferLineToStringWithWrap(a,!0),this._linesCache&&(this._linesCache[a]=n));var o=l.caseSensitive?t:t.toLowerCase(),d=l.caseSensitive?n:n.toLowerCase(),s=-1;if(l.regex){var i=RegExp(o,"g"),e=void 0;if(p)for(;e=i.exec(d.slice(0,m));)s=i.lastIndex-e[0].length,t=e[0],i.lastIndex-=t.length-1;else(e=i.exec(d.slice(m)))&&e[0].length>0&&(s=m+(i.lastIndex-e[0].length),t=e[0])}else p?m-o.length>=0&&(s=d.lastIndexOf(o,m-o.length)):s=d.indexOf(o,m);if(s>=0){if(s>=_.cols&&(a+=Math.floor(s/_.cols),s%=_.cols),l.wholeWord&&!this._isWholeWord(s,d,t))return;var r=_.buffer.active.getLine(a);if(r)for(var h=0;h<s;h++){var u=r.getCell(h);if(!u)break;var y=u.getChars();y.length>1&&(s-=y.length-1),u.getWidth()===0&&s++}return{term:t,col:s,row:a}}},x.prototype._translateBufferLineToStringWithWrap=function(t,f){var l,p=this._terminal,_="";do{var a=p.buffer.active.getLine(t+1);l=!!a&&a.isWrapped;var m=p.buffer.active.getLine(t);if(!m)break;_+=m.translateToString(!l&&f).substring(0,p.cols),t++}while(l);return _},x.prototype._selectResult=function(t){var f=this._terminal;if(!t)return f.clearSelection(),!1;if(f.select(t.col,t.row,t.term.length),t.row>=f.buffer.active.viewportY+f.rows||t.row<f.buffer.active.viewportY){var l=t.row-f.buffer.active.viewportY;l-=Math.floor(f.rows/2),f.scrollLines(l)}return!0},x}();c.SearchAddon=A})(),S})()})});var ti=be((Ve,Ir)=>{(function(S,c){typeof Ve=="object"&&typeof Ir=="object"?Ir.exports=c():typeof define=="function"&&define.amd?define([],c):typeof Ve=="object"?Ve.SerializeAddon=c():S.SerializeAddon=c()})(Ve,function(){return(()=>{"use strict";var S={};return{44:function(c,v){var A,x=this&&this.__extends||(A=function(p,_){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(a[g]=m[g])})(p,_)},function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function a(){this.constructor=p}A(p,_),p.prototype=_===null?Object.create(_):(a.prototype=_.prototype,new a)});function t(p,_){return p.getBgColorMode()===_.getBgColorMode()&&p.getBgColor()===_.getBgColor()}Object.defineProperty(v,"__esModule",{value:!0}),v.SerializeAddon=void 0;var f=function(p){function _(a,m){var g=p.call(this,a)||this;return g._terminal=m,g._rowIndex=0,g._allRows=new Array,g._allRowSeparators=new Array,g._currentRow="",g._nullCellCount=0,g._cursorStyle=g._buffer.getNullCell(),g._cursorStyleRow=0,g._cursorStyleCol=0,g._backgroundCell=g._buffer.getNullCell(),g._firstRow=0,g._lastCursorRow=0,g._lastCursorCol=0,g._lastContentCursorRow=0,g._lastContentCursorCol=0,g._thisRowLastChar=g._buffer.getNullCell(),g._thisRowLastSecondChar=g._buffer.getNullCell(),g._nextRowFirstChar=g._buffer.getNullCell(),g}return x(_,p),_.prototype._beforeSerialize=function(a,m,g){this._allRows=new Array(a),this._lastContentCursorRow=m,this._lastCursorRow=m,this._firstRow=m},_.prototype._rowEnd=function(a,m){var g;this._nullCellCount>0&&!t(this._cursorStyle,this._backgroundCell)&&(this._currentRow+="["+this._nullCellCount+"X");var n="";if(!m){a-this._firstRow>=this._terminal.rows&&((g=this._buffer.getLine(this._cursorStyleRow))===null||g===void 0||g.getCell(this._cursorStyleCol,this._backgroundCell));var o=this._buffer.getLine(a),d=this._buffer.getLine(a+1);if(d.isWrapped){n="";var s=o.getCell(o.length-1,this._thisRowLastChar),i=o.getCell(o.length-2,this._thisRowLastSecondChar),e=d.getCell(0,this._nextRowFirstChar),r=e.getWidth()>1,h=!1;(e.getChars()&&r?this._nullCellCount<=1:this._nullCellCount<=0)&&((s.getChars()||s.getWidth()===0)&&t(s,e)&&(h=!0),r&&(i.getChars()||i.getWidth()===0)&&t(s,e)&&t(i,e)&&(h=!0)),h||(n="-".repeat(this._nullCellCount+1),n+="[1D[1X",this._nullCellCount>0&&(n+="[A",n+="["+(o.length-this._nullCellCount)+"C",n+="["+this._nullCellCount+"X",n+="["+(o.length-this._nullCellCount)+"D",n+="[B"),this._lastContentCursorRow=a+1,this._lastContentCursorCol=0,this._lastCursorRow=a+1,this._lastCursorCol=0)}else n=`\r
`,this._lastCursorRow=a+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=n,this._currentRow="",this._nullCellCount=0},_.prototype._diffStyle=function(a,m){var g,n,o=[],d=(n=m,!((g=a).getFgColorMode()===n.getFgColorMode()&&g.getFgColor()===n.getFgColor())),s=!t(a,m),i=!function(r,h){return r.isInverse()===h.isInverse()&&r.isBold()===h.isBold()&&r.isUnderline()===h.isUnderline()&&r.isBlink()===h.isBlink()&&r.isInvisible()===h.isInvisible()&&r.isItalic()===h.isItalic()&&r.isDim()===h.isDim()}(a,m);if(d||s||i)if(a.isAttributeDefault())m.isAttributeDefault()||o.push(0);else{if(d){var e=a.getFgColor();a.isFgRGB()?o.push(38,2,e>>>16&255,e>>>8&255,255&e):a.isFgPalette()?e>=16?o.push(38,5,e):o.push(8&e?90+(7&e):30+(7&e)):o.push(39)}s&&(e=a.getBgColor(),a.isBgRGB()?o.push(48,2,e>>>16&255,e>>>8&255,255&e):a.isBgPalette()?e>=16?o.push(48,5,e):o.push(8&e?100+(7&e):40+(7&e)):o.push(49)),i&&(a.isInverse()!==m.isInverse()&&o.push(a.isInverse()?7:27),a.isBold()!==m.isBold()&&o.push(a.isBold()?1:22),a.isUnderline()!==m.isUnderline()&&o.push(a.isUnderline()?4:24),a.isBlink()!==m.isBlink()&&o.push(a.isBlink()?5:25),a.isInvisible()!==m.isInvisible()&&o.push(a.isInvisible()?8:28),a.isItalic()!==m.isItalic()&&o.push(a.isItalic()?3:23),a.isDim()!==m.isDim()&&o.push(a.isDim()?2:22))}return o},_.prototype._nextCell=function(a,m,g,n){if(a.getWidth()!==0){var o=a.getChars()==="",d=this._diffStyle(a,this._cursorStyle);if(o?!t(this._cursorStyle,a):d.length>0){this._nullCellCount>0&&(t(this._cursorStyle,this._backgroundCell)||(this._currentRow+="["+this._nullCellCount+"X"),this._currentRow+="["+this._nullCellCount+"C",this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=g,this._lastContentCursorCol=this._lastCursorCol=n,this._currentRow+="["+d.join(";")+"m";var s=this._buffer.getLine(g);s!==void 0&&(s.getCell(n,this._cursorStyle),this._cursorStyleRow=g,this._cursorStyleCol=n)}o?this._nullCellCount+=a.getWidth():(this._nullCellCount>0&&(t(this._cursorStyle,this._backgroundCell)||(this._currentRow+="["+this._nullCellCount+"X"),this._currentRow+="["+this._nullCellCount+"C",this._nullCellCount=0),this._currentRow+=a.getChars(),this._lastContentCursorRow=this._lastCursorRow=g,this._lastContentCursorCol=this._lastCursorCol=n+a.getWidth())}},_.prototype._serializeString=function(){var a=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(a=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);for(var m="",g=0;g<a;g++)m+=this._allRows[g],g+1<a&&(m+=this._allRowSeparators[g]);var n,o=this._buffer.baseY+this._buffer.cursorY,d=this._buffer.cursorX;return(o!==this._lastCursorRow||d!==this._lastCursorCol)&&((n=o-this._lastCursorRow)>0?m+="["+n+"B":n<0&&(m+="["+-n+"A"),function(s){s>0?m+="["+s+"C":s<0&&(m+="["+-s+"D")}(d-this._lastCursorCol)),m},_}(function(){function p(_){this._buffer=_}return p.prototype.serialize=function(_,a){var m=this._buffer.getNullCell(),g=this._buffer.getNullCell(),n=m;this._beforeSerialize(a-_,_,a);for(var o=_;o<a;o++){var d=this._buffer.getLine(o);if(d)for(var s=0;s<d.length;s++){var i=d.getCell(s,n===m?g:m);i?(this._nextCell(i,n,o,s),n=i):console.warn("Can't get cell at row="+o+", col="+s)}this._rowEnd(o,o===a-1)}return this._afterSerialize(),this._serializeString()},p.prototype._nextCell=function(_,a,m,g){},p.prototype._rowEnd=function(_,a){},p.prototype._beforeSerialize=function(_,a,m){},p.prototype._afterSerialize=function(){},p.prototype._serializeString=function(){return""},p}()),l=function(){function p(){}return p.prototype.activate=function(_){this._terminal=_},p.prototype._serializeBuffer=function(_,a,m){var g,n,o=a.length,d=new f(a,_),s=m===void 0?o:(g=m+_.rows,n=o,Math.max(0,Math.min(g,n)));return d.serialize(o-s,o)},p.prototype._serializeModes=function(_){var a="",m=_.modes;if(m.applicationCursorKeysMode&&(a+="[?1h"),m.applicationKeypadMode&&(a+="[?66h"),m.bracketedPasteMode&&(a+="[?2004h"),m.insertMode&&(a+="[4h"),m.originMode&&(a+="[?6h"),m.reverseWraparoundMode&&(a+="[?45h"),m.sendFocusMode&&(a+="[?1004h"),m.wraparoundMode===!1&&(a+="[?7l"),m.mouseTrackingMode!=="none")switch(m.mouseTrackingMode){case"x10":a+="[?9h";break;case"vt200":a+="[?1000h";break;case"drag":a+="[?1002h";break;case"any":a+="[?1003h"}return a},p.prototype.serialize=function(_){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");var a=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,_);return this._terminal.buffer.active.type==="alternate"&&(a+="[?1049h[H"+this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)),a+this._serializeModes(this._terminal)},p.prototype.dispose=function(){},p}();v.SerializeAddon=l}}[44](0,S),S})()})});var ri=be((Ge,Hr)=>{(function(S,c){typeof Ge=="object"&&typeof Hr=="object"?Hr.exports=c():typeof define=="function"&&define.amd?define([],c):typeof Ge=="object"?Ge.Unicode11Addon=c():S.Unicode11Addon=c()})(Ge,function(){return(()=>{"use strict";var S={433:(x,t,f)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV11=void 0;let l=f(455),p=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],_=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],a=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],m=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],g;function n(o,d){let s,i=0,e=d.length-1;if(o<d[0][0]||o>d[e][1])return!1;for(;e>=i;)if(s=i+e>>1,o>d[s][1])i=s+1;else{if(!(o<d[s][0]))return!0;e=s-1}return!1}t.UnicodeV11=class{constructor(){if(this.version="11",!g){g=new Uint8Array(65536),l.fill(g,1),g[0]=0,l.fill(g,0,1,32),l.fill(g,0,127,160);for(let o=0;o<p.length;++o)l.fill(g,0,p[o][0],p[o][1]+1);for(let o=0;o<a.length;++o)l.fill(g,2,a[o][0],a[o][1]+1)}}wcwidth(o){return o<32?0:o<127?1:o<65536?g[o]:n(o,_)?0:n(o,m)?2:1}}},455:(x,t)=>{function f(l,p,_,a){if(_===void 0&&(_=0),a===void 0&&(a=l.length),_>=l.length)return l;_=(l.length+_)%l.length,a=a>=l.length?l.length:(l.length+a)%l.length;for(var m=_;m<a;++m)l[m]=p;return l}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(l,p,_,a){return l.fill?l.fill(p,_,a):f(l,p,_,a)},t.fillFallback=f,t.concat=function(l,p){var _=new l.constructor(l.length+p.length);return _.set(l),_.set(p,l.length),_}}},c={};function v(x){var t=c[x];if(t!==void 0)return t.exports;var f=c[x]={exports:{}};return S[x](f,f.exports,v),f.exports}var A={};return(()=>{var x=A;Object.defineProperty(x,"__esModule",{value:!0}),x.Unicode11Addon=void 0;let t=v(433);x.Unicode11Addon=class{activate(f){f.unicode.register(new t.UnicodeV11)}dispose(){}}})(),A})()})});var oi=be(Jt=>{"use strict";Jt.byteLength=Gi;Jt.toByteArray=Xi;Jt.fromByteArray=$i;var ge=[],le=[],Vi=typeof Uint8Array!="undefined"?Uint8Array:Array,Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Be=0,ii=Fr.length;Be<ii;++Be)ge[Be]=Fr[Be],le[Fr.charCodeAt(Be)]=Be;var Be,ii;le["-".charCodeAt(0)]=62;le["_".charCodeAt(0)]=63;function ni(S){var c=S.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=S.indexOf("=");v===-1&&(v=c);var A=v===c?0:4-v%4;return[v,A]}function Gi(S){var c=ni(S),v=c[0],A=c[1];return(v+A)*3/4-A}function Yi(S,c,v){return(c+v)*3/4-v}function Xi(S){var c,v=ni(S),A=v[0],x=v[1],t=new Vi(Yi(S,A,x)),f=0,l=x>0?A-4:A,p;for(p=0;p<l;p+=4)c=le[S.charCodeAt(p)]<<18|le[S.charCodeAt(p+1)]<<12|le[S.charCodeAt(p+2)]<<6|le[S.charCodeAt(p+3)],t[f++]=c>>16&255,t[f++]=c>>8&255,t[f++]=c&255;return x===2&&(c=le[S.charCodeAt(p)]<<2|le[S.charCodeAt(p+1)]>>4,t[f++]=c&255),x===1&&(c=le[S.charCodeAt(p)]<<10|le[S.charCodeAt(p+1)]<<4|le[S.charCodeAt(p+2)]>>2,t[f++]=c>>8&255,t[f++]=c&255),t}function Zi(S){return ge[S>>18&63]+ge[S>>12&63]+ge[S>>6&63]+ge[S&63]}function Ji(S,c,v){for(var A,x=[],t=c;t<v;t+=3)A=(S[t]<<16&16711680)+(S[t+1]<<8&65280)+(S[t+2]&255),x.push(Zi(A));return x.join("")}function $i(S){for(var c,v=S.length,A=v%3,x=[],t=16383,f=0,l=v-A;f<l;f+=t)x.push(Ji(S,f,f+t>l?l:f+t));return A===1?(c=S[v-1],x.push(ge[c>>2]+ge[c<<4&63]+"==")):A===2&&(c=(S[v-2]<<8)+S[v-1],x.push(ge[c>>10]+ge[c>>4&63]+ge[c<<2&63]+"=")),x.join("")}});var si=be(jr=>{jr.read=function(S,c,v,A,x){var t,f,l=x*8-A-1,p=(1<<l)-1,_=p>>1,a=-7,m=v?x-1:0,g=v?-1:1,n=S[c+m];for(m+=g,t=n&(1<<-a)-1,n>>=-a,a+=l;a>0;t=t*256+S[c+m],m+=g,a-=8);for(f=t&(1<<-a)-1,t>>=-a,a+=A;a>0;f=f*256+S[c+m],m+=g,a-=8);if(t===0)t=1-_;else{if(t===p)return f?NaN:(n?-1:1)*(1/0);f=f+Math.pow(2,A),t=t-_}return(n?-1:1)*f*Math.pow(2,t-A)};jr.write=function(S,c,v,A,x,t){var f,l,p,_=t*8-x-1,a=(1<<_)-1,m=a>>1,g=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,n=A?0:t-1,o=A?1:-1,d=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(l=isNaN(c)?1:0,f=a):(f=Math.floor(Math.log(c)/Math.LN2),c*(p=Math.pow(2,-f))<1&&(f--,p*=2),f+m>=1?c+=g/p:c+=g*Math.pow(2,1-m),c*p>=2&&(f++,p/=2),f+m>=a?(l=0,f=a):f+m>=1?(l=(c*p-1)*Math.pow(2,x),f=f+m):(l=c*Math.pow(2,m-1)*Math.pow(2,x),f=0));x>=8;S[v+n]=l&255,n+=o,l/=256,x-=8);for(f=f<<x|l,_+=x;_>0;S[v+n]=f&255,n+=o,f/=256,_-=8);S[v+n-o]|=d*128}});var wi=be(Ue=>{"use strict";var Ur=oi(),He=si(),ai=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ue.Buffer=W;Ue.SlowBuffer=on;Ue.INSPECT_MAX_BYTES=50;var $t=2147483647;Ue.kMaxLength=$t;W.TYPED_ARRAY_SUPPORT=Qi();!W.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Qi(){try{let S=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(S,c),S.foo()===42}catch{return!1}}Object.defineProperty(W.prototype,"parent",{enumerable:!0,get:function(){if(!!W.isBuffer(this))return this.buffer}});Object.defineProperty(W.prototype,"offset",{enumerable:!0,get:function(){if(!!W.isBuffer(this))return this.byteOffset}});function Ce(S){if(S>$t)throw new RangeError('The value "'+S+'" is invalid for option "size"');let c=new Uint8Array(S);return Object.setPrototypeOf(c,W.prototype),c}function W(S,c,v){if(typeof S=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Wr(S)}return ci(S,c,v)}W.poolSize=8192;function ci(S,c,v){if(typeof S=="string")return tn(S,c);if(ArrayBuffer.isView(S))return rn(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(ye(S,ArrayBuffer)||S&&ye(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ye(S,SharedArrayBuffer)||S&&ye(S.buffer,SharedArrayBuffer)))return Nr(S,c,v);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let A=S.valueOf&&S.valueOf();if(A!=null&&A!==S)return W.from(A,c,v);let x=nn(S);if(x)return x;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return W.from(S[Symbol.toPrimitive]("string"),c,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}W.from=function(S,c,v){return ci(S,c,v)};Object.setPrototypeOf(W.prototype,Uint8Array.prototype);Object.setPrototypeOf(W,Uint8Array);function li(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function en(S,c,v){return li(S),S<=0?Ce(S):c!==void 0?typeof v=="string"?Ce(S).fill(c,v):Ce(S).fill(c):Ce(S)}W.alloc=function(S,c,v){return en(S,c,v)};function Wr(S){return li(S),Ce(S<0?0:zr(S)|0)}W.allocUnsafe=function(S){return Wr(S)};W.allocUnsafeSlow=function(S){return Wr(S)};function tn(S,c){if((typeof c!="string"||c==="")&&(c="utf8"),!W.isEncoding(c))throw new TypeError("Unknown encoding: "+c);let v=hi(S,c)|0,A=Ce(v),x=A.write(S,c);return x!==v&&(A=A.slice(0,x)),A}function qr(S){let c=S.length<0?0:zr(S.length)|0,v=Ce(c);for(let A=0;A<c;A+=1)v[A]=S[A]&255;return v}function rn(S){if(ye(S,Uint8Array)){let c=new Uint8Array(S);return Nr(c.buffer,c.byteOffset,c.byteLength)}return qr(S)}function Nr(S,c,v){if(c<0||S.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<c+(v||0))throw new RangeError('"length" is outside of buffer bounds');let A;return c===void 0&&v===void 0?A=new Uint8Array(S):v===void 0?A=new Uint8Array(S,c):A=new Uint8Array(S,c,v),Object.setPrototypeOf(A,W.prototype),A}function nn(S){if(W.isBuffer(S)){let c=zr(S.length)|0,v=Ce(c);return v.length===0||S.copy(v,0,0,c),v}if(S.length!==void 0)return typeof S.length!="number"||Gr(S.length)?Ce(0):qr(S);if(S.type==="Buffer"&&Array.isArray(S.data))return qr(S.data)}function zr(S){if(S>=$t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$t.toString(16)+" bytes");return S|0}function on(S){return+S!=S&&(S=0),W.alloc(+S)}W.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==W.prototype};W.compare=function(c,v){if(ye(c,Uint8Array)&&(c=W.from(c,c.offset,c.byteLength)),ye(v,Uint8Array)&&(v=W.from(v,v.offset,v.byteLength)),!W.isBuffer(c)||!W.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===v)return 0;let A=c.length,x=v.length;for(let t=0,f=Math.min(A,x);t<f;++t)if(c[t]!==v[t]){A=c[t],x=v[t];break}return A<x?-1:x<A?1:0};W.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};W.concat=function(c,v){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return W.alloc(0);let A;if(v===void 0)for(v=0,A=0;A<c.length;++A)v+=c[A].length;let x=W.allocUnsafe(v),t=0;for(A=0;A<c.length;++A){let f=c[A];if(ye(f,Uint8Array))t+f.length>x.length?(W.isBuffer(f)||(f=W.from(f)),f.copy(x,t)):Uint8Array.prototype.set.call(x,f,t);else if(W.isBuffer(f))f.copy(x,t);else throw new TypeError('"list" argument must be an Array of Buffers');t+=f.length}return x};function hi(S,c){if(W.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||ye(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);let v=S.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&v===0)return 0;let x=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return Vr(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return bi(S).length;default:if(x)return A?-1:Vr(S).length;c=(""+c).toLowerCase(),x=!0}}W.byteLength=hi;function sn(S,c,v){let A=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,c>>>=0,v<=c))return"";for(S||(S="utf8");;)switch(S){case"hex":return vn(this,c,v);case"utf8":case"utf-8":return _i(this,c,v);case"ascii":return dn(this,c,v);case"latin1":case"binary":return pn(this,c,v);case"base64":return fn(this,c,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gn(this,c,v);default:if(A)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),A=!0}}W.prototype._isBuffer=!0;function ke(S,c,v){let A=S[c];S[c]=S[v],S[v]=A}W.prototype.swap16=function(){let c=this.length;if(c%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<c;v+=2)ke(this,v,v+1);return this};W.prototype.swap32=function(){let c=this.length;if(c%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<c;v+=4)ke(this,v,v+3),ke(this,v+1,v+2);return this};W.prototype.swap64=function(){let c=this.length;if(c%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<c;v+=8)ke(this,v,v+7),ke(this,v+1,v+6),ke(this,v+2,v+5),ke(this,v+3,v+4);return this};W.prototype.toString=function(){let c=this.length;return c===0?"":arguments.length===0?_i(this,0,c):sn.apply(this,arguments)};W.prototype.toLocaleString=W.prototype.toString;W.prototype.equals=function(c){if(!W.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:W.compare(this,c)===0};W.prototype.inspect=function(){let c="",v=Ue.INSPECT_MAX_BYTES;return c=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(c+=" ... "),"<Buffer "+c+">"};ai&&(W.prototype[ai]=W.prototype.inspect);W.prototype.compare=function(c,v,A,x,t){if(ye(c,Uint8Array)&&(c=W.from(c,c.offset,c.byteLength)),!W.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(v===void 0&&(v=0),A===void 0&&(A=c?c.length:0),x===void 0&&(x=0),t===void 0&&(t=this.length),v<0||A>c.length||x<0||t>this.length)throw new RangeError("out of range index");if(x>=t&&v>=A)return 0;if(x>=t)return-1;if(v>=A)return 1;if(v>>>=0,A>>>=0,x>>>=0,t>>>=0,this===c)return 0;let f=t-x,l=A-v,p=Math.min(f,l),_=this.slice(x,t),a=c.slice(v,A);for(let m=0;m<p;++m)if(_[m]!==a[m]){f=_[m],l=a[m];break}return f<l?-1:l<f?1:0};function ui(S,c,v,A,x){if(S.length===0)return-1;if(typeof v=="string"?(A=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,Gr(v)&&(v=x?0:S.length-1),v<0&&(v=S.length+v),v>=S.length){if(x)return-1;v=S.length-1}else if(v<0)if(x)v=0;else return-1;if(typeof c=="string"&&(c=W.from(c,A)),W.isBuffer(c))return c.length===0?-1:fi(S,c,v,A,x);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(S,c,v):Uint8Array.prototype.lastIndexOf.call(S,c,v):fi(S,[c],v,A,x);throw new TypeError("val must be string, number or Buffer")}function fi(S,c,v,A,x){let t=1,f=S.length,l=c.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(S.length<2||c.length<2)return-1;t=2,f/=2,l/=2,v/=2}function p(a,m){return t===1?a[m]:a.readUInt16BE(m*t)}let _;if(x){let a=-1;for(_=v;_<f;_++)if(p(S,_)===p(c,a===-1?0:_-a)){if(a===-1&&(a=_),_-a+1===l)return a*t}else a!==-1&&(_-=_-a),a=-1}else for(v+l>f&&(v=f-l),_=v;_>=0;_--){let a=!0;for(let m=0;m<l;m++)if(p(S,_+m)!==p(c,m)){a=!1;break}if(a)return _}return-1}W.prototype.includes=function(c,v,A){return this.indexOf(c,v,A)!==-1};W.prototype.indexOf=function(c,v,A){return ui(this,c,v,A,!0)};W.prototype.lastIndexOf=function(c,v,A){return ui(this,c,v,A,!1)};function an(S,c,v,A){v=Number(v)||0;let x=S.length-v;A?(A=Number(A),A>x&&(A=x)):A=x;let t=c.length;A>t/2&&(A=t/2);let f;for(f=0;f<A;++f){let l=parseInt(c.substr(f*2,2),16);if(Gr(l))return f;S[v+f]=l}return f}function cn(S,c,v,A){return Qt(Vr(c,S.length-v),S,v,A)}function ln(S,c,v,A){return Qt(Sn(c),S,v,A)}function hn(S,c,v,A){return Qt(bi(c),S,v,A)}function un(S,c,v,A){return Qt(bn(c,S.length-v),S,v,A)}W.prototype.write=function(c,v,A,x){if(v===void 0)x="utf8",A=this.length,v=0;else if(A===void 0&&typeof v=="string")x=v,A=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(A)?(A=A>>>0,x===void 0&&(x="utf8")):(x=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let t=this.length-v;if((A===void 0||A>t)&&(A=t),c.length>0&&(A<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let f=!1;for(;;)switch(x){case"hex":return an(this,c,v,A);case"utf8":case"utf-8":return cn(this,c,v,A);case"ascii":case"latin1":case"binary":return ln(this,c,v,A);case"base64":return hn(this,c,v,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return un(this,c,v,A);default:if(f)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),f=!0}};W.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fn(S,c,v){return c===0&&v===S.length?Ur.fromByteArray(S):Ur.fromByteArray(S.slice(c,v))}function _i(S,c,v){v=Math.min(S.length,v);let A=[],x=c;for(;x<v;){let t=S[x],f=null,l=t>239?4:t>223?3:t>191?2:1;if(x+l<=v){let p,_,a,m;switch(l){case 1:t<128&&(f=t);break;case 2:p=S[x+1],(p&192)==128&&(m=(t&31)<<6|p&63,m>127&&(f=m));break;case 3:p=S[x+1],_=S[x+2],(p&192)==128&&(_&192)==128&&(m=(t&15)<<12|(p&63)<<6|_&63,m>2047&&(m<55296||m>57343)&&(f=m));break;case 4:p=S[x+1],_=S[x+2],a=S[x+3],(p&192)==128&&(_&192)==128&&(a&192)==128&&(m=(t&15)<<18|(p&63)<<12|(_&63)<<6|a&63,m>65535&&m<1114112&&(f=m))}}f===null?(f=65533,l=1):f>65535&&(f-=65536,A.push(f>>>10&1023|55296),f=56320|f&1023),A.push(f),x+=l}return _n(A)}var di=4096;function _n(S){let c=S.length;if(c<=di)return String.fromCharCode.apply(String,S);let v="",A=0;for(;A<c;)v+=String.fromCharCode.apply(String,S.slice(A,A+=di));return v}function dn(S,c,v){let A="";v=Math.min(S.length,v);for(let x=c;x<v;++x)A+=String.fromCharCode(S[x]&127);return A}function pn(S,c,v){let A="";v=Math.min(S.length,v);for(let x=c;x<v;++x)A+=String.fromCharCode(S[x]);return A}function vn(S,c,v){let A=S.length;(!c||c<0)&&(c=0),(!v||v<0||v>A)&&(v=A);let x="";for(let t=c;t<v;++t)x+=wn[S[t]];return x}function gn(S,c,v){let A=S.slice(c,v),x="";for(let t=0;t<A.length-1;t+=2)x+=String.fromCharCode(A[t]+A[t+1]*256);return x}W.prototype.slice=function(c,v){let A=this.length;c=~~c,v=v===void 0?A:~~v,c<0?(c+=A,c<0&&(c=0)):c>A&&(c=A),v<0?(v+=A,v<0&&(v=0)):v>A&&(v=A),v<c&&(v=c);let x=this.subarray(c,v);return Object.setPrototypeOf(x,W.prototype),x};function ee(S,c,v){if(S%1!=0||S<0)throw new RangeError("offset is not uint");if(S+c>v)throw new RangeError("Trying to access beyond buffer length")}W.prototype.readUintLE=W.prototype.readUIntLE=function(c,v,A){c=c>>>0,v=v>>>0,A||ee(c,v,this.length);let x=this[c],t=1,f=0;for(;++f<v&&(t*=256);)x+=this[c+f]*t;return x};W.prototype.readUintBE=W.prototype.readUIntBE=function(c,v,A){c=c>>>0,v=v>>>0,A||ee(c,v,this.length);let x=this[c+--v],t=1;for(;v>0&&(t*=256);)x+=this[c+--v]*t;return x};W.prototype.readUint8=W.prototype.readUInt8=function(c,v){return c=c>>>0,v||ee(c,1,this.length),this[c]};W.prototype.readUint16LE=W.prototype.readUInt16LE=function(c,v){return c=c>>>0,v||ee(c,2,this.length),this[c]|this[c+1]<<8};W.prototype.readUint16BE=W.prototype.readUInt16BE=function(c,v){return c=c>>>0,v||ee(c,2,this.length),this[c]<<8|this[c+1]};W.prototype.readUint32LE=W.prototype.readUInt32LE=function(c,v){return c=c>>>0,v||ee(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216};W.prototype.readUint32BE=W.prototype.readUInt32BE=function(c,v){return c=c>>>0,v||ee(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])};W.prototype.readBigUInt64LE=we(function(c){c=c>>>0,je(c,"offset");let v=this[c],A=this[c+7];(v===void 0||A===void 0)&&Ye(c,this.length-8);let x=v+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,t=this[++c]+this[++c]*2**8+this[++c]*2**16+A*2**24;return BigInt(x)+(BigInt(t)<<BigInt(32))});W.prototype.readBigUInt64BE=we(function(c){c=c>>>0,je(c,"offset");let v=this[c],A=this[c+7];(v===void 0||A===void 0)&&Ye(c,this.length-8);let x=v*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],t=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A;return(BigInt(x)<<BigInt(32))+BigInt(t)});W.prototype.readIntLE=function(c,v,A){c=c>>>0,v=v>>>0,A||ee(c,v,this.length);let x=this[c],t=1,f=0;for(;++f<v&&(t*=256);)x+=this[c+f]*t;return t*=128,x>=t&&(x-=Math.pow(2,8*v)),x};W.prototype.readIntBE=function(c,v,A){c=c>>>0,v=v>>>0,A||ee(c,v,this.length);let x=v,t=1,f=this[c+--x];for(;x>0&&(t*=256);)f+=this[c+--x]*t;return t*=128,f>=t&&(f-=Math.pow(2,8*v)),f};W.prototype.readInt8=function(c,v){return c=c>>>0,v||ee(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]};W.prototype.readInt16LE=function(c,v){c=c>>>0,v||ee(c,2,this.length);let A=this[c]|this[c+1]<<8;return A&32768?A|4294901760:A};W.prototype.readInt16BE=function(c,v){c=c>>>0,v||ee(c,2,this.length);let A=this[c+1]|this[c]<<8;return A&32768?A|4294901760:A};W.prototype.readInt32LE=function(c,v){return c=c>>>0,v||ee(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};W.prototype.readInt32BE=function(c,v){return c=c>>>0,v||ee(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};W.prototype.readBigInt64LE=we(function(c){c=c>>>0,je(c,"offset");let v=this[c],A=this[c+7];(v===void 0||A===void 0)&&Ye(c,this.length-8);let x=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(A<<24);return(BigInt(x)<<BigInt(32))+BigInt(v+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)});W.prototype.readBigInt64BE=we(function(c){c=c>>>0,je(c,"offset");let v=this[c],A=this[c+7];(v===void 0||A===void 0)&&Ye(c,this.length-8);let x=(v<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(x)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A)});W.prototype.readFloatLE=function(c,v){return c=c>>>0,v||ee(c,4,this.length),He.read(this,c,!0,23,4)};W.prototype.readFloatBE=function(c,v){return c=c>>>0,v||ee(c,4,this.length),He.read(this,c,!1,23,4)};W.prototype.readDoubleLE=function(c,v){return c=c>>>0,v||ee(c,8,this.length),He.read(this,c,!0,52,8)};W.prototype.readDoubleBE=function(c,v){return c=c>>>0,v||ee(c,8,this.length),He.read(this,c,!1,52,8)};function ne(S,c,v,A,x,t){if(!W.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>x||c<t)throw new RangeError('"value" argument is out of bounds');if(v+A>S.length)throw new RangeError("Index out of range")}W.prototype.writeUintLE=W.prototype.writeUIntLE=function(c,v,A,x){if(c=+c,v=v>>>0,A=A>>>0,!x){let l=Math.pow(2,8*A)-1;ne(this,c,v,A,l,0)}let t=1,f=0;for(this[v]=c&255;++f<A&&(t*=256);)this[v+f]=c/t&255;return v+A};W.prototype.writeUintBE=W.prototype.writeUIntBE=function(c,v,A,x){if(c=+c,v=v>>>0,A=A>>>0,!x){let l=Math.pow(2,8*A)-1;ne(this,c,v,A,l,0)}let t=A-1,f=1;for(this[v+t]=c&255;--t>=0&&(f*=256);)this[v+t]=c/f&255;return v+A};W.prototype.writeUint8=W.prototype.writeUInt8=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,1,255,0),this[v]=c&255,v+1};W.prototype.writeUint16LE=W.prototype.writeUInt16LE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,2,65535,0),this[v]=c&255,this[v+1]=c>>>8,v+2};W.prototype.writeUint16BE=W.prototype.writeUInt16BE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,2,65535,0),this[v]=c>>>8,this[v+1]=c&255,v+2};W.prototype.writeUint32LE=W.prototype.writeUInt32LE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,4,4294967295,0),this[v+3]=c>>>24,this[v+2]=c>>>16,this[v+1]=c>>>8,this[v]=c&255,v+4};W.prototype.writeUint32BE=W.prototype.writeUInt32BE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,4,4294967295,0),this[v]=c>>>24,this[v+1]=c>>>16,this[v+2]=c>>>8,this[v+3]=c&255,v+4};function pi(S,c,v,A,x){Si(c,A,x,S,v,7);let t=Number(c&BigInt(4294967295));S[v++]=t,t=t>>8,S[v++]=t,t=t>>8,S[v++]=t,t=t>>8,S[v++]=t;let f=Number(c>>BigInt(32)&BigInt(4294967295));return S[v++]=f,f=f>>8,S[v++]=f,f=f>>8,S[v++]=f,f=f>>8,S[v++]=f,v}function vi(S,c,v,A,x){Si(c,A,x,S,v,7);let t=Number(c&BigInt(4294967295));S[v+7]=t,t=t>>8,S[v+6]=t,t=t>>8,S[v+5]=t,t=t>>8,S[v+4]=t;let f=Number(c>>BigInt(32)&BigInt(4294967295));return S[v+3]=f,f=f>>8,S[v+2]=f,f=f>>8,S[v+1]=f,f=f>>8,S[v]=f,v+8}W.prototype.writeBigUInt64LE=we(function(c,v=0){return pi(this,c,v,BigInt(0),BigInt("0xffffffffffffffff"))});W.prototype.writeBigUInt64BE=we(function(c,v=0){return vi(this,c,v,BigInt(0),BigInt("0xffffffffffffffff"))});W.prototype.writeIntLE=function(c,v,A,x){if(c=+c,v=v>>>0,!x){let p=Math.pow(2,8*A-1);ne(this,c,v,A,p-1,-p)}let t=0,f=1,l=0;for(this[v]=c&255;++t<A&&(f*=256);)c<0&&l===0&&this[v+t-1]!==0&&(l=1),this[v+t]=(c/f>>0)-l&255;return v+A};W.prototype.writeIntBE=function(c,v,A,x){if(c=+c,v=v>>>0,!x){let p=Math.pow(2,8*A-1);ne(this,c,v,A,p-1,-p)}let t=A-1,f=1,l=0;for(this[v+t]=c&255;--t>=0&&(f*=256);)c<0&&l===0&&this[v+t+1]!==0&&(l=1),this[v+t]=(c/f>>0)-l&255;return v+A};W.prototype.writeInt8=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,1,127,-128),c<0&&(c=255+c+1),this[v]=c&255,v+1};W.prototype.writeInt16LE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,2,32767,-32768),this[v]=c&255,this[v+1]=c>>>8,v+2};W.prototype.writeInt16BE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,2,32767,-32768),this[v]=c>>>8,this[v+1]=c&255,v+2};W.prototype.writeInt32LE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,4,2147483647,-2147483648),this[v]=c&255,this[v+1]=c>>>8,this[v+2]=c>>>16,this[v+3]=c>>>24,v+4};W.prototype.writeInt32BE=function(c,v,A){return c=+c,v=v>>>0,A||ne(this,c,v,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[v]=c>>>24,this[v+1]=c>>>16,this[v+2]=c>>>8,this[v+3]=c&255,v+4};W.prototype.writeBigInt64LE=we(function(c,v=0){return pi(this,c,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});W.prototype.writeBigInt64BE=we(function(c,v=0){return vi(this,c,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gi(S,c,v,A,x,t){if(v+A>S.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function yi(S,c,v,A,x){return c=+c,v=v>>>0,x||gi(S,c,v,4,34028234663852886e22,-34028234663852886e22),He.write(S,c,v,A,23,4),v+4}W.prototype.writeFloatLE=function(c,v,A){return yi(this,c,v,!0,A)};W.prototype.writeFloatBE=function(c,v,A){return yi(this,c,v,!1,A)};function mi(S,c,v,A,x){return c=+c,v=v>>>0,x||gi(S,c,v,8,17976931348623157e292,-17976931348623157e292),He.write(S,c,v,A,52,8),v+8}W.prototype.writeDoubleLE=function(c,v,A){return mi(this,c,v,!0,A)};W.prototype.writeDoubleBE=function(c,v,A){return mi(this,c,v,!1,A)};W.prototype.copy=function(c,v,A,x){if(!W.isBuffer(c))throw new TypeError("argument should be a Buffer");if(A||(A=0),!x&&x!==0&&(x=this.length),v>=c.length&&(v=c.length),v||(v=0),x>0&&x<A&&(x=A),x===A||c.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),c.length-v<x-A&&(x=c.length-v+A);let t=x-A;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,A,x):Uint8Array.prototype.set.call(c,this.subarray(A,x),v),t};W.prototype.fill=function(c,v,A,x){if(typeof c=="string"){if(typeof v=="string"?(x=v,v=0,A=this.length):typeof A=="string"&&(x=A,A=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!W.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(c.length===1){let f=c.charCodeAt(0);(x==="utf8"&&f<128||x==="latin1")&&(c=f)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(v<0||this.length<v||this.length<A)throw new RangeError("Out of range index");if(A<=v)return this;v=v>>>0,A=A===void 0?this.length:A>>>0,c||(c=0);let t;if(typeof c=="number")for(t=v;t<A;++t)this[t]=c;else{let f=W.isBuffer(c)?c:W.from(c,x),l=f.length;if(l===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(t=0;t<A-v;++t)this[t+v]=f[t%l]}return this};var Fe={};function Kr(S,c,v){Fe[S]=class extends v{constructor(){super();Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}Kr("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Kr("ERR_INVALID_ARG_TYPE",function(S,c){return`The "${S}" argument must be of type number. Received type ${typeof c}`},TypeError);Kr("ERR_OUT_OF_RANGE",function(S,c,v){let A=`The value of "${S}" is out of range.`,x=v;return Number.isInteger(v)&&Math.abs(v)>2**32?x=Ci(String(v)):typeof v=="bigint"&&(x=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(x=Ci(x)),x+="n"),A+=` It must be ${c}. Received ${x}`,A},RangeError);function Ci(S){let c="",v=S.length,A=S[0]==="-"?1:0;for(;v>=A+4;v-=3)c=`_${S.slice(v-3,v)}${c}`;return`${S.slice(0,v)}${c}`}function yn(S,c,v){je(c,"offset"),(S[c]===void 0||S[c+v]===void 0)&&Ye(c,S.length-(v+1))}function Si(S,c,v,A,x,t){if(S>v||S<c){let f=typeof c=="bigint"?"n":"",l;throw t>3?c===0||c===BigInt(0)?l=`>= 0${f} and < 2${f} ** ${(t+1)*8}${f}`:l=`>= -(2${f} ** ${(t+1)*8-1}${f}) and < 2 ** ${(t+1)*8-1}${f}`:l=`>= ${c}${f} and <= ${v}${f}`,new Fe.ERR_OUT_OF_RANGE("value",l,S)}yn(A,x,t)}function je(S,c){if(typeof S!="number")throw new Fe.ERR_INVALID_ARG_TYPE(c,"number",S)}function Ye(S,c,v){throw Math.floor(S)!==S?(je(S,v),new Fe.ERR_OUT_OF_RANGE(v||"offset","an integer",S)):c<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${c}`,S)}var mn=/[^+/0-9A-Za-z-_]/g;function Cn(S){if(S=S.split("=")[0],S=S.trim().replace(mn,""),S.length<2)return"";for(;S.length%4!=0;)S=S+"=";return S}function Vr(S,c){c=c||1/0;let v,A=S.length,x=null,t=[];for(let f=0;f<A;++f){if(v=S.charCodeAt(f),v>55295&&v<57344){if(!x){if(v>56319){(c-=3)>-1&&t.push(239,191,189);continue}else if(f+1===A){(c-=3)>-1&&t.push(239,191,189);continue}x=v;continue}if(v<56320){(c-=3)>-1&&t.push(239,191,189),x=v;continue}v=(x-55296<<10|v-56320)+65536}else x&&(c-=3)>-1&&t.push(239,191,189);if(x=null,v<128){if((c-=1)<0)break;t.push(v)}else if(v<2048){if((c-=2)<0)break;t.push(v>>6|192,v&63|128)}else if(v<65536){if((c-=3)<0)break;t.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((c-=4)<0)break;t.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return t}function Sn(S){let c=[];for(let v=0;v<S.length;++v)c.push(S.charCodeAt(v)&255);return c}function bn(S,c){let v,A,x,t=[];for(let f=0;f<S.length&&!((c-=2)<0);++f)v=S.charCodeAt(f),A=v>>8,x=v%256,t.push(x),t.push(A);return t}function bi(S){return Ur.toByteArray(Cn(S))}function Qt(S,c,v,A){let x;for(x=0;x<A&&!(x+v>=c.length||x>=S.length);++x)c[x+v]=S[x];return x}function ye(S,c){return S instanceof c||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===c.name}function Gr(S){return S!==S}var wn=function(){let S="0123456789abcdef",c=new Array(256);for(let v=0;v<16;++v){let A=v*16;for(let x=0;x<16;++x)c[A+x]=S[v]+S[x]}return c}();function we(S){return typeof BigInt=="undefined"?Ln:S}function Ln(){throw new Error("BigInt not supported")}});var Li=Ie($r()),Ei=Ie(Qr()),xi=Ie(ei()),Ai=Ie(ti()),Mi=Ie(ri()),Bi=Ie(wi()),ki;(function(A){A.block="block",A.underline="underline",A.bar="bar"})(ki||(ki={}));var Ri;(function(v){v.none="none",v.sound="sound"})(Ri||(Ri={}));var Xe;(function(A){A.hidden="hidden",A.autoHiding="autoHiding",A.visible="visible"})(Xe||(Xe={}));window.chrome.webview.addEventListener("message",S=>{switch(console.log("got message",S),S.data.$type){case"create-terminal":xn(S.data.options,S.data.colors,S.data.keyBindings);break;case"write-output":he.write(Bi.Buffer.from(S.data.data,"base64"));break}});var he,Ze,Ti,Di;var Oi;var Re=document.getElementById("terminal-container");function Yr(S,c,v){return v.split(S).join(c)}function En(S){return S=Yr("&quot;",'"',S),S=Yr("&squo;","'",S),Yr("&bsol;","\\",S)}function xn(S,c,v){for(console.log("createTerminal entered");Re.children.length;)Re.removeChild(Re.children[0]);console.log("removed children"),An(S.scrollBarStyle),console.log("set scrollbar");let A={fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontWeightBold:Bn(S.fontWeight),cursorStyle:S.cursorStyle,cursorBlink:S.cursorBlink,bellStyle:S.bellStyle,scrollback:S.scrollBackLimit,allowTransparency:!0,theme:c,windowsMode:!0,wordSeparator:En(S.wordSeparator)};he=new Li.Terminal(A),he.onData(t=>{window.chrome.webview.postMessage({$type:"input-received",data:t})}),console.log("created term"),Ti=new xi.SearchAddon,he.loadAddon(Ti),Ze=new Ei.FitAddon,he.loadAddon(Ze),Di=new Ai.SerializeAddon,he.loadAddon(Di),Oi=new Mi.Unicode11Addon,he.loadAddon(Oi),he.unicode.activeVersion="11",console.log("done with addons"),he.open(Re),Ze.fit(),he.focus(),console.log("open, fit, focus one"),Mn(S.padding),console.log("set padding");let x;window.onresize=function(){clearTimeout(x),x=setTimeout(()=>Ze.fit(),500)},window.chrome.webview.postMessage({$type:"xterm-initialized",size:{columns:he.cols,rows:he.rows}}),console.log("sent size")}function An(S){switch(S){case Xe.hidden:return Re.style.setProperty("-ms-overflow-style","none");case Xe.autoHiding:return Re.style.setProperty("-ms-overflow-style","-ms-autohiding-scrollbar");case Xe.visible:return Re.style.setProperty("-ms-overflow-style","scrollbar")}}function Mn(S){let c=document.querySelector(".terminal");c.style.padding=S+"px",Ze.fit()}document.oncontextmenu=function(){return!1};function Bn(S){return parseInt(S.toString())>600?"900":"bold"}})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=bundle.js.map
